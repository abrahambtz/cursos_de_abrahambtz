/*! For license information please see my-courses-v3-app.5fd6cbf74beb8727ce95.js.LICENSE */
(window.webpackJsonp=window.webpackJsonp||[]).push([["my-courses-v3-app","video-asset"],{"./assets/udemy/images/program/empty-state.png":function(e,t,r){e.exports=r.p+"empty-state.44753d252d6617febae6ab6eb4403150.png"},"./assets/udemy/images/v5/icon-play.svg":function(e,t,r){e.exports=r.p+"icon-play.ac3f32ecb72a0c3f674fa5a3f3062a56.svg"},"./node_modules/clipboard/dist/clipboard.js":function(e,t,r){var o;o=function(){return function(e){var t={};function r(o){if(t[o])return t[o].exports;var s=t[o]={i:o,l:!1,exports:{}};return e[o].call(s.exports,s,s.exports,r),s.l=!0,s.exports}return r.m=e,r.c=t,r.i=function(e){return e},r.d=function(e,t,o){r.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:o})},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=3)}([function(e,t,r){var o,s,a;s=[e,r(7)],void 0===(a="function"==typeof(o=function(e,t){"use strict";var r,o=(r=t)&&r.__esModule?r:{default:r},s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=function(){function e(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,r,o){return r&&e(t.prototype,r),o&&e(t,o),t}}(),i=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.resolveOptions(t),this.initSelection()}return a(e,[{key:"resolveOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.action=e.action,this.container=e.container,this.emitter=e.emitter,this.target=e.target,this.text=e.text,this.trigger=e.trigger,this.selectedText=""}},{key:"initSelection",value:function(){this.text?this.selectFake():this.target&&this.selectTarget()}},{key:"selectFake",value:function(){var e=this,t="rtl"==document.documentElement.getAttribute("dir");this.removeFake(),this.fakeHandlerCallback=function(){return e.removeFake()},this.fakeHandler=this.container.addEventListener("click",this.fakeHandlerCallback)||!0,this.fakeElem=document.createElement("textarea"),this.fakeElem.style.fontSize="12pt",this.fakeElem.style.border="0",this.fakeElem.style.padding="0",this.fakeElem.style.margin="0",this.fakeElem.style.position="absolute",this.fakeElem.style[t?"right":"left"]="-9999px";var r=window.pageYOffset||document.documentElement.scrollTop;this.fakeElem.style.top=r+"px",this.fakeElem.setAttribute("readonly",""),this.fakeElem.value=this.text,this.container.appendChild(this.fakeElem),this.selectedText=(0,o.default)(this.fakeElem),this.copyText()}},{key:"removeFake",value:function(){this.fakeHandler&&(this.container.removeEventListener("click",this.fakeHandlerCallback),this.fakeHandler=null,this.fakeHandlerCallback=null),this.fakeElem&&(this.container.removeChild(this.fakeElem),this.fakeElem=null)}},{key:"selectTarget",value:function(){this.selectedText=(0,o.default)(this.target),this.copyText()}},{key:"copyText",value:function(){var e=void 0;try{e=document.execCommand(this.action)}catch(t){e=!1}this.handleResult(e)}},{key:"handleResult",value:function(e){this.emitter.emit(e?"success":"error",{action:this.action,text:this.selectedText,trigger:this.trigger,clearSelection:this.clearSelection.bind(this)})}},{key:"clearSelection",value:function(){this.trigger&&this.trigger.focus(),window.getSelection().removeAllRanges()}},{key:"destroy",value:function(){this.removeFake()}},{key:"action",set:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"copy";if(this._action=e,"copy"!==this._action&&"cut"!==this._action)throw new Error('Invalid "action" value, use either "copy" or "cut"')},get:function(){return this._action}},{key:"target",set:function(e){if(void 0!==e){if(!e||"object"!==(void 0===e?"undefined":s(e))||1!==e.nodeType)throw new Error('Invalid "target" value, use a valid Element');if("copy"===this.action&&e.hasAttribute("disabled"))throw new Error('Invalid "target" attribute. Please use "readonly" instead of "disabled" attribute');if("cut"===this.action&&(e.hasAttribute("readonly")||e.hasAttribute("disabled")))throw new Error('Invalid "target" attribute. You can\'t cut text from elements with "readonly" or "disabled" attributes');this._target=e}},get:function(){return this._target}}]),e}();e.exports=i})?o.apply(t,s):o)||(e.exports=a)},function(e,t,r){var o=r(6),s=r(5);e.exports=function(e,t,r){if(!e&&!t&&!r)throw new Error("Missing required arguments");if(!o.string(t))throw new TypeError("Second argument must be a String");if(!o.fn(r))throw new TypeError("Third argument must be a Function");if(o.node(e))return function(e,t,r){return e.addEventListener(t,r),{destroy:function(){e.removeEventListener(t,r)}}}(e,t,r);if(o.nodeList(e))return function(e,t,r){return Array.prototype.forEach.call(e,(function(e){e.addEventListener(t,r)})),{destroy:function(){Array.prototype.forEach.call(e,(function(e){e.removeEventListener(t,r)}))}}}(e,t,r);if(o.string(e))return function(e,t,r){return s(document.body,e,t,r)}(e,t,r);throw new TypeError("First argument must be a String, HTMLElement, HTMLCollection, or NodeList")}},function(e,t){function r(){}r.prototype={on:function(e,t,r){var o=this.e||(this.e={});return(o[e]||(o[e]=[])).push({fn:t,ctx:r}),this},once:function(e,t,r){var o=this;function s(){o.off(e,s),t.apply(r,arguments)}return s._=t,this.on(e,s,r)},emit:function(e){for(var t=[].slice.call(arguments,1),r=((this.e||(this.e={}))[e]||[]).slice(),o=0,s=r.length;o<s;o++)r[o].fn.apply(r[o].ctx,t);return this},off:function(e,t){var r=this.e||(this.e={}),o=r[e],s=[];if(o&&t)for(var a=0,i=o.length;a<i;a++)o[a].fn!==t&&o[a].fn._!==t&&s.push(o[a]);return s.length?r[e]=s:delete r[e],this}},e.exports=r},function(e,t,r){var o,s,a;s=[e,r(0),r(2),r(1)],void 0===(a="function"==typeof(o=function(e,t,r,o){"use strict";var s=n(t),a=n(r),i=n(o);function n(e){return e&&e.__esModule?e:{default:e}}var l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c=function(){function e(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,r,o){return r&&e(t.prototype,r),o&&e(t,o),t}}(),p=function(e){function t(e,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return o.resolveOptions(r),o.listenClick(e),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),c(t,[{key:"resolveOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.action="function"==typeof e.action?e.action:this.defaultAction,this.target="function"==typeof e.target?e.target:this.defaultTarget,this.text="function"==typeof e.text?e.text:this.defaultText,this.container="object"===l(e.container)?e.container:document.body}},{key:"listenClick",value:function(e){var t=this;this.listener=(0,i.default)(e,"click",(function(e){return t.onClick(e)}))}},{key:"onClick",value:function(e){var t=e.delegateTarget||e.currentTarget;this.clipboardAction&&(this.clipboardAction=null),this.clipboardAction=new s.default({action:this.action(t),target:this.target(t),text:this.text(t),container:this.container,trigger:t,emitter:this})}},{key:"defaultAction",value:function(e){return u("action",e)}},{key:"defaultTarget",value:function(e){var t=u("target",e);if(t)return document.querySelector(t)}},{key:"defaultText",value:function(e){return u("text",e)}},{key:"destroy",value:function(){this.listener.destroy(),this.clipboardAction&&(this.clipboardAction.destroy(),this.clipboardAction=null)}}],[{key:"isSupported",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["copy","cut"],t="string"==typeof e?[e]:e,r=!!document.queryCommandSupported;return t.forEach((function(e){r=r&&!!document.queryCommandSupported(e)})),r}}]),t}(a.default);function u(e,t){var r="data-clipboard-"+e;if(t.hasAttribute(r))return t.getAttribute(r)}e.exports=p})?o.apply(t,s):o)||(e.exports=a)},function(e,t){if("undefined"!=typeof Element&&!Element.prototype.matches){var r=Element.prototype;r.matches=r.matchesSelector||r.mozMatchesSelector||r.msMatchesSelector||r.oMatchesSelector||r.webkitMatchesSelector}e.exports=function(e,t){for(;e&&9!==e.nodeType;){if("function"==typeof e.matches&&e.matches(t))return e;e=e.parentNode}}},function(e,t,r){var o=r(4);function s(e,t,r,o,s){var i=a.apply(this,arguments);return e.addEventListener(r,i,s),{destroy:function(){e.removeEventListener(r,i,s)}}}function a(e,t,r,s){return function(r){r.delegateTarget=o(r.target,t),r.delegateTarget&&s.call(e,r)}}e.exports=function(e,t,r,o,a){return"function"==typeof e.addEventListener?s.apply(null,arguments):"function"==typeof r?s.bind(null,document).apply(null,arguments):("string"==typeof e&&(e=document.querySelectorAll(e)),Array.prototype.map.call(e,(function(e){return s(e,t,r,o,a)})))}},function(e,t){t.node=function(e){return void 0!==e&&e instanceof HTMLElement&&1===e.nodeType},t.nodeList=function(e){var r=Object.prototype.toString.call(e);return void 0!==e&&("[object NodeList]"===r||"[object HTMLCollection]"===r)&&"length"in e&&(0===e.length||t.node(e[0]))},t.string=function(e){return"string"==typeof e||e instanceof String},t.fn=function(e){return"[object Function]"===Object.prototype.toString.call(e)}},function(e,t){e.exports=function(e){var t;if("SELECT"===e.nodeName)e.focus(),t=e.value;else if("INPUT"===e.nodeName||"TEXTAREA"===e.nodeName){var r=e.hasAttribute("readonly");r||e.setAttribute("readonly",""),e.select(),e.setSelectionRange(0,e.value.length),r||e.removeAttribute("readonly"),t=e.value}else{e.hasAttribute("contenteditable")&&e.focus();var o=window.getSelection(),s=document.createRange();s.selectNodeContents(e),o.removeAllRanges(),o.addRange(s),t=o.toString()}return t}}])},e.exports=o()},"./node_modules/deep-equal/index.js":function(e,t,r){var o=Array.prototype.slice,s=r("./node_modules/deep-equal/lib/keys.js"),a=r("./node_modules/deep-equal/lib/is_arguments.js"),i=e.exports=function(e,t,r){return r||(r={}),e===t||(e instanceof Date&&t instanceof Date?e.getTime()===t.getTime():!e||!t||"object"!=typeof e&&"object"!=typeof t?r.strict?e===t:e==t:function(e,t,r){var c,p;if(n(e)||n(t))return!1;if(e.prototype!==t.prototype)return!1;if(a(e))return!!a(t)&&(e=o.call(e),t=o.call(t),i(e,t,r));if(l(e)){if(!l(t))return!1;if(e.length!==t.length)return!1;for(c=0;c<e.length;c++)if(e[c]!==t[c])return!1;return!0}try{var u=s(e),d=s(t)}catch(e){return!1}if(u.length!=d.length)return!1;for(u.sort(),d.sort(),c=u.length-1;c>=0;c--)if(u[c]!=d[c])return!1;for(c=u.length-1;c>=0;c--)if(p=u[c],!i(e[p],t[p],r))return!1;return typeof e==typeof t}(e,t,r))};function n(e){return null==e}function l(e){return!(!e||"object"!=typeof e||"number"!=typeof e.length)&&("function"==typeof e.copy&&"function"==typeof e.slice&&!(e.length>0&&"number"!=typeof e[0]))}},"./node_modules/deep-equal/lib/is_arguments.js":function(e,t){var r="[object Arguments]"==function(){return Object.prototype.toString.call(arguments)}();function o(e){return"[object Arguments]"==Object.prototype.toString.call(e)}function s(e){return e&&"object"==typeof e&&"number"==typeof e.length&&Object.prototype.hasOwnProperty.call(e,"callee")&&!Object.prototype.propertyIsEnumerable.call(e,"callee")||!1}(t=e.exports=r?o:s).supported=o,t.unsupported=s},"./node_modules/deep-equal/lib/keys.js":function(e,t){function r(e){var t=[];for(var r in e)t.push(r);return t}(e.exports="function"==typeof Object.keys?Object.keys:r).shim=r},"./node_modules/exenv/index.js":function(e,t,r){var o;!function(){"use strict";var s=!("undefined"==typeof window||!window.document||!window.document.createElement),a={canUseDOM:s,canUseWorkers:"undefined"!=typeof Worker,canUseEventListeners:s&&!(!window.addEventListener&&!window.attachEvent),canUseViewport:s&&!!window.screen};void 0===(o=function(){return a}.call(t,r,t,e))||(e.exports=o)}()},"./node_modules/for-each/index.js":function(e,t,r){var o=r("./node_modules/is-function/index.js");e.exports=function(e,t,r){if(!o(t))throw new TypeError("iterator must be a function");arguments.length<3&&(r=this);"[object Array]"===s.call(e)?i(e,t,r):"string"==typeof e?n(e,t,r):l(e,t,r)};var s=Object.prototype.toString,a=Object.prototype.hasOwnProperty;function i(e,t,r){for(var o=0,s=e.length;o<s;o++)a.call(e,o)&&t.call(r,e[o],o,e)}function n(e,t,r){for(var o=0,s=e.length;o<s;o++)t.call(r,e.charAt(o),o,e)}function l(e,t,r){for(var o in e)a.call(e,o)&&t.call(r,e[o],o,e)}},"./node_modules/global/document.js":function(e,t,r){(function(t){var o,s=void 0!==t?t:"undefined"!=typeof window?window:{},a=r(38);"undefined"!=typeof document?o=document:(o=s["__GLOBAL_DOCUMENT_CACHE@4"])||(o=s["__GLOBAL_DOCUMENT_CACHE@4"]=a),e.exports=o}).call(this,r("./node_modules/webpack/buildin/global.js"))},"./node_modules/global/window.js":function(e,t,r){(function(t){var r;r="undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:{},e.exports=r}).call(this,r("./node_modules/webpack/buildin/global.js"))},"./node_modules/hls.js/dist/hls.js":function(e,t,r){var o;"undefined"!=typeof window&&(o=function(){return function(e){var t={};function r(o){if(t[o])return t[o].exports;var s=t[o]={i:o,l:!1,exports:{}};return e[o].call(s.exports,s,s.exports,r),s.l=!0,s.exports}return r.m=e,r.c=t,r.d=function(e,t,o){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(r.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)r.d(o,s,function(t){return e[t]}.bind(null,s));return o},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/dist/",r(r.s="./src/hls.js")}({"./node_modules/eventemitter3/index.js":function(e,t,r){"use strict";var o=Object.prototype.hasOwnProperty,s="~";function a(){}function i(e,t,r){this.fn=e,this.context=t,this.once=r||!1}function n(e,t,r,o,a){if("function"!=typeof r)throw new TypeError("The listener must be a function");var n=new i(r,o||e,a),l=s?s+t:t;return e._events[l]?e._events[l].fn?e._events[l]=[e._events[l],n]:e._events[l].push(n):(e._events[l]=n,e._eventsCount++),e}function l(e,t){0==--e._eventsCount?e._events=new a:delete e._events[t]}function c(){this._events=new a,this._eventsCount=0}Object.create&&(a.prototype=Object.create(null),(new a).__proto__||(s=!1)),c.prototype.eventNames=function(){var e,t,r=[];if(0===this._eventsCount)return r;for(t in e=this._events)o.call(e,t)&&r.push(s?t.slice(1):t);return Object.getOwnPropertySymbols?r.concat(Object.getOwnPropertySymbols(e)):r},c.prototype.listeners=function(e){var t=s?s+e:e,r=this._events[t];if(!r)return[];if(r.fn)return[r.fn];for(var o=0,a=r.length,i=new Array(a);o<a;o++)i[o]=r[o].fn;return i},c.prototype.listenerCount=function(e){var t=s?s+e:e,r=this._events[t];return r?r.fn?1:r.length:0},c.prototype.emit=function(e,t,r,o,a,i){var n=s?s+e:e;if(!this._events[n])return!1;var l,c,p=this._events[n],u=arguments.length;if(p.fn){switch(p.once&&this.removeListener(e,p.fn,void 0,!0),u){case 1:return p.fn.call(p.context),!0;case 2:return p.fn.call(p.context,t),!0;case 3:return p.fn.call(p.context,t,r),!0;case 4:return p.fn.call(p.context,t,r,o),!0;case 5:return p.fn.call(p.context,t,r,o,a),!0;case 6:return p.fn.call(p.context,t,r,o,a,i),!0}for(c=1,l=new Array(u-1);c<u;c++)l[c-1]=arguments[c];p.fn.apply(p.context,l)}else{var d,h=p.length;for(c=0;c<h;c++)switch(p[c].once&&this.removeListener(e,p[c].fn,void 0,!0),u){case 1:p[c].fn.call(p[c].context);break;case 2:p[c].fn.call(p[c].context,t);break;case 3:p[c].fn.call(p[c].context,t,r);break;case 4:p[c].fn.call(p[c].context,t,r,o);break;default:if(!l)for(d=1,l=new Array(u-1);d<u;d++)l[d-1]=arguments[d];p[c].fn.apply(p[c].context,l)}}return!0},c.prototype.on=function(e,t,r){return n(this,e,t,r,!1)},c.prototype.once=function(e,t,r){return n(this,e,t,r,!0)},c.prototype.removeListener=function(e,t,r,o){var a=s?s+e:e;if(!this._events[a])return this;if(!t)return l(this,a),this;var i=this._events[a];if(i.fn)i.fn!==t||o&&!i.once||r&&i.context!==r||l(this,a);else{for(var n=0,c=[],p=i.length;n<p;n++)(i[n].fn!==t||o&&!i[n].once||r&&i[n].context!==r)&&c.push(i[n]);c.length?this._events[a]=1===c.length?c[0]:c:l(this,a)}return this},c.prototype.removeAllListeners=function(e){var t;return e?(t=s?s+e:e,this._events[t]&&l(this,t)):(this._events=new a,this._eventsCount=0),this},c.prototype.off=c.prototype.removeListener,c.prototype.addListener=c.prototype.on,c.prefixed=s,c.EventEmitter=c,e.exports=c},"./node_modules/node-libs-browser/node_modules/events/events.js":function(e,t){function r(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function o(e){return"function"==typeof e}function s(e){return"object"==typeof e&&null!==e}function a(e){return void 0===e}e.exports=r,r.EventEmitter=r,r.prototype._events=void 0,r.prototype._maxListeners=void 0,r.defaultMaxListeners=10,r.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},r.prototype.emit=function(e){var t,r,i,n,l,c;if(this._events||(this._events={}),"error"===e&&(!this._events.error||s(this._events.error)&&!this._events.error.length)){if((t=arguments[1])instanceof Error)throw t;var p=new Error('Uncaught, unspecified "error" event. ('+t+")");throw p.context=t,p}if(a(r=this._events[e]))return!1;if(o(r))switch(arguments.length){case 1:r.call(this);break;case 2:r.call(this,arguments[1]);break;case 3:r.call(this,arguments[1],arguments[2]);break;default:n=Array.prototype.slice.call(arguments,1),r.apply(this,n)}else if(s(r))for(n=Array.prototype.slice.call(arguments,1),i=(c=r.slice()).length,l=0;l<i;l++)c[l].apply(this,n);return!0},r.prototype.addListener=function(e,t){var i;if(!o(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,o(t.listener)?t.listener:t),this._events[e]?s(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,s(this._events[e])&&!this._events[e].warned&&(i=a(this._maxListeners)?r.defaultMaxListeners:this._maxListeners)&&i>0&&this._events[e].length>i&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace()),this},r.prototype.on=r.prototype.addListener,r.prototype.once=function(e,t){if(!o(t))throw TypeError("listener must be a function");var r=!1;function s(){this.removeListener(e,s),r||(r=!0,t.apply(this,arguments))}return s.listener=t,this.on(e,s),this},r.prototype.removeListener=function(e,t){var r,a,i,n;if(!o(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(i=(r=this._events[e]).length,a=-1,r===t||o(r.listener)&&r.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(s(r)){for(n=i;n-- >0;)if(r[n]===t||r[n].listener&&r[n].listener===t){a=n;break}if(a<0)return this;1===r.length?(r.length=0,delete this._events[e]):r.splice(a,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},r.prototype.removeAllListeners=function(e){var t,r;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(o(r=this._events[e]))this.removeListener(e,r);else if(r)for(;r.length;)this.removeListener(e,r[r.length-1]);return delete this._events[e],this},r.prototype.listeners=function(e){return this._events&&this._events[e]?o(this._events[e])?[this._events[e]]:this._events[e].slice():[]},r.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(o(t))return 1;if(t)return t.length}return 0},r.listenerCount=function(e,t){return e.listenerCount(t)}},"./node_modules/url-toolkit/src/url-toolkit.js":function(e,t,r){var o,s,a,i,n;o=/^((?:[a-zA-Z0-9+\-.]+:)?)(\/\/[^\/?#]*)?((?:[^\/\?#]*\/)*.*?)??(;.*?)?(\?.*?)?(#.*?)?$/,s=/^([^\/?#]*)(.*)$/,a=/(?:\/|^)\.(?=\/)/g,i=/(?:\/|^)\.\.\/(?!\.\.\/).*?(?=\/)/g,n={buildAbsoluteURL:function(e,t,r){if(r=r||{},e=e.trim(),!(t=t.trim())){if(!r.alwaysNormalize)return e;var o=n.parseURL(e);if(!o)throw new Error("Error trying to parse base URL.");return o.path=n.normalizePath(o.path),n.buildURLFromParts(o)}var a=n.parseURL(t);if(!a)throw new Error("Error trying to parse relative URL.");if(a.scheme)return r.alwaysNormalize?(a.path=n.normalizePath(a.path),n.buildURLFromParts(a)):t;var i=n.parseURL(e);if(!i)throw new Error("Error trying to parse base URL.");if(!i.netLoc&&i.path&&"/"!==i.path[0]){var l=s.exec(i.path);i.netLoc=l[1],i.path=l[2]}i.netLoc&&!i.path&&(i.path="/");var c={scheme:i.scheme,netLoc:a.netLoc,path:null,params:a.params,query:a.query,fragment:a.fragment};if(!a.netLoc&&(c.netLoc=i.netLoc,"/"!==a.path[0]))if(a.path){var p=i.path,u=p.substring(0,p.lastIndexOf("/")+1)+a.path;c.path=n.normalizePath(u)}else c.path=i.path,a.params||(c.params=i.params,a.query||(c.query=i.query));return null===c.path&&(c.path=r.alwaysNormalize?n.normalizePath(a.path):a.path),n.buildURLFromParts(c)},parseURL:function(e){var t=o.exec(e);return t?{scheme:t[1]||"",netLoc:t[2]||"",path:t[3]||"",params:t[4]||"",query:t[5]||"",fragment:t[6]||""}:null},normalizePath:function(e){for(e=e.split("").reverse().join("").replace(a,"");e.length!==(e=e.replace(i,"")).length;);return e.split("").reverse().join("")},buildURLFromParts:function(e){return e.scheme+e.netLoc+e.path+e.params+e.query+e.fragment}},e.exports=n},"./node_modules/webworkify-webpack/index.js":function(e,t,r){function o(e){var t={};function r(o){if(t[o])return t[o].exports;var s=t[o]={i:o,l:!1,exports:{}};return e[o].call(s.exports,s,s.exports,r),s.l=!0,s.exports}r.m=e,r.c=t,r.i=function(e){return e},r.d=function(e,t,o){r.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:o})},r.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/",r.oe=function(e){throw console.error(e),e};var o=r(r.s=ENTRY_MODULE);return o.default||o}var s="\\((/\\*.*?\\*/)?s?.*?([\\.|\\-|\\+|\\w|/|@]+).*?\\)";function a(e){return(e+"").replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}function i(e,t,o){var i={};i[o]=[];var n=t.toString(),l=n.match(/^function\s?\(\w+,\s*\w+,\s*(\w+)\)/);if(!l)return i;for(var c,p=l[1],u=new RegExp("(\\\\n|\\W)"+a(p)+s,"g");c=u.exec(n);)"dll-reference"!==c[3]&&i[o].push(c[3]);for(u=new RegExp("\\("+a(p)+'\\("(dll-reference\\s([\\.|\\-|\\+|\\w|/|@]+))"\\)\\)'+s,"g");c=u.exec(n);)e[c[2]]||(i[o].push(c[1]),e[c[2]]=r(c[1]).m),i[c[2]]=i[c[2]]||[],i[c[2]].push(c[4]);for(var d,h=Object.keys(i),m=0;m<h.length;m++)for(var b=0;b<i[h[m]].length;b++)d=i[h[m]][b],isNaN(1*d)||(i[h[m]][b]=1*i[h[m]][b]);return i}function n(e){return Object.keys(e).reduce((function(t,r){return t||e[r].length>0}),!1)}e.exports=function(e,t){t=t||{};var s={main:r.m},a=t.all?{main:Object.keys(s.main)}:function(e,t){for(var r={main:[t]},o={main:[]},s={main:{}};n(r);)for(var a=Object.keys(r),l=0;l<a.length;l++){var c=a[l],p=r[c].pop();if(s[c]=s[c]||{},!s[c][p]&&e[c][p]){s[c][p]=!0,o[c]=o[c]||[],o[c].push(p);for(var u=i(e,e[c][p],c),d=Object.keys(u),h=0;h<d.length;h++)r[d[h]]=r[d[h]]||[],r[d[h]]=r[d[h]].concat(u[d[h]])}}return o}(s,e),l="";Object.keys(a).filter((function(e){return"main"!==e})).forEach((function(e){for(var t=0;a[e][t];)t++;a[e].push(t),s[e][t]="(function(module, exports, __webpack_require__) { module.exports = __webpack_require__; })",l=l+"var "+e+" = ("+o.toString().replace("ENTRY_MODULE",JSON.stringify(t))+")({"+a[e].map((function(t){return JSON.stringify(t)+": "+s[e][t].toString()})).join(",")+"});\n"})),l=l+"new (("+o.toString().replace("ENTRY_MODULE",JSON.stringify(e))+")({"+a.main.map((function(e){return JSON.stringify(e)+": "+s.main[e].toString()})).join(",")+"}))(self);";var c=new window.Blob([l],{type:"text/javascript"});if(t.bare)return c;var p=(window.URL||window.webkitURL||window.mozURL||window.msURL).createObjectURL(c),u=new window.Worker(p);return u.objectURL=p,u}},"./src/config.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=r("./src/controller/abr-controller.js"),s=r("./src/controller/buffer-controller.js"),a=r("./src/controller/cap-level-controller.js"),i=r("./src/controller/fps-controller.js"),n=r("./src/utils/xhr-loader.js"),l=r("./src/controller/audio-track-controller.js"),c=r("./src/controller/audio-stream-controller.js"),p=r("./src/utils/cues.js"),u=r("./src/controller/timeline-controller.js"),d=r("./src/controller/subtitle-track-controller.js"),h=r("./src/controller/subtitle-stream-controller.js"),m=r("./src/controller/eme-controller.js"),b=r("./src/utils/mediakeys-helper.js");t.hlsDefaultConfig={autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,initialLiveManifestSize:1,maxBufferLength:30,maxBufferSize:6e7,maxBufferHole:.5,lowBufferWatchdogPeriod:.5,highBufferWatchdogPeriod:3,nudgeOffset:.1,nudgeMaxRetry:3,maxFragLookUpTolerance:.25,liveSyncDurationCount:3,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,liveDurationInfinity:!1,liveBackBufferLength:1/0,maxMaxBufferLength:600,enableWorker:!0,enableSoftwareAES:!0,manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,startLevel:void 0,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,loader:n.default,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,licenseXhrSetup:void 0,abrController:o.default,bufferController:s.default,capLevelController:a.default,fpsController:i.default,stretchShortVideoTrack:!1,maxAudioFramesDrift:1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0,emeEnabled:!1,widevineLicenseUrl:void 0,requestMediaKeySystemAccessFunc:b.requestMediaKeySystemAccess},t.hlsDefaultConfig.subtitleStreamController=h.SubtitleStreamController,t.hlsDefaultConfig.subtitleTrackController=d.default,t.hlsDefaultConfig.timelineController=u.default,t.hlsDefaultConfig.cueHandler=p,t.hlsDefaultConfig.enableCEA708Captions=!0,t.hlsDefaultConfig.enableWebVTT=!0,t.hlsDefaultConfig.captionsTextTrack1Label="English",t.hlsDefaultConfig.captionsTextTrack1LanguageCode="en",t.hlsDefaultConfig.captionsTextTrack2Label="Spanish",t.hlsDefaultConfig.captionsTextTrack2LanguageCode="es",t.hlsDefaultConfig.audioStreamController=c.default,t.hlsDefaultConfig.audioTrackController=l.default,t.hlsDefaultConfig.emeController=m.default},"./src/controller/abr-controller.js":function(e,t,r){"use strict";(function(e){var o,s=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var a=r("./src/events.js"),i=r("./src/event-handler.js"),n=r("./src/utils/buffer-helper.js"),l=r("./src/errors.js"),c=r("./src/utils/logger.js"),p=r("./src/utils/ewma-bandwidth-estimator.js"),u=window.performance,d=function(t){function r(e){var r=t.call(this,e,a.default.FRAG_LOADING,a.default.FRAG_LOADED,a.default.FRAG_BUFFERED,a.default.ERROR)||this;return r.lastLoadedFragLevel=0,r._nextAutoLevel=-1,r.hls=e,r.timer=null,r._bwEstimator=null,r.onCheck=r._abandonRulesCheck.bind(r),r}return s(r,t),r.prototype.destroy=function(){this.clearTimer(),i.default.prototype.destroy.call(this)},r.prototype.onFragLoading=function(e){var t=e.frag;if("main"===t.type&&(this.timer||(this.fragCurrent=t,this.timer=setInterval(this.onCheck,100)),!this._bwEstimator)){var r=this.hls,o=r.config,s=t.level,a=void 0,i=void 0;r.levels[s].details.live?(a=o.abrEwmaFastLive,i=o.abrEwmaSlowLive):(a=o.abrEwmaFastVoD,i=o.abrEwmaSlowVoD),this._bwEstimator=new p.default(r,i,a,o.abrEwmaDefaultEstimate)}},r.prototype._abandonRulesCheck=function(){var e=this.hls,t=e.media,r=this.fragCurrent;if(r){var o=r.loader,s=e.minAutoLevel;if(!o||o.stats&&o.stats.aborted)return c.logger.warn("frag loader destroy or aborted, disarm abandonRules"),this.clearTimer(),void(this._nextAutoLevel=-1);var i=o.stats;if(t&&i&&(!t.paused&&0!==t.playbackRate||!t.readyState)&&r.autoLevel&&r.level){var l=u.now()-i.trequest,p=Math.abs(t.playbackRate);if(l>500*r.duration/p){var d=e.levels,h=Math.max(1,i.bw?i.bw/8:1e3*i.loaded/l),m=d[r.level],b=m.realBitrate?Math.max(m.realBitrate,m.bitrate):m.bitrate,f=i.total?i.total:Math.max(i.loaded,Math.round(r.duration*b/8)),y=t.currentTime,g=(f-i.loaded)/h,v=(n.BufferHelper.bufferInfo(t,y,e.config.maxBufferHole).end-y)/p;if(v<2*r.duration/p&&g>v){var w=void 0,k=void 0;for(k=r.level-1;k>s;k--){var _=d[k].realBitrate?Math.max(d[k].realBitrate,d[k].bitrate):d[k].bitrate;if((w=r.duration*_/(6.4*h))<v)break}w<g&&(c.logger.warn("loading too slow, abort fragment loading and switch to level "+k+":fragLoadedDelay["+k+"]<fragLoadedDelay["+(r.level-1)+"];bufferStarvationDelay:"+w.toFixed(1)+"<"+g.toFixed(1)+":"+v.toFixed(1)),e.nextLoadLevel=k,this._bwEstimator.sample(l,i.loaded),o.abort(),this.clearTimer(),e.trigger(a.default.FRAG_LOAD_EMERGENCY_ABORTED,{frag:r,stats:i}))}}}}},r.prototype.onFragLoaded=function(t){var r=t.frag;if("main"===r.type&&e.isFinite(r.sn)){if(this.clearTimer(),this.lastLoadedFragLevel=r.level,this._nextAutoLevel=-1,this.hls.config.abrMaxWithRealBitrate){var o=this.hls.levels[r.level],s=(o.loaded?o.loaded.bytes:0)+t.stats.loaded,a=(o.loaded?o.loaded.duration:0)+t.frag.duration;o.loaded={bytes:s,duration:a},o.realBitrate=Math.round(8*s/a)}if(t.frag.bitrateTest){var i=t.stats;i.tparsed=i.tbuffered=i.tload,this.onFragBuffered(t)}}},r.prototype.onFragBuffered=function(t){var r=t.stats,o=t.frag;if(!0!==r.aborted&&"main"===o.type&&e.isFinite(o.sn)&&(!o.bitrateTest||r.tload===r.tbuffered)){var s=r.tparsed-r.trequest;c.logger.log("latency/loading/parsing/append/kbps:"+Math.round(r.tfirst-r.trequest)+"/"+Math.round(r.tload-r.tfirst)+"/"+Math.round(r.tparsed-r.tload)+"/"+Math.round(r.tbuffered-r.tparsed)+"/"+Math.round(8*r.loaded/(r.tbuffered-r.trequest))),this._bwEstimator.sample(s,r.loaded),r.bwEstimate=this._bwEstimator.getEstimate(),o.bitrateTest?this.bitrateTestDelay=s/1e3:this.bitrateTestDelay=0}},r.prototype.onError=function(e){switch(e.details){case l.ErrorDetails.FRAG_LOAD_ERROR:case l.ErrorDetails.FRAG_LOAD_TIMEOUT:this.clearTimer()}},r.prototype.clearTimer=function(){clearInterval(this.timer),this.timer=null},Object.defineProperty(r.prototype,"nextAutoLevel",{get:function(){var e=this._nextAutoLevel,t=this._bwEstimator;if(!(-1===e||t&&t.canEstimate()))return e;var r=this._nextABRAutoLevel;return-1!==e&&(r=Math.min(e,r)),r},set:function(e){this._nextAutoLevel=e},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"_nextABRAutoLevel",{get:function(){var e=this.hls,t=e.maxAutoLevel,r=e.levels,o=e.config,s=e.minAutoLevel,a=e.media,i=this.lastLoadedFragLevel,l=this.fragCurrent?this.fragCurrent.duration:0,p=a?a.currentTime:0,u=a&&0!==a.playbackRate?Math.abs(a.playbackRate):1,d=this._bwEstimator?this._bwEstimator.getEstimate():o.abrEwmaDefaultEstimate,h=(n.BufferHelper.bufferInfo(a,p,o.maxBufferHole).end-p)/u,m=this._findBestLevel(i,l,d,s,t,h,o.abrBandWidthFactor,o.abrBandWidthUpFactor,r);if(m>=0)return m;c.logger.trace("rebuffering expected to happen, lets try to find a quality level minimizing the rebuffering");var b=l?Math.min(l,o.maxStarvationDelay):o.maxStarvationDelay,f=o.abrBandWidthFactor,y=o.abrBandWidthUpFactor;if(0===h){var g=this.bitrateTestDelay;g&&(b=(l?Math.min(l,o.maxLoadingDelay):o.maxLoadingDelay)-g,c.logger.trace("bitrate test took "+Math.round(1e3*g)+"ms, set first fragment max fetchDuration to "+Math.round(1e3*b)+" ms"),f=y=1)}return m=this._findBestLevel(i,l,d,s,t,h+b,f,y,r),Math.max(m,0)},enumerable:!0,configurable:!0}),r.prototype._findBestLevel=function(e,t,r,o,s,a,i,n,l){for(var p=s;p>=o;p--){var u=l[p];if(u){var d=u.details,h=d?d.totalduration/d.fragments.length:t,m=!!d&&d.live,b=void 0;b=p<=e?i*r:n*r;var f=l[p].realBitrate?Math.max(l[p].realBitrate,l[p].bitrate):l[p].bitrate,y=f*h/b;if(c.logger.trace("level/adjustedbw/bitrate/avgDuration/maxFetchDuration/fetchDuration: "+p+"/"+Math.round(b)+"/"+f+"/"+h+"/"+a+"/"+y),b>f&&(!y||m&&!this.bitrateTestDelay||y<a))return p}}return-1},r}(i.default);t.default=d}).call(this,r("./src/polyfills/number.js").Number)},"./src/controller/audio-stream-controller.js":function(e,t,r){"use strict";(function(e){var o,s=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var a=r("./src/utils/binary-search.js"),i=r("./src/utils/buffer-helper.js"),n=r("./src/demux/demuxer.js"),l=r("./src/events.js"),c=r("./src/controller/level-helper.js"),p=r("./src/utils/time-ranges.js"),u=r("./src/errors.js"),d=r("./src/utils/logger.js"),h=r("./src/utils/discontinuities.js"),m=r("./src/controller/fragment-tracker.js"),b=r("./src/loader/fragment.js"),f=r("./src/controller/base-stream-controller.js"),y=window.performance,g=function(t){function r(e,r){var o=t.call(this,e,l.default.MEDIA_ATTACHED,l.default.MEDIA_DETACHING,l.default.AUDIO_TRACKS_UPDATED,l.default.AUDIO_TRACK_SWITCHING,l.default.AUDIO_TRACK_LOADED,l.default.KEY_LOADED,l.default.FRAG_LOADED,l.default.FRAG_PARSING_INIT_SEGMENT,l.default.FRAG_PARSING_DATA,l.default.FRAG_PARSED,l.default.ERROR,l.default.BUFFER_RESET,l.default.BUFFER_CREATED,l.default.BUFFER_APPENDED,l.default.BUFFER_FLUSHED,l.default.INIT_PTS_FOUND)||this;return o.fragmentTracker=r,o.config=e.config,o.audioCodecSwap=!1,o._state=f.State.STOPPED,o.initPTS=[],o.waitingFragment=null,o.videoTrackCC=null,o}return s(r,t),r.prototype.onInitPtsFound=function(e){var t=e.id,r=e.frag.cc,o=e.initPTS;"main"===t&&(this.initPTS[r]=o,this.videoTrackCC=r,d.logger.log("InitPTS for cc: "+r+" found from video track: "+o),this.state===f.State.WAITING_INIT_PTS&&this.tick())},r.prototype.startLoad=function(e){if(this.tracks){var t=this.lastCurrentTime;this.stopLoad(),this.setInterval(100),this.fragLoadError=0,t>0&&-1===e?(d.logger.log("audio:override startPosition with lastCurrentTime @"+t.toFixed(3)),this.state=f.State.IDLE):(this.lastCurrentTime=this.startPosition?this.startPosition:e,this.state=f.State.STARTING),this.nextLoadPosition=this.startPosition=this.lastCurrentTime,this.tick()}else this.startPosition=e,this.state=f.State.STOPPED},Object.defineProperty(r.prototype,"state",{get:function(){return this._state},set:function(e){if(this.state!==e){var t=this.state;this._state=e,d.logger.log("audio stream:"+t+"->"+e)}},enumerable:!0,configurable:!0}),r.prototype.doTick=function(){var t,r,o,s=this.hls,n=s.config;switch(this.state){case f.State.ERROR:case f.State.PAUSED:case f.State.BUFFER_FLUSHING:break;case f.State.STARTING:this.state=f.State.WAITING_TRACK,this.loadedmetadata=!1;break;case f.State.IDLE:var c=this.tracks;if(!c)break;if(!this.media&&(this.startFragRequested||!n.startFragPrefetch))break;if(this.loadedmetadata)t=this.media.currentTime;else if(void 0===(t=this.nextLoadPosition))break;var p=this.mediaBuffer?this.mediaBuffer:this.media,u=this.videoBuffer?this.videoBuffer:this.media,b=i.BufferHelper.bufferInfo(p,t,n.maxBufferHole),g=i.BufferHelper.bufferInfo(u,t,n.maxBufferHole),v=b.len,w=b.end,k=this.fragPrevious,_=Math.min(n.maxBufferLength,n.maxMaxBufferLength),E=Math.max(_,g.len),j=this.audioSwitch,D=this.trackId;if((v<E||j)&&D<c.length){if(void 0===(o=c[D].details)){this.state=f.State.WAITING_TRACK;break}if(!j&&this._streamEnded(b,o))return this.hls.trigger(l.default.BUFFER_EOS,{type:"audio"}),void(this.state=f.State.ENDED);var S=o.fragments,C=S.length,O=S[0].start,P=S[C-1].start+S[C-1].duration,T=void 0;if(j)if(o.live&&!o.PTSKnown)d.logger.log("switching audiotrack, live stream, unknown PTS,load first fragment"),w=0;else if(w=t,o.PTSKnown&&t<O){if(!(b.end>O||b.nextStart))return;d.logger.log("alt audio track ahead of main track, seek to start of alt audio track"),this.media.currentTime=O+.05}if(o.initSegment&&!o.initSegment.data)T=o.initSegment;else if(w<=O){if(T=S[0],null!==this.videoTrackCC&&T.cc!==this.videoTrackCC&&(T=h.findFragWithCC(S,this.videoTrackCC)),o.live&&T.loadIdx&&T.loadIdx===this.fragLoadIdx){var x=b.nextStart?b.nextStart:O;return d.logger.log("no alt audio available @currentTime:"+this.media.currentTime+", seeking @"+(x+.05)),void(this.media.currentTime=x+.05)}}else{var R=void 0,H=n.maxFragLookUpTolerance,A=k?S[k.sn-S[0].sn+1]:void 0,I=function(e){var t=Math.min(H,e.duration);return e.start+e.duration-t<=w?1:e.start-t>w&&e.start?-1:0};w<P?(w>P-H&&(H=0),R=A&&!I(A)?A:a.default.search(S,I)):R=S[C-1],R&&(T=R,O=R.start,k&&T.level===k.level&&T.sn===k.sn&&(T.sn<o.endSN?(T=S[T.sn+1-o.startSN],d.logger.log("SN just loaded, load next one: "+T.sn)):T=null))}T&&(T.encrypted?(d.logger.log("Loading key for "+T.sn+" of ["+o.startSN+" ,"+o.endSN+"],track "+D),this.state=f.State.KEY_LOADING,s.trigger(l.default.KEY_LOADING,{frag:T})):(d.logger.log("Loading "+T.sn+", cc: "+T.cc+" of ["+o.startSN+" ,"+o.endSN+"],track "+D+", currentTime:"+t+",bufferEnd:"+w.toFixed(3)),this.fragCurrent=T,(j||this.fragmentTracker.getState(T)===m.FragmentState.NOT_LOADED)&&(this.startFragRequested=!0,e.isFinite(T.sn)&&(this.nextLoadPosition=T.start+T.duration),s.trigger(l.default.FRAG_LOADING,{frag:T}),this.state=f.State.FRAG_LOADING)))}break;case f.State.WAITING_TRACK:(r=this.tracks[this.trackId])&&r.details&&(this.state=f.State.IDLE);break;case f.State.FRAG_LOADING_WAITING_RETRY:var L=y.now(),M=this.retryDate,N=(p=this.media)&&p.seeking;(!M||L>=M||N)&&(d.logger.log("audioStreamController: retryDate reached, switch back to IDLE state"),this.state=f.State.IDLE);break;case f.State.WAITING_INIT_PTS:var F=this.videoTrackCC;if(void 0===this.initPTS[F])break;var U=this.waitingFragment;if(U){var z=U.frag.cc;F!==z?(r=this.tracks[this.trackId]).details&&r.details.live&&(d.logger.warn("Waiting fragment CC ("+z+") does not match video track CC ("+F+")"),this.waitingFragment=null,this.state=f.State.IDLE):(this.state=f.State.FRAG_LOADING,this.onFragLoaded(this.waitingFragment),this.waitingFragment=null)}else this.state=f.State.IDLE;break;case f.State.STOPPED:case f.State.FRAG_LOADING:case f.State.PARSING:case f.State.PARSED:case f.State.ENDED:}},r.prototype.onMediaAttached=function(e){var t=this.media=this.mediaBuffer=e.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvended=this.onMediaEnded.bind(this),t.addEventListener("seeking",this.onvseeking),t.addEventListener("ended",this.onvended);var r=this.config;this.tracks&&r.autoStartLoad&&this.startLoad(r.startPosition)},r.prototype.onMediaDetaching=function(){var e=this.media;e&&e.ended&&(d.logger.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0),e&&(e.removeEventListener("seeking",this.onvseeking),e.removeEventListener("ended",this.onvended),this.onvseeking=this.onvseeked=this.onvended=null),this.media=this.mediaBuffer=this.videoBuffer=null,this.loadedmetadata=!1,this.stopLoad()},r.prototype.onAudioTracksUpdated=function(e){d.logger.log("audio tracks updated"),this.tracks=e.audioTracks},r.prototype.onAudioTrackSwitching=function(e){var t=!!e.url;this.trackId=e.id,this.fragCurrent=null,this.state=f.State.PAUSED,this.waitingFragment=null,t?this.setInterval(100):this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),t&&(this.audioSwitch=!0,this.state=f.State.IDLE),this.tick()},r.prototype.onAudioTrackLoaded=function(t){var r=t.details,o=t.id,s=this.tracks[o],a=r.totalduration,i=0;if(d.logger.log("track "+o+" loaded ["+r.startSN+","+r.endSN+"],duration:"+a),r.live){var n=s.details;n&&r.fragments.length>0?(c.mergeDetails(n,r),i=r.fragments[0].start,r.PTSKnown?d.logger.log("live audio playlist sliding:"+i.toFixed(3)):d.logger.log("live audio playlist - outdated PTS, unknown sliding")):(r.PTSKnown=!1,d.logger.log("live audio playlist - first load, unknown sliding"))}else r.PTSKnown=!1;if(s.details=r,!this.startFragRequested){if(-1===this.startPosition){var l=r.startTimeOffset;e.isFinite(l)?(d.logger.log("start time offset found in playlist, adjust startPosition to "+l),this.startPosition=l):this.startPosition=0}this.nextLoadPosition=this.startPosition}this.state===f.State.WAITING_TRACK&&(this.state=f.State.IDLE),this.tick()},r.prototype.onKeyLoaded=function(){this.state===f.State.KEY_LOADING&&(this.state=f.State.IDLE,this.tick())},r.prototype.onFragLoaded=function(e){var t=this.fragCurrent,r=e.frag;if(this.state===f.State.FRAG_LOADING&&t&&"audio"===r.type&&r.level===t.level&&r.sn===t.sn){var o=this.tracks[this.trackId],s=o.details,a=s.totalduration,i=t.level,c=t.sn,p=t.cc,u=this.config.defaultAudioCodec||o.audioCodec||"mp4a.40.2",h=this.stats=e.stats;if("initSegment"===c)this.state=f.State.IDLE,h.tparsed=h.tbuffered=y.now(),s.initSegment.data=e.payload,this.hls.trigger(l.default.FRAG_BUFFERED,{stats:h,frag:t,id:"audio"}),this.tick();else{this.state=f.State.PARSING,this.appended=!1,this.demuxer||(this.demuxer=new n.default(this.hls,"audio"));var m=this.initPTS[p],b=s.initSegment?s.initSegment.data:[];s.initSegment||void 0!==m?(this.pendingBuffering=!0,d.logger.log("Demuxing "+c+" of ["+s.startSN+" ,"+s.endSN+"],track "+i),this.demuxer.push(e.payload,b,u,null,t,a,!1,m)):(d.logger.log("unknown video PTS for continuity counter "+p+", waiting for video PTS before demuxing audio frag "+c+" of ["+s.startSN+" ,"+s.endSN+"],track "+i),this.waitingFragment=e,this.state=f.State.WAITING_INIT_PTS)}}this.fragLoadError=0},r.prototype.onFragParsingInitSegment=function(e){var t=this.fragCurrent,r=e.frag;if(t&&"audio"===e.id&&r.sn===t.sn&&r.level===t.level&&this.state===f.State.PARSING){var o=e.tracks,s=void 0;if(o.video&&delete o.video,s=o.audio){s.levelCodec=s.codec,s.id=e.id,this.hls.trigger(l.default.BUFFER_CODECS,o),d.logger.log("audio track:audio,container:"+s.container+",codecs[level/parsed]=["+s.levelCodec+"/"+s.codec+"]");var a=s.initSegment;if(a){var i={type:"audio",data:a,parent:"audio",content:"initSegment"};this.audioSwitch?this.pendingData=[i]:(this.appended=!0,this.pendingBuffering=!0,this.hls.trigger(l.default.BUFFER_APPENDING,i))}this.tick()}}},r.prototype.onFragParsingData=function(t){var r=this,o=this.fragCurrent,s=t.frag;if(o&&"audio"===t.id&&"audio"===t.type&&s.sn===o.sn&&s.level===o.level&&this.state===f.State.PARSING){var a=this.trackId,i=this.tracks[a],n=this.hls;e.isFinite(t.endPTS)||(t.endPTS=t.startPTS+o.duration,t.endDTS=t.startDTS+o.duration),o.addElementaryStream(b.default.ElementaryStreamTypes.AUDIO),d.logger.log("parsed "+t.type+",PTS:["+t.startPTS.toFixed(3)+","+t.endPTS.toFixed(3)+"],DTS:["+t.startDTS.toFixed(3)+"/"+t.endDTS.toFixed(3)+"],nb:"+t.nb),c.updateFragPTSDTS(i.details,o,t.startPTS,t.endPTS);var p=this.audioSwitch,h=this.media,m=!1;if(p&&h)if(h.readyState){var y=h.currentTime;d.logger.log("switching audio track : currentTime:"+y),y>=t.startPTS&&(d.logger.log("switching audio track : flushing all audio"),this.state=f.State.BUFFER_FLUSHING,n.trigger(l.default.BUFFER_FLUSHING,{startOffset:0,endOffset:e.POSITIVE_INFINITY,type:"audio"}),m=!0,this.audioSwitch=!1,n.trigger(l.default.AUDIO_TRACK_SWITCHED,{id:a}))}else this.audioSwitch=!1,n.trigger(l.default.AUDIO_TRACK_SWITCHED,{id:a});var g=this.pendingData;if(!g)return d.logger.warn("Apparently attempt to enqueue media payload without codec initialization data upfront"),void n.trigger(l.default.ERROR,{type:u.ErrorTypes.MEDIA_ERROR,details:null,fatal:!0});this.audioSwitch||([t.data1,t.data2].forEach((function(e){e&&e.length&&g.push({type:t.type,data:e,parent:"audio",content:"data"})})),!m&&g.length&&(g.forEach((function(e){r.state===f.State.PARSING&&(r.pendingBuffering=!0,r.hls.trigger(l.default.BUFFER_APPENDING,e))})),this.pendingData=[],this.appended=!0)),this.tick()}},r.prototype.onFragParsed=function(e){var t=this.fragCurrent,r=e.frag;t&&"audio"===e.id&&r.sn===t.sn&&r.level===t.level&&this.state===f.State.PARSING&&(this.stats.tparsed=y.now(),this.state=f.State.PARSED,this._checkAppendedParsed())},r.prototype.onBufferReset=function(){this.mediaBuffer=this.videoBuffer=null,this.loadedmetadata=!1},r.prototype.onBufferCreated=function(e){var t=e.tracks.audio;t&&(this.mediaBuffer=t.buffer,this.loadedmetadata=!0),e.tracks.video&&(this.videoBuffer=e.tracks.video.buffer)},r.prototype.onBufferAppended=function(e){if("audio"===e.parent){var t=this.state;t!==f.State.PARSING&&t!==f.State.PARSED||(this.pendingBuffering=e.pending>0,this._checkAppendedParsed())}},r.prototype._checkAppendedParsed=function(){if(!(this.state!==f.State.PARSED||this.appended&&this.pendingBuffering)){var e=this.fragCurrent,t=this.stats,r=this.hls;if(e){this.fragPrevious=e,t.tbuffered=y.now(),r.trigger(l.default.FRAG_BUFFERED,{stats:t,frag:e,id:"audio"});var o=this.mediaBuffer?this.mediaBuffer:this.media;d.logger.log("audio buffered : "+p.default.toString(o.buffered)),this.audioSwitch&&this.appended&&(this.audioSwitch=!1,r.trigger(l.default.AUDIO_TRACK_SWITCHED,{id:this.trackId})),this.state=f.State.IDLE}this.tick()}},r.prototype.onError=function(t){var r=t.frag;if(!r||"audio"===r.type)switch(t.details){case u.ErrorDetails.FRAG_LOAD_ERROR:case u.ErrorDetails.FRAG_LOAD_TIMEOUT:var o=t.frag;if(o&&"audio"!==o.type)break;if(!t.fatal){var s=this.fragLoadError;if(s?s++:s=1,s<=(n=this.config).fragLoadingMaxRetry){this.fragLoadError=s;var a=Math.min(Math.pow(2,s-1)*n.fragLoadingRetryDelay,n.fragLoadingMaxRetryTimeout);d.logger.warn("AudioStreamController: frag loading failed, retry in "+a+" ms"),this.retryDate=y.now()+a,this.state=f.State.FRAG_LOADING_WAITING_RETRY}else d.logger.error("AudioStreamController: "+t.details+" reaches max retry, redispatch as fatal ..."),t.fatal=!0,this.state=f.State.ERROR}break;case u.ErrorDetails.AUDIO_TRACK_LOAD_ERROR:case u.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT:case u.ErrorDetails.KEY_LOAD_ERROR:case u.ErrorDetails.KEY_LOAD_TIMEOUT:this.state!==f.State.ERROR&&(this.state=t.fatal?f.State.ERROR:f.State.IDLE,d.logger.warn("AudioStreamController: "+t.details+" while loading frag, now switching to "+this.state+" state ..."));break;case u.ErrorDetails.BUFFER_FULL_ERROR:if("audio"===t.parent&&(this.state===f.State.PARSING||this.state===f.State.PARSED)){var n,c=this.mediaBuffer,p=this.media.currentTime;c&&i.BufferHelper.isBuffered(c,p)&&i.BufferHelper.isBuffered(c,p+.5)?((n=this.config).maxMaxBufferLength>=n.maxBufferLength&&(n.maxMaxBufferLength/=2,d.logger.warn("AudioStreamController: reduce max buffer length to "+n.maxMaxBufferLength+"s")),this.state=f.State.IDLE):(d.logger.warn("AudioStreamController: buffer full error also media.currentTime is not buffered, flush audio buffer"),this.fragCurrent=null,this.state=f.State.BUFFER_FLUSHING,this.hls.trigger(l.default.BUFFER_FLUSHING,{startOffset:0,endOffset:e.POSITIVE_INFINITY,type:"audio"}))}}},r.prototype.onBufferFlushed=function(){var e=this,t=this.pendingData;t&&t.length?(d.logger.log("AudioStreamController: appending pending audio data after buffer flushed"),t.forEach((function(t){e.hls.trigger(l.default.BUFFER_APPENDING,t)})),this.appended=!0,this.pendingData=[],this.state=f.State.PARSED):(this.state=f.State.IDLE,this.fragPrevious=null,this.tick())},r}(f.default);t.default=g}).call(this,r("./src/polyfills/number.js").Number)},"./src/controller/audio-track-controller.js":function(e,t,r){"use strict";var o,s=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var a=r("./src/events.js"),i=r("./src/task-loop.js"),n=r("./src/utils/logger.js"),l=r("./src/errors.js"),c=function(e){function t(t){var r=e.call(this,t,a.default.MANIFEST_LOADING,a.default.MANIFEST_PARSED,a.default.AUDIO_TRACK_LOADED,a.default.AUDIO_TRACK_SWITCHED,a.default.LEVEL_LOADED,a.default.ERROR)||this;return r._trackId=-1,r._selectDefaultTrack=!0,r.tracks=[],r.trackIdBlacklist=Object.create(null),r.audioGroupId=null,r}return s(t,e),t.prototype.onManifestLoading=function(){this.tracks=[],this._trackId=-1,this._selectDefaultTrack=!0},t.prototype.onManifestParsed=function(e){var t=this.tracks=e.audioTracks||[];this.hls.trigger(a.default.AUDIO_TRACKS_UPDATED,{audioTracks:t})},t.prototype.onAudioTrackLoaded=function(e){if(e.id>=this.tracks.length)n.logger.warn("Invalid audio track id:",e.id);else{if(n.logger.log("audioTrack "+e.id+" loaded"),this.tracks[e.id].details=e.details,e.details.live&&!this.hasInterval()){var t=1e3*e.details.targetduration;this.setInterval(t)}!e.details.live&&this.hasInterval()&&this.clearInterval()}},t.prototype.onAudioTrackSwitched=function(e){var t=this.tracks[e.id].groupId;t&&this.audioGroupId!==t&&(this.audioGroupId=t)},t.prototype.onLevelLoaded=function(e){var t=this.hls.levels[e.level];if(t.audioGroupIds){var r=t.audioGroupIds[t.urlId];this.audioGroupId!==r&&(this.audioGroupId=r,this._selectInitialAudioTrack())}},t.prototype.onError=function(e){e.type===l.ErrorTypes.NETWORK_ERROR&&(e.fatal&&this.clearInterval(),e.details===l.ErrorDetails.AUDIO_TRACK_LOAD_ERROR&&(n.logger.warn("Network failure on audio-track id:",e.context.id),this._handleLoadError()))},Object.defineProperty(t.prototype,"audioTracks",{get:function(){return this.tracks},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"audioTrack",{get:function(){return this._trackId},set:function(e){this._setAudioTrack(e),this._selectDefaultTrack=!1},enumerable:!0,configurable:!0}),t.prototype._setAudioTrack=function(e){if(this._trackId===e&&this.tracks[this._trackId].details)n.logger.debug("Same id as current audio-track passed, and track details available -> no-op");else if(e<0||e>=this.tracks.length)n.logger.warn("Invalid id passed to audio-track controller");else{var t=this.tracks[e];n.logger.log("Now switching to audio-track index "+e),this.clearInterval(),this._trackId=e;var r=t.url,o=t.type,s=t.id;this.hls.trigger(a.default.AUDIO_TRACK_SWITCHING,{id:s,type:o,url:r}),this._loadTrackDetailsIfNeeded(t)}},t.prototype.doTick=function(){this._updateTrack(this._trackId)},t.prototype._selectInitialAudioTrack=function(){var e=this,t=this.tracks;if(t.length){var r=this.tracks[this._trackId],o=null;if(r&&(o=r.name),this._selectDefaultTrack){var s=t.filter((function(e){return e.default}));s.length?t=s:n.logger.warn("No default audio tracks defined")}var i=!1,c=function(){t.forEach((function(t){i||e.audioGroupId&&t.groupId!==e.audioGroupId||o&&o!==t.name||(e._setAudioTrack(t.id),i=!0)}))};c(),i||(o=null,c()),i||(n.logger.error("No track found for running audio group-ID: "+this.audioGroupId),this.hls.trigger(a.default.ERROR,{type:l.ErrorTypes.MEDIA_ERROR,details:l.ErrorDetails.AUDIO_TRACK_LOAD_ERROR,fatal:!0}))}},t.prototype._needsTrackLoading=function(e){var t=e.details,r=e.url;return!(t&&!t.live||!r)},t.prototype._loadTrackDetailsIfNeeded=function(e){if(this._needsTrackLoading(e)){var t=e.url,r=e.id;n.logger.log("loading audio-track playlist for id: "+r),this.hls.trigger(a.default.AUDIO_TRACK_LOADING,{url:t,id:r})}},t.prototype._updateTrack=function(e){if(!(e<0||e>=this.tracks.length)){this.clearInterval(),this._trackId=e,n.logger.log("trying to update audio-track "+e);var t=this.tracks[e];this._loadTrackDetailsIfNeeded(t)}},t.prototype._handleLoadError=function(){this.trackIdBlacklist[this._trackId]=!0;var e=this._trackId,t=this.tracks[e],r=t.name,o=t.language,s=t.groupId;n.logger.warn("Loading failed on audio track id: "+e+", group-id: "+s+', name/language: "'+r+'" / "'+o+'"');for(var a=e,i=0;i<this.tracks.length;i++)if(!this.trackIdBlacklist[i]&&this.tracks[i].name===r){a=i;break}a!==e?(n.logger.log("Attempting audio-track fallback id:",a,"group-id:",this.tracks[a].groupId),this._setAudioTrack(a)):n.logger.warn('No fallback audio-track found for name/language: "'+r+'" / "'+o+'"')},t}(i.default);t.default=c},"./src/controller/base-stream-controller.js":function(e,t,r){"use strict";(function(e){var o,s=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var a=r("./src/task-loop.js"),i=r("./src/controller/fragment-tracker.js"),n=r("./src/utils/buffer-helper.js"),l=r("./src/utils/logger.js");t.State={STOPPED:"STOPPED",STARTING:"STARTING",IDLE:"IDLE",PAUSED:"PAUSED",KEY_LOADING:"KEY_LOADING",FRAG_LOADING:"FRAG_LOADING",FRAG_LOADING_WAITING_RETRY:"FRAG_LOADING_WAITING_RETRY",WAITING_TRACK:"WAITING_TRACK",PARSING:"PARSING",PARSED:"PARSED",BUFFER_FLUSHING:"BUFFER_FLUSHING",ENDED:"ENDED",ERROR:"ERROR",WAITING_INIT_PTS:"WAITING_INIT_PTS",WAITING_LEVEL:"WAITING_LEVEL"};var c=function(r){function o(){return null!==r&&r.apply(this,arguments)||this}return s(o,r),o.prototype.doTick=function(){},o.prototype.startLoad=function(){},o.prototype.stopLoad=function(){var e=this.fragCurrent;e&&(e.loader&&e.loader.abort(),this.fragmentTracker.removeFragment(e)),this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.fragCurrent=null,this.fragPrevious=null,this.clearInterval(),this.clearNextTick(),this.state=t.State.STOPPED},o.prototype._streamEnded=function(e,t){var r=this.fragCurrent,o=this.fragmentTracker;if(!t.live&&r&&!r.backtracked&&r.sn===t.endSN&&!e.nextStart){var s=o.getState(r);return s===i.FragmentState.PARTIAL||s===i.FragmentState.OK}return!1},o.prototype.onMediaSeeking=function(){var r=this.config,o=this.media,s=this.mediaBuffer,a=this.state,i=o?o.currentTime:null,c=n.BufferHelper.bufferInfo(s||o,i,this.config.maxBufferHole);if(e.isFinite(i)&&l.logger.log("media seeking to "+i.toFixed(3)),a===t.State.FRAG_LOADING){var p=this.fragCurrent;if(0===c.len&&p){var u=r.maxFragLookUpTolerance,d=p.start-u,h=p.start+p.duration+u;i<d||i>h?(p.loader&&(l.logger.log("seeking outside of buffer while fragment load in progress, cancel fragment load"),p.loader.abort()),this.fragCurrent=null,this.fragPrevious=null,this.state=t.State.IDLE):l.logger.log("seeking outside of buffer but within currently loaded fragment range")}}else a===t.State.ENDED&&(0===c.len&&(this.fragPrevious=null,this.fragCurrent=null),this.state=t.State.IDLE);o&&(this.lastCurrentTime=i),this.loadedmetadata||(this.nextLoadPosition=this.startPosition=i),this.tick()},o.prototype.onMediaEnded=function(){this.startPosition=this.lastCurrentTime=0},o.prototype.onHandlerDestroying=function(){this.stopLoad(),r.prototype.onHandlerDestroying.call(this)},o.prototype.onHandlerDestroyed=function(){this.state=t.State.STOPPED,this.fragmentTracker=null},o}(a.default);t.default=c}).call(this,r("./src/polyfills/number.js").Number)},"./src/controller/buffer-controller.js":function(e,t,r){"use strict";(function(e){var o,s=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var a=r("./src/events.js"),i=r("./src/event-handler.js"),n=r("./src/utils/logger.js"),l=r("./src/errors.js"),c=r("./src/utils/mediasource-helper.js").getMediaSource(),p=function(t){function r(e){var r=t.call(this,e,a.default.MEDIA_ATTACHING,a.default.MEDIA_DETACHING,a.default.MANIFEST_PARSED,a.default.BUFFER_RESET,a.default.BUFFER_APPENDING,a.default.BUFFER_CODECS,a.default.BUFFER_EOS,a.default.BUFFER_FLUSHING,a.default.LEVEL_PTS_UPDATED,a.default.LEVEL_UPDATED)||this;return r._msDuration=null,r._levelDuration=null,r._levelTargetDuration=10,r._live=null,r._objectUrl=null,r.bufferCodecEventsExpected=0,r.onsbue=r.onSBUpdateEnd.bind(r),r.onsbe=r.onSBUpdateError.bind(r),r.pendingTracks={},r.tracks={},r}return s(r,t),r.prototype.destroy=function(){i.default.prototype.destroy.call(this)},r.prototype.onLevelPtsUpdated=function(e){var t=e.type,r=this.tracks.audio;if("audio"===t&&r&&"audio/mpeg"===r.container){var o=this.sourceBuffer.audio;if(Math.abs(o.timestampOffset-e.start)>.1){var s=o.updating;try{o.abort()}catch(e){n.logger.warn("can not abort audio buffer: "+e)}s?this.audioTimestampOffset=e.start:(n.logger.warn("change mpeg audio timestamp offset from "+o.timestampOffset+" to "+e.start),o.timestampOffset=e.start)}}},r.prototype.onManifestParsed=function(e){this.bufferCodecEventsExpected=e.altAudio?2:1,n.logger.log(this.bufferCodecEventsExpected+" bufferCodec event(s) expected")},r.prototype.onMediaAttaching=function(e){var t=this.media=e.media;if(t){var r=this.mediaSource=new c;this.onmso=this.onMediaSourceOpen.bind(this),this.onmse=this.onMediaSourceEnded.bind(this),this.onmsc=this.onMediaSourceClose.bind(this),r.addEventListener("sourceopen",this.onmso),r.addEventListener("sourceended",this.onmse),r.addEventListener("sourceclose",this.onmsc),t.src=window.URL.createObjectURL(r),this._objectUrl=t.src}},r.prototype.onMediaDetaching=function(){n.logger.log("media source detaching");var e=this.mediaSource;if(e){if("open"===e.readyState)try{e.endOfStream()}catch(e){n.logger.warn("onMediaDetaching:"+e.message+" while calling endOfStream")}e.removeEventListener("sourceopen",this.onmso),e.removeEventListener("sourceended",this.onmse),e.removeEventListener("sourceclose",this.onmsc),this.media&&(window.URL.revokeObjectURL(this._objectUrl),this.media.src===this._objectUrl?(this.media.removeAttribute("src"),this.media.load()):n.logger.warn("media.src was changed by a third party - skip cleanup")),this.mediaSource=null,this.media=null,this._objectUrl=null,this.pendingTracks={},this.tracks={},this.sourceBuffer={},this.flushRange=[],this.segments=[],this.appended=0}this.onmso=this.onmse=this.onmsc=null,this.hls.trigger(a.default.MEDIA_DETACHED)},r.prototype.onMediaSourceOpen=function(){n.logger.log("media source opened"),this.hls.trigger(a.default.MEDIA_ATTACHED,{media:this.media});var e=this.mediaSource;e&&e.removeEventListener("sourceopen",this.onmso),this.checkPendingTracks()},r.prototype.checkPendingTracks=function(){var e=this.bufferCodecEventsExpected,t=this.pendingTracks,r=Object.keys(t).length;(r&&!e||2===r)&&(this.createSourceBuffers(t),this.pendingTracks={},this.doAppending())},r.prototype.onMediaSourceClose=function(){n.logger.log("media source closed")},r.prototype.onMediaSourceEnded=function(){n.logger.log("media source ended")},r.prototype.onSBUpdateEnd=function(){if(this.audioTimestampOffset){var e=this.sourceBuffer.audio;n.logger.warn("change mpeg audio timestamp offset from "+e.timestampOffset+" to "+this.audioTimestampOffset),e.timestampOffset=this.audioTimestampOffset,delete this.audioTimestampOffset}this._needsFlush&&this.doFlush(),this._needsEos&&this.checkEos(),this.appending=!1;var t=this.parent,r=this.segments.reduce((function(e,r){return r.parent===t?e+1:e}),0),o={},s=this.sourceBuffer;for(var i in s)o[i]=s[i].buffered;this.hls.trigger(a.default.BUFFER_APPENDED,{parent:t,pending:r,timeRanges:o}),this._needsFlush||this.doAppending(),this.updateMediaElementDuration(),0===r&&this.flushLiveBackBuffer()},r.prototype.onSBUpdateError=function(e){n.logger.error("sourceBuffer error:",e),this.hls.trigger(a.default.ERROR,{type:l.ErrorTypes.MEDIA_ERROR,details:l.ErrorDetails.BUFFER_APPENDING_ERROR,fatal:!1})},r.prototype.onBufferReset=function(){var e=this.sourceBuffer;for(var t in e){var r=e[t];try{this.mediaSource.removeSourceBuffer(r),r.removeEventListener("updateend",this.onsbue),r.removeEventListener("error",this.onsbe)}catch(e){}}this.sourceBuffer={},this.flushRange=[],this.segments=[],this.appended=0},r.prototype.onBufferCodecs=function(e){var t=this;if(!Object.keys(this.sourceBuffer).length){Object.keys(e).forEach((function(r){t.pendingTracks[r]=e[r]}));var r=this.mediaSource;this.bufferCodecEventsExpected=Math.max(this.bufferCodecEventsExpected-1,0),r&&"open"===r.readyState&&this.checkPendingTracks()}},r.prototype.createSourceBuffers=function(e){var t=this.sourceBuffer,r=this.mediaSource;for(var o in e)if(!t[o]){var s=e[o],i=s.levelCodec||s.codec,c=s.container+";codecs="+i;n.logger.log("creating sourceBuffer("+c+")");try{var p=t[o]=r.addSourceBuffer(c);p.addEventListener("updateend",this.onsbue),p.addEventListener("error",this.onsbe),this.tracks[o]={codec:i,container:s.container},s.buffer=p}catch(e){n.logger.error("error while trying to add sourceBuffer:"+e.message),this.hls.trigger(a.default.ERROR,{type:l.ErrorTypes.MEDIA_ERROR,details:l.ErrorDetails.BUFFER_ADD_CODEC_ERROR,fatal:!1,err:e,mimeType:c})}}this.hls.trigger(a.default.BUFFER_CREATED,{tracks:e})},r.prototype.onBufferAppending=function(e){this._needsFlush||(this.segments?this.segments.push(e):this.segments=[e],this.doAppending())},r.prototype.onBufferAppendFail=function(e){n.logger.error("sourceBuffer error:",e.event),this.hls.trigger(a.default.ERROR,{type:l.ErrorTypes.MEDIA_ERROR,details:l.ErrorDetails.BUFFER_APPENDING_ERROR,fatal:!1})},r.prototype.onBufferEos=function(e){var t=this.sourceBuffer,r=e.type;for(var o in t)r&&o!==r||t[o].ended||(t[o].ended=!0,n.logger.log(o+" sourceBuffer now EOS"));this.checkEos()},r.prototype.checkEos=function(){var e=this.sourceBuffer,t=this.mediaSource;if(t&&"open"===t.readyState){for(var r in e){var o=e[r];if(!o.ended)return;if(o.updating)return void(this._needsEos=!0)}n.logger.log("all media data are available, signal endOfStream() to MediaSource and stop loading fragment");try{t.endOfStream()}catch(e){n.logger.warn("exception while calling mediaSource.endOfStream()")}this._needsEos=!1}else this._needsEos=!1},r.prototype.onBufferFlushing=function(e){this.flushRange.push({start:e.startOffset,end:e.endOffset,type:e.type}),this.flushBufferCounter=0,this.doFlush()},r.prototype.flushLiveBackBuffer=function(){if(this._live){var e=this.hls.config.liveBackBufferLength;if(isFinite(e)&&!(e<0))for(var t=this.media.currentTime,r=this.sourceBuffer,o=Object.keys(r),s=t-Math.max(e,this._levelTargetDuration),a=o.length-1;a>=0;a--){var i=o[a],n=r[i].buffered;n.length>0&&s>n.start(0)&&this.removeBufferRange(i,r[i],0,s)}}},r.prototype.onLevelUpdated=function(e){var t=e.details;t.fragments.length>0&&(this._levelDuration=t.totalduration+t.fragments[0].start,this._levelTargetDuration=t.averagetargetduration||t.targetduration||10,this._live=t.live,this.updateMediaElementDuration())},r.prototype.updateMediaElementDuration=function(){var t,r=this.hls.config;if(null!==this._levelDuration&&this.media&&this.mediaSource&&this.sourceBuffer&&0!==this.media.readyState&&"open"===this.mediaSource.readyState){for(var o in this.sourceBuffer)if(!0===this.sourceBuffer[o].updating)return;t=this.media.duration,null===this._msDuration&&(this._msDuration=this.mediaSource.duration),!0===this._live&&!0===r.liveDurationInfinity?(n.logger.log("Media Source duration is set to Infinity"),this._msDuration=this.mediaSource.duration=1/0):(this._levelDuration>this._msDuration&&this._levelDuration>t||!e.isFinite(t))&&(n.logger.log("Updating Media Source duration to "+this._levelDuration.toFixed(3)),this._msDuration=this.mediaSource.duration=this._levelDuration)}},r.prototype.doFlush=function(){for(;this.flushRange.length;){var e=this.flushRange[0];if(!this.flushBuffer(e.start,e.end,e.type))return void(this._needsFlush=!0);this.flushRange.shift(),this.flushBufferCounter=0}if(0===this.flushRange.length){this._needsFlush=!1;var t=0,r=this.sourceBuffer;try{for(var o in r)t+=r[o].buffered.length}catch(e){n.logger.error("error while accessing sourceBuffer.buffered")}this.appended=t,this.hls.trigger(a.default.BUFFER_FLUSHED)}},r.prototype.doAppending=function(){var e=this.hls,t=this.segments,r=this.sourceBuffer;if(Object.keys(r).length){if(this.media.error)return this.segments=[],void n.logger.error("trying to append although a media error occured, flush segment and abort");if(this.appending)return;if(t&&t.length){var o=t.shift();try{var s=r[o.type];s?s.updating?t.unshift(o):(s.ended=!1,this.parent=o.parent,s.appendBuffer(o.data),this.appendError=0,this.appended++,this.appending=!0):this.onSBUpdateEnd()}catch(r){n.logger.error("error while trying to append buffer:"+r.message),t.unshift(o);var i={type:l.ErrorTypes.MEDIA_ERROR,parent:o.parent};22!==r.code?(this.appendError?this.appendError++:this.appendError=1,i.details=l.ErrorDetails.BUFFER_APPEND_ERROR,this.appendError>e.config.appendErrorMaxRetry?(n.logger.log("fail "+e.config.appendErrorMaxRetry+" times to append segment in sourceBuffer"),this.segments=[],i.fatal=!0,e.trigger(a.default.ERROR,i)):(i.fatal=!1,e.trigger(a.default.ERROR,i))):(this.segments=[],i.details=l.ErrorDetails.BUFFER_FULL_ERROR,i.fatal=!1,e.trigger(a.default.ERROR,i))}}}},r.prototype.flushBuffer=function(e,t,r){var o,s=this.sourceBuffer;if(Object.keys(s).length){if(n.logger.log("flushBuffer,pos/start/end: "+this.media.currentTime.toFixed(3)+"/"+e+"/"+t),this.flushBufferCounter<this.appended){for(var a in s)if(!r||a===r){if((o=s[a]).ended=!1,o.updating)return n.logger.warn("cannot flush, sb updating in progress"),!1;if(this.removeBufferRange(a,o,e,t))return this.flushBufferCounter++,!1}}else n.logger.warn("abort flushing too many retries");n.logger.log("buffer flushed")}return!0},r.prototype.removeBufferRange=function(e,t,r,o){try{for(var s=0;s<t.buffered.length;s++){var a=t.buffered.start(s),i=t.buffered.end(s),l=Math.max(a,r),c=Math.min(i,o);if(Math.min(c,i)-l>.5)return n.logger.log("sb remove "+e+" ["+l+","+c+"], of ["+a+","+i+"], pos:"+this.media.currentTime),t.remove(l,c),!0}}catch(e){n.logger.warn("removeBufferRange failed",e)}return!1},r}(i.default);t.default=p}).call(this,r("./src/polyfills/number.js").Number)},"./src/controller/cap-level-controller.js":function(e,t,r){"use strict";(function(e){var o,s=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var a=r("./src/events.js"),i=function(t){function r(r){var o=t.call(this,r,a.default.FPS_DROP_LEVEL_CAPPING,a.default.MEDIA_ATTACHING,a.default.MANIFEST_PARSED,a.default.BUFFER_CODECS,a.default.MEDIA_DETACHING)||this;return o.autoLevelCapping=e.POSITIVE_INFINITY,o.firstLevel=null,o.levels=[],o.media=null,o.restrictedLevels=[],o.timer=null,o}return s(r,t),r.prototype.destroy=function(){this.hls.config.capLevelToPlayerSize&&(this.media=null,this._stopCapping())},r.prototype.onFpsDropLevelCapping=function(e){r.isLevelAllowed(e.droppedLevel,this.restrictedLevels)&&this.restrictedLevels.push(e.droppedLevel)},r.prototype.onMediaAttaching=function(e){this.media=e.media instanceof window.HTMLVideoElement?e.media:null},r.prototype.onManifestParsed=function(e){var t=this.hls;this.restrictedLevels=[],this.levels=e.levels,this.firstLevel=e.firstLevel,t.config.capLevelToPlayerSize&&e.video&&this._startCapping()},r.prototype.onBufferCodecs=function(e){this.hls.config.capLevelToPlayerSize&&e.video&&this._startCapping()},r.prototype.onLevelsUpdated=function(e){this.levels=e.levels},r.prototype.onMediaDetaching=function(){this._stopCapping()},r.prototype.detectPlayerSize=function(){if(this.media){var e=this.levels?this.levels.length:0;if(e){var t=this.hls;t.autoLevelCapping=this.getMaxLevel(e-1),t.autoLevelCapping>this.autoLevelCapping&&t.streamController.nextLevelSwitch(),this.autoLevelCapping=t.autoLevelCapping}}},r.prototype.getMaxLevel=function(e){var t=this;if(!this.levels)return-1;var o=this.levels.filter((function(o,s){return r.isLevelAllowed(s,t.restrictedLevels)&&s<=e}));return r.getMaxLevelByMediaSize(o,this.mediaWidth,this.mediaHeight)},r.prototype._startCapping=function(){this.timer||(this.autoLevelCapping=e.POSITIVE_INFINITY,this.hls.firstLevel=this.getMaxLevel(this.firstLevel),clearInterval(this.timer),this.timer=setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())},r.prototype._stopCapping=function(){this.restrictedLevels=[],this.firstLevel=null,this.autoLevelCapping=e.POSITIVE_INFINITY,this.timer&&(this.timer=clearInterval(this.timer),this.timer=null)},Object.defineProperty(r.prototype,"mediaWidth",{get:function(){var e,t=this.media;return t&&(e=t.width||t.clientWidth||t.offsetWidth,e*=r.contentScaleFactor),e},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"mediaHeight",{get:function(){var e,t=this.media;return t&&(e=t.height||t.clientHeight||t.offsetHeight,e*=r.contentScaleFactor),e},enumerable:!0,configurable:!0}),Object.defineProperty(r,"contentScaleFactor",{get:function(){var e=1;try{e=window.devicePixelRatio}catch(e){}return e},enumerable:!0,configurable:!0}),r.isLevelAllowed=function(e,t){return void 0===t&&(t=[]),-1===t.indexOf(e)},r.getMaxLevelByMediaSize=function(e,t,r){if(!e||e&&!e.length)return-1;for(var o,s,a=e.length-1,i=0;i<e.length;i+=1){var n=e[i];if((n.width>=t||n.height>=r)&&(o=n,!(s=e[i+1])||o.width!==s.width||o.height!==s.height)){a=i;break}}return a},r}(r("./src/event-handler.js").default);t.default=i}).call(this,r("./src/polyfills/number.js").Number)},"./src/controller/eme-controller.js":function(e,t,r){"use strict";var o,s=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var a=r("./src/event-handler.js"),i=r("./src/events.js"),n=r("./src/errors.js"),l=r("./src/utils/logger.js"),c=window.XMLHttpRequest,p="com.widevine.alpha",u="com.microsoft.playready",d=function(e){function t(t){var r=e.call(this,t,i.default.MEDIA_ATTACHED,i.default.MANIFEST_PARSED)||this;return r._widevineLicenseUrl=t.config.widevineLicenseUrl,r._licenseXhrSetup=t.config.licenseXhrSetup,r._emeEnabled=t.config.emeEnabled,r._requestMediaKeySystemAccess=t.config.requestMediaKeySystemAccessFunc,r._mediaKeysList=[],r._media=null,r._hasSetMediaKeys=!1,r._isMediaEncrypted=!1,r._requestLicenseFailureCount=0,r}return s(t,e),t.prototype.getLicenseServerUrl=function(e){var t;switch(e){case p:t=this._widevineLicenseUrl;break;default:t=null}return t||(l.logger.error('No license server URL configured for key-system "'+e+'"'),this.hls.trigger(i.default.ERROR,{type:n.ErrorTypes.KEY_SYSTEM_ERROR,details:n.ErrorDetails.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0})),t},t.prototype._attemptKeySystemAccess=function(e,t,r){var o=this,s=function(e,t,r){switch(e){case p:return function(e,t,r){var o={videoCapabilities:[]};return t.forEach((function(e){o.videoCapabilities.push({contentType:'video/mp4; codecs="'+e+'"'})})),[o]}(0,r);default:throw Error("Unknown key-system: "+e)}}(e,0,r);s?(l.logger.log("Requesting encrypted media key-system access"),this.requestMediaKeySystemAccess(e,s).then((function(t){o._onMediaKeySystemAccessObtained(e,t)})).catch((function(t){l.logger.error('Failed to obtain key-system "'+e+'" access:',t)}))):l.logger.warn("Can not create config for key-system (maybe because platform is not supported):",e)},Object.defineProperty(t.prototype,"requestMediaKeySystemAccess",{get:function(){if(!this._requestMediaKeySystemAccess)throw new Error("No requestMediaKeySystemAccess function configured");return this._requestMediaKeySystemAccess},enumerable:!0,configurable:!0}),t.prototype._onMediaKeySystemAccessObtained=function(e,t){var r=this;l.logger.log('Access for key-system "'+e+'" obtained');var o={mediaKeys:null,mediaKeysSession:null,mediaKeysSessionInitialized:!1,mediaKeySystemAccess:t,mediaKeySystemDomain:e};this._mediaKeysList.push(o),t.createMediaKeys().then((function(t){o.mediaKeys=t,l.logger.log('Media-keys created for key-system "'+e+'"'),r._onMediaKeysCreated()})).catch((function(e){l.logger.error("Failed to create media-keys:",e)}))},t.prototype._onMediaKeysCreated=function(){var e=this;this._mediaKeysList.forEach((function(t){t.mediaKeysSession||(t.mediaKeysSession=t.mediaKeys.createSession(),e._onNewMediaKeySession(t.mediaKeysSession))}))},t.prototype._onNewMediaKeySession=function(e){var t=this;l.logger.log("New key-system session "+e.sessionId),e.addEventListener("message",(function(r){t._onKeySessionMessage(e,r.message)}),!1)},t.prototype._onKeySessionMessage=function(e,t){l.logger.log("Got EME message event, creating license request"),this._requestLicense(t,(function(t){l.logger.log("Received license data, updating key-session"),e.update(t)}))},t.prototype._onMediaEncrypted=function(e,t){l.logger.log('Media is encrypted using "'+e+'" init data type'),this._isMediaEncrypted=!0,this._mediaEncryptionInitDataType=e,this._mediaEncryptionInitData=t,this._attemptSetMediaKeys(),this._generateRequestWithPreferredKeySession()},t.prototype._attemptSetMediaKeys=function(){if(!this._hasSetMediaKeys){var e=this._mediaKeysList[0];if(!e||!e.mediaKeys)return l.logger.error("Fatal: Media is encrypted but no CDM access or no keys have been obtained yet"),void this.hls.trigger(i.default.ERROR,{type:n.ErrorTypes.KEY_SYSTEM_ERROR,details:n.ErrorDetails.KEY_SYSTEM_NO_KEYS,fatal:!0});l.logger.log("Setting keys for encrypted media"),this._media.setMediaKeys(e.mediaKeys),this._hasSetMediaKeys=!0}},t.prototype._generateRequestWithPreferredKeySession=function(){var e=this,t=this._mediaKeysList[0];if(!t)return l.logger.error("Fatal: Media is encrypted but not any key-system access has been obtained yet"),void this.hls.trigger(i.default.ERROR,{type:n.ErrorTypes.KEY_SYSTEM_ERROR,details:n.ErrorDetails.KEY_SYSTEM_NO_ACCESS,fatal:!0});if(t.mediaKeysSessionInitialized)l.logger.warn("Key-Session already initialized but requested again");else{var r=t.mediaKeysSession;r||(l.logger.error("Fatal: Media is encrypted but no key-session existing"),this.hls.trigger(i.default.ERROR,{type:n.ErrorTypes.KEY_SYSTEM_ERROR,details:n.ErrorDetails.KEY_SYSTEM_NO_SESSION,fatal:!0}));var o=this._mediaEncryptionInitDataType,s=this._mediaEncryptionInitData;l.logger.log('Generating key-session request for "'+o+'" init data type'),t.mediaKeysSessionInitialized=!0,r.generateRequest(o,s).then((function(){l.logger.debug("Key-session generation succeeded")})).catch((function(t){l.logger.error("Error generating key-session request:",t),e.hls.trigger(i.default.ERROR,{type:n.ErrorTypes.KEY_SYSTEM_ERROR,details:n.ErrorDetails.KEY_SYSTEM_NO_SESSION,fatal:!1})}))}},t.prototype._createLicenseXhr=function(e,t,r){var o=new c,s=this._licenseXhrSetup;try{if(s)try{s(o,e)}catch(t){o.open("POST",e,!0),s(o,e)}o.readyState||o.open("POST",e,!0)}catch(e){return l.logger.error("Error setting up key-system license XHR",e),void this.hls.trigger(i.default.ERROR,{type:n.ErrorTypes.KEY_SYSTEM_ERROR,details:n.ErrorDetails.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0})}return o.responseType="arraybuffer",o.onreadystatechange=this._onLicenseRequestReadyStageChange.bind(this,o,e,t,r),o},t.prototype._onLicenseRequestReadyStageChange=function(e,t,r,o){switch(e.readyState){case 4:if(200===e.status)this._requestLicenseFailureCount=0,l.logger.log("License request succeeded"),o(e.response);else{if(l.logger.error("License Request XHR failed ("+t+"). Status: "+e.status+" ("+e.statusText+")"),this._requestLicenseFailureCount++,this._requestLicenseFailureCount<=3){var s=3-this._requestLicenseFailureCount+1;return l.logger.warn("Retrying license request, "+s+" attempts left"),void this._requestLicense(r,o)}this.hls.trigger(i.default.ERROR,{type:n.ErrorTypes.KEY_SYSTEM_ERROR,details:n.ErrorDetails.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0})}}},t.prototype._generateLicenseRequestChallenge=function(e,t){var r;return e.mediaKeySystemDomain===u?l.logger.error("PlayReady is not supported (yet)"):e.mediaKeySystemDomain===p?r=t:l.logger.error("Unsupported key-system:",e.mediaKeySystemDomain),r},t.prototype._requestLicense=function(e,t){l.logger.log("Requesting content license for key-system");var r=this._mediaKeysList[0];if(!r)return l.logger.error("Fatal error: Media is encrypted but no key-system access has been obtained yet"),void this.hls.trigger(i.default.ERROR,{type:n.ErrorTypes.KEY_SYSTEM_ERROR,details:n.ErrorDetails.KEY_SYSTEM_NO_ACCESS,fatal:!0});var o=this.getLicenseServerUrl(r.mediaKeySystemDomain),s=this._createLicenseXhr(o,e,t);l.logger.log("Sending license request to URL: "+o),s.send(this._generateLicenseRequestChallenge(r,e))},t.prototype.onMediaAttached=function(e){var t=this;if(this._emeEnabled){var r=e.media;this._media=r,r.addEventListener("encrypted",(function(e){t._onMediaEncrypted(e.initDataType,e.initData)}))}},t.prototype.onManifestParsed=function(e){if(this._emeEnabled){var t=e.levels.map((function(e){return e.audioCodec})),r=e.levels.map((function(e){return e.videoCodec}));this._attemptKeySystemAccess(p,t,r)}},t}(a.default);t.default=d},"./src/controller/fps-controller.js":function(e,t,r){"use strict";var o,s=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var a=r("./src/events.js"),i=r("./src/event-handler.js"),n=r("./src/utils/logger.js"),l=window.performance,c=function(e){function t(t){return e.call(this,t,a.default.MEDIA_ATTACHING)||this}return s(t,e),t.prototype.destroy=function(){this.timer&&clearInterval(this.timer),this.isVideoPlaybackQualityAvailable=!1},t.prototype.onMediaAttaching=function(e){var t=this.hls.config;t.capLevelOnFPSDrop&&("function"==typeof(this.video=e.media instanceof window.HTMLVideoElement?e.media:null).getVideoPlaybackQuality&&(this.isVideoPlaybackQualityAvailable=!0),clearInterval(this.timer),this.timer=setInterval(this.checkFPSInterval.bind(this),t.fpsDroppedMonitoringPeriod))},t.prototype.checkFPS=function(e,t,r){var o=l.now();if(t){if(this.lastTime){var s=o-this.lastTime,i=r-this.lastDroppedFrames,c=t-this.lastDecodedFrames,p=1e3*i/s,u=this.hls;if(u.trigger(a.default.FPS_DROP,{currentDropped:i,currentDecoded:c,totalDroppedFrames:r}),p>0&&i>u.config.fpsDroppedMonitoringThreshold*c){var d=u.currentLevel;n.logger.warn("drop FPS ratio greater than max allowed value for currentLevel: "+d),d>0&&(-1===u.autoLevelCapping||u.autoLevelCapping>=d)&&(d-=1,u.trigger(a.default.FPS_DROP_LEVEL_CAPPING,{level:d,droppedLevel:u.currentLevel}),u.autoLevelCapping=d,u.streamController.nextLevelSwitch())}}this.lastTime=o,this.lastDroppedFrames=r,this.lastDecodedFrames=t}},t.prototype.checkFPSInterval=function(){var e=this.video;if(e)if(this.isVideoPlaybackQualityAvailable){var t=e.getVideoPlaybackQuality();this.checkFPS(e,t.totalVideoFrames,t.droppedVideoFrames)}else this.checkFPS(e,e.webkitDecodedFrameCount,e.webkitDroppedFrameCount)},t}(i.default);t.default=c},"./src/controller/fragment-finders.js":function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var o=r("./src/utils/binary-search.js");function s(e,t,r){void 0===e&&(e=0),void 0===t&&(t=0);var o=Math.min(t,r.duration+(r.deltaPTS?r.deltaPTS:0));return r.start+r.duration-o<=e?1:r.start-o>e&&r.start?-1:0}function a(e,t,r){var o=1e3*Math.min(t,r.duration+(r.deltaPTS?r.deltaPTS:0));return r.endProgramDateTime-o>e}t.findFragmentByPDT=function(t,r,o){if(!Array.isArray(t)||!t.length||!e.isFinite(r))return null;if(r<t[0].programDateTime)return null;if(r>=t[t.length-1].endProgramDateTime)return null;o=o||0;for(var s=0;s<t.length;++s){var i=t[s];if(a(r,o,i))return i}return null},t.findFragmentByPTS=function(e,t,r,a){void 0===r&&(r=0),void 0===a&&(a=0);var i=e?t[e.sn-t[0].sn+1]:null;return i&&!s(r,a,i)?i:o.default.search(t,s.bind(null,r,a))},t.fragmentWithinToleranceTest=s,t.pdtWithinToleranceTest=a}).call(this,r("./src/polyfills/number.js").Number)},"./src/controller/fragment-tracker.js":function(e,t,r){"use strict";(function(e){var o,s=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var a=r("./src/event-handler.js"),i=r("./src/events.js");t.FragmentState={NOT_LOADED:"NOT_LOADED",APPENDING:"APPENDING",PARTIAL:"PARTIAL",OK:"OK"};var n=function(r){function o(e){var t=r.call(this,e,i.default.BUFFER_APPENDED,i.default.FRAG_BUFFERED,i.default.FRAG_LOADED)||this;return t.bufferPadding=.2,t.fragments=Object.create(null),t.timeRanges=Object.create(null),t.config=e.config,t}return s(o,r),o.prototype.destroy=function(){this.fragments=Object.create(null),this.timeRanges=Object.create(null),this.config=null,a.default.prototype.destroy.call(this),r.prototype.destroy.call(this)},o.prototype.getBufferedFrag=function(e,t){var r=this.fragments,o=Object.keys(r).filter((function(o){var s=r[o];if(s.body.type!==t)return!1;if(!s.buffered)return!1;var a=s.body;return a.startPTS<=e&&e<=a.endPTS}));if(0===o.length)return null;var s=o.pop();return r[s].body},o.prototype.detectEvictedFragments=function(e,t){var r,o,s=this;Object.keys(this.fragments).forEach((function(a){var i=s.fragments[a];if(!0===i.buffered){var n=i.range[e];if(n){r=n.time;for(var l=0;l<r.length;l++)if(o=r[l],!1===s.isTimeBuffered(o.startPTS,o.endPTS,t)){s.removeFragment(i.body);break}}}}))},o.prototype.detectPartialFragments=function(e){var t=this,r=this.getFragmentKey(e),o=this.fragments[r];o&&(o.buffered=!0,Object.keys(this.timeRanges).forEach((function(r){if(e.hasElementaryStream(r)){var s=t.timeRanges[r];o.range[r]=t.getBufferedTimes(e.startPTS,e.endPTS,s)}})))},o.prototype.getBufferedTimes=function(e,t,r){for(var o,s,a=[],i=!1,n=0;n<r.length;n++){if(o=r.start(n)-this.bufferPadding,s=r.end(n)+this.bufferPadding,e>=o&&t<=s){a.push({startPTS:Math.max(e,r.start(n)),endPTS:Math.min(t,r.end(n))});break}if(e<s&&t>o)a.push({startPTS:Math.max(e,r.start(n)),endPTS:Math.min(t,r.end(n))}),i=!0;else if(t<=o)break}return{time:a,partial:i}},o.prototype.getFragmentKey=function(e){return e.type+"_"+e.level+"_"+e.urlId+"_"+e.sn},o.prototype.getPartialFragment=function(e){var t,r,o,s=this,a=null,i=0;return Object.keys(this.fragments).forEach((function(n){var l=s.fragments[n];s.isPartial(l)&&(r=l.body.startPTS-s.bufferPadding,o=l.body.endPTS+s.bufferPadding,e>=r&&e<=o&&(t=Math.min(e-r,o-e),i<=t&&(a=l.body,i=t)))})),a},o.prototype.getState=function(e){var r=this.getFragmentKey(e),o=this.fragments[r],s=t.FragmentState.NOT_LOADED;return void 0!==o&&(s=o.buffered?!0===this.isPartial(o)?t.FragmentState.PARTIAL:t.FragmentState.OK:t.FragmentState.APPENDING),s},o.prototype.isPartial=function(e){return!0===e.buffered&&(void 0!==e.range.video&&!0===e.range.video.partial||void 0!==e.range.audio&&!0===e.range.audio.partial)},o.prototype.isTimeBuffered=function(e,t,r){for(var o,s,a=0;a<r.length;a++){if(o=r.start(a)-this.bufferPadding,s=r.end(a)+this.bufferPadding,e>=o&&t<=s)return!0;if(t<=o)return!1}return!1},o.prototype.onFragLoaded=function(t){var r=t.frag;e.isFinite(r.sn)&&!r.bitrateTest&&(this.fragments[this.getFragmentKey(r)]={body:r,range:Object.create(null),buffered:!1})},o.prototype.onBufferAppended=function(e){var t=this;this.timeRanges=e.timeRanges,Object.keys(this.timeRanges).forEach((function(e){var r=t.timeRanges[e];t.detectEvictedFragments(e,r)}))},o.prototype.onFragBuffered=function(e){this.detectPartialFragments(e.frag)},o.prototype.hasFragment=function(e){var t=this.getFragmentKey(e);return void 0!==this.fragments[t]},o.prototype.removeFragment=function(e){var t=this.getFragmentKey(e);delete this.fragments[t]},o.prototype.removeAllFragments=function(){this.fragments=Object.create(null)},o}(a.default);t.FragmentTracker=n}).call(this,r("./src/polyfills/number.js").Number)},"./src/controller/gap-controller.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=r("./src/utils/buffer-helper.js"),s=r("./src/errors.js"),a=r("./src/events.js"),i=r("./src/utils/logger.js"),n=function(){function e(e,t,r,o){this.config=e,this.media=t,this.fragmentTracker=r,this.hls=o,this.stallReported=!1}return e.prototype.poll=function(e,t){var r=this.config,s=this.media,a=s.currentTime,n=window.performance.now();if(a!==e)return this.stallReported&&(i.logger.warn("playback not stuck anymore @"+a+", after "+Math.round(n-this.stalled)+"ms"),this.stallReported=!1),this.stalled=null,void(this.nudgeRetry=0);if(!(s.ended||!s.buffered.length||s.readyState>2||s.seeking&&o.BufferHelper.isBuffered(s,a))){var l=n-this.stalled,c=o.BufferHelper.bufferInfo(s,a,r.maxBufferHole);this.stalled?(l>=1e3&&this._reportStall(c.len),this._tryFixBufferStall(c,l)):this.stalled=n}},e.prototype._tryFixBufferStall=function(e,t){var r=this.config,o=this.fragmentTracker,s=this.media.currentTime,a=o.getPartialFragment(s);a&&this._trySkipBufferHole(a),e.len>.5&&t>1e3*r.highBufferWatchdogPeriod&&(this.stalled=null,this._tryNudgeBuffer())},e.prototype._reportStall=function(e){var t=this.hls,r=this.media;this.stallReported||(this.stallReported=!0,i.logger.warn("Playback stalling at @"+r.currentTime+" due to low buffer"),t.trigger(a.default.ERROR,{type:s.ErrorTypes.MEDIA_ERROR,details:s.ErrorDetails.BUFFER_STALLED_ERROR,fatal:!1,buffer:e}))},e.prototype._trySkipBufferHole=function(e){for(var t=this.hls,r=this.media,o=r.currentTime,n=0,l=0;l<r.buffered.length;l++){var c=r.buffered.start(l);if(o>=n&&o<c)return r.currentTime=Math.max(c,r.currentTime+.1),i.logger.warn("skipping hole, adjusting currentTime from "+o+" to "+r.currentTime),this.stalled=null,void t.trigger(a.default.ERROR,{type:s.ErrorTypes.MEDIA_ERROR,details:s.ErrorDetails.BUFFER_SEEK_OVER_HOLE,fatal:!1,reason:"fragment loaded with buffer holes, seeking from "+o+" to "+r.currentTime,frag:e});n=r.buffered.end(l)}},e.prototype._tryNudgeBuffer=function(){var e=this.config,t=this.hls,r=this.media,o=r.currentTime,n=(this.nudgeRetry||0)+1;if(this.nudgeRetry=n,n<e.nudgeMaxRetry){var l=o+n*e.nudgeOffset;i.logger.log("adjust currentTime from "+o+" to "+l),r.currentTime=l,t.trigger(a.default.ERROR,{type:s.ErrorTypes.MEDIA_ERROR,details:s.ErrorDetails.BUFFER_NUDGE_ON_STALL,fatal:!1})}else i.logger.error("still stuck in high buffer @"+o+" after "+e.nudgeMaxRetry+", raise fatal error"),t.trigger(a.default.ERROR,{type:s.ErrorTypes.MEDIA_ERROR,details:s.ErrorDetails.BUFFER_STALLED_ERROR,fatal:!0})},e}();t.default=n},"./src/controller/id3-track-controller.js":function(e,t,r){"use strict";var o,s=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var a=r("./src/events.js"),i=r("./src/event-handler.js"),n=r("./src/demux/id3.js"),l=r("./src/utils/texttrack-utils.js"),c=function(e){function t(t){var r=e.call(this,t,a.default.MEDIA_ATTACHED,a.default.MEDIA_DETACHING,a.default.FRAG_PARSING_METADATA)||this;return r.id3Track=void 0,r.media=void 0,r}return s(t,e),t.prototype.destroy=function(){i.default.prototype.destroy.call(this)},t.prototype.onMediaAttached=function(e){this.media=e.media,this.media},t.prototype.onMediaDetaching=function(){l.clearCurrentCues(this.id3Track),this.id3Track=void 0,this.media=void 0},t.prototype.getID3Track=function(e){for(var t=0;t<e.length;t++){var r=e[t];if("metadata"===r.kind&&"id3"===r.label)return l.sendAddTrackEvent(r,this.media),r}return this.media.addTextTrack("metadata","id3")},t.prototype.onFragParsingMetadata=function(e){var t=e.frag,r=e.samples;this.id3Track||(this.id3Track=this.getID3Track(this.media.textTracks),this.id3Track.mode="hidden");for(var o=window.WebKitDataCue||window.VTTCue||window.TextTrackCue,s=0;s<r.length;s++){var a=n.default.getID3Frames(r[s].data);if(a){var i=r[s].pts,l=s<r.length-1?r[s+1].pts:t.endPTS;i===l&&(l+=1e-4);for(var c=0;c<a.length;c++){var p=a[c];if(!n.default.isTimeStampFrame(p)){var u=new o(i,l,"");u.value=p,this.id3Track.addCue(u)}}}}},t}(i.default);t.default=c},"./src/controller/level-controller.js":function(e,t,r){"use strict";var o,s=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var a,i=r("./src/events.js"),n=r("./src/event-handler.js"),l=r("./src/utils/logger.js"),c=r("./src/errors.js"),p=r("./src/utils/codecs.js"),u=r("./src/controller/level-helper.js"),d=(window.performance,function(e){function t(t){var r=e.call(this,t,i.default.MANIFEST_LOADED,i.default.LEVEL_LOADED,i.default.AUDIO_TRACK_SWITCHED,i.default.FRAG_LOADED,i.default.ERROR)||this;return r.canload=!1,r.currentLevelIndex=null,r.manualLevelIndex=-1,r.timer=null,a=/chrome|firefox/.test(navigator.userAgent.toLowerCase()),r}return s(t,e),t.prototype.onHandlerDestroying=function(){this.clearTimer(),this.manualLevelIndex=-1},t.prototype.clearTimer=function(){null!==this.timer&&(clearTimeout(this.timer),this.timer=null)},t.prototype.startLoad=function(){var e=this._levels;this.canload=!0,this.levelRetryCount=0,e&&e.forEach((function(e){e.loadError=0;var t=e.details;t&&t.live&&(e.details=void 0)})),null!==this.timer&&this.loadLevel()},t.prototype.stopLoad=function(){this.canload=!1},t.prototype.onManifestLoaded=function(e){var t,r=[],o=[],s={},n=null,d=!1,h=!1;if(e.levels.forEach((function(e){var t=e.attrs;e.loadError=0,e.fragmentError=!1,d=d||!!e.videoCodec,h=h||!!e.audioCodec,a&&e.audioCodec&&-1!==e.audioCodec.indexOf("mp4a.40.34")&&(e.audioCodec=void 0),(n=s[e.bitrate])?n.url.push(e.url):(e.url=[e.url],e.urlId=0,s[e.bitrate]=e,r.push(e)),t&&(t.AUDIO&&(h=!0,u.addGroupId(n||e,"audio",t.AUDIO)),t.SUBTITLES&&u.addGroupId(n||e,"text",t.SUBTITLES))})),d&&h&&(r=r.filter((function(e){return!!e.videoCodec}))),r=r.filter((function(e){var t=e.audioCodec,r=e.videoCodec;return(!t||p.isCodecSupportedInMp4(t,"audio"))&&(!r||p.isCodecSupportedInMp4(r,"video"))})),e.audioTracks&&(o=e.audioTracks.filter((function(e){return!e.audioCodec||p.isCodecSupportedInMp4(e.audioCodec,"audio")}))).forEach((function(e,t){e.id=t})),r.length>0){t=r[0].bitrate,r.sort((function(e,t){return e.bitrate-t.bitrate})),this._levels=r;for(var m=0;m<r.length;m++)if(r[m].bitrate===t){this._firstLevel=m,l.logger.log("manifest loaded,"+r.length+" level(s) found, first bitrate:"+t);break}this.hls.trigger(i.default.MANIFEST_PARSED,{levels:r,audioTracks:o,firstLevel:this._firstLevel,stats:e.stats,audio:h,video:d,altAudio:o.some((function(e){return!!e.url}))})}else this.hls.trigger(i.default.ERROR,{type:c.ErrorTypes.MEDIA_ERROR,details:c.ErrorDetails.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:this.hls.url,reason:"no level with compatible codecs found in manifest"})},Object.defineProperty(t.prototype,"levels",{get:function(){return this._levels},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"level",{get:function(){return this.currentLevelIndex},set:function(e){var t=this._levels;t&&(e=Math.min(e,t.length-1),this.currentLevelIndex===e&&t[e].details||this.setLevelInternal(e))},enumerable:!0,configurable:!0}),t.prototype.setLevelInternal=function(e){var t=this._levels,r=this.hls;if(e>=0&&e<t.length){if(this.clearTimer(),this.currentLevelIndex!==e){l.logger.log("switching to level "+e),this.currentLevelIndex=e;var o=t[e];o.level=e,r.trigger(i.default.LEVEL_SWITCHING,o)}var s=t[e],a=s.details;if(!a||a.live){var n=s.urlId;r.trigger(i.default.LEVEL_LOADING,{url:s.url[n],level:e,id:n})}}else r.trigger(i.default.ERROR,{type:c.ErrorTypes.OTHER_ERROR,details:c.ErrorDetails.LEVEL_SWITCH_ERROR,level:e,fatal:!1,reason:"invalid level idx"})},Object.defineProperty(t.prototype,"manualLevel",{get:function(){return this.manualLevelIndex},set:function(e){this.manualLevelIndex=e,void 0===this._startLevel&&(this._startLevel=e),-1!==e&&(this.level=e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"firstLevel",{get:function(){return this._firstLevel},set:function(e){this._firstLevel=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"startLevel",{get:function(){if(void 0===this._startLevel){var e=this.hls.config.startLevel;return void 0!==e?e:this._firstLevel}return this._startLevel},set:function(e){this._startLevel=e},enumerable:!0,configurable:!0}),t.prototype.onError=function(e){if(e.fatal)e.type===c.ErrorTypes.NETWORK_ERROR&&this.clearTimer();else{var t,r=!1,o=!1;switch(e.details){case c.ErrorDetails.FRAG_LOAD_ERROR:case c.ErrorDetails.FRAG_LOAD_TIMEOUT:case c.ErrorDetails.KEY_LOAD_ERROR:case c.ErrorDetails.KEY_LOAD_TIMEOUT:t=e.frag.level,o=!0;break;case c.ErrorDetails.LEVEL_LOAD_ERROR:case c.ErrorDetails.LEVEL_LOAD_TIMEOUT:t=e.context.level,r=!0;break;case c.ErrorDetails.REMUX_ALLOC_ERROR:t=e.level,r=!0}void 0!==t&&this.recoverLevel(e,t,r,o)}},t.prototype.recoverLevel=function(e,t,r,o){var s,a,i,n=this,c=this.hls.config,p=e.details,u=this._levels[t];if(u.loadError++,u.fragmentError=o,r){if(!(this.levelRetryCount+1<=c.levelLoadingMaxRetry))return l.logger.error("level controller, cannot recover from "+p+" error"),this.currentLevelIndex=null,this.clearTimer(),void(e.fatal=!0);a=Math.min(Math.pow(2,this.levelRetryCount)*c.levelLoadingRetryDelay,c.levelLoadingMaxRetryTimeout),this.timer=setTimeout((function(){return n.loadLevel()}),a),e.levelRetry=!0,this.levelRetryCount++,l.logger.warn("level controller, "+p+", retry in "+a+" ms, current retry count is "+this.levelRetryCount)}(r||o)&&((s=u.url.length)>1&&u.loadError<s?(u.urlId=(u.urlId+1)%s,u.details=void 0,l.logger.warn("level controller, "+p+" for level "+t+": switching to redundant URL-id "+u.urlId)):-1===this.manualLevelIndex?(i=0===t?this._levels.length-1:t-1,l.logger.warn("level controller, "+p+": switch to "+i),this.hls.nextAutoLevel=this.currentLevelIndex=i):o&&(l.logger.warn("level controller, "+p+": reload a fragment"),this.currentLevelIndex=null))},t.prototype.onFragLoaded=function(e){var t=e.frag;if(void 0!==t&&"main"===t.type){var r=this._levels[t.level];void 0!==r&&(r.fragmentError=!1,r.loadError=0,this.levelRetryCount=0)}},t.prototype.onLevelLoaded=function(e){var t=this,r=e.level,o=e.details;if(r===this.currentLevelIndex){var s=this._levels[r];if(s.fragmentError||(s.loadError=0,this.levelRetryCount=0),o.live){var a=u.computeReloadInterval(s.details,o,e.stats.trequest);l.logger.log("live playlist, reload in "+Math.round(a)+" ms"),this.timer=setTimeout((function(){return t.loadLevel()}),a)}else this.clearTimer()}},t.prototype.onAudioTrackSwitched=function(e){var t=this.hls.audioTracks[e.id].groupId,r=this.hls.levels[this.currentLevelIndex];if(r&&r.audioGroupIds){for(var o=-1,s=0;s<r.audioGroupIds.length;s++)if(r.audioGroupIds[s]===t){o=s;break}o!==r.urlId&&(r.urlId=o,this.startLoad())}},t.prototype.loadLevel=function(){if(l.logger.debug("call to loadLevel"),null!==this.currentLevelIndex&&this.canload){var e=this._levels[this.currentLevelIndex];if("object"==typeof e&&e.url.length>0){var t=this.currentLevelIndex,r=e.urlId,o=e.url[r];l.logger.log("Attempt loading level index "+t+" with URL-id "+r),this.hls.trigger(i.default.LEVEL_LOADING,{url:o,level:t,id:r})}}},Object.defineProperty(t.prototype,"nextLoadLevel",{get:function(){return-1!==this.manualLevelIndex?this.manualLevelIndex:this.hls.nextAutoLevel},set:function(e){this.level=e,-1===this.manualLevelIndex&&(this.hls.nextAutoLevel=e)},enumerable:!0,configurable:!0}),t}(n.default));t.default=d},"./src/controller/level-helper.js":function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var o=r("./src/utils/logger.js");function s(t,r,s){var a=t[r],i=t[s],n=i.startPTS;e.isFinite(n)?s>r?(a.duration=n-a.start,a.duration<0&&o.logger.warn("negative duration computed for frag "+a.sn+",level "+a.level+", there should be some duration drift between playlist and fragment!")):(i.duration=a.start-n,i.duration<0&&o.logger.warn("negative duration computed for frag "+i.sn+",level "+i.level+", there should be some duration drift between playlist and fragment!")):i.start=s>r?a.start+a.duration:Math.max(a.start-i.duration,0)}function a(t,r,o,a,i,n){var l=o;if(e.isFinite(r.startPTS)){var c=Math.abs(r.startPTS-o);e.isFinite(r.deltaPTS)?r.deltaPTS=Math.max(c,r.deltaPTS):r.deltaPTS=c,l=Math.max(o,r.startPTS),o=Math.min(o,r.startPTS),a=Math.max(a,r.endPTS),i=Math.min(i,r.startDTS),n=Math.max(n,r.endDTS)}var p=o-r.start;r.start=r.startPTS=o,r.maxStartPTS=l,r.endPTS=a,r.startDTS=i,r.endDTS=n,r.duration=a-o;var u,d,h,m=r.sn;if(!t||m<t.startSN||m>t.endSN)return 0;for(u=m-t.startSN,(d=t.fragments)[u]=r,h=u;h>0;h--)s(d,h,h-1);for(h=u;h<d.length-1;h++)s(d,h,h+1);return t.PTSKnown=!0,p}function i(e,t,r){if(e&&t)for(var o=Math.max(e.startSN,t.startSN)-t.startSN,s=Math.min(e.endSN,t.endSN)-t.startSN,a=t.startSN-e.startSN,i=o;i<=s;i++){var n=e.fragments[a+i],l=t.fragments[i];if(!n||!l)break;r(n,l,i)}}function n(e,t){var r=t.startSN-e.startSN,o=e.fragments,s=t.fragments;if(!(r<0||r>o.length))for(var a=0;a<s.length;a++)s[a].start+=o[r].start}t.addGroupId=function(e,t,r){switch(t){case"audio":e.audioGroupIds||(e.audioGroupIds=[]),e.audioGroupIds.push(r);break;case"text":e.textGroupIds||(e.textGroupIds=[]),e.textGroupIds.push(r)}},t.updatePTS=s,t.updateFragPTSDTS=a,t.mergeDetails=function(t,r){r.initSegment&&t.initSegment&&(r.initSegment=t.initSegment);var s,l=0;if(i(t,r,(function(t,o){l=t.cc-o.cc,e.isFinite(t.startPTS)&&(o.start=o.startPTS=t.startPTS,o.endPTS=t.endPTS,o.duration=t.duration,o.backtracked=t.backtracked,o.dropped=t.dropped,s=o),r.PTSKnown=!0})),r.PTSKnown){if(l){o.logger.log("discontinuity sliding from playlist, take drift into account");for(var c=r.fragments,p=0;p<c.length;p++)c[p].cc+=l}s?a(r,s,s.startPTS,s.endPTS,s.startDTS,s.endDTS):n(t,r),r.PTSKnown=t.PTSKnown}},t.mergeSubtitlePlaylists=function(e,t,r){void 0===r&&(r=0);var o=-1;i(e,t,(function(e,t,r){t.start=e.start,o=r}));var s=t.fragments;if(o<0)s.forEach((function(e){e.start+=r}));else for(var a=o+1;a<s.length;a++)s[a].start=s[a-1].start+s[a-1].duration},t.mapFragmentIntersection=i,t.adjustSliding=n,t.computeReloadInterval=function(e,t,r){var o=1e3*(t.averagetargetduration?t.averagetargetduration:t.targetduration),s=o/2;return e&&t.endSN===e.endSN&&(o=s),r&&(o=Math.max(s,o-(window.performance.now()-r))),Math.round(o)}}).call(this,r("./src/polyfills/number.js").Number)},"./src/controller/stream-controller.js":function(e,t,r){"use strict";(function(e){var o,s=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var a=r("./src/utils/binary-search.js"),i=r("./src/utils/buffer-helper.js"),n=r("./src/demux/demuxer.js"),l=r("./src/events.js"),c=r("./src/controller/fragment-tracker.js"),p=r("./src/loader/fragment.js"),u=r("./src/loader/playlist-loader.js"),d=r("./src/controller/level-helper.js"),h=r("./src/utils/time-ranges.js"),m=r("./src/errors.js"),b=r("./src/utils/logger.js"),f=r("./src/utils/discontinuities.js"),y=r("./src/controller/fragment-finders.js"),g=r("./src/controller/gap-controller.js"),v=r("./src/controller/base-stream-controller.js"),w=function(t){function r(e,r){var o=t.call(this,e,l.default.MEDIA_ATTACHED,l.default.MEDIA_DETACHING,l.default.MANIFEST_LOADING,l.default.MANIFEST_PARSED,l.default.LEVEL_LOADED,l.default.KEY_LOADED,l.default.FRAG_LOADED,l.default.FRAG_LOAD_EMERGENCY_ABORTED,l.default.FRAG_PARSING_INIT_SEGMENT,l.default.FRAG_PARSING_DATA,l.default.FRAG_PARSED,l.default.ERROR,l.default.AUDIO_TRACK_SWITCHING,l.default.AUDIO_TRACK_SWITCHED,l.default.BUFFER_CREATED,l.default.BUFFER_APPENDED,l.default.BUFFER_FLUSHED)||this;return o.fragmentTracker=r,o.config=e.config,o.audioCodecSwap=!1,o._state=v.State.STOPPED,o.stallReported=!1,o.gapController=null,o}return s(r,t),r.prototype.startLoad=function(e){if(this.levels){var t=this.lastCurrentTime,r=this.hls;if(this.stopLoad(),this.setInterval(100),this.level=-1,this.fragLoadError=0,!this.startFragRequested){var o=r.startLevel;-1===o&&(o=0,this.bitrateTest=!0),this.level=r.nextLoadLevel=o,this.loadedmetadata=!1}t>0&&-1===e&&(b.logger.log("override startPosition with lastCurrentTime @"+t.toFixed(3)),e=t),this.state=v.State.IDLE,this.nextLoadPosition=this.startPosition=this.lastCurrentTime=e,this.tick()}else this.forceStartLoad=!0,this.state=v.State.STOPPED},r.prototype.stopLoad=function(){this.forceStartLoad=!1,t.prototype.stopLoad.call(this)},r.prototype.doTick=function(){switch(this.state){case v.State.BUFFER_FLUSHING:this.fragLoadError=0;break;case v.State.IDLE:this._doTickIdle();break;case v.State.WAITING_LEVEL:var e=this.levels[this.level];e&&e.details&&(this.state=v.State.IDLE);break;case v.State.FRAG_LOADING_WAITING_RETRY:var t=window.performance.now(),r=this.retryDate;(!r||t>=r||this.media&&this.media.seeking)&&(b.logger.log("mediaController: retryDate reached, switch back to IDLE state"),this.state=v.State.IDLE);break;case v.State.ERROR:case v.State.STOPPED:case v.State.FRAG_LOADING:case v.State.PARSING:case v.State.PARSED:case v.State.ENDED:}this._checkBuffer(),this._checkFragmentChanged()},r.prototype._doTickIdle=function(){var e=this.hls,t=e.config,r=this.media;if(void 0!==this.levelLastLoaded&&(r||!this.startFragRequested&&t.startFragPrefetch)){var o;o=this.loadedmetadata?r.currentTime:this.nextLoadPosition;var s=e.nextLoadLevel,a=this.levels[s];if(a){var n,c=a.bitrate;n=c?Math.max(8*t.maxBufferSize/c,t.maxBufferLength):t.maxBufferLength,n=Math.min(n,t.maxMaxBufferLength);var p=i.BufferHelper.bufferInfo(this.mediaBuffer?this.mediaBuffer:r,o,t.maxBufferHole),u=p.len;if(!(u>=n)){b.logger.trace("buffer length of "+u.toFixed(3)+" is below max of "+n.toFixed(3)+". checking for more payload ..."),this.level=e.nextLoadLevel=s;var d=a.details;if(!d||d.live&&this.levelLastLoaded!==s)this.state=v.State.WAITING_LEVEL;else{if(this._streamEnded(p,d)){var h={};return this.altAudio&&(h.type="video"),this.hls.trigger(l.default.BUFFER_EOS,h),void(this.state=v.State.ENDED)}this._fetchPayloadOrEos(o,p,d)}}}}},r.prototype._fetchPayloadOrEos=function(e,t,r){var o=this.fragPrevious,s=this.level,a=r.fragments,i=a.length;if(0!==i){var n,l=a[0].start,c=a[i-1].start+a[i-1].duration,p=t.end;if(r.initSegment&&!r.initSegment.data)n=r.initSegment;else if(r.live){var u=this.config.initialLiveManifestSize;if(i<u)return void b.logger.warn("Can not start playback of a level, reason: not enough fragments "+i+" < "+u);if(null===(n=this._ensureFragmentAtLivePoint(r,p,l,c,o,a,i)))return}else p<l&&(n=a[0]);n||(n=this._findFragment(l,o,i,a,p,c,r)),n&&(n.encrypted?(b.logger.log("Loading key for "+n.sn+" of ["+r.startSN+" ,"+r.endSN+"],level "+s),this._loadKey(n)):(b.logger.log("Loading "+n.sn+" of ["+r.startSN+" ,"+r.endSN+"],level "+s+", currentTime:"+e.toFixed(3)+",bufferEnd:"+p.toFixed(3)),this._loadFragment(n)))}},r.prototype._ensureFragmentAtLivePoint=function(e,t,r,o,s,i,n){var l,c=this.hls.config,p=this.media,u=void 0!==c.liveMaxLatencyDuration?c.liveMaxLatencyDuration:c.liveMaxLatencyDurationCount*e.targetduration;if(t<Math.max(r-c.maxFragLookUpTolerance,o-u)){var d=this.liveSyncPosition=this.computeLivePosition(r,e);b.logger.log("buffer end: "+t.toFixed(3)+" is located too far from the end of live sliding playlist, reset currentTime to : "+d.toFixed(3)),t=d,p&&p.readyState&&p.duration>d&&(p.currentTime=d),this.nextLoadPosition=d}if(e.PTSKnown&&t>o&&p&&p.readyState)return null;if(this.startFragRequested&&!e.PTSKnown){if(s)if(e.hasProgramDateTime)b.logger.log("live playlist, switching playlist, load frag with same PDT: "+s.programDateTime),l=y.findFragmentByPDT(i,s.endProgramDateTime,c.maxFragLookUpTolerance);else{var h=s.sn+1;if(h>=e.startSN&&h<=e.endSN){var m=i[h-e.startSN];s.cc===m.cc&&(l=m,b.logger.log("live playlist, switching playlist, load frag with next SN: "+l.sn))}l||(l=a.default.search(i,(function(e){return s.cc-e.cc})))&&b.logger.log("live playlist, switching playlist, load frag with same CC: "+l.sn)}l||(l=i[Math.min(n-1,Math.round(n/2))],b.logger.log("live playlist, switching playlist, unknown, load middle frag : "+l.sn))}return l},r.prototype._findFragment=function(e,t,r,o,s,a,i){var n,l=this.hls.config;if(s<a){var c=s>a-l.maxFragLookUpTolerance?0:l.maxFragLookUpTolerance;n=y.findFragmentByPTS(t,o,s,c)}else n=o[r-1];if(n){var p=n.sn-i.startSN,u=t&&n.level===t.level,d=o[p-1],h=o[p+1];if(t&&n.sn===t.sn)if(u&&!n.backtracked)if(n.sn<i.endSN){var m=t.deltaPTS;m&&m>l.maxBufferHole&&t.dropped&&p?(n=d,b.logger.warn("SN just loaded, with large PTS gap between audio and video, maybe frag is not starting with a keyframe ? load previous one to try to overcome this")):(n=h,b.logger.log("SN just loaded, load next one: "+n.sn,n))}else n=null;else n.backtracked&&(h&&h.backtracked?(b.logger.warn("Already backtracked from fragment "+h.sn+", will not backtrack to fragment "+n.sn+". Loading fragment "+h.sn),n=h):(b.logger.warn("Loaded fragment with dropped frames, backtracking 1 segment to find a keyframe"),n.dropped=0,d?(n=d).backtracked=!0:p&&(n=null)))}return n},r.prototype._loadKey=function(e){this.state=v.State.KEY_LOADING,this.hls.trigger(l.default.KEY_LOADING,{frag:e})},r.prototype._loadFragment=function(t){var r=this.fragmentTracker.getState(t);this.fragCurrent=t,this.startFragRequested=!0,e.isFinite(t.sn)&&!t.bitrateTest&&(this.nextLoadPosition=t.start+t.duration),t.backtracked||r===c.FragmentState.NOT_LOADED||r===c.FragmentState.PARTIAL?(t.autoLevel=this.hls.autoLevelEnabled,t.bitrateTest=this.bitrateTest,this.hls.trigger(l.default.FRAG_LOADING,{frag:t}),this.demuxer||(this.demuxer=new n.default(this.hls,"main")),this.state=v.State.FRAG_LOADING):r===c.FragmentState.APPENDING&&this._reduceMaxBufferLength(t.duration)&&this.fragmentTracker.removeFragment(t)},Object.defineProperty(r.prototype,"state",{get:function(){return this._state},set:function(e){if(this.state!==e){var t=this.state;this._state=e,b.logger.log("main stream:"+t+"->"+e),this.hls.trigger(l.default.STREAM_STATE_TRANSITION,{previousState:t,nextState:e})}},enumerable:!0,configurable:!0}),r.prototype.getBufferedFrag=function(e){return this.fragmentTracker.getBufferedFrag(e,u.default.LevelType.MAIN)},Object.defineProperty(r.prototype,"currentLevel",{get:function(){var e=this.media;if(e){var t=this.getBufferedFrag(e.currentTime);if(t)return t.level}return-1},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"nextBufferedFrag",{get:function(){var e=this.media;return e?this.followingBufferedFrag(this.getBufferedFrag(e.currentTime)):null},enumerable:!0,configurable:!0}),r.prototype.followingBufferedFrag=function(e){return e?this.getBufferedFrag(e.endPTS+.5):null},Object.defineProperty(r.prototype,"nextLevel",{get:function(){var e=this.nextBufferedFrag;return e?e.level:-1},enumerable:!0,configurable:!0}),r.prototype._checkFragmentChanged=function(){var e,t,r=this.media;if(r&&r.readyState&&!1===r.seeking&&((t=r.currentTime)>this.lastCurrentTime&&(this.lastCurrentTime=t),i.BufferHelper.isBuffered(r,t)?e=this.getBufferedFrag(t):i.BufferHelper.isBuffered(r,t+.1)&&(e=this.getBufferedFrag(t+.1)),e)){var o=e;if(o!==this.fragPlaying){this.hls.trigger(l.default.FRAG_CHANGED,{frag:o});var s=o.level;this.fragPlaying&&this.fragPlaying.level===s||this.hls.trigger(l.default.LEVEL_SWITCHED,{level:s}),this.fragPlaying=o}}},r.prototype.immediateLevelSwitch=function(){if(b.logger.log("immediateLevelSwitch"),!this.immediateSwitch){this.immediateSwitch=!0;var t=this.media,r=void 0;t?(r=t.paused,t.pause()):r=!0,this.previouslyPaused=r}var o=this.fragCurrent;o&&o.loader&&o.loader.abort(),this.fragCurrent=null,this.flushMainBuffer(0,e.POSITIVE_INFINITY)},r.prototype.immediateLevelSwitchEnd=function(){var e=this.media;e&&e.buffered.length&&(this.immediateSwitch=!1,i.BufferHelper.isBuffered(e,e.currentTime)&&(e.currentTime-=1e-4),this.previouslyPaused||e.play())},r.prototype.nextLevelSwitch=function(){var t=this.media;if(t&&t.readyState){var r,o=void 0,s=void 0;if((r=this.getBufferedFrag(t.currentTime))&&r.startPTS>1&&this.flushMainBuffer(0,r.startPTS-1),t.paused)o=0;else{var a=this.hls.nextLoadLevel,i=this.levels[a],n=this.fragLastKbps;o=n&&this.fragCurrent?this.fragCurrent.duration*i.bitrate/(1e3*n)+1:0}if((s=this.getBufferedFrag(t.currentTime+o))&&(s=this.followingBufferedFrag(s))){var l=this.fragCurrent;l&&l.loader&&l.loader.abort(),this.fragCurrent=null,this.flushMainBuffer(s.maxStartPTS,e.POSITIVE_INFINITY)}}},r.prototype.flushMainBuffer=function(e,t){this.state=v.State.BUFFER_FLUSHING;var r={startOffset:e,endOffset:t};this.altAudio&&(r.type="video"),this.hls.trigger(l.default.BUFFER_FLUSHING,r)},r.prototype.onMediaAttached=function(e){var t=this.media=this.mediaBuffer=e.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvseeked=this.onMediaSeeked.bind(this),this.onvended=this.onMediaEnded.bind(this),t.addEventListener("seeking",this.onvseeking),t.addEventListener("seeked",this.onvseeked),t.addEventListener("ended",this.onvended);var r=this.config;this.levels&&r.autoStartLoad&&this.hls.startLoad(r.startPosition),this.gapController=new g.default(r,t,this.fragmentTracker,this.hls)},r.prototype.onMediaDetaching=function(){var e=this.media;e&&e.ended&&(b.logger.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0);var t=this.levels;t&&t.forEach((function(e){e.details&&e.details.fragments.forEach((function(e){e.backtracked=void 0}))})),e&&(e.removeEventListener("seeking",this.onvseeking),e.removeEventListener("seeked",this.onvseeked),e.removeEventListener("ended",this.onvended),this.onvseeking=this.onvseeked=this.onvended=null),this.media=this.mediaBuffer=null,this.loadedmetadata=!1,this.stopLoad()},r.prototype.onMediaSeeked=function(){var t=this.media,r=t?t.currentTime:void 0;e.isFinite(r)&&b.logger.log("media seeked to "+r.toFixed(3)),this.tick()},r.prototype.onManifestLoading=function(){b.logger.log("trigger BUFFER_RESET"),this.hls.trigger(l.default.BUFFER_RESET),this.fragmentTracker.removeAllFragments(),this.stalled=!1,this.startPosition=this.lastCurrentTime=0},r.prototype.onManifestParsed=function(e){var t,r=!1,o=!1;e.levels.forEach((function(e){(t=e.audioCodec)&&(-1!==t.indexOf("mp4a.40.2")&&(r=!0),-1!==t.indexOf("mp4a.40.5")&&(o=!0))})),this.audioCodecSwitch=r&&o,this.audioCodecSwitch&&b.logger.log("both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.levels=e.levels,this.startFragRequested=!1;var s=this.config;(s.autoStartLoad||this.forceStartLoad)&&this.hls.startLoad(s.startPosition)},r.prototype.onLevelLoaded=function(t){var r=t.details,o=t.level,s=this.levels[this.levelLastLoaded],a=this.levels[o],i=r.totalduration,n=0;if(b.logger.log("level "+o+" loaded ["+r.startSN+","+r.endSN+"],duration:"+i),r.live){var c=a.details;c&&r.fragments.length>0?(d.mergeDetails(c,r),n=r.fragments[0].start,this.liveSyncPosition=this.computeLivePosition(n,c),r.PTSKnown&&e.isFinite(n)?b.logger.log("live playlist sliding:"+n.toFixed(3)):(b.logger.log("live playlist - outdated PTS, unknown sliding"),f.alignStream(this.fragPrevious,s,r))):(b.logger.log("live playlist - first load, unknown sliding"),r.PTSKnown=!1,f.alignStream(this.fragPrevious,s,r))}else r.PTSKnown=!1;if(a.details=r,this.levelLastLoaded=o,this.hls.trigger(l.default.LEVEL_UPDATED,{details:r,level:o}),!1===this.startFragRequested){if(-1===this.startPosition||-1===this.lastCurrentTime){var p=r.startTimeOffset;e.isFinite(p)?(p<0&&(b.logger.log("negative start time offset "+p+", count from end of last fragment"),p=n+i+p),b.logger.log("start time offset found in playlist, adjust startPosition to "+p),this.startPosition=p):r.live?(this.startPosition=this.computeLivePosition(n,r),b.logger.log("configure startPosition to "+this.startPosition)):this.startPosition=0,this.lastCurrentTime=this.startPosition}this.nextLoadPosition=this.startPosition}this.state===v.State.WAITING_LEVEL&&(this.state=v.State.IDLE),this.tick()},r.prototype.onKeyLoaded=function(){this.state===v.State.KEY_LOADING&&(this.state=v.State.IDLE,this.tick())},r.prototype.onFragLoaded=function(e){var t=this.fragCurrent,r=this.hls,o=this.levels,s=this.media,a=e.frag;if(this.state===v.State.FRAG_LOADING&&t&&"main"===a.type&&a.level===t.level&&a.sn===t.sn){var i=e.stats,c=o[t.level],p=c.details;if(this.bitrateTest=!1,this.stats=i,b.logger.log("Loaded "+t.sn+" of ["+p.startSN+" ,"+p.endSN+"],level "+t.level),a.bitrateTest&&r.nextLoadLevel)this.state=v.State.IDLE,this.startFragRequested=!1,i.tparsed=i.tbuffered=window.performance.now(),r.trigger(l.default.FRAG_BUFFERED,{stats:i,frag:t,id:"main"}),this.tick();else if("initSegment"===a.sn)this.state=v.State.IDLE,i.tparsed=i.tbuffered=window.performance.now(),p.initSegment.data=e.payload,r.trigger(l.default.FRAG_BUFFERED,{stats:i,frag:t,id:"main"}),this.tick();else{b.logger.log("Parsing "+t.sn+" of ["+p.startSN+" ,"+p.endSN+"],level "+t.level+", cc "+t.cc),this.state=v.State.PARSING,this.pendingBuffering=!0,this.appended=!1,a.bitrateTest&&(a.bitrateTest=!1,this.fragmentTracker.onFragLoaded({frag:a}));var u=!(s&&s.seeking)&&(p.PTSKnown||!p.live),d=p.initSegment?p.initSegment.data:[],h=this._getAudioCodec(c);(this.demuxer=this.demuxer||new n.default(this.hls,"main")).push(e.payload,d,h,c.videoCodec,t,p.totalduration,u)}}this.fragLoadError=0},r.prototype.onFragParsingInitSegment=function(e){var t=this.fragCurrent,r=e.frag;if(t&&"main"===e.id&&r.sn===t.sn&&r.level===t.level&&this.state===v.State.PARSING){var o=e.tracks,s=void 0,a=void 0;if(o.audio&&this.altAudio&&delete o.audio,a=o.audio){var i=this.levels[this.level].audioCodec,n=navigator.userAgent.toLowerCase();i&&this.audioCodecSwap&&(b.logger.log("swapping playlist audio codec"),i=-1!==i.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5"),this.audioCodecSwitch&&1!==a.metadata.channelCount&&-1===n.indexOf("firefox")&&(i="mp4a.40.5"),-1!==n.indexOf("android")&&"audio/mpeg"!==a.container&&(i="mp4a.40.2",b.logger.log("Android: force audio codec to "+i)),a.levelCodec=i,a.id=e.id}for(s in(a=o.video)&&(a.levelCodec=this.levels[this.level].videoCodec,a.id=e.id),this.hls.trigger(l.default.BUFFER_CODECS,o),o){a=o[s],b.logger.log("main track:"+s+",container:"+a.container+",codecs[level/parsed]=["+a.levelCodec+"/"+a.codec+"]");var c=a.initSegment;c&&(this.appended=!0,this.pendingBuffering=!0,this.hls.trigger(l.default.BUFFER_APPENDING,{type:s,data:c,parent:"main",content:"initSegment"}))}this.tick()}},r.prototype.onFragParsingData=function(t){var r=this,o=this.fragCurrent,s=t.frag;if(o&&"main"===t.id&&s.sn===o.sn&&s.level===o.level&&("audio"!==t.type||!this.altAudio)&&this.state===v.State.PARSING){var a=this.levels[this.level],i=o;if(e.isFinite(t.endPTS)||(t.endPTS=t.startPTS+o.duration,t.endDTS=t.startDTS+o.duration),!0===t.hasAudio&&i.addElementaryStream(p.default.ElementaryStreamTypes.AUDIO),!0===t.hasVideo&&i.addElementaryStream(p.default.ElementaryStreamTypes.VIDEO),b.logger.log("Parsed "+t.type+",PTS:["+t.startPTS.toFixed(3)+","+t.endPTS.toFixed(3)+"],DTS:["+t.startDTS.toFixed(3)+"/"+t.endDTS.toFixed(3)+"],nb:"+t.nb+",dropped:"+(t.dropped||0)),"video"===t.type)if(i.dropped=t.dropped,i.dropped)if(i.backtracked)b.logger.warn("Already backtracked on this fragment, appending with the gap",i.sn);else{var n=a.details;if(!n||i.sn!==n.startSN)return b.logger.warn("missing video frame(s), backtracking fragment",i.sn),this.fragmentTracker.removeFragment(i),i.backtracked=!0,this.nextLoadPosition=t.startPTS,this.state=v.State.IDLE,this.fragPrevious=i,void this.tick();b.logger.warn("missing video frame(s) on first frag, appending with gap",i.sn)}else i.backtracked=!1;var c=d.updateFragPTSDTS(a.details,i,t.startPTS,t.endPTS,t.startDTS,t.endDTS),u=this.hls;u.trigger(l.default.LEVEL_PTS_UPDATED,{details:a.details,level:this.level,drift:c,type:t.type,start:t.startPTS,end:t.endPTS}),[t.data1,t.data2].forEach((function(e){e&&e.length&&r.state===v.State.PARSING&&(r.appended=!0,r.pendingBuffering=!0,u.trigger(l.default.BUFFER_APPENDING,{type:t.type,data:e,parent:"main",content:"data"}))})),this.tick()}},r.prototype.onFragParsed=function(e){var t=this.fragCurrent,r=e.frag;t&&"main"===e.id&&r.sn===t.sn&&r.level===t.level&&this.state===v.State.PARSING&&(this.stats.tparsed=window.performance.now(),this.state=v.State.PARSED,this._checkAppendedParsed())},r.prototype.onAudioTrackSwitching=function(t){var r=!!t.url,o=t.id;if(!r){if(this.mediaBuffer!==this.media){b.logger.log("switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media;var s=this.fragCurrent;s.loader&&(b.logger.log("switching to main audio track, cancel main fragment load"),s.loader.abort()),this.fragCurrent=null,this.fragPrevious=null,this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.state=v.State.IDLE}var a=this.hls;a.trigger(l.default.BUFFER_FLUSHING,{startOffset:0,endOffset:e.POSITIVE_INFINITY,type:"audio"}),a.trigger(l.default.AUDIO_TRACK_SWITCHED,{id:o}),this.altAudio=!1}},r.prototype.onAudioTrackSwitched=function(e){var t=e.id,r=!!this.hls.audioTracks[t].url;if(r){var o=this.videoBuffer;o&&this.mediaBuffer!==o&&(b.logger.log("switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=o)}this.altAudio=r,this.tick()},r.prototype.onBufferCreated=function(e){var t,r,o=e.tracks,s=!1;for(var a in o){var i=o[a];"main"===i.id?(r=a,t=i,"video"===a&&(this.videoBuffer=o[a].buffer)):s=!0}s&&t?(b.logger.log("alternate track found, use "+r+".buffered to schedule main fragment loading"),this.mediaBuffer=t.buffer):this.mediaBuffer=this.media},r.prototype.onBufferAppended=function(e){if("main"===e.parent){var t=this.state;t!==v.State.PARSING&&t!==v.State.PARSED||(this.pendingBuffering=e.pending>0,this._checkAppendedParsed())}},r.prototype._checkAppendedParsed=function(){if(!(this.state!==v.State.PARSED||this.appended&&this.pendingBuffering)){var e=this.fragCurrent;if(e){var t=this.mediaBuffer?this.mediaBuffer:this.media;b.logger.log("main buffered : "+h.default.toString(t.buffered)),this.fragPrevious=e;var r=this.stats;r.tbuffered=window.performance.now(),this.fragLastKbps=Math.round(8*r.total/(r.tbuffered-r.tfirst)),this.hls.trigger(l.default.FRAG_BUFFERED,{stats:r,frag:e,id:"main"}),this.state=v.State.IDLE}this.tick()}},r.prototype.onError=function(t){var r=t.frag||this.fragCurrent;if(!r||"main"===r.type){var o=!!this.media&&i.BufferHelper.isBuffered(this.media,this.media.currentTime)&&i.BufferHelper.isBuffered(this.media,this.media.currentTime+.5);switch(t.details){case m.ErrorDetails.FRAG_LOAD_ERROR:case m.ErrorDetails.FRAG_LOAD_TIMEOUT:case m.ErrorDetails.KEY_LOAD_ERROR:case m.ErrorDetails.KEY_LOAD_TIMEOUT:if(!t.fatal)if(this.fragLoadError+1<=this.config.fragLoadingMaxRetry){var s=Math.min(Math.pow(2,this.fragLoadError)*this.config.fragLoadingRetryDelay,this.config.fragLoadingMaxRetryTimeout);b.logger.warn("mediaController: frag loading failed, retry in "+s+" ms"),this.retryDate=window.performance.now()+s,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.fragLoadError++,this.state=v.State.FRAG_LOADING_WAITING_RETRY}else b.logger.error("mediaController: "+t.details+" reaches max retry, redispatch as fatal ..."),t.fatal=!0,this.state=v.State.ERROR;break;case m.ErrorDetails.LEVEL_LOAD_ERROR:case m.ErrorDetails.LEVEL_LOAD_TIMEOUT:this.state!==v.State.ERROR&&(t.fatal?(this.state=v.State.ERROR,b.logger.warn("streamController: "+t.details+",switch to "+this.state+" state ...")):t.levelRetry||this.state!==v.State.WAITING_LEVEL||(this.state=v.State.IDLE));break;case m.ErrorDetails.BUFFER_FULL_ERROR:"main"!==t.parent||this.state!==v.State.PARSING&&this.state!==v.State.PARSED||(o?(this._reduceMaxBufferLength(this.config.maxBufferLength),this.state=v.State.IDLE):(b.logger.warn("buffer full error also media.currentTime is not buffered, flush everything"),this.fragCurrent=null,this.flushMainBuffer(0,e.POSITIVE_INFINITY)))}}},r.prototype._reduceMaxBufferLength=function(e){var t=this.config;return t.maxMaxBufferLength>=e&&(t.maxMaxBufferLength/=2,b.logger.warn("main:reduce max buffer length to "+t.maxMaxBufferLength+"s"),!0)},r.prototype._checkBuffer=function(){var e=this.media;if(e&&0!==e.readyState){var t=(this.mediaBuffer?this.mediaBuffer:e).buffered;!this.loadedmetadata&&t.length?(this.loadedmetadata=!0,this._seekToStartPos()):this.immediateSwitch?this.immediateLevelSwitchEnd():this.gapController.poll(this.lastCurrentTime,t)}},r.prototype.onFragLoadEmergencyAborted=function(){this.state=v.State.IDLE,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.tick()},r.prototype.onBufferFlushed=function(){var e=this.mediaBuffer?this.mediaBuffer:this.media;e&&this.fragmentTracker.detectEvictedFragments(p.default.ElementaryStreamTypes.VIDEO,e.buffered),this.state=v.State.IDLE,this.fragPrevious=null},r.prototype.swapAudioCodec=function(){this.audioCodecSwap=!this.audioCodecSwap},r.prototype.computeLivePosition=function(e,t){var r=void 0!==this.config.liveSyncDuration?this.config.liveSyncDuration:this.config.liveSyncDurationCount*t.targetduration;return e+Math.max(0,t.totalduration-r)},r.prototype._seekToStartPos=function(){var e=this.media,t=e.currentTime,r=e.seeking?t:this.startPosition;t!==r&&(b.logger.log("target start position not buffered, seek to buffered.start(0) "+r+" from current time "+t+" "),e.currentTime=r)},r.prototype._getAudioCodec=function(e){var t=this.config.defaultAudioCodec||e.audioCodec;return this.audioCodecSwap&&(b.logger.log("swapping playlist audio codec"),t&&(t=-1!==t.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5")),t},Object.defineProperty(r.prototype,"liveSyncPosition",{get:function(){return this._liveSyncPosition},set:function(e){this._liveSyncPosition=e},enumerable:!0,configurable:!0}),r}(v.default);t.default=w}).call(this,r("./src/polyfills/number.js").Number)},"./src/controller/subtitle-stream-controller.js":function(e,t,r){"use strict";var o,s=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var a=r("./src/events.js"),i=r("./src/utils/logger.js"),n=r("./src/crypt/decrypter.js"),l=r("./src/utils/buffer-helper.js"),c=r("./src/controller/fragment-finders.js"),p=r("./src/controller/fragment-tracker.js"),u=r("./src/controller/base-stream-controller.js"),d=r("./src/controller/level-helper.js"),h=window.performance,m=function(e){function t(t,r){var o=e.call(this,t,a.default.MEDIA_ATTACHED,a.default.MEDIA_DETACHING,a.default.ERROR,a.default.KEY_LOADED,a.default.FRAG_LOADED,a.default.SUBTITLE_TRACKS_UPDATED,a.default.SUBTITLE_TRACK_SWITCH,a.default.SUBTITLE_TRACK_LOADED,a.default.SUBTITLE_FRAG_PROCESSED,a.default.LEVEL_UPDATED)||this;return o.fragmentTracker=r,o.config=t.config,o.state=u.State.STOPPED,o.tracks=[],o.tracksBuffered=[],o.currentTrackId=-1,o.decrypter=new n.default(t,t.config),o.lastAVStart=0,o._onMediaSeeking=o.onMediaSeeking.bind(o),o}return s(t,e),t.prototype.onSubtitleFragProcessed=function(e){var t=e.frag,r=e.success;if(this.fragPrevious=t,this.state=u.State.IDLE,r){var o=this.tracksBuffered[this.currentTrackId];if(o){for(var s,a=t.start,i=0;i<o.length;i++)if(a>=o[i].start&&a<=o[i].end){s=o[i];break}var n=t.start+t.duration;s?s.end=n:(s={start:a,end:n},o.push(s))}}},t.prototype.onMediaAttached=function(e){var t=e.media;this.media=t,t.addEventListener("seeking",this._onMediaSeeking),this.state=u.State.IDLE},t.prototype.onMediaDetaching=function(){this.media.removeEventListener("seeking",this._onMediaSeeking),this.media=null,this.state=u.State.STOPPED},t.prototype.onError=function(e){var t=e.frag;t&&"subtitle"===t.type&&(this.state=u.State.IDLE)},t.prototype.onSubtitleTracksUpdated=function(e){var t=this;i.logger.log("subtitle tracks updated"),this.tracksBuffered=[],this.tracks=e.subtitleTracks,this.tracks.forEach((function(e){t.tracksBuffered[e.id]=[]}))},t.prototype.onSubtitleTrackSwitch=function(e){if(this.currentTrackId=e.id,this.tracks&&-1!==this.currentTrackId){var t=this.tracks[this.currentTrackId];t&&t.details&&this.setInterval(500)}else this.clearInterval()},t.prototype.onSubtitleTrackLoaded=function(e){var t=e.id,r=e.details,o=this.currentTrackId,s=this.tracks,a=s[o];t>=s.length||t!==o||!a||(r.live&&d.mergeSubtitlePlaylists(a.details,r,this.lastAVStart),a.details=r,this.setInterval(500))},t.prototype.onKeyLoaded=function(){this.state===u.State.KEY_LOADING&&(this.state=u.State.IDLE)},t.prototype.onFragLoaded=function(e){var t=this.fragCurrent,r=e.frag.decryptdata,o=e.frag,s=this.hls;if(this.state===u.State.FRAG_LOADING&&t&&"subtitle"===e.frag.type&&t.sn===e.frag.sn&&e.payload.byteLength>0&&r&&r.key&&"AES-128"===r.method){var i=h.now();this.decrypter.decrypt(e.payload,r.key.buffer,r.iv.buffer,(function(e){var t=h.now();s.trigger(a.default.FRAG_DECRYPTED,{frag:o,payload:e,stats:{tstart:i,tdecrypt:t}})}))}},t.prototype.onLevelUpdated=function(e){var t=e.details.fragments;this.lastAVStart=t.length?t[0].start:0},t.prototype.doTick=function(){if(this.media)switch(this.state){case u.State.IDLE:var e=this,t=e.config,r=e.currentTrackId,o=e.fragmentTracker,s=e.media,n=e.tracks;if(!n||!n[r]||!n[r].details)break;var d=t.maxBufferHole,h=t.maxFragLookUpTolerance,m=Math.min(t.maxBufferLength,t.maxMaxBufferLength),b=l.BufferHelper.bufferedInfo(this._getBuffered(),s.currentTime,d),f=b.end,y=b.len,g=n[r].details,v=g.fragments,w=v.length,k=v[w-1].start+v[w-1].duration;if(y>m)return;var _=void 0,E=this.fragPrevious;f<k?(E&&g.hasProgramDateTime&&(_=c.findFragmentByPDT(v,E.endProgramDateTime,h)),_||(_=c.findFragmentByPTS(E,v,f,h))):_=v[w-1],_&&_.encrypted?(i.logger.log("Loading key for "+_.sn),this.state=u.State.KEY_LOADING,this.hls.trigger(a.default.KEY_LOADING,{frag:_})):_&&o.getState(_)===p.FragmentState.NOT_LOADED&&(this.fragCurrent=_,this.state=u.State.FRAG_LOADING,this.hls.trigger(a.default.FRAG_LOADING,{frag:_}))}else this.state=u.State.IDLE},t.prototype.stopLoad=function(){this.lastAVStart=0,e.prototype.stopLoad.call(this)},t.prototype._getBuffered=function(){return this.tracksBuffered[this.currentTrackId]||[]},t.prototype.onMediaSeeking=function(){this.fragPrevious=null},t}(u.default);t.SubtitleStreamController=m},"./src/controller/subtitle-track-controller.js":function(e,t,r){"use strict";(function(e){var o,s=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var a=r("./src/events.js"),i=r("./src/event-handler.js"),n=r("./src/utils/logger.js"),l=r("./src/controller/level-helper.js"),c=function(t){function r(e){var r=t.call(this,e,a.default.MEDIA_ATTACHED,a.default.MEDIA_DETACHING,a.default.MANIFEST_LOADED,a.default.SUBTITLE_TRACK_LOADED)||this;return r.tracks=[],r.trackId=-1,r.media=null,r.stopped=!0,r.subtitleDisplay=!0,r}return s(r,t),r.prototype.destroy=function(){i.default.prototype.destroy.call(this)},r.prototype.onMediaAttached=function(e){var t=this;this.media=e.media,this.media&&(this.queuedDefaultTrack&&(this.subtitleTrack=this.queuedDefaultTrack,delete this.queuedDefaultTrack),this.trackChangeListener=this._onTextTracksChanged.bind(this),this.useTextTrackPolling=!(this.media.textTracks&&"onchange"in this.media.textTracks),this.useTextTrackPolling?this.subtitlePollingInterval=setInterval((function(){t.trackChangeListener()}),500):this.media.textTracks.addEventListener("change",this.trackChangeListener))},r.prototype.onMediaDetaching=function(){this.media&&(this.useTextTrackPolling?clearInterval(this.subtitlePollingInterval):this.media.textTracks.removeEventListener("change",this.trackChangeListener),this.media=null)},r.prototype.onManifestLoaded=function(e){var t=this,r=e.subtitles||[];this.tracks=r,this.hls.trigger(a.default.SUBTITLE_TRACKS_UPDATED,{subtitleTracks:r}),r.forEach((function(e){e.default&&(t.media?t.subtitleTrack=e.id:t.queuedDefaultTrack=e.id)}))},r.prototype.onSubtitleTrackLoaded=function(e){var t=this,r=e.id,o=e.details,s=this.trackId,a=this.tracks,i=a[s];if(r>=a.length||r!==s||!i||this.stopped)this._clearReloadTimer();else if(n.logger.log("subtitle track "+r+" loaded"),o.live){var c=l.computeReloadInterval(i.details,o,e.stats.trequest);n.logger.log("Reloading live subtitle playlist in "+c+"ms"),this.timer=setTimeout((function(){t._loadCurrentTrack()}),c)}else this._clearReloadTimer()},r.prototype.startLoad=function(){this.stopped=!1,this._loadCurrentTrack()},r.prototype.stopLoad=function(){this.stopped=!0,this._clearReloadTimer()},Object.defineProperty(r.prototype,"subtitleTracks",{get:function(){return this.tracks},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"subtitleTrack",{get:function(){return this.trackId},set:function(e){this.trackId!==e&&(this._toggleTrackModes(e),this._setSubtitleTrackInternal(e))},enumerable:!0,configurable:!0}),r.prototype._clearReloadTimer=function(){this.timer&&(clearTimeout(this.timer),this.timer=null)},r.prototype._loadCurrentTrack=function(){var e=this.trackId,t=this.tracks,r=this.hls,o=t[e];e<0||!o||o.details&&!o.details.live||(n.logger.log("Loading subtitle track "+e),r.trigger(a.default.SUBTITLE_TRACK_LOADING,{url:o.url,id:e}))},r.prototype._toggleTrackModes=function(e){var t=this.media,r=this.subtitleDisplay,o=this.trackId;if(t){var s=p(t.textTracks);if(-1===e)[].slice.call(s).forEach((function(e){e.mode="disabled"}));else{var a=s[o];a&&(a.mode="disabled")}var i=s[e];i&&(i.mode=r?"showing":"hidden")}},r.prototype._setSubtitleTrackInternal=function(t){var r=this.hls,o=this.tracks;!e.isFinite(t)||t<-1||t>=o.length||(this.trackId=t,n.logger.log("Switching to subtitle track "+t),r.trigger(a.default.SUBTITLE_TRACK_SWITCH,{id:t}),this._loadCurrentTrack())},r.prototype._onTextTracksChanged=function(){if(this.media){for(var e=-1,t=p(this.media.textTracks),r=0;r<t.length;r++)if("hidden"===t[r].mode)e=r;else if("showing"===t[r].mode){e=r;break}this.subtitleTrack=e}},r}(i.default);function p(e){for(var t=[],r=0;r<e.length;r++){var o=e[r];"subtitles"===o.kind&&o.label&&t.push(e[r])}return t}t.default=c}).call(this,r("./src/polyfills/number.js").Number)},"./src/controller/timeline-controller.js":function(e,t,r){"use strict";(function(e){var o,s=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var a=r("./src/events.js"),i=r("./src/event-handler.js"),n=r("./src/utils/cea-608-parser.js"),l=r("./src/utils/output-filter.js"),c=r("./src/utils/webvtt-parser.js"),p=r("./src/utils/logger.js"),u=r("./src/utils/texttrack-utils.js");function d(e,t){return e&&e.label===t.name&&!(e.textTrack1||e.textTrack2)}var h=function(t){function r(e){var r=t.call(this,e,a.default.MEDIA_ATTACHING,a.default.MEDIA_DETACHING,a.default.FRAG_PARSING_USERDATA,a.default.FRAG_DECRYPTED,a.default.MANIFEST_LOADING,a.default.MANIFEST_LOADED,a.default.FRAG_LOADED,a.default.LEVEL_SWITCHING,a.default.INIT_PTS_FOUND)||this;if(r.hls=e,r.config=e.config,r.enabled=!0,r.Cues=e.config.cueHandler,r.textTracks=[],r.tracks=[],r.unparsedVttFrags=[],r.initPTS=[],r.cueRanges=[],r.captionsTracks={},r.captionsProperties={textTrack1:{label:r.config.captionsTextTrack1Label,languageCode:r.config.captionsTextTrack1LanguageCode},textTrack2:{label:r.config.captionsTextTrack2Label,languageCode:r.config.captionsTextTrack2LanguageCode}},r.config.enableCEA708Captions){var o=new l.default(r,"textTrack1"),s=new l.default(r,"textTrack2");r.cea608Parser=new n.default(0,o,s)}return r}return s(r,t),r.prototype.addCues=function(e,t,r,o){for(var s,a,i,n,l=this.cueRanges,c=!1,p=l.length;p--;){var u=l[p],d=(s=u[0],a=u[1],i=t,n=r,Math.min(a,n)-Math.max(s,i));if(d>=0&&(u[0]=Math.min(u[0],t),u[1]=Math.max(u[1],r),c=!0,d/(r-t)>.5))return}c||l.push([t,r]),this.Cues.newCue(this.captionsTracks[e],t,r,o)},r.prototype.onInitPtsFound=function(e){var t=this;if("main"===e.id&&(this.initPTS[e.frag.cc]=e.initPTS),this.unparsedVttFrags.length){var r=this.unparsedVttFrags;this.unparsedVttFrags=[],r.forEach((function(e){t.onFragLoaded(e)}))}},r.prototype.getExistingTrack=function(e){var t=this.media;if(t)for(var r=0;r<t.textTracks.length;r++){var o=t.textTracks[r];if(o[e])return o}return null},r.prototype.createCaptionsTrack=function(e){var t=this.captionsProperties[e],r=t.label,o=t.languageCode,s=this.captionsTracks;if(!s[e]){var a=this.getExistingTrack(e);if(a)s[e]=a,u.clearCurrentCues(s[e]),u.sendAddTrackEvent(s[e],this.media);else{var i=this.createTextTrack("captions",r,o);i&&(i[e]=!0,s[e]=i)}}},r.prototype.createTextTrack=function(e,t,r){var o=this.media;if(o)return o.addTextTrack(e,t,r)},r.prototype.destroy=function(){i.default.prototype.destroy.call(this)},r.prototype.onMediaAttaching=function(e){this.media=e.media,this._cleanTracks()},r.prototype.onMediaDetaching=function(){var e=this.captionsTracks;Object.keys(e).forEach((function(t){u.clearCurrentCues(e[t]),delete e[t]}))},r.prototype.onManifestLoading=function(){this.lastSn=-1,this.prevCC=-1,this.vttCCs={ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!1}},this._cleanTracks()},r.prototype._cleanTracks=function(){var e=this.media;if(e){var t=e.textTracks;if(t)for(var r=0;r<t.length;r++)u.clearCurrentCues(t[r])}},r.prototype.onManifestLoaded=function(e){var t=this;if(this.textTracks=[],this.unparsedVttFrags=this.unparsedVttFrags||[],this.initPTS=[],this.cueRanges=[],this.config.enableWebVTT){this.tracks=e.subtitles||[];var r=this.media?this.media.textTracks:[];this.tracks.forEach((function(e,o){var s;if(o<r.length){for(var a=null,i=0;i<r.length;i++)if(d(r[i],e)){a=r[i];break}a&&(s=a)}s||(s=t.createTextTrack("subtitles",e.name,e.lang)),e.default?s.mode=t.hls.subtitleDisplay?"showing":"hidden":s.mode="disabled",t.textTracks.push(s)}))}},r.prototype.onLevelSwitching=function(){this.enabled="NONE"!==this.hls.currentLevel.closedCaptions},r.prototype.onFragLoaded=function(t){var r=t.frag,o=t.payload;if("main"===r.type){var s=r.sn;if(s!==this.lastSn+1){var i=this.cea608Parser;i&&i.reset()}this.lastSn=s}else if("subtitle"===r.type)if(o.byteLength){if(!e.isFinite(this.initPTS[r.cc]))return this.unparsedVttFrags.push(t),void(this.initPTS.length&&this.hls.trigger(a.default.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:r}));var n=r.decryptdata;null!=n&&null!=n.key&&"AES-128"===n.method||this._parseVTTs(r,o)}else this.hls.trigger(a.default.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:r})},r.prototype._parseVTTs=function(e,t){var r=this.vttCCs;r[e.cc]||(r[e.cc]={start:e.start,prevCC:this.prevCC,new:!0},this.prevCC=e.cc);var o=this.textTracks,s=this.hls;c.default.parse(t,this.initPTS[e.cc],r,e.cc,(function(t){var r=o[e.level];"disabled"!==r.mode?(t.forEach((function(e){if(!r.cues.getCueById(e.id))try{r.addCue(e)}catch(o){var t=new window.TextTrackCue(e.startTime,e.endTime,e.text);t.id=e.id,r.addCue(t)}})),s.trigger(a.default.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:e})):s.trigger(a.default.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:e})}),(function(t){p.logger.log("Failed to parse VTT cue: "+t),s.trigger(a.default.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:e})}))},r.prototype.onFragDecrypted=function(t){var r=t.payload,o=t.frag;if("subtitle"===o.type){if(!e.isFinite(this.initPTS[o.cc]))return void this.unparsedVttFrags.push(t);this._parseVTTs(o,r)}},r.prototype.onFragParsingUserdata=function(e){if(this.enabled&&this.config.enableCEA708Captions)for(var t=0;t<e.samples.length;t++){var r=this.extractCea608Data(e.samples[t].bytes);this.cea608Parser.addData(e.samples[t].pts,r)}},r.prototype.extractCea608Data=function(e){for(var t,r,o,s=31&e[0],a=2,i=[],n=0;n<s;n++)t=e[a++],r=127&e[a++],o=127&e[a++],0===r&&0===o||0!=(4&t)&&0==(3&t)&&(i.push(r),i.push(o));return i},r}(i.default);t.default=h}).call(this,r("./src/polyfills/number.js").Number)},"./src/crypt/aes-crypto.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){this.subtle=e,this.aesIV=t}return e.prototype.decrypt=function(e,t){return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},t,e)},e}();t.default=o},"./src/crypt/aes-decryptor.js":function(e,t,r){"use strict";function o(e){var t=e.byteLength,r=t&&new DataView(e).getUint8(t-1);return r?e.slice(0,t-r):e}Object.defineProperty(t,"__esModule",{value:!0}),t.removePadding=o;var s=function(){function e(){this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.initTable()}return e.prototype.uint8ArrayToUint32Array_=function(e){for(var t=new DataView(e),r=new Uint32Array(4),o=0;o<4;o++)r[o]=t.getUint32(4*o);return r},e.prototype.initTable=function(){var e=this.sBox,t=this.invSBox,r=this.subMix,o=r[0],s=r[1],a=r[2],i=r[3],n=this.invSubMix,l=n[0],c=n[1],p=n[2],u=n[3],d=new Uint32Array(256),h=0,m=0,b=0;for(b=0;b<256;b++)d[b]=b<128?b<<1:b<<1^283;for(b=0;b<256;b++){var f=m^m<<1^m<<2^m<<3^m<<4;f=f>>>8^255&f^99,e[h]=f,t[f]=h;var y=d[h],g=d[y],v=d[g],w=257*d[f]^16843008*f;o[h]=w<<24|w>>>8,s[h]=w<<16|w>>>16,a[h]=w<<8|w>>>24,i[h]=w,w=16843009*v^65537*g^257*y^16843008*h,l[f]=w<<24|w>>>8,c[f]=w<<16|w>>>16,p[f]=w<<8|w>>>24,u[f]=w,h?(h=y^d[d[d[v^y]]],m^=d[d[m]]):h=m=1}},e.prototype.expandKey=function(e){for(var t=this.uint8ArrayToUint32Array_(e),r=!0,o=0;o<t.length&&r;)r=t[o]===this.key[o],o++;if(!r){this.key=t;var s=this.keySize=t.length;if(4!==s&&6!==s&&8!==s)throw new Error("Invalid aes key size="+s);var a,i,n,l,c=this.ksRows=4*(s+6+1),p=this.keySchedule=new Uint32Array(c),u=this.invKeySchedule=new Uint32Array(c),d=this.sBox,h=this.rcon,m=this.invSubMix,b=m[0],f=m[1],y=m[2],g=m[3];for(a=0;a<c;a++)a<s?n=p[a]=t[a]:(l=n,a%s==0?(l=d[(l=l<<8|l>>>24)>>>24]<<24|d[l>>>16&255]<<16|d[l>>>8&255]<<8|d[255&l],l^=h[a/s|0]<<24):s>6&&a%s==4&&(l=d[l>>>24]<<24|d[l>>>16&255]<<16|d[l>>>8&255]<<8|d[255&l]),p[a]=n=(p[a-s]^l)>>>0);for(i=0;i<c;i++)a=c-i,l=3&i?p[a]:p[a-4],u[i]=i<4||a<=4?l:b[d[l>>>24]]^f[d[l>>>16&255]]^y[d[l>>>8&255]]^g[d[255&l]],u[i]=u[i]>>>0}},e.prototype.networkToHostOrderSwap=function(e){return e<<24|(65280&e)<<8|(16711680&e)>>8|e>>>24},e.prototype.decrypt=function(e,t,r,s){for(var a,i,n,l,c,p,u,d,h,m,b,f,y,g,v=this.keySize+6,w=this.invKeySchedule,k=this.invSBox,_=this.invSubMix,E=_[0],j=_[1],D=_[2],S=_[3],C=this.uint8ArrayToUint32Array_(r),O=C[0],P=C[1],T=C[2],x=C[3],R=new Int32Array(e),H=new Int32Array(R.length),A=this.networkToHostOrderSwap;t<R.length;){for(h=A(R[t]),m=A(R[t+1]),b=A(R[t+2]),f=A(R[t+3]),c=h^w[0],p=f^w[1],u=b^w[2],d=m^w[3],y=4,g=1;g<v;g++)a=E[c>>>24]^j[p>>16&255]^D[u>>8&255]^S[255&d]^w[y],i=E[p>>>24]^j[u>>16&255]^D[d>>8&255]^S[255&c]^w[y+1],n=E[u>>>24]^j[d>>16&255]^D[c>>8&255]^S[255&p]^w[y+2],l=E[d>>>24]^j[c>>16&255]^D[p>>8&255]^S[255&u]^w[y+3],c=a,p=i,u=n,d=l,y+=4;a=k[c>>>24]<<24^k[p>>16&255]<<16^k[u>>8&255]<<8^k[255&d]^w[y],i=k[p>>>24]<<24^k[u>>16&255]<<16^k[d>>8&255]<<8^k[255&c]^w[y+1],n=k[u>>>24]<<24^k[d>>16&255]<<16^k[c>>8&255]<<8^k[255&p]^w[y+2],l=k[d>>>24]<<24^k[c>>16&255]<<16^k[p>>8&255]<<8^k[255&u]^w[y+3],y+=3,H[t]=A(a^O),H[t+1]=A(l^P),H[t+2]=A(n^T),H[t+3]=A(i^x),O=h,P=m,T=b,x=f,t+=4}return s?o(H.buffer):H.buffer},e.prototype.destroy=function(){this.key=void 0,this.keySize=void 0,this.ksRows=void 0,this.sBox=void 0,this.invSBox=void 0,this.subMix=void 0,this.invSubMix=void 0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.rcon=void 0},e}();t.default=s},"./src/crypt/decrypter.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=r("./src/crypt/aes-crypto.js"),s=r("./src/crypt/fast-aes-key.js"),a=r("./src/crypt/aes-decryptor.js"),i=r("./src/errors.js"),n=r("./src/utils/logger.js"),l=r("./src/events.js"),c=r("./src/utils/get-self-scope.js").getSelfScope(),p=function(){function e(e,t,r){var o=(void 0===r?{}:r).removePKCS7Padding,s=void 0===o||o;if(this.logEnabled=!0,this.observer=e,this.config=t,this.removePKCS7Padding=s,s)try{var a=c.crypto;a&&(this.subtle=a.subtle||a.webkitSubtle)}catch(e){}this.disableWebCrypto=!this.subtle}return e.prototype.isSync=function(){return this.disableWebCrypto&&this.config.enableSoftwareAES},e.prototype.decrypt=function(e,t,r,i){var l=this;if(this.disableWebCrypto&&this.config.enableSoftwareAES){this.logEnabled&&(n.logger.log("JS AES decrypt"),this.logEnabled=!1);var c=this.decryptor;c||(this.decryptor=c=new a.default),c.expandKey(t),i(c.decrypt(e,0,r,this.removePKCS7Padding))}else{this.logEnabled&&(n.logger.log("WebCrypto AES decrypt"),this.logEnabled=!1);var p=this.subtle;this.key!==t&&(this.key=t,this.fastAesKey=new s.default(p,t)),this.fastAesKey.expandKey().then((function(s){new o.default(p,r).decrypt(e,s).catch((function(o){l.onWebCryptoError(o,e,t,r,i)})).then((function(e){i(e)}))})).catch((function(o){l.onWebCryptoError(o,e,t,r,i)}))}},e.prototype.onWebCryptoError=function(e,t,r,o,s){this.config.enableSoftwareAES?(n.logger.log("WebCrypto Error, disable WebCrypto API"),this.disableWebCrypto=!0,this.logEnabled=!0,this.decrypt(t,r,o,s)):(n.logger.error("decrypting error : "+e.message),this.observer.trigger(l.default.ERROR,{type:i.ErrorTypes.MEDIA_ERROR,details:i.ErrorDetails.FRAG_DECRYPT_ERROR,fatal:!0,reason:e.message}))},e.prototype.destroy=function(){var e=this.decryptor;e&&(e.destroy(),this.decryptor=void 0)},e}();t.default=p},"./src/crypt/fast-aes-key.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){this.subtle=e,this.key=t}return e.prototype.expandKey=function(){return this.subtle.importKey("raw",this.key,{name:"AES-CBC"},!1,["encrypt","decrypt"])},e}();t.default=o},"./src/demux/aacdemuxer.js":function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var o=r("./src/demux/adts.js"),s=r("./src/utils/logger.js"),a=r("./src/demux/id3.js"),i=function(){function t(e,t,r){this.observer=e,this.config=r,this.remuxer=t}return t.prototype.resetInitSegment=function(e,t,r,o){this._audioTrack={container:"audio/adts",type:"audio",id:0,sequenceNumber:0,isAAC:!0,samples:[],len:0,manifestCodec:t,duration:o,inputTimeScale:9e4}},t.prototype.resetTimeStamp=function(){},t.probe=function(e){if(!e)return!1;for(var t=(a.default.getID3Data(e,0)||[]).length,r=e.length;t<r;t++)if(o.probe(e,t))return s.logger.log("ADTS sync word found !"),!0;return!1},t.prototype.append=function(t,r,i,n){for(var l=this._audioTrack,c=a.default.getID3Data(t,0)||[],p=a.default.getTimeStamp(c),u=e.isFinite(p)?90*p:9e4*r,d=0,h=u,m=t.length,b=c.length,f=[{pts:h,dts:h,data:c}];b<m-1;)if(o.isHeader(t,b)&&b+5<m){o.initTrackConfig(l,this.observer,t,b,l.manifestCodec);var y=o.appendFrame(l,t,b,u,d);if(!y){s.logger.log("Unable to parse AAC frame");break}b+=y.length,h=y.sample.pts,d++}else a.default.isHeader(t,b)?(c=a.default.getID3Data(t,b),f.push({pts:h,dts:h,data:c}),b+=c.length):b++;this.remuxer.remux(l,{samples:[]},{samples:f,inputTimeScale:9e4},{samples:[]},r,i,n)},t.prototype.destroy=function(){},t}();t.default=i}).call(this,r("./src/polyfills/number.js").Number)},"./src/demux/adts.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=r("./src/utils/logger.js"),s=r("./src/errors.js"),a=r("./src/events.js");function i(e,t,r,i){var n,l,c,p,u,d=navigator.userAgent.toLowerCase(),h=i,m=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];if(n=1+((192&t[r+2])>>>6),!((l=(60&t[r+2])>>>2)>m.length-1))return p=(1&t[r+2])<<2,p|=(192&t[r+3])>>>6,o.logger.log("manifest codec:"+i+",ADTS data:type:"+n+",sampleingIndex:"+l+"["+m[l]+"Hz],channelConfig:"+p),/firefox/i.test(d)?l>=6?(n=5,u=new Array(4),c=l-3):(n=2,u=new Array(2),c=l):-1!==d.indexOf("android")?(n=2,u=new Array(2),c=l):(n=5,u=new Array(4),i&&(-1!==i.indexOf("mp4a.40.29")||-1!==i.indexOf("mp4a.40.5"))||!i&&l>=6?c=l-3:((i&&-1!==i.indexOf("mp4a.40.2")&&(l>=6&&1===p||/vivaldi/i.test(d))||!i&&1===p)&&(n=2,u=new Array(2)),c=l)),u[0]=n<<3,u[0]|=(14&l)>>1,u[1]|=(1&l)<<7,u[1]|=p<<3,5===n&&(u[1]|=(14&c)>>1,u[2]=(1&c)<<7,u[2]|=8,u[3]=0),{config:u,samplerate:m[l],channelCount:p,codec:"mp4a.40."+n,manifestCodec:h};e.trigger(a.default.ERROR,{type:s.ErrorTypes.MEDIA_ERROR,details:s.ErrorDetails.FRAG_PARSING_ERROR,fatal:!0,reason:"invalid ADTS sampling index:"+l})}function n(e,t){return 255===e[t]&&240==(246&e[t+1])}function l(e,t){return 1&e[t+1]?7:9}function c(e,t){return(3&e[t+3])<<11|e[t+4]<<3|(224&e[t+5])>>>5}function p(e){return 9216e4/e}function u(e,t,r,o,s){var a,i,n=e.length;if(a=l(e,t),i=c(e,t),(i-=a)>0&&t+a+i<=n)return{headerLength:a,frameLength:i,stamp:r+o*s}}t.getAudioConfig=i,t.isHeaderPattern=n,t.getHeaderLength=l,t.getFullFrameLength=c,t.isHeader=function(e,t){return!!(t+1<e.length&&n(e,t))},t.probe=function(e,t){if(t+1<e.length&&n(e,t)){var r=l(e,t);t+5<e.length&&(r=c(e,t));var o=t+r;if(o===e.length||o+1<e.length&&n(e,o))return!0}return!1},t.initTrackConfig=function(e,t,r,s,a){if(!e.samplerate){var n=i(t,r,s,a);e.config=n.config,e.samplerate=n.samplerate,e.channelCount=n.channelCount,e.codec=n.codec,e.manifestCodec=n.manifestCodec,o.logger.log("parsed codec:"+e.codec+",rate:"+n.samplerate+",nb channel:"+n.channelCount)}},t.getFrameDuration=p,t.parseFrameHeader=u,t.appendFrame=function(e,t,r,o,s){var a=u(t,r,o,s,p(e.samplerate));if(a){var i=a.stamp,n=a.headerLength,l=a.frameLength,c={unit:t.subarray(r+n,r+n+l),pts:i,dts:i};return e.samples.push(c),e.len+=l,{sample:c,length:l+n}}}},"./src/demux/demuxer-inline.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,s=r("./src/events.js"),a=r("./src/errors.js"),i=r("./src/crypt/decrypter.js"),n=r("./src/demux/aacdemuxer.js"),l=r("./src/demux/mp4demuxer.js"),c=r("./src/demux/tsdemuxer.js"),p=r("./src/demux/mp3demuxer.js"),u=r("./src/remux/mp4-remuxer.js"),d=r("./src/remux/passthrough-remuxer.js"),h=r("./src/utils/get-self-scope.js"),m=r("./src/utils/logger.js"),b=h.getSelfScope();try{o=b.performance.now.bind(b.performance)}catch(e){m.logger.debug("Unable to use Performance API on this environment"),o=b.Date.now}var f=function(){function e(e,t,r,o){this.observer=e,this.typeSupported=t,this.config=r,this.vendor=o}return e.prototype.destroy=function(){var e=this.demuxer;e&&e.destroy()},e.prototype.push=function(e,t,r,a,n,l,c,p,u,d,h,m){var b=this;if(e.byteLength>0&&null!=t&&null!=t.key&&"AES-128"===t.method){var f=this.decrypter;null==f&&(f=this.decrypter=new i.default(this.observer,this.config));var y=o();f.decrypt(e,t.key.buffer,t.iv.buffer,(function(e){var i=o();b.observer.trigger(s.default.FRAG_DECRYPTED,{stats:{tstart:y,tdecrypt:i}}),b.pushDecrypted(new Uint8Array(e),t,new Uint8Array(r),a,n,l,c,p,u,d,h,m)}))}else this.pushDecrypted(new Uint8Array(e),t,new Uint8Array(r),a,n,l,c,p,u,d,h,m)},e.prototype.pushDecrypted=function(e,t,r,o,i,h,m,b,f,y,g,v){var w=this.demuxer;if(!w||(m||b)&&!this.probe(e)){for(var k=this.observer,_=this.typeSupported,E=this.config,j=[{demux:c.default,remux:u.default},{demux:l.default,remux:d.default},{demux:n.default,remux:u.default},{demux:p.default,remux:u.default}],D=0,S=j.length;D<S;D++){var C=j[D],O=C.demux.probe;if(O(e)){var P=this.remuxer=new C.remux(k,E,_,this.vendor);w=new C.demux(k,P,E,_),this.probe=O;break}}if(!w)return void k.trigger(s.default.ERROR,{type:a.ErrorTypes.MEDIA_ERROR,details:a.ErrorDetails.FRAG_PARSING_ERROR,fatal:!0,reason:"no demux matching with content found"});this.demuxer=w}var T=this.remuxer;(m||b)&&(w.resetInitSegment(r,o,i,y),T.resetInitSegment()),m&&(w.resetTimeStamp(v),T.resetTimeStamp(v)),"function"==typeof w.setDecryptData&&w.setDecryptData(t),w.append(e,h,f,g)},e}();t.default=f},"./src/demux/demuxer-worker.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=r("./src/demux/demuxer-inline.js"),s=r("./src/events.js"),a=r("./src/utils/logger.js"),i=r("./node_modules/node-libs-browser/node_modules/events/events.js");t.default=function(e){var t=new i.EventEmitter;t.trigger=function(e){for(var r=[],o=1;o<arguments.length;o++)r[o-1]=arguments[o];t.emit.apply(t,[e,e].concat(r))},t.off=function(e){for(var r=[],o=1;o<arguments.length;o++)r[o-1]=arguments[o];t.removeListener.apply(t,[e].concat(r))};var r=function(t,r){e.postMessage({event:t,data:r})};e.addEventListener("message",(function(s){var i=s.data;switch(i.cmd){case"init":var n=JSON.parse(i.config);e.demuxer=new o.default(t,i.typeSupported,n,i.vendor),a.enableLogs(n.debug),r("init",null);break;case"demux":e.demuxer.push(i.data,i.decryptdata,i.initSegment,i.audioCodec,i.videoCodec,i.timeOffset,i.discontinuity,i.trackSwitch,i.contiguous,i.duration,i.accurateTimeOffset,i.defaultInitPTS)}})),t.on(s.default.FRAG_DECRYPTED,r),t.on(s.default.FRAG_PARSING_INIT_SEGMENT,r),t.on(s.default.FRAG_PARSED,r),t.on(s.default.ERROR,r),t.on(s.default.FRAG_PARSING_METADATA,r),t.on(s.default.FRAG_PARSING_USERDATA,r),t.on(s.default.INIT_PTS_FOUND,r),t.on(s.default.FRAG_PARSING_DATA,(function(t,r){var o=[],s={event:t,data:r};r.data1&&(s.data1=r.data1.buffer,o.push(r.data1.buffer),delete r.data1),r.data2&&(s.data2=r.data2.buffer,o.push(r.data2.buffer),delete r.data2),e.postMessage(s,o)}))}},"./src/demux/demuxer.js":function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var o=r("./node_modules/webworkify-webpack/index.js"),s=r("./src/events.js"),a=r("./src/demux/demuxer-inline.js"),i=r("./src/utils/logger.js"),n=r("./src/errors.js"),l=r("./src/utils/mediasource-helper.js"),c=r("./src/utils/get-self-scope.js"),p=r("./src/observer.js"),u=c.getSelfScope(),d=l.getMediaSource(),h=function(){function t(e,t){var r=this;this.hls=e,this.id=t;var l=this.observer=new p.Observer,c=e.config,h=function(t,o){(o=o||{}).frag=r.frag,o.id=r.id,e.trigger(t,o)};l.on(s.default.FRAG_DECRYPTED,h),l.on(s.default.FRAG_PARSING_INIT_SEGMENT,h),l.on(s.default.FRAG_PARSING_DATA,h),l.on(s.default.FRAG_PARSED,h),l.on(s.default.ERROR,h),l.on(s.default.FRAG_PARSING_METADATA,h),l.on(s.default.FRAG_PARSING_USERDATA,h),l.on(s.default.INIT_PTS_FOUND,h);var m={mp4:d.isTypeSupported("video/mp4"),mpeg:d.isTypeSupported("audio/mpeg"),mp3:d.isTypeSupported('audio/mp4; codecs="mp3"')},b=navigator.vendor;if(c.enableWorker&&"undefined"!=typeof Worker){i.logger.log("demuxing in webworker");var f=void 0;try{f=this.w=o("./src/demux/demuxer-worker.js"),this.onwmsg=this.onWorkerMessage.bind(this),f.addEventListener("message",this.onwmsg),f.onerror=function(t){e.trigger(s.default.ERROR,{type:n.ErrorTypes.OTHER_ERROR,details:n.ErrorDetails.INTERNAL_EXCEPTION,fatal:!0,event:"demuxerWorker",err:{message:t.message+" ("+t.filename+":"+t.lineno+")"}})},f.postMessage({cmd:"init",typeSupported:m,vendor:b,id:t,config:JSON.stringify(c)})}catch(e){i.logger.warn("Error in worker:",e),i.logger.error("Error while initializing DemuxerWorker, fallback on DemuxerInline"),f&&u.URL.revokeObjectURL(f.objectURL),this.demuxer=new a.default(l,m,c,b),this.w=void 0}}else this.demuxer=new a.default(l,m,c,b)}return t.prototype.destroy=function(){var e=this.w;if(e)e.removeEventListener("message",this.onwmsg),e.terminate(),this.w=null;else{var t=this.demuxer;t&&(t.destroy(),this.demuxer=null)}var r=this.observer;r&&(r.removeAllListeners(),this.observer=null)},t.prototype.push=function(t,r,o,s,a,n,l,c){var p=this.w,u=e.isFinite(a.startPTS)?a.startPTS:a.start,d=a.decryptdata,h=this.frag,m=!(h&&a.cc===h.cc),b=!(h&&a.level===h.level),f=h&&a.sn===h.sn+1,y=!b&&f;if(m&&i.logger.log(this.id+":discontinuity detected"),b&&i.logger.log(this.id+":switch detected"),this.frag=a,p)p.postMessage({cmd:"demux",data:t,decryptdata:d,initSegment:r,audioCodec:o,videoCodec:s,timeOffset:u,discontinuity:m,trackSwitch:b,contiguous:y,duration:n,accurateTimeOffset:l,defaultInitPTS:c},t instanceof ArrayBuffer?[t]:[]);else{var g=this.demuxer;g&&g.push(t,d,r,o,s,u,m,b,y,n,l,c)}},t.prototype.onWorkerMessage=function(e){var t=e.data,r=this.hls;switch(t.event){case"init":u.URL.revokeObjectURL(this.w.objectURL);break;case s.default.FRAG_PARSING_DATA:t.data.data1=new Uint8Array(t.data1),t.data2&&(t.data.data2=new Uint8Array(t.data2));default:t.data=t.data||{},t.data.frag=this.frag,t.data.id=this.id,r.trigger(t.event,t.data)}},t}();t.default=h}).call(this,r("./src/polyfills/number.js").Number)},"./src/demux/exp-golomb.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=r("./src/utils/logger.js"),s=function(){function e(e){this.data=e,this.bytesAvailable=e.byteLength,this.word=0,this.bitsAvailable=0}return e.prototype.loadWord=function(){var e=this.data,t=this.bytesAvailable,r=e.byteLength-t,o=new Uint8Array(4),s=Math.min(4,t);if(0===s)throw new Error("no bytes available");o.set(e.subarray(r,r+s)),this.word=new DataView(o.buffer).getUint32(0),this.bitsAvailable=8*s,this.bytesAvailable-=s},e.prototype.skipBits=function(e){var t;this.bitsAvailable>e?(this.word<<=e,this.bitsAvailable-=e):(e-=this.bitsAvailable,e-=(t=e>>3)>>3,this.bytesAvailable-=t,this.loadWord(),this.word<<=e,this.bitsAvailable-=e)},e.prototype.readBits=function(e){var t=Math.min(this.bitsAvailable,e),r=this.word>>>32-t;return e>32&&o.logger.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=t,this.bitsAvailable>0?this.word<<=t:this.bytesAvailable>0&&this.loadWord(),(t=e-t)>0&&this.bitsAvailable?r<<t|this.readBits(t):r},e.prototype.skipLZ=function(){var e;for(e=0;e<this.bitsAvailable;++e)if(0!=(this.word&2147483648>>>e))return this.word<<=e,this.bitsAvailable-=e,e;return this.loadWord(),e+this.skipLZ()},e.prototype.skipUEG=function(){this.skipBits(1+this.skipLZ())},e.prototype.skipEG=function(){this.skipBits(1+this.skipLZ())},e.prototype.readUEG=function(){var e=this.skipLZ();return this.readBits(e+1)-1},e.prototype.readEG=function(){var e=this.readUEG();return 1&e?1+e>>>1:-1*(e>>>1)},e.prototype.readBoolean=function(){return 1===this.readBits(1)},e.prototype.readUByte=function(){return this.readBits(8)},e.prototype.readUShort=function(){return this.readBits(16)},e.prototype.readUInt=function(){return this.readBits(32)},e.prototype.skipScalingList=function(e){var t,r=8,o=8;for(t=0;t<e;t++)0!==o&&(o=(r+this.readEG()+256)%256),r=0===o?r:o},e.prototype.readSPS=function(){var e,t,r,o,s,a,i,n=0,l=0,c=0,p=0,u=this.readUByte.bind(this),d=this.readBits.bind(this),h=this.readUEG.bind(this),m=this.readBoolean.bind(this),b=this.skipBits.bind(this),f=this.skipEG.bind(this),y=this.skipUEG.bind(this),g=this.skipScalingList.bind(this);if(u(),e=u(),d(5),b(3),u(),y(),100===e||110===e||122===e||244===e||44===e||83===e||86===e||118===e||128===e){var v=h();if(3===v&&b(1),y(),y(),b(1),m())for(a=3!==v?8:12,i=0;i<a;i++)m()&&g(i<6?16:64)}y();var w=h();if(0===w)h();else if(1===w)for(b(1),f(),f(),t=h(),i=0;i<t;i++)f();y(),b(1),r=h(),o=h(),0===(s=d(1))&&b(1),b(1),m()&&(n=h(),l=h(),c=h(),p=h());var k=[1,1];if(m()&&m())switch(u()){case 1:k=[1,1];break;case 2:k=[12,11];break;case 3:k=[10,11];break;case 4:k=[16,11];break;case 5:k=[40,33];break;case 6:k=[24,11];break;case 7:k=[20,11];break;case 8:k=[32,11];break;case 9:k=[80,33];break;case 10:k=[18,11];break;case 11:k=[15,11];break;case 12:k=[64,33];break;case 13:k=[160,99];break;case 14:k=[4,3];break;case 15:k=[3,2];break;case 16:k=[2,1];break;case 255:k=[u()<<8|u(),u()<<8|u()]}return{width:Math.ceil(16*(r+1)-2*n-2*l),height:(2-s)*(o+1)*16-(s?2:4)*(c+p),pixelRatio:k}},e.prototype.readSliceType=function(){return this.readUByte(),this.readUEG(),this.readUEG()},e}();t.default=s},"./src/demux/id3.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(){}return e.isHeader=function(e,t){return t+10<=e.length&&73===e[t]&&68===e[t+1]&&51===e[t+2]&&e[t+3]<255&&e[t+4]<255&&e[t+6]<128&&e[t+7]<128&&e[t+8]<128&&e[t+9]<128},e.isFooter=function(e,t){return t+10<=e.length&&51===e[t]&&68===e[t+1]&&73===e[t+2]&&e[t+3]<255&&e[t+4]<255&&e[t+6]<128&&e[t+7]<128&&e[t+8]<128&&e[t+9]<128},e.getID3Data=function(t,r){for(var o=r,s=0;e.isHeader(t,r);)s+=10,s+=e._readSize(t,r+6),e.isFooter(t,r+10)&&(s+=10),r+=s;if(s>0)return t.subarray(o,o+s)},e._readSize=function(e,t){var r=0;return r=(127&e[t])<<21,r|=(127&e[t+1])<<14,r|=(127&e[t+2])<<7,r|=127&e[t+3]},e.getTimeStamp=function(t){for(var r=e.getID3Frames(t),o=0;o<r.length;o++){var s=r[o];if(e.isTimeStampFrame(s))return e._readTimeStamp(s)}},e.isTimeStampFrame=function(e){return e&&"PRIV"===e.key&&"com.apple.streaming.transportStreamTimestamp"===e.info},e._getFrameData=function(t){var r=String.fromCharCode(t[0],t[1],t[2],t[3]),o=e._readSize(t,4);return{type:r,size:o,data:t.subarray(10,10+o)}},e.getID3Frames=function(t){for(var r=0,o=[];e.isHeader(t,r);){for(var s=e._readSize(t,r+6),a=(r+=10)+s;r+8<a;){var i=e._getFrameData(t.subarray(r)),n=e._decodeFrame(i);n&&o.push(n),r+=i.size+10}e.isFooter(t,r)&&(r+=10)}return o},e._decodeFrame=function(t){return"PRIV"===t.type?e._decodePrivFrame(t):"T"===t.type[0]?e._decodeTextFrame(t):"W"===t.type[0]?e._decodeURLFrame(t):void 0},e._readTimeStamp=function(e){if(8===e.data.byteLength){var t=new Uint8Array(e.data),r=1&t[3],o=(t[4]<<23)+(t[5]<<15)+(t[6]<<7)+t[7];return o/=45,r&&(o+=47721858.84),Math.round(o)}},e._decodePrivFrame=function(t){if(!(t.size<2)){var r=e._utf8ArrayToStr(t.data,!0),o=new Uint8Array(t.data.subarray(r.length+1));return{key:t.type,info:r,data:o.buffer}}},e._decodeTextFrame=function(t){if(!(t.size<2)){if("TXXX"===t.type){var r=1,o=e._utf8ArrayToStr(t.data.subarray(r));r+=o.length+1;var s=e._utf8ArrayToStr(t.data.subarray(r));return{key:t.type,info:o,data:s}}var a=e._utf8ArrayToStr(t.data.subarray(1));return{key:t.type,data:a}}},e._decodeURLFrame=function(t){if("WXXX"===t.type){if(t.size<2)return;var r=1,o=e._utf8ArrayToStr(t.data.subarray(r));r+=o.length+1;var s=e._utf8ArrayToStr(t.data.subarray(r));return{key:t.type,info:o,data:s}}var a=e._utf8ArrayToStr(t.data);return{key:t.type,data:a}},e._utf8ArrayToStr=function(e,t){void 0===t&&(t=!1);for(var r,o,s,a=e.length,i="",n=0;n<a;){if(0===(r=e[n++])&&t)return i;if(0!==r&&3!==r)switch(r>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:i+=String.fromCharCode(r);break;case 12:case 13:o=e[n++],i+=String.fromCharCode((31&r)<<6|63&o);break;case 14:o=e[n++],s=e[n++],i+=String.fromCharCode((15&r)<<12|(63&o)<<6|(63&s)<<0)}}return i},e}(),s=o._utf8ArrayToStr;t.utf8ArrayToStr=s,t.default=o},"./src/demux/mp3demuxer.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=r("./src/demux/id3.js"),s=r("./src/utils/logger.js"),a=r("./src/demux/mpegaudio.js"),i=function(){function e(e,t,r){this.observer=e,this.config=r,this.remuxer=t}return e.prototype.resetInitSegment=function(e,t,r,o){this._audioTrack={container:"audio/mpeg",type:"audio",id:-1,sequenceNumber:0,isAAC:!1,samples:[],len:0,manifestCodec:t,duration:o,inputTimeScale:9e4}},e.prototype.resetTimeStamp=function(){},e.probe=function(e){var t,r,i=o.default.getID3Data(e,0);if(i&&void 0!==o.default.getTimeStamp(i))for(t=i.length,r=Math.min(e.length-1,t+100);t<r;t++)if(a.default.probe(e,t))return s.logger.log("MPEG Audio sync word found !"),!0;return!1},e.prototype.append=function(e,t,r,s){for(var i=o.default.getID3Data(e,0),n=o.default.getTimeStamp(i),l=n?90*n:9e4*t,c=i.length,p=e.length,u=0,d=0,h=this._audioTrack,m=[{pts:l,dts:l,data:i}];c<p;)if(a.default.isHeader(e,c)){var b=a.default.appendFrame(h,e,c,l,u);if(!b)break;c+=b.length,d=b.sample.pts,u++}else o.default.isHeader(e,c)?(i=o.default.getID3Data(e,c),m.push({pts:d,dts:d,data:i}),c+=i.length):c++;this.remuxer.remux(h,{samples:[]},{samples:m,inputTimeScale:9e4},{samples:[]},t,r,s)},e.prototype.destroy=function(){},e}();t.default=i},"./src/demux/mp4demuxer.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=r("./src/utils/logger.js"),s=r("./src/events.js"),a=Math.pow(2,32)-1,i=function(){function e(e,t){this.observer=e,this.remuxer=t}return e.prototype.resetTimeStamp=function(e){this.initPTS=e},e.prototype.resetInitSegment=function(t,r,o,a){if(t&&t.byteLength){var i=this.initData=e.parseInitSegment(t);null==r&&(r="mp4a.40.5"),null==o&&(o="avc1.42e01e");var n={};i.audio&&i.video?n.audiovideo={container:"video/mp4",codec:r+","+o,initSegment:a?t:null}:(i.audio&&(n.audio={container:"audio/mp4",codec:r,initSegment:a?t:null}),i.video&&(n.video={container:"video/mp4",codec:o,initSegment:a?t:null})),this.observer.trigger(s.default.FRAG_PARSING_INIT_SEGMENT,{tracks:n})}else r&&(this.audioCodec=r),o&&(this.videoCodec=o)},e.probe=function(t){return e.findBox({data:t,start:0,end:Math.min(t.length,16384)},["moof"]).length>0},e.bin2str=function(e){return String.fromCharCode.apply(null,e)},e.readUint16=function(e,t){e.data&&(t+=e.start,e=e.data);var r=e[t]<<8|e[t+1];return r<0?65536+r:r},e.readUint32=function(e,t){e.data&&(t+=e.start,e=e.data);var r=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3];return r<0?4294967296+r:r},e.writeUint32=function(e,t,r){e.data&&(t+=e.start,e=e.data),e[t]=r>>24,e[t+1]=r>>16&255,e[t+2]=r>>8&255,e[t+3]=255&r},e.findBox=function(t,r){var o,s,a,i,n,l,c=[];if(t.data?(n=t.start,a=t.end,t=t.data):(n=0,a=t.byteLength),!r.length)return null;for(o=n;o<a;)l=(s=e.readUint32(t,o))>1?o+s:a,e.bin2str(t.subarray(o+4,o+8))===r[0]&&(1===r.length?c.push({data:t,start:o+8,end:l}):(i=e.findBox({data:t,start:o+8,end:l},r.slice(1))).length&&(c=c.concat(i))),o=l;return c},e.parseSegmentIndex=function(t){var r,o=e.findBox(t,["moov"])[0],s=o?o.end:null,a=0,i=e.findBox(t,["sidx"]);if(!i||!i[0])return null;r=[];var n=(i=i[0]).data[0];a=0===n?8:16;var l=e.readUint32(i,a);a+=4,a+=0===n?8:16,a+=2;var c=i.end+0,p=e.readUint16(i,a);a+=2;for(var u=0;u<p;u++){var d=a,h=e.readUint32(i,d);d+=4;var m=2147483647&h;if(1==(2147483648&h)>>>31)return void console.warn("SIDX has hierarchical references (not supported)");var b=e.readUint32(i,d);d+=4,r.push({referenceSize:m,subsegmentDuration:b,info:{duration:b/l,start:c,end:c+m-1}}),c+=m,a=d+=4}return{earliestPresentationTime:0,timescale:l,version:n,referencesCount:p,references:r,moovEndOffset:s}},e.parseInitSegment=function(t){var r=[];return e.findBox(t,["moov","trak"]).forEach((function(t){var s=e.findBox(t,["tkhd"])[0];if(s){var a=s.data[s.start],i=0===a?12:20,n=e.readUint32(s,i),l=e.findBox(t,["mdia","mdhd"])[0];if(l){i=0===(a=l.data[l.start])?12:20;var c=e.readUint32(l,i),p=e.findBox(t,["mdia","hdlr"])[0];if(p){var u={soun:"audio",vide:"video"}[e.bin2str(p.data.subarray(p.start+8,p.start+12))];if(u){var d=e.findBox(t,["mdia","minf","stbl","stsd"]);if(d.length){d=d[0];var h=e.bin2str(d.data.subarray(d.start+12,d.start+16));o.logger.log("MP4Demuxer:"+u+":"+h+" found")}r[n]={timescale:c,type:u},r[u]={timescale:c,id:n}}}}}})),r},e.getStartDTS=function(t,r){var o,s,a;return o=e.findBox(r,["moof","traf"]),s=[].concat.apply([],o.map((function(r){return e.findBox(r,["tfhd"]).map((function(o){var s,a;return s=e.readUint32(o,4),a=t[s].timescale||9e4,e.findBox(r,["tfdt"]).map((function(t){var r,o;return r=t.data[t.start],o=e.readUint32(t,4),1===r&&(o*=Math.pow(2,32),o+=e.readUint32(t,8)),o}))[0]/a}))}))),a=Math.min.apply(null,s),isFinite(a)?a:0},e.offsetStartDTS=function(t,r,o){e.findBox(r,["moof","traf"]).map((function(r){return e.findBox(r,["tfhd"]).map((function(s){var i=e.readUint32(s,4),n=t[i].timescale||9e4;e.findBox(r,["tfdt"]).map((function(t){var r=t.data[t.start],s=e.readUint32(t,4);if(0===r)e.writeUint32(t,4,s-o*n);else{s*=Math.pow(2,32),s+=e.readUint32(t,8),s-=o*n,s=Math.max(s,0);var i=Math.floor(s/(a+1)),l=Math.floor(s%(a+1));e.writeUint32(t,4,i),e.writeUint32(t,8,l)}}))}))}))},e.prototype.append=function(t,r,o,a){var i=this.initData;i||(this.resetInitSegment(t,this.audioCodec,this.videoCodec,!1),i=this.initData);var n,l=this.initPTS;if(void 0===l){var c=e.getStartDTS(i,t);this.initPTS=l=c-r,this.observer.trigger(s.default.INIT_PTS_FOUND,{initPTS:l})}e.offsetStartDTS(i,t,l),n=e.getStartDTS(i,t),this.remuxer.remux(i.audio,i.video,null,null,n,o,a,t)},e.prototype.destroy=function(){},e}();t.default=i},"./src/demux/mpegaudio.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o={BitratesMap:[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],SamplingRateMap:[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],SamplesCoefficients:[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],BytesInSlot:[0,1,1,4],appendFrame:function(e,t,r,o,s){if(!(r+24>t.length)){var a=this.parseHeader(t,r);if(a&&r+a.frameLength<=t.length){var i=o+s*(9e4*a.samplesPerFrame/a.sampleRate),n={unit:t.subarray(r,r+a.frameLength),pts:i,dts:i};return e.config=[],e.channelCount=a.channelCount,e.samplerate=a.sampleRate,e.samples.push(n),e.len+=a.frameLength,{sample:n,length:a.frameLength}}}},parseHeader:function(e,t){var r=e[t+1]>>3&3,s=e[t+1]>>1&3,a=e[t+2]>>4&15,i=e[t+2]>>2&3,n=e[t+2]>>1&1;if(1!==r&&0!==a&&15!==a&&3!==i){var l=3===r?3-s:3===s?3:4,c=1e3*o.BitratesMap[14*l+a-1],p=3===r?0:2===r?1:2,u=o.SamplingRateMap[3*p+i],d=e[t+3]>>6==3?1:2,h=o.SamplesCoefficients[r][s],m=o.BytesInSlot[s],b=8*h*m;return{sampleRate:u,channelCount:d,frameLength:parseInt(h*c/u+n,10)*m,samplesPerFrame:b}}},isHeaderPattern:function(e,t){return 255===e[t]&&224==(224&e[t+1])&&0!=(6&e[t+1])},isHeader:function(e,t){return!!(t+1<e.length&&this.isHeaderPattern(e,t))},probe:function(e,t){if(t+1<e.length&&this.isHeaderPattern(e,t)){var r=this.parseHeader(e,t),o=4;r&&r.frameLength&&(o=r.frameLength);var s=t+o;if(s===e.length||s+1<e.length&&this.isHeaderPattern(e,s))return!0}return!1}};t.default=o},"./src/demux/sample-aes.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=r("./src/crypt/decrypter.js"),s=function(){function e(e,t,r,s){this.decryptdata=r,this.discardEPB=s,this.decrypter=new o.default(e,t,{removePKCS7Padding:!1})}return e.prototype.decryptBuffer=function(e,t){this.decrypter.decrypt(e,this.decryptdata.key.buffer,this.decryptdata.iv.buffer,t)},e.prototype.decryptAacSample=function(e,t,r,o){var s=e[t].unit,a=s.subarray(16,s.length-s.length%16),i=a.buffer.slice(a.byteOffset,a.byteOffset+a.length),n=this;this.decryptBuffer(i,(function(a){a=new Uint8Array(a),s.set(a,16),o||n.decryptAacSamples(e,t+1,r)}))},e.prototype.decryptAacSamples=function(e,t,r){for(;;t++){if(t>=e.length)return void r();if(!(e[t].unit.length<32)){var o=this.decrypter.isSync();if(this.decryptAacSample(e,t,r,o),!o)return}}},e.prototype.getAvcEncryptedData=function(e){for(var t=16*Math.floor((e.length-48)/160)+16,r=new Int8Array(t),o=0,s=32;s<=e.length-16;s+=160,o+=16)r.set(e.subarray(s,s+16),o);return r},e.prototype.getAvcDecryptedUnit=function(e,t){t=new Uint8Array(t);for(var r=0,o=32;o<=e.length-16;o+=160,r+=16)e.set(t.subarray(r,r+16),o);return e},e.prototype.decryptAvcSample=function(e,t,r,o,s,a){var i=this.discardEPB(s.data),n=this.getAvcEncryptedData(i),l=this;this.decryptBuffer(n.buffer,(function(n){s.data=l.getAvcDecryptedUnit(i,n),a||l.decryptAvcSamples(e,t,r+1,o)}))},e.prototype.decryptAvcSamples=function(e,t,r,o){for(;;t++,r=0){if(t>=e.length)return void o();for(var s=e[t].units;!(r>=s.length);r++){var a=s[r];if(!(a.length<=48||1!==a.type&&5!==a.type)){var i=this.decrypter.isSync();if(this.decryptAvcSample(e,t,r,o,a,i),!i)return}}}},e}();t.default=s},"./src/demux/tsdemuxer.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=r("./src/demux/adts.js"),s=r("./src/demux/mpegaudio.js"),a=r("./src/events.js"),i=r("./src/demux/exp-golomb.js"),n=r("./src/demux/sample-aes.js"),l=r("./src/utils/logger.js"),c=r("./src/errors.js"),p={video:1,audio:2,id3:3,text:4},u=function(){function e(e,t,r,o){this.observer=e,this.config=r,this.typeSupported=o,this.remuxer=t,this.sampleAes=null}return e.prototype.setDecryptData=function(e){null!=e&&null!=e.key&&"SAMPLE-AES"===e.method?this.sampleAes=new n.default(this.observer,this.config,e,this.discardEPB):this.sampleAes=null},e.probe=function(t){var r=e._syncOffset(t);return!(r<0||(r&&l.logger.warn("MPEG2-TS detected but first sync word found @ offset "+r+", junk ahead ?"),0))},e._syncOffset=function(e){for(var t=Math.min(1e3,e.length-564),r=0;r<t;){if(71===e[r]&&71===e[r+188]&&71===e[r+376])return r;r++}return-1},e.createTrack=function(e,t){return{container:"video"===e||"audio"===e?"video/mp2t":void 0,type:e,id:p[e],pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],len:0,dropped:"video"===e?0:void 0,isAAC:"audio"===e||void 0,duration:"audio"===e?t:void 0}},e.prototype.resetInitSegment=function(t,r,o,s){this.pmtParsed=!1,this._pmtId=-1,this._avcTrack=e.createTrack("video",s),this._audioTrack=e.createTrack("audio",s),this._id3Track=e.createTrack("id3",s),this._txtTrack=e.createTrack("text",s),this.aacOverFlow=null,this.aacLastPTS=null,this.avcSample=null,this.audioCodec=r,this.videoCodec=o,this._duration=s},e.prototype.resetTimeStamp=function(){},e.prototype.append=function(t,r,o,s){var i,n,p,u,d,h=t.length,m=!1;this.contiguous=o;var b=this.pmtParsed,f=this._avcTrack,y=this._audioTrack,g=this._id3Track,v=f.pid,w=y.pid,k=g.pid,_=this._pmtId,E=f.pesData,j=y.pesData,D=g.pesData,S=this._parsePAT,C=this._parsePMT,O=this._parsePES,P=this._parseAVCPES.bind(this),T=this._parseAACPES.bind(this),x=this._parseMPEGPES.bind(this),R=this._parseID3PES.bind(this),H=e._syncOffset(t);for(h-=(h+H)%188,i=H;i<h;i+=188)if(71===t[i]){if(n=!!(64&t[i+1]),p=((31&t[i+1])<<8)+t[i+2],(48&t[i+3])>>4>1){if((u=i+5+t[i+4])===i+188)continue}else u=i+4;switch(p){case v:n&&(E&&(d=O(E))&&void 0!==d.pts&&P(d,!1),E={data:[],size:0}),E&&(E.data.push(t.subarray(u,i+188)),E.size+=i+188-u);break;case w:n&&(j&&(d=O(j))&&void 0!==d.pts&&(y.isAAC?T(d):x(d)),j={data:[],size:0}),j&&(j.data.push(t.subarray(u,i+188)),j.size+=i+188-u);break;case k:n&&(D&&(d=O(D))&&void 0!==d.pts&&R(d),D={data:[],size:0}),D&&(D.data.push(t.subarray(u,i+188)),D.size+=i+188-u);break;case 0:n&&(u+=t[u]+1),_=this._pmtId=S(t,u);break;case _:n&&(u+=t[u]+1);var A=C(t,u,!0===this.typeSupported.mpeg||!0===this.typeSupported.mp3,null!=this.sampleAes);(v=A.avc)>0&&(f.pid=v),(w=A.audio)>0&&(y.pid=w,y.isAAC=A.isAAC),(k=A.id3)>0&&(g.pid=k),m&&!b&&(l.logger.log("reparse from beginning"),m=!1,i=H-188),b=this.pmtParsed=!0;break;case 17:case 8191:break;default:m=!0}}else this.observer.trigger(a.default.ERROR,{type:c.ErrorTypes.MEDIA_ERROR,details:c.ErrorDetails.FRAG_PARSING_ERROR,fatal:!1,reason:"TS packet did not start with 0x47"});E&&(d=O(E))&&void 0!==d.pts?(P(d,!0),f.pesData=null):f.pesData=E,j&&(d=O(j))&&void 0!==d.pts?(y.isAAC?T(d):x(d),y.pesData=null):(j&&j.size&&l.logger.log("last AAC PES packet truncated,might overlap between fragments"),y.pesData=j),D&&(d=O(D))&&void 0!==d.pts?(R(d),g.pesData=null):g.pesData=D,null==this.sampleAes?this.remuxer.remux(y,f,g,this._txtTrack,r,o,s):this.decryptAndRemux(y,f,g,this._txtTrack,r,o,s)},e.prototype.decryptAndRemux=function(e,t,r,o,s,a,i){if(e.samples&&e.isAAC){var n=this;this.sampleAes.decryptAacSamples(e.samples,0,(function(){n.decryptAndRemuxAvc(e,t,r,o,s,a,i)}))}else this.decryptAndRemuxAvc(e,t,r,o,s,a,i)},e.prototype.decryptAndRemuxAvc=function(e,t,r,o,s,a,i){if(t.samples){var n=this;this.sampleAes.decryptAvcSamples(t.samples,0,0,(function(){n.remuxer.remux(e,t,r,o,s,a,i)}))}else this.remuxer.remux(e,t,r,o,s,a,i)},e.prototype.destroy=function(){this._initPTS=this._initDTS=void 0,this._duration=0},e.prototype._parsePAT=function(e,t){return(31&e[t+10])<<8|e[t+11]},e.prototype._parsePMT=function(e,t,r,o){var s,a,i={audio:-1,avc:-1,id3:-1,isAAC:!0};for(s=t+3+((15&e[t+1])<<8|e[t+2])-4,t+=12+((15&e[t+10])<<8|e[t+11]);t<s;){switch(a=(31&e[t+1])<<8|e[t+2],e[t]){case 207:if(!o){l.logger.log("unkown stream type:"+e[t]);break}case 15:-1===i.audio&&(i.audio=a);break;case 21:-1===i.id3&&(i.id3=a);break;case 219:if(!o){l.logger.log("unkown stream type:"+e[t]);break}case 27:-1===i.avc&&(i.avc=a);break;case 3:case 4:r?-1===i.audio&&(i.audio=a,i.isAAC=!1):l.logger.log("MPEG audio found, not supported in this browser for now");break;case 36:l.logger.warn("HEVC stream type found, not supported for now");break;default:l.logger.log("unkown stream type:"+e[t])}t+=5+((15&e[t+3])<<8|e[t+4])}return i},e.prototype._parsePES=function(e){var t,r,o,s,a,i,n,c,p=0,u=e.data;if(!e||0===e.size)return null;for(;u[0].length<19&&u.length>1;){var d=new Uint8Array(u[0].length+u[1].length);d.set(u[0]),d.set(u[1],u[0].length),u[0]=d,u.splice(1,1)}if(1===((t=u[0])[0]<<16)+(t[1]<<8)+t[2]){if((o=(t[4]<<8)+t[5])&&o>e.size-6)return null;192&(r=t[7])&&((i=536870912*(14&t[9])+4194304*(255&t[10])+16384*(254&t[11])+128*(255&t[12])+(254&t[13])/2)>4294967295&&(i-=8589934592),64&r?((n=536870912*(14&t[14])+4194304*(255&t[15])+16384*(254&t[16])+128*(255&t[17])+(254&t[18])/2)>4294967295&&(n-=8589934592),i-n>54e5&&(l.logger.warn(Math.round((i-n)/9e4)+"s delta between PTS and DTS, align them"),i=n)):n=i),c=(s=t[8])+9,e.size-=c,a=new Uint8Array(e.size);for(var h=0,m=u.length;h<m;h++){var b=(t=u[h]).byteLength;if(c){if(c>b){c-=b;continue}t=t.subarray(c),b-=c,c=0}a.set(t,p),p+=b}return o&&(o-=s+3),{data:a,pts:i,dts:n,len:o}}return null},e.prototype.pushAccesUnit=function(e,t){if(e.units.length&&e.frame){var r=t.samples,o=r.length;!this.config.forceKeyFrameOnDiscontinuity||!0===e.key||t.sps&&(o||this.contiguous)?(e.id=o,r.push(e)):t.dropped++}e.debug.length&&l.logger.log(e.pts+"/"+e.dts+":"+e.debug)},e.prototype._parseAVCPES=function(e,t){var r,o,s,a=this,n=this._avcTrack,l=this._parseAVCNALu(e.data),c=this.avcSample,p=!1,u=this.pushAccesUnit.bind(this),d=function(e,t,r,o){return{key:e,pts:t,dts:r,units:[],debug:o}};e.data=null,c&&l.length&&!n.audFound&&(u(c,n),c=this.avcSample=d(!1,e.pts,e.dts,"")),l.forEach((function(t){switch(t.type){case 1:o=!0,c||(c=a.avcSample=d(!0,e.pts,e.dts,"")),c.frame=!0;var l=t.data;if(p&&l.length>4){var h=new i.default(l).readSliceType();2!==h&&4!==h&&7!==h&&9!==h||(c.key=!0)}break;case 5:o=!0,c||(c=a.avcSample=d(!0,e.pts,e.dts,"")),c.key=!0,c.frame=!0;break;case 6:o=!0,(r=new i.default(a.discardEPB(t.data))).readUByte();for(var m=0,b=0,f=!1,y=0;!f&&r.bytesAvailable>1;){m=0;do{m+=y=r.readUByte()}while(255===y);b=0;do{b+=y=r.readUByte()}while(255===y);if(4===m&&0!==r.bytesAvailable){if(f=!0,181===r.readUByte()&&49===r.readUShort()&&1195456820===r.readUInt()&&3===r.readUByte()){var g=r.readUByte(),v=31&g,w=[g,r.readUByte()];for(s=0;s<v;s++)w.push(r.readUByte()),w.push(r.readUByte()),w.push(r.readUByte());a._insertSampleInOrder(a._txtTrack.samples,{type:3,pts:e.pts,bytes:w})}}else if(b<r.bytesAvailable)for(s=0;s<b;s++)r.readUByte()}break;case 7:if(o=!0,p=!0,!n.sps){var k=(r=new i.default(t.data)).readSPS();n.width=k.width,n.height=k.height,n.pixelRatio=k.pixelRatio,n.sps=[t.data],n.duration=a._duration;var _=t.data.subarray(1,4),E="avc1.";for(s=0;s<3;s++){var j=_[s].toString(16);j.length<2&&(j="0"+j),E+=j}n.codec=E}break;case 8:o=!0,n.pps||(n.pps=[t.data]);break;case 9:o=!1,n.audFound=!0,c&&u(c,n),c=a.avcSample=d(!1,e.pts,e.dts,"");break;case 12:o=!1;break;default:o=!1,c&&(c.debug+="unknown NAL "+t.type+" ")}c&&o&&c.units.push(t)})),t&&c&&(u(c,n),this.avcSample=null)},e.prototype._insertSampleInOrder=function(e,t){var r=e.length;if(r>0){if(t.pts>=e[r-1].pts)e.push(t);else for(var o=r-1;o>=0;o--)if(t.pts<e[o].pts){e.splice(o,0,t);break}}else e.push(t)},e.prototype._getLastNalUnit=function(){var e,t=this.avcSample;if(!t||0===t.units.length){var r=this._avcTrack.samples;t=r[r.length-1]}if(t){var o=t.units;e=o[o.length-1]}return e},e.prototype._parseAVCNALu=function(e){var t,r,o,s,a=0,i=e.byteLength,n=this._avcTrack,l=n.naluState||0,c=l,p=[],u=-1;for(-1===l&&(u=0,s=31&e[0],l=0,a=1);a<i;)if(t=e[a++],l)if(1!==l)if(t)if(1===t){var d,h;u>=0?(o={data:e.subarray(u,a-l-1),type:s},p.push(o)):(d=this._getLastNalUnit())&&(c&&a<=4-c&&d.state&&(d.data=d.data.subarray(0,d.data.byteLength-c)),(r=a-l-1)>0&&((h=new Uint8Array(d.data.byteLength+r)).set(d.data,0),h.set(e.subarray(0,r),d.data.byteLength),d.data=h)),a<i?(u=a,s=31&e[a],l=0):l=-1}else l=0;else l=3;else l=t?0:2;else l=t?0:1;return u>=0&&l>=0&&(o={data:e.subarray(u,i),type:s,state:l},p.push(o)),0===p.length&&(d=this._getLastNalUnit())&&((h=new Uint8Array(d.data.byteLength+e.byteLength)).set(d.data,0),h.set(e,d.data.byteLength),d.data=h),n.naluState=l,p},e.prototype.discardEPB=function(e){for(var t,r,o=e.byteLength,s=[],a=1;a<o-2;)0===e[a]&&0===e[a+1]&&3===e[a+2]?(s.push(a+2),a+=2):a++;if(0===s.length)return e;t=o-s.length,r=new Uint8Array(t);var i=0;for(a=0;a<t;i++,a++)i===s[0]&&(i++,s.shift()),r[a]=e[i];return r},e.prototype._parseAACPES=function(e){var t,r,s,i,n,p=this._audioTrack,u=e.data,d=e.pts,h=this.aacOverFlow,m=this.aacLastPTS;if(h){var b=new Uint8Array(h.byteLength+u.byteLength);b.set(h,0),b.set(u,h.byteLength),u=b}for(s=0,n=u.length;s<n-1&&!o.isHeader(u,s);s++);if(s){var f=void 0,y=void 0;if(s<n-1?(f="AAC PES did not start with ADTS header,offset:"+s,y=!1):(f="no ADTS header found in AAC PES",y=!0),l.logger.warn("parsing error:"+f),this.observer.trigger(a.default.ERROR,{type:c.ErrorTypes.MEDIA_ERROR,details:c.ErrorDetails.FRAG_PARSING_ERROR,fatal:y,reason:f}),y)return}if(o.initTrackConfig(p,this.observer,u,s,this.audioCodec),r=0,t=o.getFrameDuration(p.samplerate),h&&m){var g=m+t;Math.abs(g-d)>1&&(l.logger.log("AAC: align PTS for overlapping frames by "+Math.round((g-d)/90)),d=g)}for(;s<n;)if(o.isHeader(u,s)&&s+5<n){var v=o.appendFrame(p,u,s,d,r);if(!v)break;s+=v.length,i=v.sample.pts,r++}else s++;h=s<n?u.subarray(s,n):null,this.aacOverFlow=h,this.aacLastPTS=i},e.prototype._parseMPEGPES=function(e){for(var t=e.data,r=t.length,o=0,a=0,i=e.pts;a<r;)if(s.default.isHeader(t,a)){var n=s.default.appendFrame(this._audioTrack,t,a,i,o);if(!n)break;a+=n.length,o++}else a++},e.prototype._parseID3PES=function(e){this._id3Track.samples.push(e)},e}();t.default=u},"./src/errors.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ErrorTypes={NETWORK_ERROR:"networkError",MEDIA_ERROR:"mediaError",KEY_SYSTEM_ERROR:"keySystemError",MUX_ERROR:"muxError",OTHER_ERROR:"otherError"},t.ErrorDetails={KEY_SYSTEM_NO_KEYS:"keySystemNoKeys",KEY_SYSTEM_NO_ACCESS:"keySystemNoAccess",KEY_SYSTEM_NO_SESSION:"keySystemNoSession",KEY_SYSTEM_LICENSE_REQUEST_FAILED:"keySystemLicenseRequestFailed",MANIFEST_LOAD_ERROR:"manifestLoadError",MANIFEST_LOAD_TIMEOUT:"manifestLoadTimeOut",MANIFEST_PARSING_ERROR:"manifestParsingError",MANIFEST_INCOMPATIBLE_CODECS_ERROR:"manifestIncompatibleCodecsError",LEVEL_LOAD_ERROR:"levelLoadError",LEVEL_LOAD_TIMEOUT:"levelLoadTimeOut",LEVEL_SWITCH_ERROR:"levelSwitchError",AUDIO_TRACK_LOAD_ERROR:"audioTrackLoadError",AUDIO_TRACK_LOAD_TIMEOUT:"audioTrackLoadTimeOut",FRAG_LOAD_ERROR:"fragLoadError",FRAG_LOAD_TIMEOUT:"fragLoadTimeOut",FRAG_DECRYPT_ERROR:"fragDecryptError",FRAG_PARSING_ERROR:"fragParsingError",REMUX_ALLOC_ERROR:"remuxAllocError",KEY_LOAD_ERROR:"keyLoadError",KEY_LOAD_TIMEOUT:"keyLoadTimeOut",BUFFER_ADD_CODEC_ERROR:"bufferAddCodecError",BUFFER_APPEND_ERROR:"bufferAppendError",BUFFER_APPENDING_ERROR:"bufferAppendingError",BUFFER_STALLED_ERROR:"bufferStalledError",BUFFER_FULL_ERROR:"bufferFullError",BUFFER_SEEK_OVER_HOLE:"bufferSeekOverHole",BUFFER_NUDGE_ON_STALL:"bufferNudgeOnStall",INTERNAL_EXCEPTION:"internalException"}},"./src/event-handler.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=r("./src/utils/logger.js"),s=r("./src/errors.js"),a=r("./src/events.js"),i={hlsEventGeneric:!0,hlsHandlerDestroying:!0,hlsHandlerDestroyed:!0},n=function(){function e(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];this.hls=e,this.onEvent=this.onEvent.bind(this),this.handledEvents=t,this.useGenericHandler=!0,this.registerListeners()}return e.prototype.destroy=function(){this.onHandlerDestroying(),this.unregisterListeners(),this.onHandlerDestroyed()},e.prototype.onHandlerDestroying=function(){},e.prototype.onHandlerDestroyed=function(){},e.prototype.isEventHandler=function(){return"object"==typeof this.handledEvents&&this.handledEvents.length&&"function"==typeof this.onEvent},e.prototype.registerListeners=function(){this.isEventHandler()&&this.handledEvents.forEach((function(e){if(i[e])throw new Error("Forbidden event-name: "+e);this.hls.on(e,this.onEvent)}),this)},e.prototype.unregisterListeners=function(){this.isEventHandler()&&this.handledEvents.forEach((function(e){this.hls.off(e,this.onEvent)}),this)},e.prototype.onEvent=function(e,t){this.onEventGeneric(e,t)},e.prototype.onEventGeneric=function(e,t){try{(function(e,t){var r="on"+e.replace("hls","");if("function"!=typeof this[r])throw new Error("Event "+e+" has no generic handler in this "+this.constructor.name+" class (tried "+r+")");return this[r].bind(this,t)}).call(this,e,t).call()}catch(t){o.logger.error("An internal error happened while handling event "+e+'. Error message: "'+t.message+'". Here is a stacktrace:',t),this.hls.trigger(a.default.ERROR,{type:s.ErrorTypes.OTHER_ERROR,details:s.ErrorDetails.INTERNAL_EXCEPTION,fatal:!1,event:e,err:t})}},e}();t.default=n},"./src/events.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={MEDIA_ATTACHING:"hlsMediaAttaching",MEDIA_ATTACHED:"hlsMediaAttached",MEDIA_DETACHING:"hlsMediaDetaching",MEDIA_DETACHED:"hlsMediaDetached",BUFFER_RESET:"hlsBufferReset",BUFFER_CODECS:"hlsBufferCodecs",BUFFER_CREATED:"hlsBufferCreated",BUFFER_APPENDING:"hlsBufferAppending",BUFFER_APPENDED:"hlsBufferAppended",BUFFER_EOS:"hlsBufferEos",BUFFER_FLUSHING:"hlsBufferFlushing",BUFFER_FLUSHED:"hlsBufferFlushed",MANIFEST_LOADING:"hlsManifestLoading",MANIFEST_LOADED:"hlsManifestLoaded",MANIFEST_PARSED:"hlsManifestParsed",LEVEL_SWITCHING:"hlsLevelSwitching",LEVEL_SWITCHED:"hlsLevelSwitched",LEVEL_LOADING:"hlsLevelLoading",LEVEL_LOADED:"hlsLevelLoaded",LEVEL_UPDATED:"hlsLevelUpdated",LEVEL_PTS_UPDATED:"hlsLevelPtsUpdated",AUDIO_TRACKS_UPDATED:"hlsAudioTracksUpdated",AUDIO_TRACK_SWITCHING:"hlsAudioTrackSwitching",AUDIO_TRACK_SWITCHED:"hlsAudioTrackSwitched",AUDIO_TRACK_LOADING:"hlsAudioTrackLoading",AUDIO_TRACK_LOADED:"hlsAudioTrackLoaded",SUBTITLE_TRACKS_UPDATED:"hlsSubtitleTracksUpdated",SUBTITLE_TRACK_SWITCH:"hlsSubtitleTrackSwitch",SUBTITLE_TRACK_LOADING:"hlsSubtitleTrackLoading",SUBTITLE_TRACK_LOADED:"hlsSubtitleTrackLoaded",SUBTITLE_FRAG_PROCESSED:"hlsSubtitleFragProcessed",INIT_PTS_FOUND:"hlsInitPtsFound",FRAG_LOADING:"hlsFragLoading",FRAG_LOAD_PROGRESS:"hlsFragLoadProgress",FRAG_LOAD_EMERGENCY_ABORTED:"hlsFragLoadEmergencyAborted",FRAG_LOADED:"hlsFragLoaded",FRAG_DECRYPTED:"hlsFragDecrypted",FRAG_PARSING_INIT_SEGMENT:"hlsFragParsingInitSegment",FRAG_PARSING_USERDATA:"hlsFragParsingUserdata",FRAG_PARSING_METADATA:"hlsFragParsingMetadata",FRAG_PARSING_DATA:"hlsFragParsingData",FRAG_PARSED:"hlsFragParsed",FRAG_BUFFERED:"hlsFragBuffered",FRAG_CHANGED:"hlsFragChanged",FPS_DROP:"hlsFpsDrop",FPS_DROP_LEVEL_CAPPING:"hlsFpsDropLevelCapping",ERROR:"hlsError",DESTROYING:"hlsDestroying",KEY_LOADING:"hlsKeyLoading",KEY_LOADED:"hlsKeyLoaded",STREAM_STATE_TRANSITION:"hlsStreamStateTransition"}},"./src/hls.js":function(e,t,r){"use strict";var o,s=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var a=r("./node_modules/url-toolkit/src/url-toolkit.js"),i=r("./src/errors.js"),n=r("./src/loader/playlist-loader.js"),l=r("./src/loader/fragment-loader.js"),c=r("./src/loader/key-loader.js"),p=r("./src/controller/fragment-tracker.js"),u=r("./src/controller/stream-controller.js"),d=r("./src/controller/level-controller.js"),h=r("./src/controller/id3-track-controller.js"),m=r("./src/is-supported.js"),b=r("./src/utils/logger.js"),f=r("./src/config.js"),y=r("./src/events.js"),g=function(e){function t(r){void 0===r&&(r={});var o=e.call(this)||this,s=t.DefaultConfig;if((r.liveSyncDurationCount||r.liveMaxLatencyDurationCount)&&(r.liveSyncDuration||r.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");for(var a in s)a in r||(r[a]=s[a]);if(void 0!==r.liveMaxLatencyDurationCount&&r.liveMaxLatencyDurationCount<=r.liveSyncDurationCount)throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be gt "liveSyncDurationCount"');if(void 0!==r.liveMaxLatencyDuration&&(r.liveMaxLatencyDuration<=r.liveSyncDuration||void 0===r.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be gt "liveSyncDuration"');b.enableLogs(r.debug),o.config=r,o._autoLevelCapping=-1;var i=o.abrController=new r.abrController(o),m=new r.bufferController(o),f=new r.capLevelController(o),y=new r.fpsController(o),g=new n.default(o),v=new l.default(o),w=new c.default(o),k=new h.default(o),_=o.levelController=new d.default(o),E=new p.FragmentTracker(o),j=[_,o.streamController=new u.default(o,E)],D=r.audioStreamController;D&&j.push(new D(o,E)),o.networkControllers=j;var S=[g,v,w,i,m,f,y,k,E];if(D=r.audioTrackController){var C=new D(o);o.audioTrackController=C,S.push(C)}if(D=r.subtitleTrackController){var O=new D(o);o.subtitleTrackController=O,j.push(O)}if(D=r.emeController){var P=new D(o);o.emeController=P,S.push(P)}return(D=r.subtitleStreamController)&&j.push(new D(o,E)),(D=r.timelineController)&&S.push(new D(o)),o.coreComponents=S,o}return s(t,e),Object.defineProperty(t,"version",{get:function(){return"0.12.4"},enumerable:!0,configurable:!0}),t.isSupported=function(){return m.isSupported()},Object.defineProperty(t,"Events",{get:function(){return y.default},enumerable:!0,configurable:!0}),Object.defineProperty(t,"ErrorTypes",{get:function(){return i.ErrorTypes},enumerable:!0,configurable:!0}),Object.defineProperty(t,"ErrorDetails",{get:function(){return i.ErrorDetails},enumerable:!0,configurable:!0}),Object.defineProperty(t,"DefaultConfig",{get:function(){return t.defaultConfig?t.defaultConfig:f.hlsDefaultConfig},set:function(e){t.defaultConfig=e},enumerable:!0,configurable:!0}),t.prototype.destroy=function(){b.logger.log("destroy"),this.trigger(y.default.DESTROYING),this.detachMedia(),this.coreComponents.concat(this.networkControllers).forEach((function(e){e.destroy()})),this.url=null,this.removeAllListeners(),this._autoLevelCapping=-1},t.prototype.attachMedia=function(e){b.logger.log("attachMedia"),this.media=e,this.trigger(y.default.MEDIA_ATTACHING,{media:e})},t.prototype.detachMedia=function(){b.logger.log("detachMedia"),this.trigger(y.default.MEDIA_DETACHING),this.media=null},t.prototype.loadSource=function(e){e=a.buildAbsoluteURL(window.location.href,e,{alwaysNormalize:!0}),b.logger.log("loadSource:"+e),this.url=e,this.trigger(y.default.MANIFEST_LOADING,{url:e})},t.prototype.startLoad=function(e){void 0===e&&(e=-1),b.logger.log("startLoad("+e+")"),this.networkControllers.forEach((function(t){t.startLoad(e)}))},t.prototype.stopLoad=function(){b.logger.log("stopLoad"),this.networkControllers.forEach((function(e){e.stopLoad()}))},t.prototype.swapAudioCodec=function(){b.logger.log("swapAudioCodec"),this.streamController.swapAudioCodec()},t.prototype.recoverMediaError=function(){b.logger.log("recoverMediaError");var e=this.media;this.detachMedia(),this.attachMedia(e)},Object.defineProperty(t.prototype,"levels",{get:function(){return this.levelController.levels},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"currentLevel",{get:function(){return this.streamController.currentLevel},set:function(e){b.logger.log("set currentLevel:"+e),this.loadLevel=e,this.streamController.immediateLevelSwitch()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"nextLevel",{get:function(){return this.streamController.nextLevel},set:function(e){b.logger.log("set nextLevel:"+e),this.levelController.manualLevel=e,this.streamController.nextLevelSwitch()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"loadLevel",{get:function(){return this.levelController.level},set:function(e){b.logger.log("set loadLevel:"+e),this.levelController.manualLevel=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"nextLoadLevel",{get:function(){return this.levelController.nextLoadLevel},set:function(e){this.levelController.nextLoadLevel=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"firstLevel",{get:function(){return Math.max(this.levelController.firstLevel,this.minAutoLevel)},set:function(e){b.logger.log("set firstLevel:"+e),this.levelController.firstLevel=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"startLevel",{get:function(){return this.levelController.startLevel},set:function(e){b.logger.log("set startLevel:"+e),-1!==e&&(e=Math.max(e,this.minAutoLevel)),this.levelController.startLevel=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"autoLevelCapping",{get:function(){return this._autoLevelCapping},set:function(e){b.logger.log("set autoLevelCapping:"+e),this._autoLevelCapping=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"autoLevelEnabled",{get:function(){return-1===this.levelController.manualLevel},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"manualLevel",{get:function(){return this.levelController.manualLevel},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"minAutoLevel",{get:function(){for(var e=this.levels,t=this.config.minAutoBitrate,r=e?e.length:0,o=0;o<r;o++)if((e[o].realBitrate?Math.max(e[o].realBitrate,e[o].bitrate):e[o].bitrate)>t)return o;return 0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maxAutoLevel",{get:function(){var e=this.levels,t=this.autoLevelCapping;return-1===t&&e&&e.length?e.length-1:t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"nextAutoLevel",{get:function(){return Math.min(Math.max(this.abrController.nextAutoLevel,this.minAutoLevel),this.maxAutoLevel)},set:function(e){this.abrController.nextAutoLevel=Math.max(this.minAutoLevel,e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"audioTracks",{get:function(){var e=this.audioTrackController;return e?e.audioTracks:[]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"audioTrack",{get:function(){var e=this.audioTrackController;return e?e.audioTrack:-1},set:function(e){var t=this.audioTrackController;t&&(t.audioTrack=e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"liveSyncPosition",{get:function(){return this.streamController.liveSyncPosition},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"subtitleTracks",{get:function(){var e=this.subtitleTrackController;return e?e.subtitleTracks:[]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"subtitleTrack",{get:function(){var e=this.subtitleTrackController;return e?e.subtitleTrack:-1},set:function(e){var t=this.subtitleTrackController;t&&(t.subtitleTrack=e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"subtitleDisplay",{get:function(){var e=this.subtitleTrackController;return!!e&&e.subtitleDisplay},set:function(e){var t=this.subtitleTrackController;t&&(t.subtitleDisplay=e)},enumerable:!0,configurable:!0}),t}(r("./src/observer.js").Observer);t.default=g},"./src/is-supported.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=r("./src/utils/mediasource-helper.js");t.isSupported=function(){var e=o.getMediaSource(),t=window.SourceBuffer||window.WebKitSourceBuffer,r=e&&"function"==typeof e.isTypeSupported&&e.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),s=!t||t.prototype&&"function"==typeof t.prototype.appendBuffer&&"function"==typeof t.prototype.remove;return!!r&&!!s}},"./src/loader/fragment-loader.js":function(e,t,r){"use strict";(function(e){var o,s=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var a=r("./src/events.js"),i=r("./src/event-handler.js"),n=r("./src/errors.js"),l=r("./src/utils/logger.js"),c=function(t){function r(e){var r=t.call(this,e,a.default.FRAG_LOADING)||this;return r.loaders={},r}return s(r,t),r.prototype.destroy=function(){var e=this.loaders;for(var r in e){var o=e[r];o&&o.destroy()}this.loaders={},t.prototype.destroy.call(this)},r.prototype.onFragLoading=function(t){var r=t.frag,o=r.type,s=this.loaders,a=this.hls.config,i=a.fLoader,n=a.loader;r.loaded=0;var c,p,u,d=s[o];d&&(l.logger.warn("abort previous fragment loader for type: "+o),d.abort()),d=s[o]=r.loader=a.fLoader?new i(a):new n(a),c={url:r.url,frag:r,responseType:"arraybuffer",progressData:!1};var h=r.byteRangeStartOffset,m=r.byteRangeEndOffset;e.isFinite(h)&&e.isFinite(m)&&(c.rangeStart=h,c.rangeEnd=m),p={timeout:a.fragLoadingTimeOut,maxRetry:0,retryDelay:0,maxRetryDelay:a.fragLoadingMaxRetryTimeout},u={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this),onProgress:this.loadprogress.bind(this)},d.load(c,p,u)},r.prototype.loadsuccess=function(e,t,r,o){void 0===o&&(o=null);var s=e.data,i=r.frag;i.loader=void 0,this.loaders[i.type]=void 0,this.hls.trigger(a.default.FRAG_LOADED,{payload:s,frag:i,stats:t,networkDetails:o})},r.prototype.loaderror=function(e,t,r){void 0===r&&(r=null);var o=t.frag,s=o.loader;s&&s.abort(),this.loaders[o.type]=void 0,this.hls.trigger(a.default.ERROR,{type:n.ErrorTypes.NETWORK_ERROR,details:n.ErrorDetails.FRAG_LOAD_ERROR,fatal:!1,frag:t.frag,response:e,networkDetails:r})},r.prototype.loadtimeout=function(e,t,r){void 0===r&&(r=null);var o=t.frag,s=o.loader;s&&s.abort(),this.loaders[o.type]=void 0,this.hls.trigger(a.default.ERROR,{type:n.ErrorTypes.NETWORK_ERROR,details:n.ErrorDetails.FRAG_LOAD_TIMEOUT,fatal:!1,frag:t.frag,networkDetails:r})},r.prototype.loadprogress=function(e,t,r,o){void 0===o&&(o=null);var s=t.frag;s.loaded=e.loaded,this.hls.trigger(a.default.FRAG_LOAD_PROGRESS,{frag:s,stats:e,networkDetails:o})},r}(i.default);t.default=c}).call(this,r("./src/polyfills/number.js").Number)},"./src/loader/fragment.js":function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var o=r("./node_modules/url-toolkit/src/url-toolkit.js"),s=r("./src/loader/level-key.js"),a=function(){function t(){var e;this._url=null,this._byteRange=null,this._decryptdata=null,this.tagList=[],this.programDateTime=null,this.rawProgramDateTime=null,this._elementaryStreams=((e={})[t.ElementaryStreamTypes.AUDIO]=!1,e[t.ElementaryStreamTypes.VIDEO]=!1,e)}return Object.defineProperty(t,"ElementaryStreamTypes",{get:function(){return{AUDIO:"audio",VIDEO:"video"}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"url",{get:function(){return!this._url&&this.relurl&&(this._url=o.buildAbsoluteURL(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url},set:function(e){this._url=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"byteRange",{get:function(){if(!this._byteRange&&!this.rawByteRange)return[];if(this._byteRange)return this._byteRange;var e=[];if(this.rawByteRange){var t=this.rawByteRange.split("@",2);if(1===t.length){var r=this.lastByteRangeEndOffset;e[0]=r||0}else e[0]=parseInt(t[1]);e[1]=parseInt(t[0])+e[0],this._byteRange=e}return e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"byteRangeStartOffset",{get:function(){return this.byteRange[0]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"byteRangeEndOffset",{get:function(){return this.byteRange[1]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"decryptdata",{get:function(){return this._decryptdata||(this._decryptdata=this.fragmentDecryptdataFromLevelkey(this.levelkey,this.sn)),this._decryptdata},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"endProgramDateTime",{get:function(){if(!e.isFinite(this.programDateTime))return null;var t=e.isFinite(this.duration)?this.duration:0;return this.programDateTime+1e3*t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"encrypted",{get:function(){return!(!this.decryptdata||null===this.decryptdata.uri||null!==this.decryptdata.key)},enumerable:!0,configurable:!0}),t.prototype.addElementaryStream=function(e){this._elementaryStreams[e]=!0},t.prototype.hasElementaryStream=function(e){return!0===this._elementaryStreams[e]},t.prototype.createInitializationVector=function(e){for(var t=new Uint8Array(16),r=12;r<16;r++)t[r]=e>>8*(15-r)&255;return t},t.prototype.fragmentDecryptdataFromLevelkey=function(e,t){var r=e;return e&&e.method&&e.uri&&!e.iv&&((r=new s.default).method=e.method,r.baseuri=e.baseuri,r.reluri=e.reluri,r.iv=this.createInitializationVector(t)),r},t}();t.default=a}).call(this,r("./src/polyfills/number.js").Number)},"./src/loader/key-loader.js":function(e,t,r){"use strict";var o,s=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var a=r("./src/events.js"),i=r("./src/event-handler.js"),n=r("./src/errors.js"),l=r("./src/utils/logger.js"),c=function(e){function t(t){var r=e.call(this,t,a.default.KEY_LOADING)||this;return r.loaders={},r.decryptkey=null,r.decrypturl=null,r}return s(t,e),t.prototype.destroy=function(){for(var e in this.loaders){var t=this.loaders[e];t&&t.destroy()}this.loaders={},i.default.prototype.destroy.call(this)},t.prototype.onKeyLoading=function(e){var t=e.frag,r=t.type,o=this.loaders[r],s=t.decryptdata,i=s.uri;if(i!==this.decrypturl||null===this.decryptkey){var n,c,p,u=this.hls.config;o&&(l.logger.warn("abort previous key loader for type:"+r),o.abort()),t.loader=this.loaders[r]=new u.loader(u),this.decrypturl=i,this.decryptkey=null,n={url:i,frag:t,responseType:"arraybuffer"},c={timeout:u.fragLoadingTimeOut,maxRetry:0,retryDelay:u.fragLoadingRetryDelay,maxRetryDelay:u.fragLoadingMaxRetryTimeout},p={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)},t.loader.load(n,c,p)}else this.decryptkey&&(s.key=this.decryptkey,this.hls.trigger(a.default.KEY_LOADED,{frag:t}))},t.prototype.loadsuccess=function(e,t,r){var o=r.frag;this.decryptkey=o.decryptdata.key=new Uint8Array(e.data),o.loader=void 0,this.loaders[o.type]=void 0,this.hls.trigger(a.default.KEY_LOADED,{frag:o})},t.prototype.loaderror=function(e,t){var r=t.frag,o=r.loader;o&&o.abort(),this.loaders[t.type]=void 0,this.hls.trigger(a.default.ERROR,{type:n.ErrorTypes.NETWORK_ERROR,details:n.ErrorDetails.KEY_LOAD_ERROR,fatal:!1,frag:r,response:e})},t.prototype.loadtimeout=function(e,t){var r=t.frag,o=r.loader;o&&o.abort(),this.loaders[t.type]=void 0,this.hls.trigger(a.default.ERROR,{type:n.ErrorTypes.NETWORK_ERROR,details:n.ErrorDetails.KEY_LOAD_TIMEOUT,fatal:!1,frag:r})},t}(i.default);t.default=c},"./src/loader/level-key.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=r("./node_modules/url-toolkit/src/url-toolkit.js"),s=function(){function e(){this.method=null,this.key=null,this.iv=null,this._uri=null}return Object.defineProperty(e.prototype,"uri",{get:function(){return!this._uri&&this.reluri&&(this._uri=o.buildAbsoluteURL(this.baseuri,this.reluri,{alwaysNormalize:!0})),this._uri},enumerable:!0,configurable:!0}),e}();t.default=s},"./src/loader/level.js":function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function t(e){this.endCC=0,this.endSN=0,this.fragments=[],this.initSegment=null,this.live=!0,this.needSidxRanges=!1,this.startCC=0,this.startSN=0,this.startTimeOffset=null,this.targetduration=0,this.totalduration=0,this.type=null,this.url=e,this.version=null}return Object.defineProperty(t.prototype,"hasProgramDateTime",{get:function(){return!(!this.fragments[0]||!e.isFinite(this.fragments[0].programDateTime))},enumerable:!0,configurable:!0}),t}();t.default=r}).call(this,r("./src/polyfills/number.js").Number)},"./src/loader/m3u8-parser.js":function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var o=r("./node_modules/url-toolkit/src/url-toolkit.js"),s=r("./src/loader/fragment.js"),a=r("./src/loader/level.js"),i=r("./src/loader/level-key.js"),n=r("./src/utils/attr-list.js"),l=r("./src/utils/logger.js"),c=r("./src/utils/codecs.js"),p=/#EXT-X-STREAM-INF:([^\n\r]*)[\r\n]+([^\r\n]+)/g,u=/#EXT-X-MEDIA:(.*)/g,d=new RegExp([/#EXTINF:\s*(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/|(?!#)([\S+ ?]+)/.source,/|#EXT-X-BYTERANGE:*(.+)/.source,/|#EXT-X-PROGRAM-DATE-TIME:(.+)/.source,/|#.*/.source].join(""),"g"),h=/(?:(?:#(EXTM3U))|(?:#EXT-X-(PLAYLIST-TYPE):(.+))|(?:#EXT-X-(MEDIA-SEQUENCE): *(\d+))|(?:#EXT-X-(TARGETDURATION): *(\d+))|(?:#EXT-X-(KEY):(.+))|(?:#EXT-X-(START):(.+))|(?:#EXT-X-(ENDLIST))|(?:#EXT-X-(DISCONTINUITY-SEQ)UENCE:(\d+))|(?:#EXT-X-(DIS)CONTINUITY))|(?:#EXT-X-(VERSION):(\d+))|(?:#EXT-X-(MAP):(.+))|(?:(#)([^:]*):(.*))|(?:(#)(.*))(?:.*)\r?\n?/,m=/\.(mp4|m4s|m4v|m4a)$/i,b=function(){function t(){}return t.findGroup=function(e,t){if(!e)return null;for(var r=null,o=0;o<e.length;o++){var s=e[o];s.id===t&&(r=s)}return r},t.convertAVC1ToAVCOTI=function(e){var t,r=e.split(".");return r.length>2?(t=r.shift()+".",t+=parseInt(r.shift()).toString(16),t+=("000"+parseInt(r.shift()).toString(16)).substr(-4)):t=e,t},t.resolve=function(e,t){return o.buildAbsoluteURL(t,e,{alwaysNormalize:!0})},t.parseMasterPlaylist=function(e,r){var o,s=[];function a(e,t){["video","audio"].forEach((function(r){var o=e.filter((function(e){return c.isCodecType(e,r)}));if(o.length){var s=o.filter((function(e){return 0===e.lastIndexOf("avc1",0)||0===e.lastIndexOf("mp4a",0)}));t[r+"Codec"]=s.length>0?s[0]:o[0],e=e.filter((function(e){return-1===o.indexOf(e)}))}})),t.unknownCodecs=e}for(p.lastIndex=0;null!=(o=p.exec(e));){var i={},l=i.attrs=new n.default(o[1]);i.url=t.resolve(o[2],r);var u=l.decimalResolution("RESOLUTION");u&&(i.width=u.width,i.height=u.height),i.bitrate=l.decimalInteger("AVERAGE-BANDWIDTH")||l.decimalInteger("BANDWIDTH"),i.name=l.NAME,a([].concat((l.CODECS||"").split(/[ ,]+/)),i),i.videoCodec&&-1!==i.videoCodec.indexOf("avc1")&&(i.videoCodec=t.convertAVC1ToAVCOTI(i.videoCodec)),s.push(i)}return s},t.parseMasterPlaylistMedia=function(e,r,o,s){var a;void 0===s&&(s=[]);var i=[],l=0;for(u.lastIndex=0;null!==(a=u.exec(e));){var c={},p=new n.default(a[1]);if(p.TYPE===o){if(c.groupId=p["GROUP-ID"],c.name=p.NAME,c.type=o,c.default="YES"===p.DEFAULT,c.autoselect="YES"===p.AUTOSELECT,c.forced="YES"===p.FORCED,p.URI&&(c.url=t.resolve(p.URI,r)),c.lang=p.LANGUAGE,c.name||(c.name=c.lang),s.length){var d=t.findGroup(s,c.groupId);c.audioCodec=d?d.codec:s[0].codec}c.id=l++,i.push(c)}}return i},t.parseLevelPlaylist=function(t,r,o,c,p){var u,b,y=0,g=0,v=new a.default(r),w=new i.default,k=0,_=null,E=new s.default,j=null;for(d.lastIndex=0;null!==(u=d.exec(t));){var D=u[1];if(D){E.duration=parseFloat(D);var S=(" "+u[2]).slice(1);E.title=S||null,E.tagList.push(S?["INF",D,S]:["INF",D])}else if(u[3]){if(e.isFinite(E.duration)){var C=y++;E.type=c,E.start=g,E.levelkey=w,E.sn=C,E.level=o,E.cc=k,E.urlId=p,E.baseurl=r,E.relurl=(" "+u[3]).slice(1),f(E,_),v.fragments.push(E),_=E,g+=E.duration,E=new s.default}}else if(u[4]){if(E.rawByteRange=(" "+u[4]).slice(1),_){var O=_.byteRangeEndOffset;O&&(E.lastByteRangeEndOffset=O)}}else if(u[5])E.rawProgramDateTime=(" "+u[5]).slice(1),E.tagList.push(["PROGRAM-DATE-TIME",E.rawProgramDateTime]),null===j&&(j=v.fragments.length);else{for(u=u[0].match(h),b=1;b<u.length&&void 0===u[b];b++);var P=(" "+u[b+1]).slice(1),T=(" "+u[b+2]).slice(1);switch(u[b]){case"#":E.tagList.push(T?[P,T]:[P]);break;case"PLAYLIST-TYPE":v.type=P.toUpperCase();break;case"MEDIA-SEQUENCE":y=v.startSN=parseInt(P);break;case"TARGETDURATION":v.targetduration=parseFloat(P);break;case"VERSION":v.version=parseInt(P);break;case"EXTM3U":break;case"ENDLIST":v.live=!1;break;case"DIS":k++,E.tagList.push(["DIS"]);break;case"DISCONTINUITY-SEQ":k=parseInt(P);break;case"KEY":var x=P,R=new n.default(x),H=R.enumeratedString("METHOD"),A=R.URI,I=R.hexadecimalInteger("IV");H&&(w=new i.default,A&&["AES-128","SAMPLE-AES","SAMPLE-AES-CENC"].indexOf(H)>=0&&(w.method=H,w.baseuri=r,w.reluri=A,w.key=null,w.iv=I));break;case"START":var L=P,M=new n.default(L).decimalFloatingPoint("TIME-OFFSET");e.isFinite(M)&&(v.startTimeOffset=M);break;case"MAP":var N=new n.default(P);E.relurl=N.URI,E.rawByteRange=N.BYTERANGE,E.baseurl=r,E.level=o,E.type=c,E.sn="initSegment",v.initSegment=E,(E=new s.default).rawProgramDateTime=v.initSegment.rawProgramDateTime;break;default:l.logger.warn("line parsed but not handled: "+u)}}}return(E=_)&&!E.relurl&&(v.fragments.pop(),g-=E.duration),v.totalduration=g,v.averagetargetduration=g/v.fragments.length,v.endSN=y-1,v.startCC=v.fragments[0]?v.fragments[0].cc:0,v.endCC=k,!v.initSegment&&v.fragments.length&&v.fragments.every((function(e){return m.test(e.relurl)}))&&(l.logger.warn("MP4 fragments found but no init segment (probably no MAP, incomplete M3U8), trying to fetch SIDX"),(E=new s.default).relurl=v.fragments[0].relurl,E.baseurl=r,E.level=o,E.type=c,E.sn="initSegment",v.initSegment=E,v.needSidxRanges=!0),j&&function(e,t){for(var r=e[t],o=t-1;o>=0;o--){var s=e[o];s.programDateTime=r.programDateTime-1e3*s.duration,r=s}}(v.fragments,j),v},t}();function f(t,r){t.rawProgramDateTime?t.programDateTime=Date.parse(t.rawProgramDateTime):r&&r.programDateTime&&(t.programDateTime=r.endProgramDateTime),e.isFinite(t.programDateTime)||(t.programDateTime=null,t.rawProgramDateTime=null)}t.default=b}).call(this,r("./src/polyfills/number.js").Number)},"./src/loader/playlist-loader.js":function(e,t,r){"use strict";(function(e){var o,s=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var a=r("./src/events.js"),i=r("./src/event-handler.js"),n=r("./src/errors.js"),l=r("./src/utils/logger.js"),c=r("./src/demux/mp4demuxer.js"),p=r("./src/loader/m3u8-parser.js"),u=window.performance,d={MANIFEST:"manifest",LEVEL:"level",AUDIO_TRACK:"audioTrack",SUBTITLE_TRACK:"subtitleTrack"},h={MAIN:"main",AUDIO:"audio",SUBTITLE:"subtitle"},m=function(t){function r(e){var r=t.call(this,e,a.default.MANIFEST_LOADING,a.default.LEVEL_LOADING,a.default.AUDIO_TRACK_LOADING,a.default.SUBTITLE_TRACK_LOADING)||this;return r.loaders={},r}return s(r,t),Object.defineProperty(r,"ContextType",{get:function(){return d},enumerable:!0,configurable:!0}),Object.defineProperty(r,"LevelType",{get:function(){return h},enumerable:!0,configurable:!0}),r.canHaveQualityLevels=function(e){return e!==d.AUDIO_TRACK&&e!==d.SUBTITLE_TRACK},r.mapContextToLevelType=function(e){switch(e.type){case d.AUDIO_TRACK:return h.AUDIO;case d.SUBTITLE_TRACK:return h.SUBTITLE;default:return h.MAIN}},r.getResponseUrl=function(e,t){var r=e.url;return void 0!==r&&0!==r.indexOf("data:")||(r=t.url),r},r.prototype.createInternalLoader=function(e){var t=this.hls.config,r=t.pLoader,o=t.loader,s=new(r||o)(t);return e.loader=s,this.loaders[e.type]=s,s},r.prototype.getInternalLoader=function(e){return this.loaders[e.type]},r.prototype.resetInternalLoader=function(e){this.loaders[e]&&delete this.loaders[e]},r.prototype.destroyInternalLoaders=function(){for(var e in this.loaders){var t=this.loaders[e];t&&t.destroy(),this.resetInternalLoader(e)}},r.prototype.destroy=function(){this.destroyInternalLoaders(),t.prototype.destroy.call(this)},r.prototype.onManifestLoading=function(e){this.load(e.url,{type:d.MANIFEST,level:0,id:null})},r.prototype.onLevelLoading=function(e){this.load(e.url,{type:d.LEVEL,level:e.level,id:e.id})},r.prototype.onAudioTrackLoading=function(e){this.load(e.url,{type:d.AUDIO_TRACK,level:null,id:e.id})},r.prototype.onSubtitleTrackLoading=function(e){this.load(e.url,{type:d.SUBTITLE_TRACK,level:null,id:e.id})},r.prototype.load=function(e,t){var r=this.hls.config;l.logger.debug("Loading playlist of type "+t.type+", level: "+t.level+", id: "+t.id);var o,s,a,i,n=this.getInternalLoader(t);if(n){var c=n.context;if(c&&c.url===e)return l.logger.trace("playlist request ongoing"),!1;l.logger.warn("aborting previous loader for type: "+t.type),n.abort()}switch(t.type){case d.MANIFEST:o=r.manifestLoadingMaxRetry,s=r.manifestLoadingTimeOut,a=r.manifestLoadingRetryDelay,i=r.manifestLoadingMaxRetryTimeout;break;case d.LEVEL:o=0,s=r.levelLoadingTimeOut;break;default:o=r.levelLoadingMaxRetry,s=r.levelLoadingTimeOut,a=r.levelLoadingRetryDelay,i=r.levelLoadingMaxRetryTimeout}n=this.createInternalLoader(t),t.url=e,t.responseType=t.responseType||"";var p={timeout:s,maxRetry:o,retryDelay:a,maxRetryDelay:i},u={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)};return l.logger.debug("Calling internal loader delegate for URL: "+e),n.load(t,p,u),!0},r.prototype.loadsuccess=function(e,t,r,o){if(void 0===o&&(o=null),r.isSidxRequest)return this._handleSidxRequest(e,r),void this._handlePlaylistLoaded(e,t,r,o);this.resetInternalLoader(r.type);var s=e.data;t.tload=u.now(),0===s.indexOf("#EXTM3U")?s.indexOf("#EXTINF:")>0||s.indexOf("#EXT-X-TARGETDURATION:")>0?this._handleTrackOrLevelPlaylist(e,t,r,o):this._handleMasterPlaylist(e,t,r,o):this._handleManifestParsingError(e,r,"no EXTM3U delimiter",o)},r.prototype.loaderror=function(e,t,r){void 0===r&&(r=null),this._handleNetworkError(t,r,!1,e)},r.prototype.loadtimeout=function(e,t,r){void 0===r&&(r=null),this._handleNetworkError(t,r,!0)},r.prototype._handleMasterPlaylist=function(e,t,o,s){var i=this.hls,n=e.data,c=r.getResponseUrl(e,o),u=p.default.parseMasterPlaylist(n,c);if(u.length){var d=u.map((function(e){return{id:e.attrs.AUDIO,codec:e.audioCodec}})),h=p.default.parseMasterPlaylistMedia(n,c,"AUDIO",d),m=p.default.parseMasterPlaylistMedia(n,c,"SUBTITLES");if(h.length){var b=!1;h.forEach((function(e){e.url||(b=!0)})),!1===b&&u[0].audioCodec&&!u[0].attrs.AUDIO&&(l.logger.log("audio codec signaled in quality level, but no embedded audio track signaled, create one"),h.unshift({type:"main",name:"main"}))}i.trigger(a.default.MANIFEST_LOADED,{levels:u,audioTracks:h,subtitles:m,url:c,stats:t,networkDetails:s})}else this._handleManifestParsingError(e,o,"no level found in manifest",s)},r.prototype._handleTrackOrLevelPlaylist=function(t,o,s,i){var n=this.hls,l=s.id,c=s.level,h=s.type,m=r.getResponseUrl(t,s),b=e.isFinite(l)?l:0,f=e.isFinite(c)?c:b,y=r.mapContextToLevelType(s),g=p.default.parseLevelPlaylist(t.data,m,f,y,b);if(g.tload=o.tload,h===d.MANIFEST){var v={url:m,details:g};n.trigger(a.default.MANIFEST_LOADED,{levels:[v],audioTracks:[],url:m,stats:o,networkDetails:i})}if(o.tparsed=u.now(),g.needSidxRanges){var w=g.initSegment.url;this.load(w,{isSidxRequest:!0,type:h,level:c,levelDetails:g,id:l,rangeStart:0,rangeEnd:2048,responseType:"arraybuffer"})}else s.levelDetails=g,this._handlePlaylistLoaded(t,o,s,i)},r.prototype._handleSidxRequest=function(e,t){var r=c.default.parseSegmentIndex(new Uint8Array(e.data));if(r){var o=r.references,s=t.levelDetails;o.forEach((function(e,t){var r=e.info,o=s.fragments[t];0===o.byteRange.length&&(o.rawByteRange=String(1+r.end-r.start)+"@"+String(r.start))})),s.initSegment.rawByteRange=String(r.moovEndOffset)+"@0"}},r.prototype._handleManifestParsingError=function(e,t,r,o){this.hls.trigger(a.default.ERROR,{type:n.ErrorTypes.NETWORK_ERROR,details:n.ErrorDetails.MANIFEST_PARSING_ERROR,fatal:!0,url:e.url,reason:r,networkDetails:o})},r.prototype._handleNetworkError=function(e,t,r,o){var s,i;void 0===r&&(r=!1),void 0===o&&(o=null),l.logger.info("A network error occured while loading a "+e.type+"-type playlist");var c=this.getInternalLoader(e);switch(e.type){case d.MANIFEST:s=r?n.ErrorDetails.MANIFEST_LOAD_TIMEOUT:n.ErrorDetails.MANIFEST_LOAD_ERROR,i=!0;break;case d.LEVEL:s=r?n.ErrorDetails.LEVEL_LOAD_TIMEOUT:n.ErrorDetails.LEVEL_LOAD_ERROR,i=!1;break;case d.AUDIO_TRACK:s=r?n.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT:n.ErrorDetails.AUDIO_TRACK_LOAD_ERROR,i=!1;break;default:i=!1}c&&(c.abort(),this.resetInternalLoader(e.type));var p={type:n.ErrorTypes.NETWORK_ERROR,details:s,fatal:i,url:c.url,loader:c,context:e,networkDetails:t};o&&(p.response=o),this.hls.trigger(a.default.ERROR,p)},r.prototype._handlePlaylistLoaded=function(e,t,o,s){var i=o.type,n=o.level,l=o.id,c=o.levelDetails;if(c.targetduration)if(r.canHaveQualityLevels(o.type))this.hls.trigger(a.default.LEVEL_LOADED,{details:c,level:n||0,id:l||0,stats:t,networkDetails:s});else switch(i){case d.AUDIO_TRACK:this.hls.trigger(a.default.AUDIO_TRACK_LOADED,{details:c,id:l,stats:t,networkDetails:s});break;case d.SUBTITLE_TRACK:this.hls.trigger(a.default.SUBTITLE_TRACK_LOADED,{details:c,id:l,stats:t,networkDetails:s})}else this._handleManifestParsingError(e,o,"invalid target duration",s)},r}(i.default);t.default=m}).call(this,r("./src/polyfills/number.js").Number)},"./src/observer.js":function(e,t,r){"use strict";var o,s=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),t.prototype.trigger=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];this.emit.apply(this,[e,e].concat(t))},t}(r("./node_modules/eventemitter3/index.js").EventEmitter);t.Observer=a},"./src/polyfills/number.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=r("./src/utils/get-self-scope.js").getSelfScope().Number;t.Number=o,o.isFinite=o.isFinite||function(e){return"number"==typeof e&&isFinite(e)}},"./src/remux/aac-helper.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(){}return e.getSilentFrame=function(e,t){switch(e){case"mp4a.40.2":if(1===t)return new Uint8Array([0,200,0,128,35,128]);if(2===t)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(3===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(4===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(5===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(6===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]);break;default:if(1===t)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(2===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(3===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}return null},e}();t.default=o},"./src/remux/mp4-generator.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=Math.pow(2,32)-1,s=function(){function e(){}return e.init=function(){var t;for(t in e.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]},e.types)e.types.hasOwnProperty(t)&&(e.types[t]=[t.charCodeAt(0),t.charCodeAt(1),t.charCodeAt(2),t.charCodeAt(3)]);var r=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),o=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);e.HDLR_TYPES={video:r,audio:o};var s=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),a=new Uint8Array([0,0,0,0,0,0,0,0]);e.STTS=e.STSC=e.STCO=a,e.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),e.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),e.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),e.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);var i=new Uint8Array([105,115,111,109]),n=new Uint8Array([97,118,99,49]),l=new Uint8Array([0,0,0,1]);e.FTYP=e.box(e.types.ftyp,i,l,i,n),e.DINF=e.box(e.types.dinf,e.box(e.types.dref,s))},e.box=function(e){for(var t,r=Array.prototype.slice.call(arguments,1),o=8,s=r.length,a=s;s--;)o+=r[s].byteLength;for((t=new Uint8Array(o))[0]=o>>24&255,t[1]=o>>16&255,t[2]=o>>8&255,t[3]=255&o,t.set(e,4),s=0,o=8;s<a;s++)t.set(r[s],o),o+=r[s].byteLength;return t},e.hdlr=function(t){return e.box(e.types.hdlr,e.HDLR_TYPES[t])},e.mdat=function(t){return e.box(e.types.mdat,t)},e.mdhd=function(t,r){r*=t;var s=Math.floor(r/(o+1)),a=Math.floor(r%(o+1));return e.box(e.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,t>>24&255,t>>16&255,t>>8&255,255&t,s>>24,s>>16&255,s>>8&255,255&s,a>>24,a>>16&255,a>>8&255,255&a,85,196,0,0]))},e.mdia=function(t){return e.box(e.types.mdia,e.mdhd(t.timescale,t.duration),e.hdlr(t.type),e.minf(t))},e.mfhd=function(t){return e.box(e.types.mfhd,new Uint8Array([0,0,0,0,t>>24,t>>16&255,t>>8&255,255&t]))},e.minf=function(t){return"audio"===t.type?e.box(e.types.minf,e.box(e.types.smhd,e.SMHD),e.DINF,e.stbl(t)):e.box(e.types.minf,e.box(e.types.vmhd,e.VMHD),e.DINF,e.stbl(t))},e.moof=function(t,r,o){return e.box(e.types.moof,e.mfhd(t),e.traf(o,r))},e.moov=function(t){for(var r=t.length,o=[];r--;)o[r]=e.trak(t[r]);return e.box.apply(null,[e.types.moov,e.mvhd(t[0].timescale,t[0].duration)].concat(o).concat(e.mvex(t)))},e.mvex=function(t){for(var r=t.length,o=[];r--;)o[r]=e.trex(t[r]);return e.box.apply(null,[e.types.mvex].concat(o))},e.mvhd=function(t,r){r*=t;var s=Math.floor(r/(o+1)),a=Math.floor(r%(o+1)),i=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,t>>24&255,t>>16&255,t>>8&255,255&t,s>>24,s>>16&255,s>>8&255,255&s,a>>24,a>>16&255,a>>8&255,255&a,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return e.box(e.types.mvhd,i)},e.sdtp=function(t){var r,o,s=t.samples||[],a=new Uint8Array(4+s.length);for(o=0;o<s.length;o++)r=s[o].flags,a[o+4]=r.dependsOn<<4|r.isDependedOn<<2|r.hasRedundancy;return e.box(e.types.sdtp,a)},e.stbl=function(t){return e.box(e.types.stbl,e.stsd(t),e.box(e.types.stts,e.STTS),e.box(e.types.stsc,e.STSC),e.box(e.types.stsz,e.STSZ),e.box(e.types.stco,e.STCO))},e.avc1=function(t){var r,o,s,a=[],i=[];for(r=0;r<t.sps.length;r++)s=(o=t.sps[r]).byteLength,a.push(s>>>8&255),a.push(255&s),a=a.concat(Array.prototype.slice.call(o));for(r=0;r<t.pps.length;r++)s=(o=t.pps[r]).byteLength,i.push(s>>>8&255),i.push(255&s),i=i.concat(Array.prototype.slice.call(o));var n=e.box(e.types.avcC,new Uint8Array([1,a[3],a[4],a[5],255,224|t.sps.length].concat(a).concat([t.pps.length]).concat(i))),l=t.width,c=t.height,p=t.pixelRatio[0],u=t.pixelRatio[1];return e.box(e.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,l>>8&255,255&l,c>>8&255,255&c,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),n,e.box(e.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),e.box(e.types.pasp,new Uint8Array([p>>24,p>>16&255,p>>8&255,255&p,u>>24,u>>16&255,u>>8&255,255&u])))},e.esds=function(e){var t=e.config.length;return new Uint8Array([0,0,0,0,3,23+t,0,1,0,4,15+t,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([t]).concat(e.config).concat([6,1,2]))},e.mp4a=function(t){var r=t.samplerate;return e.box(e.types.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t.channelCount,0,16,0,0,0,0,r>>8&255,255&r,0,0]),e.box(e.types.esds,e.esds(t)))},e.mp3=function(t){var r=t.samplerate;return e.box(e.types[".mp3"],new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t.channelCount,0,16,0,0,0,0,r>>8&255,255&r,0,0]))},e.stsd=function(t){return"audio"===t.type?t.isAAC||"mp3"!==t.codec?e.box(e.types.stsd,e.STSD,e.mp4a(t)):e.box(e.types.stsd,e.STSD,e.mp3(t)):e.box(e.types.stsd,e.STSD,e.avc1(t))},e.tkhd=function(t){var r=t.id,s=t.duration*t.timescale,a=t.width,i=t.height,n=Math.floor(s/(o+1)),l=Math.floor(s%(o+1));return e.box(e.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,r>>24&255,r>>16&255,r>>8&255,255&r,0,0,0,0,n>>24,n>>16&255,n>>8&255,255&n,l>>24,l>>16&255,l>>8&255,255&l,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,a>>8&255,255&a,0,0,i>>8&255,255&i,0,0]))},e.traf=function(t,r){var s=e.sdtp(t),a=t.id,i=Math.floor(r/(o+1)),n=Math.floor(r%(o+1));return e.box(e.types.traf,e.box(e.types.tfhd,new Uint8Array([0,0,0,0,a>>24,a>>16&255,a>>8&255,255&a])),e.box(e.types.tfdt,new Uint8Array([1,0,0,0,i>>24,i>>16&255,i>>8&255,255&i,n>>24,n>>16&255,n>>8&255,255&n])),e.trun(t,s.length+16+20+8+16+8+8),s)},e.trak=function(t){return t.duration=t.duration||4294967295,e.box(e.types.trak,e.tkhd(t),e.mdia(t))},e.trex=function(t){var r=t.id;return e.box(e.types.trex,new Uint8Array([0,0,0,0,r>>24,r>>16&255,r>>8&255,255&r,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))},e.trun=function(t,r){var o,s,a,i,n,l,c=t.samples||[],p=c.length,u=12+16*p,d=new Uint8Array(u);for(r+=8+u,d.set([0,0,15,1,p>>>24&255,p>>>16&255,p>>>8&255,255&p,r>>>24&255,r>>>16&255,r>>>8&255,255&r],0),o=0;o<p;o++)a=(s=c[o]).duration,i=s.size,n=s.flags,l=s.cts,d.set([a>>>24&255,a>>>16&255,a>>>8&255,255&a,i>>>24&255,i>>>16&255,i>>>8&255,255&i,n.isLeading<<2|n.dependsOn,n.isDependedOn<<6|n.hasRedundancy<<4|n.paddingValue<<1|n.isNonSync,61440&n.degradPrio,15&n.degradPrio,l>>>24&255,l>>>16&255,l>>>8&255,255&l],12+16*o);return e.box(e.types.trun,d)},e.initSegment=function(t){e.types||e.init();var r,o=e.moov(t);return(r=new Uint8Array(e.FTYP.byteLength+o.byteLength)).set(e.FTYP),r.set(o,e.FTYP.byteLength),r},e}();t.default=s},"./src/remux/mp4-remuxer.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=r("./src/remux/aac-helper.js"),s=r("./src/remux/mp4-generator.js"),a=r("./src/events.js"),i=r("./src/errors.js"),n=r("./src/utils/logger.js"),l=function(){function e(e,t,r,o){this.observer=e,this.config=t,this.typeSupported=r;var s=navigator.userAgent;this.isSafari=o&&o.indexOf("Apple")>-1&&s&&!s.match("CriOS"),this.ISGenerated=!1}return e.prototype.destroy=function(){},e.prototype.resetTimeStamp=function(e){this._initPTS=this._initDTS=e},e.prototype.resetInitSegment=function(){this.ISGenerated=!1},e.prototype.remux=function(e,t,r,o,s,i,l){if(this.ISGenerated||this.generateIS(e,t,s),this.ISGenerated){var c=e.samples.length,p=t.samples.length,u=s,d=s;if(c&&p){var h=(e.samples[0].pts-t.samples[0].pts)/t.inputTimeScale;u+=Math.max(0,h),d+=Math.max(0,-h)}if(c){e.timescale||(n.logger.warn("regenerate InitSegment as audio detected"),this.generateIS(e,t,s));var m=this.remuxAudio(e,u,i,l);if(p){var b=void 0;m&&(b=m.endPTS-m.startPTS),t.timescale||(n.logger.warn("regenerate InitSegment as video detected"),this.generateIS(e,t,s)),this.remuxVideo(t,d,i,b,l)}}else if(p){var f=this.remuxVideo(t,d,i,0,l);f&&e.codec&&this.remuxEmptyAudio(e,u,i,f)}}r.samples.length&&this.remuxID3(r,s),o.samples.length&&this.remuxText(o,s),this.observer.trigger(a.default.FRAG_PARSED)},e.prototype.generateIS=function(e,t,r){var o,l,c=this.observer,p=e.samples,u=t.samples,d=this.typeSupported,h="audio/mp4",m={},b={tracks:m},f=void 0===this._initPTS;if(f&&(o=l=1/0),e.config&&p.length&&(e.timescale=e.samplerate,n.logger.log("audio sampling rate : "+e.samplerate),e.isAAC||(d.mpeg?(h="audio/mpeg",e.codec=""):d.mp3&&(e.codec="mp3")),m.audio={container:h,codec:e.codec,initSegment:!e.isAAC&&d.mpeg?new Uint8Array:s.default.initSegment([e]),metadata:{channelCount:e.channelCount}},f&&(o=l=p[0].pts-e.inputTimeScale*r)),t.sps&&t.pps&&u.length){var y=t.inputTimeScale;t.timescale=y,m.video={container:"video/mp4",codec:t.codec,initSegment:s.default.initSegment([t]),metadata:{width:t.width,height:t.height}},f&&(o=Math.min(o,u[0].pts-y*r),l=Math.min(l,u[0].dts-y*r),this.observer.trigger(a.default.INIT_PTS_FOUND,{initPTS:o}))}Object.keys(m).length?(c.trigger(a.default.FRAG_PARSING_INIT_SEGMENT,b),this.ISGenerated=!0,f&&(this._initPTS=o,this._initDTS=l)):c.trigger(a.default.ERROR,{type:i.ErrorTypes.MEDIA_ERROR,details:i.ErrorDetails.FRAG_PARSING_ERROR,fatal:!1,reason:"no audio/video samples found"})},e.prototype.remuxVideo=function(e,t,r,o,l){var c,p,u,d,h,m,b,f=8,y=e.timescale,g=e.samples,v=[],w=g.length,k=this._PTSNormalize,_=this._initPTS,E=this.nextAvcDts,j=this.isSafari;if(0!==w){j&&(r|=g.length&&E&&(l&&Math.abs(t-E/y)<.1||Math.abs(g[0].pts-E-_)<y/5)),r||(E=t*y),g.forEach((function(e){e.pts=k(e.pts-_,E),e.dts=k(e.dts-_,E)})),g.sort((function(e,t){var r=e.dts-t.dts,o=e.pts-t.pts;return r||o||e.id-t.id}));var D=g.reduce((function(e,t){return Math.max(Math.min(e,t.pts-t.dts),-18e3)}),0);if(D<0){n.logger.warn("PTS < DTS detected in video samples, shifting DTS by "+Math.round(D/90)+" ms to overcome this issue");for(var S=0;S<g.length;S++)g[S].dts+=D}var C=g[0];h=Math.max(C.dts,0),d=Math.max(C.pts,0);var O=Math.round((h-E)/90);r&&O&&(O>1?n.logger.log("AVC:"+O+" ms hole between fragments detected,filling it"):O<-1&&n.logger.log("AVC:"+-O+" ms overlapping between fragments detected"),h=E,g[0].dts=h,d=Math.max(d-O,E),g[0].pts=d,n.logger.log("Video/PTS/DTS adjusted: "+Math.round(d/90)+"/"+Math.round(h/90)+",delta:"+O+" ms")),C=g[g.length-1],b=Math.max(C.dts,0),m=Math.max(C.pts,0,b),j&&(c=Math.round((b-h)/(g.length-1)));var P=0,T=0;for(S=0;S<w;S++){for(var x=g[S],R=x.units,H=R.length,A=0,I=0;I<H;I++)A+=R[I].data.length;T+=A,P+=H,x.length=A,x.dts=j?h+S*c:Math.max(x.dts,h),x.pts=Math.max(x.pts,x.dts)}var L=T+4*P+8;try{p=new Uint8Array(L)}catch(e){return void this.observer.trigger(a.default.ERROR,{type:i.ErrorTypes.MUX_ERROR,details:i.ErrorDetails.REMUX_ALLOC_ERROR,fatal:!1,bytes:L,reason:"fail allocating video mdat "+L})}var M=new DataView(p.buffer);for(M.setUint32(0,L),p.set(s.default.types.mdat,4),S=0;S<w;S++){var N=g[S],F=N.units,U=0,z=void 0;for(I=0,H=F.length;I<H;I++){var B=F[I],q=B.data,G=B.data.byteLength;M.setUint32(f,G),f+=4,p.set(q,f),f+=G,U+=4+G}if(j)z=Math.max(0,c*Math.round((N.pts-N.dts)/c));else{if(S<w-1)c=g[S+1].dts-N.dts;else{var V=this.config,K=N.dts-g[S>0?S-1:S].dts;if(V.stretchShortVideoTrack){var W=V.maxBufferHole,Y=Math.floor(W*y),X=(o?d+o*y:this.nextAudioPts)-N.pts;X>Y?((c=X-K)<0&&(c=K),n.logger.log("It is approximately "+X/90+" ms to the next segment; using duration "+c/90+" ms for the last video frame.")):c=K}else c=K}z=Math.round(N.pts-N.dts)}v.push({size:U,duration:c,cts:z,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:N.key?2:1,isNonSync:N.key?0:1}})}this.nextAvcDts=b+c;var Q=e.dropped;if(e.len=0,e.nbNalu=0,e.dropped=0,v.length&&navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var J=v[0].flags;J.dependsOn=2,J.isNonSync=0}e.samples=v,u=s.default.moof(e.sequenceNumber++,h,e),e.samples=[];var Z={data1:u,data2:p,startPTS:d/y,endPTS:(m+c)/y,startDTS:h/y,endDTS:this.nextAvcDts/y,type:"video",hasAudio:!1,hasVideo:!0,nb:v.length,dropped:Q};return this.observer.trigger(a.default.FRAG_PARSING_DATA,Z),Z}},e.prototype.remuxAudio=function(e,t,r,l){var c,p,u,d,h,m,b,f=e.inputTimeScale,y=e.timescale,g=f/y,v=(e.isAAC?1024:1152)*g,w=this._PTSNormalize,k=this._initPTS,_=!e.isAAC&&this.typeSupported.mpeg,E=e.samples,j=[],D=this.nextAudioPts;if(r|=E.length&&D&&(l&&Math.abs(t-D/f)<.1||Math.abs(E[0].pts-D-k)<20*v),E.forEach((function(e){e.pts=e.dts=w(e.pts-k,t*f)})),0!==(E=E.filter((function(e){return e.pts>=0}))).length){if(r||(D=l?t*f:E[0].pts),e.isAAC)for(var S=this.config.maxAudioFramesDrift,C=0,O=D;C<E.length;){var P,T=E[C];P=(N=T.pts)-O;var x=Math.abs(1e3*P/f);if(P<=-S*v)n.logger.warn("Dropping 1 audio frame @ "+(O/f).toFixed(3)+"s due to "+Math.round(x)+" ms overlap."),E.splice(C,1),e.len-=T.unit.length;else if(P>=S*v&&x<1e4&&O){var R=Math.round(P/v);n.logger.warn("Injecting "+R+" audio frame @ "+(O/f).toFixed(3)+"s due to "+Math.round(1e3*P/f)+" ms gap.");for(var H=0;H<R;H++){var A=Math.max(O,0);(u=o.default.getSilentFrame(e.manifestCodec||e.codec,e.channelCount))||(n.logger.log("Unable to get silent frame for given audio codec; duplicating last frame instead."),u=T.unit.subarray()),E.splice(C,0,{unit:u,pts:A,dts:A}),e.len+=u.length,O+=v,C++}T.pts=T.dts=O,O+=v,C++}else Math.abs(P),T.pts=T.dts=O,O+=v,C++}H=0;for(var I=E.length;H<I;H++){var L=E[H],M=L.unit,N=L.pts;if(void 0!==b)p.duration=Math.round((N-b)/g);else{var F=Math.round(1e3*(N-D)/f),U=0;if(r&&e.isAAC&&F){if(F>0&&F<1e4)U=Math.round((N-D)/v),n.logger.log(F+" ms hole between AAC samples detected,filling it"),U>0&&((u=o.default.getSilentFrame(e.manifestCodec||e.codec,e.channelCount))||(u=M.subarray()),e.len+=U*u.length);else if(F<-12){n.logger.log("drop overlapping AAC sample, expected/parsed/delta:"+(D/f).toFixed(3)+"s/"+(N/f).toFixed(3)+"s/"+-F+"ms"),e.len-=M.byteLength;continue}N=D}if(m=N,!(e.len>0))return;var z=_?e.len:e.len+8;c=_?0:8;try{d=new Uint8Array(z)}catch(e){return void this.observer.trigger(a.default.ERROR,{type:i.ErrorTypes.MUX_ERROR,details:i.ErrorDetails.REMUX_ALLOC_ERROR,fatal:!1,bytes:z,reason:"fail allocating audio mdat "+z})}for(_||(new DataView(d.buffer).setUint32(0,z),d.set(s.default.types.mdat,4)),C=0;C<U;C++)(u=o.default.getSilentFrame(e.manifestCodec||e.codec,e.channelCount))||(n.logger.log("Unable to get silent frame for given audio codec; duplicating this frame instead."),u=M.subarray()),d.set(u,c),c+=u.byteLength,p={size:u.byteLength,cts:0,duration:1024,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1}},j.push(p)}d.set(M,c);var B=M.byteLength;c+=B,p={size:B,cts:0,duration:0,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1}},j.push(p),b=N}var q=0,G=j.length;if(G>=2&&(q=j[G-2].duration,p.duration=q),G){this.nextAudioPts=D=b+g*q,e.len=0,e.samples=j,h=_?new Uint8Array:s.default.moof(e.sequenceNumber++,m/g,e),e.samples=[];var V=m/f,K=D/f,W={data1:h,data2:d,startPTS:V,endPTS:K,startDTS:V,endDTS:K,type:"audio",hasAudio:!0,hasVideo:!1,nb:G};return this.observer.trigger(a.default.FRAG_PARSING_DATA,W),W}return null}},e.prototype.remuxEmptyAudio=function(e,t,r,s){var a=e.inputTimeScale,i=a/(e.samplerate?e.samplerate:a),l=this.nextAudioPts,c=(void 0!==l?l:s.startDTS*a)+this._initDTS,p=s.endDTS*a+this._initDTS,u=1024*i,d=Math.ceil((p-c)/u),h=o.default.getSilentFrame(e.manifestCodec||e.codec,e.channelCount);if(n.logger.warn("remux empty Audio"),h){for(var m=[],b=0;b<d;b++){var f=c+b*u;m.push({unit:h,pts:f,dts:f}),e.len+=h.length}e.samples=m,this.remuxAudio(e,t,r)}else n.logger.trace("Unable to remuxEmptyAudio since we were unable to get a silent frame for given audio codec!")},e.prototype.remuxID3=function(e){var t,r=e.samples.length,o=e.inputTimeScale,s=this._initPTS,i=this._initDTS;if(r){for(var n=0;n<r;n++)(t=e.samples[n]).pts=(t.pts-s)/o,t.dts=(t.dts-i)/o;this.observer.trigger(a.default.FRAG_PARSING_METADATA,{samples:e.samples})}e.samples=[]},e.prototype.remuxText=function(e){e.samples.sort((function(e,t){return e.pts-t.pts}));var t,r=e.samples.length,o=e.inputTimeScale,s=this._initPTS;if(r){for(var i=0;i<r;i++)(t=e.samples[i]).pts=(t.pts-s)/o;this.observer.trigger(a.default.FRAG_PARSING_USERDATA,{samples:e.samples})}e.samples=[]},e.prototype._PTSNormalize=function(e,t){var r;if(void 0===t)return e;for(r=t<e?-8589934592:8589934592;Math.abs(e-t)>4294967296;)e+=r;return e},e}();t.default=l},"./src/remux/passthrough-remuxer.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=r("./src/events.js"),s=function(){function e(e){this.observer=e}return e.prototype.destroy=function(){},e.prototype.resetTimeStamp=function(){},e.prototype.resetInitSegment=function(){},e.prototype.remux=function(e,t,r,s,a,i,n,l){var c=this.observer,p="";e&&(p+="audio"),t&&(p+="video"),c.trigger(o.default.FRAG_PARSING_DATA,{data1:l,startPTS:a,startDTS:a,type:p,hasAudio:!!e,hasVideo:!!t,nb:1,dropped:0}),c.trigger(o.default.FRAG_PARSED)},e}();t.default=s},"./src/task-loop.js":function(e,t,r){"use strict";var o,s=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var a=function(e){function t(t){for(var r=[],o=1;o<arguments.length;o++)r[o-1]=arguments[o];var s=e.apply(this,[t].concat(r))||this;return s._tickInterval=null,s._tickTimer=null,s._tickCallCount=0,s._boundTick=s.tick.bind(s),s}return s(t,e),t.prototype.onHandlerDestroying=function(){this.clearNextTick(),this.clearInterval()},t.prototype.hasInterval=function(){return!!this._tickInterval},t.prototype.hasNextTick=function(){return!!this._tickTimer},t.prototype.setInterval=function(e){return!this._tickInterval&&(this._tickInterval=setInterval(this._boundTick,e),!0)},t.prototype.clearInterval=function(){return!!this._tickInterval&&(clearInterval(this._tickInterval),this._tickInterval=null,!0)},t.prototype.clearNextTick=function(){return!!this._tickTimer&&(clearTimeout(this._tickTimer),this._tickTimer=null,!0)},t.prototype.tick=function(){this._tickCallCount++,1===this._tickCallCount&&(this.doTick(),this._tickCallCount>1&&(this.clearNextTick(),this._tickTimer=setTimeout(this._boundTick,0)),this._tickCallCount=0)},t.prototype.doTick=function(){},t}(r("./src/event-handler.js").default);t.default=a},"./src/utils/attr-list.js":function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var r=/^(\d+)x(\d+)$/,o=/\s*(.+?)\s*=((?:\".*?\")|.*?)(?:,|$)/g,s=function(){function t(e){for(var r in"string"==typeof e&&(e=t.parseAttrList(e)),e)e.hasOwnProperty(r)&&(this[r]=e[r])}return t.prototype.decimalInteger=function(t){var r=parseInt(this[t],10);return r>e.MAX_SAFE_INTEGER?1/0:r},t.prototype.hexadecimalInteger=function(e){if(this[e]){var t=(this[e]||"0x").slice(2);t=(1&t.length?"0":"")+t;for(var r=new Uint8Array(t.length/2),o=0;o<t.length/2;o++)r[o]=parseInt(t.slice(2*o,2*o+2),16);return r}return null},t.prototype.hexadecimalIntegerAsNumber=function(t){var r=parseInt(this[t],16);return r>e.MAX_SAFE_INTEGER?1/0:r},t.prototype.decimalFloatingPoint=function(e){return parseFloat(this[e])},t.prototype.enumeratedString=function(e){return this[e]},t.prototype.decimalResolution=function(e){var t=r.exec(this[e]);if(null!==t)return{width:parseInt(t[1],10),height:parseInt(t[2],10)}},t.parseAttrList=function(e){var t,r={};for(o.lastIndex=0;null!==(t=o.exec(e));){var s=t[2];0===s.indexOf('"')&&s.lastIndexOf('"')===s.length-1&&(s=s.slice(1,-1)),r[t[1]]=s}return r},t}();t.default=s}).call(this,r("./src/polyfills/number.js").Number)},"./src/utils/binary-search.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={search:function(e,t){for(var r=0,o=e.length-1,s=null,a=null;r<=o;){var i=t(a=e[s=(r+o)/2|0]);if(i>0)r=s+1;else{if(!(i<0))return a;o=s-1}}return null}}},"./src/utils/buffer-helper.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(){}return e.isBuffered=function(e,t){try{if(e)for(var r=e.buffered,o=0;o<r.length;o++)if(t>=r.start(o)&&t<=r.end(o))return!0}catch(e){}return!1},e.bufferInfo=function(e,t,r){try{if(e){var o=e.buffered,s=[],a=void 0;for(a=0;a<o.length;a++)s.push({start:o.start(a),end:o.end(a)});return this.bufferedInfo(s,t,r)}}catch(e){}return{len:0,start:t,end:t,nextStart:void 0}},e.bufferedInfo=function(e,t,r){var o,s,a,i,n,l=[];for(e.sort((function(e,t){var r=e.start-t.start;return r||t.end-e.end})),n=0;n<e.length;n++){var c=l.length;if(c){var p=l[c-1].end;e[n].start-p<r?e[n].end>p&&(l[c-1].end=e[n].end):l.push(e[n])}else l.push(e[n])}for(n=0,o=0,s=a=t;n<l.length;n++){var u=l[n].start,d=l[n].end;if(t+r>=u&&t<d)s=u,o=(a=d)-t;else if(t+r<u){i=u;break}}return{len:o,start:s,end:a,nextStart:i}},e}();t.BufferHelper=o},"./src/utils/cea-608-parser.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},s=function(e){var t=e;return o.hasOwnProperty(e)&&(t=o[e]),String.fromCharCode(t)},a={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},i={17:2,18:4,21:6,22:8,23:10,19:13,20:15},n={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},l={25:2,26:4,29:6,30:8,31:10,27:13,28:15},c=["white","green","blue","cyan","red","yellow","magenta","black","transparent"],p={verboseFilter:{DATA:3,DEBUG:3,INFO:2,WARNING:2,TEXT:1,ERROR:0},time:null,verboseLevel:0,setTime:function(e){this.time=e},log:function(e,t){this.verboseFilter[e],this.verboseLevel}},u=function(e){for(var t=[],r=0;r<e.length;r++)t.push(e[r].toString(16));return t},d=function(){function e(e,t,r,o,s){this.foreground=e||"white",this.underline=t||!1,this.italics=r||!1,this.background=o||"black",this.flash=s||!1}return e.prototype.reset=function(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1},e.prototype.setStyles=function(e){for(var t=["foreground","underline","italics","background","flash"],r=0;r<t.length;r++){var o=t[r];e.hasOwnProperty(o)&&(this[o]=e[o])}},e.prototype.isDefault=function(){return"white"===this.foreground&&!this.underline&&!this.italics&&"black"===this.background&&!this.flash},e.prototype.equals=function(e){return this.foreground===e.foreground&&this.underline===e.underline&&this.italics===e.italics&&this.background===e.background&&this.flash===e.flash},e.prototype.copy=function(e){this.foreground=e.foreground,this.underline=e.underline,this.italics=e.italics,this.background=e.background,this.flash=e.flash},e.prototype.toString=function(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash},e}(),h=function(){function e(e,t,r,o,s,a){this.uchar=e||" ",this.penState=new d(t,r,o,s,a)}return e.prototype.reset=function(){this.uchar=" ",this.penState.reset()},e.prototype.setChar=function(e,t){this.uchar=e,this.penState.copy(t)},e.prototype.setPenState=function(e){this.penState.copy(e)},e.prototype.equals=function(e){return this.uchar===e.uchar&&this.penState.equals(e.penState)},e.prototype.copy=function(e){this.uchar=e.uchar,this.penState.copy(e.penState)},e.prototype.isEmpty=function(){return" "===this.uchar&&this.penState.isDefault()},e}(),m=function(){function e(){this.chars=[];for(var e=0;e<100;e++)this.chars.push(new h);this.pos=0,this.currPenState=new d}return e.prototype.equals=function(e){for(var t=!0,r=0;r<100;r++)if(!this.chars[r].equals(e.chars[r])){t=!1;break}return t},e.prototype.copy=function(e){for(var t=0;t<100;t++)this.chars[t].copy(e.chars[t])},e.prototype.isEmpty=function(){for(var e=!0,t=0;t<100;t++)if(!this.chars[t].isEmpty()){e=!1;break}return e},e.prototype.setCursor=function(e){this.pos!==e&&(this.pos=e),this.pos<0?(p.log("ERROR","Negative cursor position "+this.pos),this.pos=0):this.pos>100&&(p.log("ERROR","Too large cursor position "+this.pos),this.pos=100)},e.prototype.moveCursor=function(e){var t=this.pos+e;if(e>1)for(var r=this.pos+1;r<t+1;r++)this.chars[r].setPenState(this.currPenState);this.setCursor(t)},e.prototype.backSpace=function(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)},e.prototype.insertChar=function(e){e>=144&&this.backSpace();var t=s(e);this.pos>=100?p.log("ERROR","Cannot insert "+e.toString(16)+" ("+t+") at position "+this.pos+". Skipping it!"):(this.chars[this.pos].setChar(t,this.currPenState),this.moveCursor(1))},e.prototype.clearFromPos=function(e){var t;for(t=e;t<100;t++)this.chars[t].reset()},e.prototype.clear=function(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()},e.prototype.clearToEndOfRow=function(){this.clearFromPos(this.pos)},e.prototype.getTextString=function(){for(var e=[],t=!0,r=0;r<100;r++){var o=this.chars[r].uchar;" "!==o&&(t=!1),e.push(o)}return t?"":e.join("")},e.prototype.setPenStyles=function(e){this.currPenState.setStyles(e),this.chars[this.pos].setPenState(this.currPenState)},e}(),b=function(){function e(){this.rows=[];for(var e=0;e<15;e++)this.rows.push(new m);this.currRow=14,this.nrRollUpRows=null,this.reset()}return e.prototype.reset=function(){for(var e=0;e<15;e++)this.rows[e].clear();this.currRow=14},e.prototype.equals=function(e){for(var t=!0,r=0;r<15;r++)if(!this.rows[r].equals(e.rows[r])){t=!1;break}return t},e.prototype.copy=function(e){for(var t=0;t<15;t++)this.rows[t].copy(e.rows[t])},e.prototype.isEmpty=function(){for(var e=!0,t=0;t<15;t++)if(!this.rows[t].isEmpty()){e=!1;break}return e},e.prototype.backSpace=function(){this.rows[this.currRow].backSpace()},e.prototype.clearToEndOfRow=function(){this.rows[this.currRow].clearToEndOfRow()},e.prototype.insertChar=function(e){this.rows[this.currRow].insertChar(e)},e.prototype.setPen=function(e){this.rows[this.currRow].setPenStyles(e)},e.prototype.moveCursor=function(e){this.rows[this.currRow].moveCursor(e)},e.prototype.setCursor=function(e){p.log("INFO","setCursor: "+e),this.rows[this.currRow].setCursor(e)},e.prototype.setPAC=function(e){p.log("INFO","pacData = "+JSON.stringify(e));var t=e.row-1;if(this.nrRollUpRows&&t<this.nrRollUpRows-1&&(t=this.nrRollUpRows-1),this.nrRollUpRows&&this.currRow!==t){for(var r=0;r<15;r++)this.rows[r].clear();var o=this.currRow+1-this.nrRollUpRows,s=this.lastOutputScreen;if(s){var a=s.rows[o].cueStartTime;if(a&&a<p.time)for(r=0;r<this.nrRollUpRows;r++)this.rows[t-this.nrRollUpRows+r+1].copy(s.rows[o+r])}}this.currRow=t;var i=this.rows[this.currRow];if(null!==e.indent){var n=e.indent,l=Math.max(n-1,0);i.setCursor(e.indent),e.color=i.chars[l].penState.foreground}var c={foreground:e.color,underline:e.underline,italics:e.italics,background:"black",flash:!1};this.setPen(c)},e.prototype.setBkgData=function(e){p.log("INFO","bkgData = "+JSON.stringify(e)),this.backSpace(),this.setPen(e),this.insertChar(32)},e.prototype.setRollUpRows=function(e){this.nrRollUpRows=e},e.prototype.rollUp=function(){if(null!==this.nrRollUpRows){p.log("TEXT",this.getDisplayText());var e=this.currRow+1-this.nrRollUpRows,t=this.rows.splice(e,1)[0];t.clear(),this.rows.splice(this.currRow,0,t),p.log("INFO","Rolling up")}else p.log("DEBUG","roll_up but nrRollUpRows not set yet")},e.prototype.getDisplayText=function(e){e=e||!1;for(var t=[],r="",o=-1,s=0;s<15;s++){var a=this.rows[s].getTextString();a&&(o=s+1,e?t.push("Row "+o+": '"+a+"'"):t.push(a.trim()))}return t.length>0&&(r=e?"["+t.join(" | ")+"]":t.join("\n")),r},e.prototype.getTextAndFormat=function(){return this.rows},e}(),f=function(){function e(e,t){this.chNr=e,this.outputFilter=t,this.mode=null,this.verbose=0,this.displayedMemory=new b,this.nonDisplayedMemory=new b,this.lastOutputScreen=new b,this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null}return e.prototype.reset=function(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.lastCueEndTime=null},e.prototype.getHandler=function(){return this.outputFilter},e.prototype.setHandler=function(e){this.outputFilter=e},e.prototype.setPAC=function(e){this.writeScreen.setPAC(e)},e.prototype.setBkgData=function(e){this.writeScreen.setBkgData(e)},e.prototype.setMode=function(e){e!==this.mode&&(this.mode=e,p.log("INFO","MODE="+e),"MODE_POP-ON"===this.mode?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),"MODE_ROLL-UP"!==this.mode&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=e)},e.prototype.insertChars=function(e){for(var t=0;t<e.length;t++)this.writeScreen.insertChar(e[t]);var r=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";p.log("INFO",r+": "+this.writeScreen.getDisplayText(!0)),"MODE_PAINT-ON"!==this.mode&&"MODE_ROLL-UP"!==this.mode||(p.log("TEXT","DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())},e.prototype.ccRCL=function(){p.log("INFO","RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")},e.prototype.ccBS=function(){p.log("INFO","BS - BackSpace"),"MODE_TEXT"!==this.mode&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())},e.prototype.ccAOF=function(){},e.prototype.ccAON=function(){},e.prototype.ccDER=function(){p.log("INFO","DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()},e.prototype.ccRU=function(e){p.log("INFO","RU("+e+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(e)},e.prototype.ccFON=function(){p.log("INFO","FON - Flash On"),this.writeScreen.setPen({flash:!0})},e.prototype.ccRDC=function(){p.log("INFO","RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")},e.prototype.ccTR=function(){p.log("INFO","TR"),this.setMode("MODE_TEXT")},e.prototype.ccRTD=function(){p.log("INFO","RTD"),this.setMode("MODE_TEXT")},e.prototype.ccEDM=function(){p.log("INFO","EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate(!0)},e.prototype.ccCR=function(){p.log("CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate(!0)},e.prototype.ccENM=function(){p.log("INFO","ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()},e.prototype.ccEOC=function(){if(p.log("INFO","EOC - End Of Caption"),"MODE_POP-ON"===this.mode){var e=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=e,this.writeScreen=this.nonDisplayedMemory,p.log("TEXT","DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate(!0)},e.prototype.ccTO=function(e){p.log("INFO","TO("+e+") - Tab Offset"),this.writeScreen.moveCursor(e)},e.prototype.ccMIDROW=function(e){var t={flash:!1};if(t.underline=e%2==1,t.italics=e>=46,t.italics)t.foreground="white";else{var r=Math.floor(e/2)-16;t.foreground=["white","green","blue","cyan","red","yellow","magenta"][r]}p.log("INFO","MIDROW: "+JSON.stringify(t)),this.writeScreen.setPen(t)},e.prototype.outputDataUpdate=function(e){void 0===e&&(e=!1);var t=p.time;null!==t&&this.outputFilter&&(null!==this.cueStartTime||this.displayedMemory.isEmpty()?this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue&&(this.outputFilter.newCue(this.cueStartTime,t,this.lastOutputScreen),!0===e&&this.outputFilter.dispatchCue&&this.outputFilter.dispatchCue()),this.cueStartTime=this.displayedMemory.isEmpty()?null:t):this.cueStartTime=t,this.lastOutputScreen.copy(this.displayedMemory))},e.prototype.cueSplitAtTime=function(e){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,e,this.displayedMemory),this.cueStartTime=e))},e}(),y=function(){function e(e,t,r){this.field=e||1,this.outputs=[t,r],this.channels=[new f(1,t),new f(2,r)],this.currChNr=-1,this.lastCmdA=null,this.lastCmdB=null,this.bufferedData=[],this.startTime=null,this.lastTime=null,this.dataCounters={padding:0,char:0,cmd:0,other:0}}return e.prototype.getHandler=function(e){return this.channels[e].getHandler()},e.prototype.setHandler=function(e,t){this.channels[e].setHandler(t)},e.prototype.addData=function(e,t){var r,o,s,a=!1;this.lastTime=e,p.setTime(e);for(var i=0;i<t.length;i+=2)o=127&t[i],s=127&t[i+1],0!==o||0!==s?(p.log("DATA","["+u([t[i],t[i+1]])+"] -> ("+u([o,s])+")"),(r=this.parseCmd(o,s))||(r=this.parseMidrow(o,s)),r||(r=this.parsePAC(o,s)),r||(r=this.parseBackgroundAttributes(o,s)),r||(a=this.parseChars(o,s))&&(this.currChNr&&this.currChNr>=0?this.channels[this.currChNr-1].insertChars(a):p.log("WARNING","No channel found yet. TEXT-MODE?")),r?this.dataCounters.cmd+=2:a?this.dataCounters.char+=2:(this.dataCounters.other+=2,p.log("WARNING","Couldn't parse cleaned data "+u([o,s])+" orig: "+u([t[i],t[i+1]])))):this.dataCounters.padding+=2},e.prototype.parseCmd=function(e,t){var r=null;if(!((20===e||28===e)&&t>=32&&t<=47||(23===e||31===e)&&t>=33&&t<=35))return!1;if(e===this.lastCmdA&&t===this.lastCmdB)return this.lastCmdA=null,this.lastCmdB=null,p.log("DEBUG","Repeated command ("+u([e,t])+") is dropped"),!0;r=20===e||23===e?1:2;var o=this.channels[r-1];return 20===e||28===e?32===t?o.ccRCL():33===t?o.ccBS():34===t?o.ccAOF():35===t?o.ccAON():36===t?o.ccDER():37===t?o.ccRU(2):38===t?o.ccRU(3):39===t?o.ccRU(4):40===t?o.ccFON():41===t?o.ccRDC():42===t?o.ccTR():43===t?o.ccRTD():44===t?o.ccEDM():45===t?o.ccCR():46===t?o.ccENM():47===t&&o.ccEOC():o.ccTO(t-32),this.lastCmdA=e,this.lastCmdB=t,this.currChNr=r,!0},e.prototype.parseMidrow=function(e,t){var r=null;return(17===e||25===e)&&t>=32&&t<=47&&((r=17===e?1:2)!==this.currChNr?(p.log("ERROR","Mismatch channel in midrow parsing"),!1):(this.channels[r-1].ccMIDROW(t),p.log("DEBUG","MIDROW ("+u([e,t])+")"),!0))},e.prototype.parsePAC=function(e,t){var r,o=null;if(!((e>=17&&e<=23||e>=25&&e<=31)&&t>=64&&t<=127||(16===e||24===e)&&t>=64&&t<=95))return!1;if(e===this.lastCmdA&&t===this.lastCmdB)return this.lastCmdA=null,this.lastCmdB=null,!0;r=e<=23?1:2,o=t>=64&&t<=95?1===r?a[e]:n[e]:1===r?i[e]:l[e];var s=this.interpretPAC(o,t);return this.channels[r-1].setPAC(s),this.lastCmdA=e,this.lastCmdB=t,this.currChNr=r,!0},e.prototype.interpretPAC=function(e,t){var r=t,o={color:null,italics:!1,indent:null,underline:!1,row:e};return r=t>95?t-96:t-64,o.underline=1==(1&r),r<=13?o.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(r/2)]:r<=15?(o.italics=!0,o.color="white"):o.indent=4*Math.floor((r-16)/2),o},e.prototype.parseChars=function(e,t){var r=null,o=null,a=null;if(e>=25?(r=2,a=e-8):(r=1,a=e),a>=17&&a<=19){var i=t;i=17===a?t+80:18===a?t+112:t+144,p.log("INFO","Special char '"+s(i)+"' in channel "+r),o=[i]}else e>=32&&e<=127&&(o=0===t?[e]:[e,t]);if(o){var n=u(o);p.log("DEBUG","Char codes =  "+n.join(",")),this.lastCmdA=null,this.lastCmdB=null}return o},e.prototype.parseBackgroundAttributes=function(e,t){var r,o,s;return((16===e||24===e)&&t>=32&&t<=47||(23===e||31===e)&&t>=45&&t<=47)&&(r={},16===e||24===e?(o=Math.floor((t-32)/2),r.background=c[o],t%2==1&&(r.background=r.background+"_semi")):45===t?r.background="transparent":(r.foreground="black",47===t&&(r.underline=!0)),s=e<24?1:2,this.channels[s-1].setBkgData(r),this.lastCmdA=null,this.lastCmdB=null,!0)},e.prototype.reset=function(){for(var e=0;e<this.channels.length;e++)this.channels[e]&&this.channels[e].reset();this.lastCmdA=null,this.lastCmdB=null},e.prototype.cueSplitAtTime=function(e){for(var t=0;t<this.channels.length;t++)this.channels[t]&&this.channels[t].cueSplitAtTime(e)},e}();t.default=y},"./src/utils/codecs.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o={audio:{a3ds:!0,"ac-3":!0,"ac-4":!0,alac:!0,alaw:!0,dra1:!0,"dts+":!0,"dts-":!0,dtsc:!0,dtse:!0,dtsh:!0,"ec-3":!0,enca:!0,g719:!0,g726:!0,m4ae:!0,mha1:!0,mha2:!0,mhm1:!0,mhm2:!0,mlpa:!0,mp4a:!0,"raw ":!0,Opus:!0,samr:!0,sawb:!0,sawp:!0,sevc:!0,sqcp:!0,ssmv:!0,twos:!0,ulaw:!0},video:{avc1:!0,avc2:!0,avc3:!0,avc4:!0,avcp:!0,drac:!0,dvav:!0,dvhe:!0,encv:!0,hev1:!0,hvc1:!0,mjp2:!0,mp4v:!0,mvc1:!0,mvc2:!0,mvc3:!0,mvc4:!0,resv:!0,rv60:!0,s263:!0,svc1:!0,svc2:!0,"vc-1":!0,vp08:!0,vp09:!0}};t.isCodecType=function(e,t){var r=o[t];return!!r&&!0===r[e.slice(0,4)]},t.isCodecSupportedInMp4=function(e,t){return window.MediaSource.isTypeSupported((t||"video")+'/mp4;codecs="'+e+'"')}},"./src/utils/cues.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=r("./src/utils/vttparser.js");t.newCue=function(e,t,r,s){for(var a,i,n,l,c,p=window.VTTCue||window.TextTrackCue,u=0;u<s.rows.length;u++)if(n=!0,l=0,c="",!(a=s.rows[u]).isEmpty()){for(var d=0;d<a.chars.length;d++)a.chars[d].uchar.match(/\s/)&&n?l++:(c+=a.chars[d].uchar,n=!1);a.cueStartTime=t,t===r&&(r+=1e-4),i=new p(t,r,o.fixLineBreaks(c.trim())),l>=16?l--:l++,navigator.userAgent.match(/Firefox\//)?i.line=u+1:i.line=u>7?u-2:u+1,i.align="left",i.position=Math.max(0,Math.min(100,l/32*100+(navigator.userAgent.match(/Firefox\//)?50:0))),e.addCue(i)}}},"./src/utils/discontinuities.js":function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var o=r("./src/utils/binary-search.js"),s=r("./src/utils/logger.js");function a(e,t){for(var r=null,o=0;o<e.length;o+=1){var s=e[o];if(s&&s.cc===t){r=s;break}}return r}function i(e,t,r){var o=!1;return t&&t.details&&r&&(r.endCC>r.startCC||e&&e.cc<r.startCC)&&(o=!0),o}function n(e,t){var r=e.fragments,o=t.fragments;if(o.length&&r.length){var i=a(r,o[0].cc);if(i&&(!i||i.startPTS))return i;s.logger.log("No frag in previous level to align on")}else s.logger.log("No fragments to align")}function l(e,t){t.fragments.forEach((function(t){if(t){var r=t.start+e;t.start=t.startPTS=r,t.endPTS=r+t.duration}})),t.PTSKnown=!0}function c(e,t,r){if(i(e,r,t)){var o=n(r.details,t);o&&(s.logger.log("Adjusting PTS using last level due to CC increase within current level"),l(o.start,t))}}function p(t,r){if(r&&r.fragments.length){if(!t.hasProgramDateTime||!r.hasProgramDateTime)return;var o=r.fragments[0].programDateTime,a=(t.fragments[0].programDateTime-o)/1e3+r.fragments[0].start;e.isFinite(a)&&(s.logger.log("adjusting PTS using programDateTime delta, sliding:"+a.toFixed(3)),l(a,t))}}t.findFirstFragWithCC=a,t.findFragWithCC=function(e,t){return o.default.search(e,(function(e){return e.cc<t?1:e.cc>t?-1:0}))},t.shouldAlignOnDiscontinuities=i,t.findDiscontinuousReferenceFrag=n,t.adjustPts=l,t.alignStream=function(e,t,r){c(e,r,t),!r.PTSKnown&&t&&p(r,t.details)},t.alignDiscontinuities=c,t.alignPDT=p}).call(this,r("./src/polyfills/number.js").Number)},"./src/utils/ewma-bandwidth-estimator.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=r("./src/utils/ewma.js"),s=function(){function e(e,t,r,s){this.hls=e,this.defaultEstimate_=s,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new o.default(t),this.fast_=new o.default(r)}return e.prototype.sample=function(e,t){var r=8e3*t/(e=Math.max(e,this.minDelayMs_)),o=e/1e3;this.fast_.sample(o,r),this.slow_.sample(o,r)},e.prototype.canEstimate=function(){var e=this.fast_;return e&&e.getTotalWeight()>=this.minWeight_},e.prototype.getEstimate=function(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_},e.prototype.destroy=function(){},e}();t.default=s},"./src/utils/ewma.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e){this.alpha_=e?Math.exp(Math.log(.5)/e):0,this.estimate_=0,this.totalWeight_=0}return e.prototype.sample=function(e,t){var r=Math.pow(this.alpha_,e);this.estimate_=t*(1-r)+r*this.estimate_,this.totalWeight_+=e},e.prototype.getTotalWeight=function(){return this.totalWeight_},e.prototype.getEstimate=function(){if(this.alpha_){var e=1-Math.pow(this.alpha_,this.totalWeight_);return this.estimate_/e}return this.estimate_},e}();t.default=o},"./src/utils/get-self-scope.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getSelfScope=function(){return"undefined"==typeof window?self:window}},"./src/utils/logger.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=r("./src/utils/get-self-scope.js");function s(){}var a={trace:s,debug:s,log:s,warn:s,info:s,error:s},i=a;function n(e,t){return t="["+e+"] > "+t}var l=o.getSelfScope();function c(e){var t=l.console[e];return t?function(){for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];r[0]&&(r[0]=n(e,r[0])),t.apply(l.console,r)}:s}t.enableLogs=function(e){if(!0===e||"object"==typeof e){!function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];t.forEach((function(t){i[t]=e[t]?e[t].bind(e):c(t)}))}(e,"debug","log","info","warn","error");try{i.log()}catch(e){i=a}}else i=a},t.logger=i},"./src/utils/mediakeys-helper.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o="undefined"!=typeof window&&window.navigator&&window.navigator.requestMediaKeySystemAccess?window.navigator.requestMediaKeySystemAccess.bind(window.navigator):null;t.requestMediaKeySystemAccess=o},"./src/utils/mediasource-helper.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getMediaSource=function(){if("undefined"!=typeof window)return window.MediaSource||window.WebKitMediaSource}},"./src/utils/output-filter.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){this.timelineController=e,this.trackName=t,this.startTime=null,this.endTime=null,this.screen=null}return e.prototype.dispatchCue=function(){null!==this.startTime&&(this.timelineController.addCues(this.trackName,this.startTime,this.endTime,this.screen),this.startTime=null)},e.prototype.newCue=function(e,t,r){(null===this.startTime||this.startTime>e)&&(this.startTime=e),this.endTime=t,this.screen=r,this.timelineController.createCaptionsTrack(this.trackName)},e}();t.default=o},"./src/utils/texttrack-utils.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sendAddTrackEvent=function(e,t){var r=null;try{r=new window.Event("addtrack")}catch(e){(r=document.createEvent("Event")).initEvent("addtrack",!1,!1)}r.track=e,t.dispatchEvent(r)},t.clearCurrentCues=function(e){if(e&&e.cues)for(;e.cues.length>0;)e.removeCue(e.cues[0])}},"./src/utils/time-ranges.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={toString:function(e){for(var t="",r=e.length,o=0;o<r;o++)t+="["+e.start(o).toFixed(3)+","+e.end(o).toFixed(3)+"]";return t}}},"./src/utils/vttcue.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){if("undefined"!=typeof window&&window.VTTCue)return window.VTTCue;var e={"":!0,lr:!0,rl:!0},t={start:!0,middle:!0,end:!0,left:!0,right:!0};function r(e){return"string"==typeof e&&!!t[e.toLowerCase()]&&e.toLowerCase()}function o(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)e[o]=r[o]}return e}function s(t,s,a){var i=this,n=function(){if("undefined"!=typeof navigator)return/MSIE\s8\.0/.test(navigator.userAgent)}(),l={};n?i=document.createElement("custom"):l.enumerable=!0,i.hasBeenReset=!1;var c="",p=!1,u=t,d=s,h=a,m=null,b="",f=!0,y="auto",g="start",v=50,w="middle",k=50,_="middle";if(Object.defineProperty(i,"id",o({},l,{get:function(){return c},set:function(e){c=""+e}})),Object.defineProperty(i,"pauseOnExit",o({},l,{get:function(){return p},set:function(e){p=!!e}})),Object.defineProperty(i,"startTime",o({},l,{get:function(){return u},set:function(e){if("number"!=typeof e)throw new TypeError("Start time must be set to a number.");u=e,this.hasBeenReset=!0}})),Object.defineProperty(i,"endTime",o({},l,{get:function(){return d},set:function(e){if("number"!=typeof e)throw new TypeError("End time must be set to a number.");d=e,this.hasBeenReset=!0}})),Object.defineProperty(i,"text",o({},l,{get:function(){return h},set:function(e){h=""+e,this.hasBeenReset=!0}})),Object.defineProperty(i,"region",o({},l,{get:function(){return m},set:function(e){m=e,this.hasBeenReset=!0}})),Object.defineProperty(i,"vertical",o({},l,{get:function(){return b},set:function(t){var r=function(t){return"string"==typeof t&&!!e[t.toLowerCase()]&&t.toLowerCase()}(t);if(!1===r)throw new SyntaxError("An invalid or illegal string was specified.");b=r,this.hasBeenReset=!0}})),Object.defineProperty(i,"snapToLines",o({},l,{get:function(){return f},set:function(e){f=!!e,this.hasBeenReset=!0}})),Object.defineProperty(i,"line",o({},l,{get:function(){return y},set:function(e){if("number"!=typeof e&&"auto"!==e)throw new SyntaxError("An invalid number or illegal string was specified.");y=e,this.hasBeenReset=!0}})),Object.defineProperty(i,"lineAlign",o({},l,{get:function(){return g},set:function(e){var t=r(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");g=t,this.hasBeenReset=!0}})),Object.defineProperty(i,"position",o({},l,{get:function(){return v},set:function(e){if(e<0||e>100)throw new Error("Position must be between 0 and 100.");v=e,this.hasBeenReset=!0}})),Object.defineProperty(i,"positionAlign",o({},l,{get:function(){return w},set:function(e){var t=r(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");w=t,this.hasBeenReset=!0}})),Object.defineProperty(i,"size",o({},l,{get:function(){return k},set:function(e){if(e<0||e>100)throw new Error("Size must be between 0 and 100.");k=e,this.hasBeenReset=!0}})),Object.defineProperty(i,"align",o({},l,{get:function(){return _},set:function(e){var t=r(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");_=t,this.hasBeenReset=!0}})),i.displayState=void 0,n)return i}return s.prototype.getCueAsHTML=function(){return window.WebVTT.convertCueToDOMTree(window,this.text)},s}()},"./src/utils/vttparser.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=r("./src/utils/vttcue.js"),s=function(){return{decode:function(e){if(!e)return"";if("string"!=typeof e)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(e))}}};function a(){this.window=window,this.state="INITIAL",this.buffer="",this.decoder=new s,this.regionList=[]}function i(){this.values=Object.create(null)}function n(e,t,r,o){var s=o?e.split(o):[e];for(var a in s)if("string"==typeof s[a]){var i=s[a].split(r);2===i.length&&t(i[0],i[1])}}i.prototype={set:function(e,t){this.get(e)||""===t||(this.values[e]=t)},get:function(e,t,r){return r?this.has(e)?this.values[e]:t[r]:this.has(e)?this.values[e]:t},has:function(e){return e in this.values},alt:function(e,t,r){for(var o=0;o<r.length;++o)if(t===r[o]){this.set(e,t);break}},integer:function(e,t){/^-?\d+$/.test(t)&&this.set(e,parseInt(t,10))},percent:function(e,t){return!!(t.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&(t=parseFloat(t))>=0&&t<=100)&&(this.set(e,t),!0)}};var l=new o.default(0,0,0),c="middle"===l.align?"middle":"center";function p(e,t,r){var o=e;function s(){var t=function(e){function t(e,t,r,o){return 3600*(0|e)+60*(0|t)+(0|r)+(0|o)/1e3}var r=e.match(/^(\d+):(\d{2})(:\d{2})?\.(\d{3})/);return r?r[3]?t(r[1],r[2],r[3].replace(":",""),r[4]):r[1]>59?t(r[1],r[2],0,r[4]):t(0,r[1],r[2],r[4]):null}(e);if(null===t)throw new Error("Malformed timestamp: "+o);return e=e.replace(/^[^\sa-zA-Z-]+/,""),t}function a(){e=e.replace(/^\s+/,"")}if(a(),t.startTime=s(),a(),"--\x3e"!==e.substr(0,3))throw new Error("Malformed time stamp (time stamps must be separated by '--\x3e'): "+o);e=e.substr(3),a(),t.endTime=s(),a(),function(e,t){var o=new i;n(e,(function(e,t){switch(e){case"region":for(var s=r.length-1;s>=0;s--)if(r[s].id===t){o.set(e,r[s].region);break}break;case"vertical":o.alt(e,t,["rl","lr"]);break;case"line":var a=t.split(","),i=a[0];o.integer(e,i),o.percent(e,i)&&o.set("snapToLines",!1),o.alt(e,i,["auto"]),2===a.length&&o.alt("lineAlign",a[1],["start",c,"end"]);break;case"position":a=t.split(","),o.percent(e,a[0]),2===a.length&&o.alt("positionAlign",a[1],["start",c,"end","line-left","line-right","auto"]);break;case"size":o.percent(e,t);break;case"align":o.alt(e,t,["start",c,"end","left","right"])}}),/:/,/\s/),t.region=o.get("region",null),t.vertical=o.get("vertical","");var s=o.get("line","auto");"auto"===s&&-1===l.line&&(s=-1),t.line=s,t.lineAlign=o.get("lineAlign","start"),t.snapToLines=o.get("snapToLines",!0),t.size=o.get("size",100),t.align=o.get("align",c);var a=o.get("position","auto");"auto"===a&&50===l.position&&(a="start"===t.align||"left"===t.align?0:"end"===t.align||"right"===t.align?100:50),t.position=a}(e,t)}function u(e){return e.replace(/<br(?: \/)?>/gi,"\n")}t.fixLineBreaks=u,a.prototype={parse:function(e){var t=this;function r(){var e=t.buffer,r=0;for(e=u(e);r<e.length&&"\r"!==e[r]&&"\n"!==e[r];)++r;var o=e.substr(0,r);return"\r"===e[r]&&++r,"\n"===e[r]&&++r,t.buffer=e.substr(r),o}e&&(t.buffer+=t.decoder.decode(e,{stream:!0}));try{var s=void 0;if("INITIAL"===t.state){if(!/\r\n|\n/.test(t.buffer))return this;var a=(s=r()).match(/^()?WEBVTT([ \t].*)?$/);if(!a||!a[0])throw new Error("Malformed WebVTT signature.");t.state="HEADER"}for(var i=!1;t.buffer;){if(!/\r\n|\n/.test(t.buffer))return this;switch(i?i=!1:s=r(),t.state){case"HEADER":/:/.test(s)?n(s,(function(e,t){}),/:/):s||(t.state="ID");continue;case"NOTE":s||(t.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(s)){t.state="NOTE";break}if(!s)continue;if(t.cue=new o.default(0,0,""),t.state="CUE",-1===s.indexOf("--\x3e")){t.cue.id=s;continue}case"CUE":try{p(s,t.cue,t.regionList)}catch(e){t.cue=null,t.state="BADCUE";continue}t.state="CUETEXT";continue;case"CUETEXT":var l=-1!==s.indexOf("--\x3e");if(!s||l&&(i=!0)){t.oncue&&t.oncue(t.cue),t.cue=null,t.state="ID";continue}t.cue.text&&(t.cue.text+="\n"),t.cue.text+=s;continue;case"BADCUE":s||(t.state="ID");continue}}}catch(e){"CUETEXT"===t.state&&t.cue&&t.oncue&&t.oncue(t.cue),t.cue=null,t.state="INITIAL"===t.state?"BADWEBVTT":"BADCUE"}return this},flush:function(){try{if(this.buffer+=this.decoder.decode(),(this.cue||"HEADER"===this.state)&&(this.buffer+="\n\n",this.parse()),"INITIAL"===this.state)throw new Error("Malformed WebVTT signature.")}catch(e){throw e}return this.onflush&&this.onflush(),this}},t.default=a},"./src/utils/webvtt-parser.js":function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var o=r("./src/utils/vttparser.js"),s=r("./src/demux/id3.js"),a=function(e,t,r){return e.substr(r||0,t.length)===t},i=function(e){for(var t=5381,r=e.length;r;)t=33*t^e.charCodeAt(--r);return(t>>>0).toString()},n={parse:function(t,r,n,l,c,p){var u,d=s.utf8ArrayToStr(new Uint8Array(t)).trim().replace(/\r\n|\n\r|\n|\r/g,"\n").split("\n"),h="00:00.000",m=0,b=0,f=0,y=[],g=!0,v=new o.default;v.oncue=function(e){var t=n[l],r=n.ccOffset;t&&t.new&&(void 0!==b?r=n.ccOffset=t.start:function(e,t,r){var o=e[t],s=e[o.prevCC];if(!s||!s.new&&o.new)return e.ccOffset=e.presentationOffset=o.start,void(o.new=!1);for(;s&&s.new;)e.ccOffset+=o.start-s.start,o.new=!1,s=e[(o=s).prevCC];e.presentationOffset=r}(n,l,f)),f&&(r=f-n.presentationOffset),e.startTime+=r-b,e.endTime+=r-b,e.id=i(e.startTime.toString())+i(e.endTime.toString())+i(e.text),e.text=decodeURIComponent(encodeURIComponent(e.text)),e.endTime>0&&y.push(e)},v.onparsingerror=function(e){u=e},v.onflush=function(){u&&p?p(u):c(y)},d.forEach((function(t){if(g){if(a(t,"X-TIMESTAMP-MAP=")){g=!1,t.substr(16).split(",").forEach((function(e){a(e,"LOCAL:")?h=e.substr(6):a(e,"MPEGTS:")&&(m=parseInt(e.substr(7)))}));try{r+(9e4*n[l].start||0)<0&&(r+=8589934592),m-=r,o=h,s=parseInt(o.substr(-3)),i=parseInt(o.substr(-6,2)),c=parseInt(o.substr(-9,2)),p=o.length>9?parseInt(o.substr(0,o.indexOf(":"))):0,b=(e.isFinite(s)&&e.isFinite(i)&&e.isFinite(c)&&e.isFinite(p)?(s+=1e3*i,s+=6e4*c,s+=36e5*p):-1)/1e3,f=m/9e4,-1===b&&(u=new Error("Malformed X-TIMESTAMP-MAP: "+t))}catch(e){u=new Error("Malformed X-TIMESTAMP-MAP: "+t)}return}""===t&&(g=!1)}var o,s,i,c,p;v.parse(t+"\n")})),v.flush()}};t.default=n}).call(this,r("./src/polyfills/number.js").Number)},"./src/utils/xhr-loader.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=r("./src/utils/logger.js"),s=window.performance,a=window.XMLHttpRequest,i=function(){function e(e){e&&e.xhrSetup&&(this.xhrSetup=e.xhrSetup)}return e.prototype.destroy=function(){this.abort(),this.loader=null},e.prototype.abort=function(){var e=this.loader;e&&4!==e.readyState&&(this.stats.aborted=!0,e.abort()),window.clearTimeout(this.requestTimeout),this.requestTimeout=null,window.clearTimeout(this.retryTimeout),this.retryTimeout=null},e.prototype.load=function(e,t,r){this.context=e,this.config=t,this.callbacks=r,this.stats={trequest:s.now(),retry:0},this.retryDelay=t.retryDelay,this.loadInternal()},e.prototype.loadInternal=function(){var e,t=this.context;e=this.loader=new a;var r=this.stats;r.tfirst=0,r.loaded=0;var o=this.xhrSetup;try{if(o)try{o(e,t.url)}catch(r){e.open("GET",t.url,!0),o(e,t.url)}e.readyState||e.open("GET",t.url,!0)}catch(r){return void this.callbacks.onError({code:e.status,text:r.message},t,e)}t.rangeEnd&&e.setRequestHeader("Range","bytes="+t.rangeStart+"-"+(t.rangeEnd-1)),e.onreadystatechange=this.readystatechange.bind(this),e.onprogress=this.loadprogress.bind(this),e.responseType=t.responseType,this.requestTimeout=window.setTimeout(this.loadtimeout.bind(this),this.config.timeout),e.send()},e.prototype.readystatechange=function(e){var t=e.currentTarget,r=t.readyState,a=this.stats,i=this.context,n=this.config;if(!a.aborted&&r>=2)if(window.clearTimeout(this.requestTimeout),0===a.tfirst&&(a.tfirst=Math.max(s.now(),a.trequest)),4===r){var l=t.status;if(l>=200&&l<300){a.tload=Math.max(a.tfirst,s.now());var c=void 0,p=void 0;p="arraybuffer"===i.responseType?(c=t.response).byteLength:(c=t.responseText).length,a.loaded=a.total=p;var u={url:t.responseURL,data:c};this.callbacks.onSuccess(u,a,i,t)}else a.retry>=n.maxRetry||l>=400&&l<499?(o.logger.error(l+" while loading "+i.url),this.callbacks.onError({code:l,text:t.statusText},i,t)):(o.logger.warn(l+" while loading "+i.url+", retrying in "+this.retryDelay+"..."),this.destroy(),this.retryTimeout=window.setTimeout(this.loadInternal.bind(this),this.retryDelay),this.retryDelay=Math.min(2*this.retryDelay,n.maxRetryDelay),a.retry++)}else this.requestTimeout=window.setTimeout(this.loadtimeout.bind(this),n.timeout)},e.prototype.loadtimeout=function(){o.logger.warn("timeout while loading "+this.context.url),this.callbacks.onTimeout(this.stats,this.context,null)},e.prototype.loadprogress=function(e){var t=e.currentTarget,r=this.stats;r.loaded=e.loaded,e.lengthComputable&&(r.total=e.total);var o=this.callbacks.onProgress;o&&o(r,this.context,null,t)},e}();t.default=i}}).default},e.exports=o())},"./node_modules/is-function/index.js":function(e,t){e.exports=function(e){var t=r.call(e);return"[object Function]"===t||"function"==typeof e&&"[object RegExp]"!==t||"undefined"!=typeof window&&(e===window.setTimeout||e===window.alert||e===window.confirm||e===window.prompt)};var r=Object.prototype.toString},"./node_modules/javascript-state-machine/state-machine.js":function(e,t,r){var o;o={VERSION:"2.4.0",Result:{SUCCEEDED:1,NOTRANSITION:2,CANCELLED:3,PENDING:4},Error:{INVALID_TRANSITION:100,PENDING_TRANSITION:200,INVALID_CALLBACK:300},WILDCARD:"*",ASYNC:"async",create:function(e,t){var r="string"==typeof e.initial?{state:e.initial}:e.initial,s=e.terminal||e.final,a=t||e.target||{},i=e.events||[],n=e.callbacks||{},l={},c={},p=function(e){var t=Array.isArray(e.from)?e.from:e.from?[e.from]:[o.WILDCARD];l[e.name]=l[e.name]||{};for(var r=0;r<t.length;r++)c[t[r]]=c[t[r]]||[],c[t[r]].push(e.name),l[e.name][t[r]]=e.to||t[r];e.to&&(c[e.to]=c[e.to]||[])};r&&(r.event=r.event||"startup",p({name:r.event,from:"none",to:r.state}));for(var u=0;u<i.length;u++)p(i[u]);for(var d in l)l.hasOwnProperty(d)&&(a[d]=o.buildEvent(d,l[d]));for(var d in n)n.hasOwnProperty(d)&&(a[d]=n[d]);return a.current="none",a.is=function(e){return Array.isArray(e)?e.indexOf(this.current)>=0:this.current===e},a.can=function(e){return!this.transition&&void 0!==l[e]&&(l[e].hasOwnProperty(this.current)||l[e].hasOwnProperty(o.WILDCARD))},a.cannot=function(e){return!this.can(e)},a.transitions=function(){return(c[this.current]||[]).concat(c[o.WILDCARD]||[])},a.isFinished=function(){return this.is(s)},a.error=e.error||function(e,t,r,o,s,a,i){throw i||a},a.states=function(){return Object.keys(c).sort()},r&&!r.defer&&a[r.event](),a},doCallback:function(e,t,r,s,a,i){if(t)try{return t.apply(e,[r,s,a].concat(i))}catch(t){return e.error(r,s,a,i,o.Error.INVALID_CALLBACK,"an exception occurred in a caller-provided callback function",t)}},beforeAnyEvent:function(e,t,r,s,a){return o.doCallback(e,e.onbeforeevent,t,r,s,a)},afterAnyEvent:function(e,t,r,s,a){return o.doCallback(e,e.onafterevent||e.onevent,t,r,s,a)},leaveAnyState:function(e,t,r,s,a){return o.doCallback(e,e.onleavestate,t,r,s,a)},enterAnyState:function(e,t,r,s,a){return o.doCallback(e,e.onenterstate||e.onstate,t,r,s,a)},changeState:function(e,t,r,s,a){return o.doCallback(e,e.onchangestate,t,r,s,a)},beforeThisEvent:function(e,t,r,s,a){return o.doCallback(e,e["onbefore"+t],t,r,s,a)},afterThisEvent:function(e,t,r,s,a){return o.doCallback(e,e["onafter"+t]||e["on"+t],t,r,s,a)},leaveThisState:function(e,t,r,s,a){return o.doCallback(e,e["onleave"+r],t,r,s,a)},enterThisState:function(e,t,r,s,a){return o.doCallback(e,e["onenter"+s]||e["on"+s],t,r,s,a)},beforeEvent:function(e,t,r,s,a){if(!1===o.beforeThisEvent(e,t,r,s,a)||!1===o.beforeAnyEvent(e,t,r,s,a))return!1},afterEvent:function(e,t,r,s,a){o.afterThisEvent(e,t,r,s,a),o.afterAnyEvent(e,t,r,s,a)},leaveState:function(e,t,r,s,a){var i=o.leaveThisState(e,t,r,s,a),n=o.leaveAnyState(e,t,r,s,a);return!1!==i&&!1!==n&&(o.ASYNC===i||o.ASYNC===n?o.ASYNC:void 0)},enterState:function(e,t,r,s,a){o.enterThisState(e,t,r,s,a),o.enterAnyState(e,t,r,s,a)},buildEvent:function(e,t){return function(){var r=this.current,s=t[r]||(t[o.WILDCARD]!=o.WILDCARD?t[o.WILDCARD]:r)||r,a=Array.prototype.slice.call(arguments);if(this.transition)return this.error(e,r,s,a,o.Error.PENDING_TRANSITION,"event "+e+" inappropriate because previous transition did not complete");if(this.cannot(e))return this.error(e,r,s,a,o.Error.INVALID_TRANSITION,"event "+e+" inappropriate in current state "+this.current);if(!1===o.beforeEvent(this,e,r,s,a))return o.Result.CANCELLED;if(r===s)return o.afterEvent(this,e,r,s,a),o.Result.NOTRANSITION;var i=this;this.transition=function(){return i.transition=null,i.current=s,o.enterState(i,e,r,s,a),o.changeState(i,e,r,s,a),o.afterEvent(i,e,r,s,a),o.Result.SUCCEEDED},this.transition.cancel=function(){i.transition=null,o.afterEvent(i,e,r,s,a)};var n=o.leaveState(this,e,r,s,a);return!1===n?(this.transition=null,o.Result.CANCELLED):o.ASYNC===n?o.Result.PENDING:this.transition?this.transition():void 0}}},e.exports&&(t=e.exports=o),t.StateMachine=o},"./node_modules/lodash-es/_baseClamp.js":function(e,t,r){"use strict";t.a=function(e,t,r){return e==e&&(void 0!==r&&(e=e<=r?e:r),void 0!==t&&(e=e>=t?e:t)),e}},"./node_modules/lodash-es/_baseSlice.js":function(e,t,r){"use strict";t.a=function(e,t,r){var o=-1,s=e.length;t<0&&(t=-t>s?0:s+t),(r=r>s?s:r)<0&&(r+=s),s=t>r?0:r-t>>>0,t>>>=0;for(var a=Array(s);++o<s;)a[o]=e[o+t];return a}},"./node_modules/lodash-es/_baseUnset.js":function(e,t,r){"use strict";var o=r("./node_modules/lodash-es/_castPath.js");var s=function(e){var t=null==e?0:e.length;return t?e[t-1]:void 0},a=r("./node_modules/lodash-es/_baseGet.js"),i=r("./node_modules/lodash-es/_baseSlice.js");var n=function(e,t){return t.length<2?e:Object(a.a)(e,Object(i.a)(t,0,-1))},l=r("./node_modules/lodash-es/_toKey.js");t.a=function(e,t){return t=Object(o.a)(t,e),null==(e=n(e,t))||delete e[Object(l.a)(s(t))]}},"./node_modules/lodash-es/clamp.js":function(e,t,r){"use strict";var o=r("./node_modules/lodash-es/_baseClamp.js"),s=r("./node_modules/lodash-es/toNumber.js");t.a=function(e,t,r){return void 0===r&&(r=t,t=void 0),void 0!==r&&(r=(r=Object(s.a)(r))==r?r:0),void 0!==t&&(t=(t=Object(s.a)(t))==t?t:0),Object(o.a)(Object(s.a)(e),t,r)}},"./node_modules/lodash-es/omit.js":function(e,t,r){"use strict";var o=r("./node_modules/lodash-es/_arrayMap.js"),s=r("./node_modules/lodash-es/_baseClone.js"),a=r("./node_modules/lodash-es/_baseUnset.js"),i=r("./node_modules/lodash-es/_castPath.js"),n=r("./node_modules/lodash-es/_copyObject.js"),l=r("./node_modules/lodash-es/_baseGetTag.js"),c=r("./node_modules/lodash-es/_getPrototype.js"),p=r("./node_modules/lodash-es/isObjectLike.js"),u=Function.prototype,d=Object.prototype,h=u.toString,m=d.hasOwnProperty,b=h.call(Object);var f=function(e){if(!Object(p.a)(e)||"[object Object]"!=Object(l.a)(e))return!1;var t=Object(c.a)(e);if(null===t)return!0;var r=m.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&h.call(r)==b};var y=function(e){return f(e)?void 0:e},g=r("./node_modules/lodash-es/_flatRest.js"),v=r("./node_modules/lodash-es/_getAllKeysIn.js"),w=Object(g.a)((function(e,t){var r={};if(null==e)return r;var l=!1;t=Object(o.a)(t,(function(t){return t=Object(i.a)(t,e),l||(l=t.length>1),t})),Object(n.a)(e,Object(v.a)(e),r),l&&(r=Object(s.a)(r,7,y));for(var c=t.length;c--;)Object(a.a)(r,t[c]);return r}));t.a=w},"./node_modules/lodash-es/times.js":function(e,t,r){"use strict";var o=r("./node_modules/lodash-es/_baseTimes.js"),s=r("./node_modules/lodash-es/identity.js");var a=function(e){return"function"==typeof e?e:s.a},i=r("./node_modules/lodash-es/toInteger.js"),n=Math.min;t.a=function(e,t){if((e=Object(i.a)(e))<1||e>9007199254740991)return[];var r=4294967295,s=n(e,4294967295);t=a(t),e-=4294967295;for(var l=Object(o.a)(s,t);++r<e;)t(r);return l}},"./node_modules/lodash/_baseHasIn.js":function(e,t){e.exports=function(e,t){return null!=e&&t in Object(e)}},"./node_modules/lodash/_baseIsMatch.js":function(e,t,r){var o=r("./node_modules/lodash/_Stack.js"),s=r("./node_modules/lodash/_baseIsEqual.js");e.exports=function(e,t,r,a){var i=r.length,n=i,l=!a;if(null==e)return!n;for(e=Object(e);i--;){var c=r[i];if(l&&c[2]?c[1]!==e[c[0]]:!(c[0]in e))return!1}for(;++i<n;){var p=(c=r[i])[0],u=e[p],d=c[1];if(l&&c[2]){if(void 0===u&&!(p in e))return!1}else{var h=new o;if(a)var m=a(u,d,p,e,t,h);if(!(void 0===m?s(d,u,3,a,h):m))return!1}}return!0}},"./node_modules/lodash/_baseIteratee.js":function(e,t,r){var o=r("./node_modules/lodash/_baseMatches.js"),s=r("./node_modules/lodash/_baseMatchesProperty.js"),a=r("./node_modules/lodash/identity.js"),i=r("./node_modules/lodash/isArray.js"),n=r("./node_modules/lodash/property.js");e.exports=function(e){return"function"==typeof e?e:null==e?a:"object"==typeof e?i(e)?s(e[0],e[1]):o(e):n(e)}},"./node_modules/lodash/_baseMap.js":function(e,t,r){var o=r("./node_modules/lodash/_baseEach.js"),s=r("./node_modules/lodash/isArrayLike.js");e.exports=function(e,t){var r=-1,a=s(e)?Array(e.length):[];return o(e,(function(e,o,s){a[++r]=t(e,o,s)})),a}},"./node_modules/lodash/_baseMatches.js":function(e,t,r){var o=r("./node_modules/lodash/_baseIsMatch.js"),s=r("./node_modules/lodash/_getMatchData.js"),a=r("./node_modules/lodash/_matchesStrictComparable.js");e.exports=function(e){var t=s(e);return 1==t.length&&t[0][2]?a(t[0][0],t[0][1]):function(r){return r===e||o(r,e,t)}}},"./node_modules/lodash/_baseMatchesProperty.js":function(e,t,r){var o=r("./node_modules/lodash/_baseIsEqual.js"),s=r("./node_modules/lodash/get.js"),a=r("./node_modules/lodash/hasIn.js"),i=r("./node_modules/lodash/_isKey.js"),n=r("./node_modules/lodash/_isStrictComparable.js"),l=r("./node_modules/lodash/_matchesStrictComparable.js"),c=r("./node_modules/lodash/_toKey.js");e.exports=function(e,t){return i(e)&&n(t)?l(c(e),t):function(r){var i=s(r,e);return void 0===i&&i===t?a(r,e):o(t,i,3)}}},"./node_modules/lodash/_baseProperty.js":function(e,t){e.exports=function(e){return function(t){return null==t?void 0:t[e]}}},"./node_modules/lodash/_basePropertyDeep.js":function(e,t,r){var o=r("./node_modules/lodash/_baseGet.js");e.exports=function(e){return function(t){return o(t,e)}}},"./node_modules/lodash/_baseRest.js":function(e,t,r){var o=r("./node_modules/lodash/identity.js"),s=r("./node_modules/lodash/_overRest.js"),a=r("./node_modules/lodash/_setToString.js");e.exports=function(e,t){return a(s(e,t,o),e+"")}},"./node_modules/lodash/_createAssigner.js":function(e,t,r){var o=r("./node_modules/lodash/_baseRest.js"),s=r("./node_modules/lodash/_isIterateeCall.js");e.exports=function(e){return o((function(t,r){var o=-1,a=r.length,i=a>1?r[a-1]:void 0,n=a>2?r[2]:void 0;for(i=e.length>3&&"function"==typeof i?(a--,i):void 0,n&&s(r[0],r[1],n)&&(i=a<3?void 0:i,a=1),t=Object(t);++o<a;){var l=r[o];l&&e(t,l,o,i)}return t}))}},"./node_modules/lodash/_getMatchData.js":function(e,t,r){var o=r("./node_modules/lodash/_isStrictComparable.js"),s=r("./node_modules/lodash/keys.js");e.exports=function(e){for(var t=s(e),r=t.length;r--;){var a=t[r],i=e[a];t[r]=[a,i,o(i)]}return t}},"./node_modules/lodash/_hasPath.js":function(e,t,r){var o=r("./node_modules/lodash/_castPath.js"),s=r("./node_modules/lodash/isArguments.js"),a=r("./node_modules/lodash/isArray.js"),i=r("./node_modules/lodash/_isIndex.js"),n=r("./node_modules/lodash/isLength.js"),l=r("./node_modules/lodash/_toKey.js");e.exports=function(e,t,r){for(var c=-1,p=(t=o(t,e)).length,u=!1;++c<p;){var d=l(t[c]);if(!(u=null!=e&&r(e,d)))break;e=e[d]}return u||++c!=p?u:!!(p=null==e?0:e.length)&&n(p)&&i(d,p)&&(a(e)||s(e))}},"./node_modules/lodash/_isIterateeCall.js":function(e,t,r){var o=r("./node_modules/lodash/eq.js"),s=r("./node_modules/lodash/isArrayLike.js"),a=r("./node_modules/lodash/_isIndex.js"),i=r("./node_modules/lodash/isObject.js");e.exports=function(e,t,r){if(!i(r))return!1;var n=typeof t;return!!("number"==n?s(r)&&a(t,r.length):"string"==n&&t in r)&&o(r[t],e)}},"./node_modules/lodash/_isStrictComparable.js":function(e,t,r){var o=r("./node_modules/lodash/isObject.js");e.exports=function(e){return e==e&&!o(e)}},"./node_modules/lodash/_matchesStrictComparable.js":function(e,t){e.exports=function(e,t){return function(r){return null!=r&&(r[e]===t&&(void 0!==t||e in Object(r)))}}},"./node_modules/lodash/assign.js":function(e,t,r){var o=r("./node_modules/lodash/_assignValue.js"),s=r("./node_modules/lodash/_copyObject.js"),a=r("./node_modules/lodash/_createAssigner.js"),i=r("./node_modules/lodash/isArrayLike.js"),n=r("./node_modules/lodash/_isPrototype.js"),l=r("./node_modules/lodash/keys.js"),c=Object.prototype.hasOwnProperty,p=a((function(e,t){if(n(t)||i(t))s(t,l(t),e);else for(var r in t)c.call(t,r)&&o(e,r,t[r])}));e.exports=p},"./node_modules/lodash/assignIn.js":function(e,t,r){var o=r("./node_modules/lodash/_copyObject.js"),s=r("./node_modules/lodash/_createAssigner.js"),a=r("./node_modules/lodash/keysIn.js"),i=s((function(e,t){o(t,a(t),e)}));e.exports=i},"./node_modules/lodash/each.js":function(e,t,r){e.exports=r("./node_modules/lodash/forEach.js")},"./node_modules/lodash/extend.js":function(e,t,r){e.exports=r("./node_modules/lodash/assignIn.js")},"./node_modules/lodash/get.js":function(e,t,r){var o=r("./node_modules/lodash/_baseGet.js");e.exports=function(e,t,r){var s=null==e?void 0:o(e,t);return void 0===s?r:s}},"./node_modules/lodash/hasIn.js":function(e,t,r){var o=r("./node_modules/lodash/_baseHasIn.js"),s=r("./node_modules/lodash/_hasPath.js");e.exports=function(e,t){return null!=e&&s(e,t,o)}},"./node_modules/lodash/isBoolean.js":function(e,t,r){var o=r("./node_modules/lodash/_baseGetTag.js"),s=r("./node_modules/lodash/isObjectLike.js");e.exports=function(e){return!0===e||!1===e||s(e)&&"[object Boolean]"==o(e)}},"./node_modules/lodash/map.js":function(e,t,r){var o=r("./node_modules/lodash/_arrayMap.js"),s=r("./node_modules/lodash/_baseIteratee.js"),a=r("./node_modules/lodash/_baseMap.js"),i=r("./node_modules/lodash/isArray.js");e.exports=function(e,t){return(i(e)?o:a)(e,s(t,3))}},"./node_modules/lodash/property.js":function(e,t,r){var o=r("./node_modules/lodash/_baseProperty.js"),s=r("./node_modules/lodash/_basePropertyDeep.js"),a=r("./node_modules/lodash/_isKey.js"),i=r("./node_modules/lodash/_toKey.js");e.exports=function(e){return a(e)?o(i(e)):s(e)}},"./node_modules/mousetrap/mousetrap.js":function(e,t,r){var o;!function(s,a,i){if(s){for(var n,l={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},c={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},p={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},u={option:"alt",command:"meta",return:"enter",escape:"esc",plus:"+",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"},d=1;d<20;++d)l[111+d]="f"+d;for(d=0;d<=9;++d)l[d+96]=d.toString();g.prototype.bind=function(e,t,r){return e=e instanceof Array?e:[e],this._bindMultiple.call(this,e,t,r),this},g.prototype.unbind=function(e,t){return this.bind.call(this,e,(function(){}),t)},g.prototype.trigger=function(e,t){return this._directMap[e+":"+t]&&this._directMap[e+":"+t]({},e),this},g.prototype.reset=function(){return this._callbacks={},this._directMap={},this},g.prototype.stopCallback=function(e,t){return!((" "+t.className+" ").indexOf(" mousetrap ")>-1)&&(!function e(t,r){return null!==t&&t!==a&&(t===r||e(t.parentNode,r))}(t,this.target)&&("INPUT"==t.tagName||"SELECT"==t.tagName||"TEXTAREA"==t.tagName||t.isContentEditable))},g.prototype.handleKey=function(){var e=this;return e._handleKey.apply(e,arguments)},g.addKeycodes=function(e){for(var t in e)e.hasOwnProperty(t)&&(l[t]=e[t]);n=null},g.init=function(){var e=g(a);for(var t in e)"_"!==t.charAt(0)&&(g[t]=function(t){return function(){return e[t].apply(e,arguments)}}(t))},g.init(),s.Mousetrap=g,e.exports&&(e.exports=g),void 0===(o=function(){return g}.call(t,r,t,e))||(e.exports=o)}function h(e,t,r){e.addEventListener?e.addEventListener(t,r,!1):e.attachEvent("on"+t,r)}function m(e){if("keypress"==e.type){var t=String.fromCharCode(e.which);return e.shiftKey||(t=t.toLowerCase()),t}return l[e.which]?l[e.which]:c[e.which]?c[e.which]:String.fromCharCode(e.which).toLowerCase()}function b(e){return"shift"==e||"ctrl"==e||"alt"==e||"meta"==e}function f(e,t,r){return r||(r=function(){if(!n)for(var e in n={},l)e>95&&e<112||l.hasOwnProperty(e)&&(n[l[e]]=e);return n}()[e]?"keydown":"keypress"),"keypress"==r&&t.length&&(r="keydown"),r}function y(e,t){var r,o,s,a=[];for(r=function(e){return"+"===e?["+"]:(e=e.replace(/\+{2}/g,"+plus")).split("+")}(e),s=0;s<r.length;++s)o=r[s],u[o]&&(o=u[o]),t&&"keypress"!=t&&p[o]&&(o=p[o],a.push("shift")),b(o)&&a.push(o);return{key:o,modifiers:a,action:t=f(o,a,t)}}function g(e){var t=this;if(e=e||a,!(t instanceof g))return new g(e);t.target=e,t._callbacks={},t._directMap={};var r,o={},s=!1,i=!1,n=!1;function l(e){e=e||{};var t,r=!1;for(t in o)e[t]?r=!0:o[t]=0;r||(n=!1)}function c(e,r,s,a,i,n){var l,c,p,u,d=[],h=s.type;if(!t._callbacks[e])return[];for("keyup"==h&&b(e)&&(r=[e]),l=0;l<t._callbacks[e].length;++l)if(c=t._callbacks[e][l],(a||!c.seq||o[c.seq]==c.level)&&h==c.action&&("keypress"==h&&!s.metaKey&&!s.ctrlKey||(p=r,u=c.modifiers,p.sort().join(",")===u.sort().join(",")))){var m=!a&&c.combo==i,f=a&&c.seq==a&&c.level==n;(m||f)&&t._callbacks[e].splice(l,1),d.push(c)}return d}function p(e,r,o,s){t.stopCallback(r,r.target||r.srcElement,o,s)||!1===e(r,o)&&(function(e){e.preventDefault?e.preventDefault():e.returnValue=!1}(r),function(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0}(r))}function u(e){"number"!=typeof e.which&&(e.which=e.keyCode);var r=m(e);r&&("keyup"!=e.type||s!==r?t.handleKey(r,function(e){var t=[];return e.shiftKey&&t.push("shift"),e.altKey&&t.push("alt"),e.ctrlKey&&t.push("ctrl"),e.metaKey&&t.push("meta"),t}(e),e):s=!1)}function d(e,t,a,i){function c(t){return function(){n=t,++o[e],clearTimeout(r),r=setTimeout(l,1e3)}}function u(t){p(a,t,e),"keyup"!==i&&(s=m(t)),setTimeout(l,10)}o[e]=0;for(var d=0;d<t.length;++d){var h=d+1===t.length?u:c(i||y(t[d+1]).action);f(t[d],h,i,e,d)}}function f(e,r,o,s,a){t._directMap[e+":"+o]=r;var i,n=(e=e.replace(/\s+/g," ")).split(" ");n.length>1?d(e,n,r,o):(i=y(e,o),t._callbacks[i.key]=t._callbacks[i.key]||[],c(i.key,i.modifiers,{type:i.action},s,e,a),t._callbacks[i.key][s?"unshift":"push"]({callback:r,modifiers:i.modifiers,action:i.action,seq:s,level:a,combo:e}))}t._handleKey=function(e,t,r){var o,s=c(e,t,r),a={},u=0,d=!1;for(o=0;o<s.length;++o)s[o].seq&&(u=Math.max(u,s[o].level));for(o=0;o<s.length;++o)if(s[o].seq){if(s[o].level!=u)continue;d=!0,a[s[o].seq]=1,p(s[o].callback,r,s[o].combo,s[o].seq)}else d||p(s[o].callback,r,s[o].combo);var h="keypress"==r.type&&i;r.type!=n||b(e)||h||l(a),i=d&&"keydown"==r.type},t._bindMultiple=function(e,t,r){for(var o=0;o<e.length;++o)f(e[o],t,r)},h(e,"keypress",u),h(e,"keydown",u),h(e,"keyup",u)}}("undefined"!=typeof window?window:null,"undefined"!=typeof window?document:null)},"./node_modules/parse-headers/parse-headers.js":function(e,t,r){var o=r("./node_modules/trim/index.js"),s=r("./node_modules/for-each/index.js");e.exports=function(e){if(!e)return{};var t={};return s(o(e).split("\n"),(function(e){var r,s=e.indexOf(":"),a=o(e.slice(0,s)).toLowerCase(),i=o(e.slice(s+1));void 0===t[a]?t[a]=i:(r=t[a],"[object Array]"===Object.prototype.toString.call(r)?t[a].push(i):t[a]=[t[a],i])})),t}},"./node_modules/safe-json-parse/tuple.js":function(e,t){e.exports=function(e,t){var r,o=null;try{r=JSON.parse(e,t)}catch(e){o=e}return[o,r]}},"./node_modules/shallowequal/index.js":function(e,t){e.exports=function(e,t,r,o){var s=r?r.call(o,e,t):void 0;if(void 0!==s)return!!s;if(e===t)return!0;if("object"!=typeof e||!e||"object"!=typeof t||!t)return!1;var a=Object.keys(e),i=Object.keys(t);if(a.length!==i.length)return!1;for(var n=Object.prototype.hasOwnProperty.bind(t),l=0;l<a.length;l++){var c=a[l];if(!n(c))return!1;var p=e[c],u=t[c];if(!1===(s=r?r.call(o,p,u,c):void 0)||void 0===s&&p!==u)return!1}return!0}},"./node_modules/store/dist/store.legacy.js":function(e,t,r){var o=r("./node_modules/store/src/store-engine.js"),s=r("./node_modules/store/storages/all.js"),a=[r("./node_modules/store/plugins/json2.js")];e.exports=o.createStore(s,a)},"./node_modules/store/plugins/json2.js":function(e,t,r){e.exports=function(){return r("./node_modules/store/plugins/lib/json2.js"),{}}},"./node_modules/store/plugins/lib/json2.js":function(module,exports){"object"!=typeof JSON&&(JSON={}),function(){"use strict";var rx_one=/^[\],:{}\s]*$/,rx_two=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,rx_three=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,rx_four=/(?:^|:|,)(?:\s*\[)+/g,rx_escapable=/[\\"\u0000-\u001f\u007f-\u009f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,rx_dangerous=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta,rep;function f(e){return e<10?"0"+e:e}function this_value(){return this.valueOf()}function quote(e){return rx_escapable.lastIndex=0,rx_escapable.test(e)?'"'+e.replace(rx_escapable,(function(e){var t=meta[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)}))+'"':'"'+e+'"'}function str(e,t){var r,o,s,a,i,n=gap,l=t[e];switch(l&&"object"==typeof l&&"function"==typeof l.toJSON&&(l=l.toJSON(e)),"function"==typeof rep&&(l=rep.call(t,e,l)),typeof l){case"string":return quote(l);case"number":return isFinite(l)?String(l):"null";case"boolean":case"null":return String(l);case"object":if(!l)return"null";if(gap+=indent,i=[],"[object Array]"===Object.prototype.toString.apply(l)){for(a=l.length,r=0;r<a;r+=1)i[r]=str(r,l)||"null";return s=0===i.length?"[]":gap?"[\n"+gap+i.join(",\n"+gap)+"\n"+n+"]":"["+i.join(",")+"]",gap=n,s}if(rep&&"object"==typeof rep)for(a=rep.length,r=0;r<a;r+=1)"string"==typeof rep[r]&&(s=str(o=rep[r],l))&&i.push(quote(o)+(gap?": ":":")+s);else for(o in l)Object.prototype.hasOwnProperty.call(l,o)&&(s=str(o,l))&&i.push(quote(o)+(gap?": ":":")+s);return s=0===i.length?"{}":gap?"{\n"+gap+i.join(",\n"+gap)+"\n"+n+"}":"{"+i.join(",")+"}",gap=n,s}}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},Boolean.prototype.toJSON=this_value,Number.prototype.toJSON=this_value,String.prototype.toJSON=this_value),"function"!=typeof JSON.stringify&&(meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},JSON.stringify=function(e,t,r){var o;if(gap="",indent="","number"==typeof r)for(o=0;o<r;o+=1)indent+=" ";else"string"==typeof r&&(indent=r);if(rep=t,t&&"function"!=typeof t&&("object"!=typeof t||"number"!=typeof t.length))throw new Error("JSON.stringify");return str("",{"":e})}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){var j;function walk(e,t){var r,o,s=e[t];if(s&&"object"==typeof s)for(r in s)Object.prototype.hasOwnProperty.call(s,r)&&(void 0!==(o=walk(s,r))?s[r]=o:delete s[r]);return reviver.call(e,t,s)}if(text=String(text),rx_dangerous.lastIndex=0,rx_dangerous.test(text)&&(text=text.replace(rx_dangerous,(function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)}))),rx_one.test(text.replace(rx_two,"@").replace(rx_three,"]").replace(rx_four,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}()},"./node_modules/store/storages/all.js":function(e,t,r){e.exports={localStorage:r("./node_modules/store/storages/localStorage.js"),"oldFF-globalStorage":r("./node_modules/store/storages/oldFF-globalStorage.js"),"oldIE-userDataStorage":r("./node_modules/store/storages/oldIE-userDataStorage.js"),cookieStorage:r("./node_modules/store/storages/cookieStorage.js"),sessionStorage:r("./node_modules/store/storages/sessionStorage.js"),memoryStorage:r("./node_modules/store/storages/memoryStorage.js")}},"./node_modules/store/storages/cookieStorage.js":function(e,t,r){var o=r("./node_modules/store/src/util.js"),s=o.Global,a=o.trim;e.exports={name:"cookieStorage",read:function(e){if(!e||!c(e))return null;var t="(?:^|.*;\\s*)"+escape(e).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*((?:[^;](?!;))*[^;]?).*";return unescape(i.cookie.replace(new RegExp(t),"$1"))},write:function(e,t){if(!e)return;i.cookie=escape(e)+"="+escape(t)+"; expires=Tue, 19 Jan 2038 03:14:07 GMT; path=/"},each:n,remove:l,clearAll:function(){n((function(e,t){l(t)}))}};var i=s.document;function n(e){for(var t=i.cookie.split(/; ?/g),r=t.length-1;r>=0;r--)if(a(t[r])){var o=t[r].split("="),s=unescape(o[0]);e(unescape(o[1]),s)}}function l(e){e&&c(e)&&(i.cookie=escape(e)+"=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/")}function c(e){return new RegExp("(?:^|;\\s*)"+escape(e).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=").test(i.cookie)}},"./node_modules/store/storages/oldFF-globalStorage.js":function(e,t,r){var o=r("./node_modules/store/src/util.js").Global;e.exports={name:"oldFF-globalStorage",read:function(e){return s[e]},write:function(e,t){s[e]=t},each:a,remove:function(e){return s.removeItem(e)},clearAll:function(){a((function(e,t){delete s[e]}))}};var s=o.globalStorage;function a(e){for(var t=s.length-1;t>=0;t--){var r=s.key(t);e(s[r],r)}}},"./node_modules/store/storages/oldIE-userDataStorage.js":function(e,t,r){var o=r("./node_modules/store/src/util.js").Global;e.exports={name:"oldIE-userDataStorage",write:function(e,t){if(i)return;var r=l(e);a((function(e){e.setAttribute(r,t),e.save("storejs")}))},read:function(e){if(i)return;var t=l(e),r=null;return a((function(e){r=e.getAttribute(t)})),r},each:function(e){a((function(t){for(var r=t.XMLDocument.documentElement.attributes,o=r.length-1;o>=0;o--){var s=r[o];e(t.getAttribute(s.name),s.name)}}))},remove:function(e){var t=l(e);a((function(e){e.removeAttribute(t),e.save("storejs")}))},clearAll:function(){a((function(e){var t=e.XMLDocument.documentElement.attributes;e.load("storejs");for(var r=t.length-1;r>=0;r--)e.removeAttribute(t[r].name);e.save("storejs")}))}};var s=o.document,a=function(){if(!s||!s.documentElement||!s.documentElement.addBehavior)return null;var e,t,r;try{(t=new ActiveXObject("htmlfile")).open(),t.write('<script>document.w=window<\/script><iframe src="/favicon.ico"></iframe>'),t.close(),e=t.w.frames[0].document,r=e.createElement("div")}catch(t){r=s.createElement("div"),e=s.body}return function(t){var o=[].slice.call(arguments,0);o.unshift(r),e.appendChild(r),r.addBehavior("#default#userData"),r.load("storejs"),t.apply(this,o),e.removeChild(r)}}(),i=(o.navigator?o.navigator.userAgent:"").match(/ (MSIE 8|MSIE 9|MSIE 10)\./);var n=new RegExp("[!\"#$%&'()*+,/\\\\:;<=>?@[\\]^`{|}~]","g");function l(e){return e.replace(/^\d/,"___$&").replace(n,"___")}},"./node_modules/store/storages/sessionStorage.js":function(e,t,r){var o=r("./node_modules/store/src/util.js").Global;function s(){return o.sessionStorage}function a(e){return s().getItem(e)}e.exports={name:"sessionStorage",read:a,write:function(e,t){return s().setItem(e,t)},each:function(e){for(var t=s().length-1;t>=0;t--){var r=s().key(t);e(a(r),r)}},remove:function(e){return s().removeItem(e)},clearAll:function(){return s().clear()}}},"./node_modules/trim/index.js":function(e,t){(t=e.exports=function(e){return e.replace(/^\s*|\s*$/g,"")}).left=function(e){return e.replace(/^\s*/,"")},t.right=function(e){return e.replace(/\s*$/,"")}},"./node_modules/tsml/tsml.js":function(e,t){function r(e){return e.replace(/\n\r?\s*/g,"")}e.exports=function(e){for(var t="",o=0;o<arguments.length;o++)t+=r(e[o])+(arguments[o+1]||"");return t}},"./node_modules/ua-parser-js/src/ua-parser.js":function(e,t,r){var o;!function(s,a){"use strict";var i="model",n="name",l="type",c="vendor",p="version",u="mobile",d="tablet",h={extend:function(e,t){var r={};for(var o in e)t[o]&&t[o].length%2==0?r[o]=t[o].concat(e[o]):r[o]=e[o];return r},has:function(e,t){return"string"==typeof e&&-1!==t.toLowerCase().indexOf(e.toLowerCase())},lowerize:function(e){return e.toLowerCase()},major:function(e){return"string"==typeof e?e.replace(/[^\d\.]/g,"").split(".")[0]:void 0},trim:function(e){return e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}},m={rgx:function(e,t){for(var r,o,s,a,i,n,l=0;l<t.length&&!i;){var c=t[l],p=t[l+1];for(r=o=0;r<c.length&&!i;)if(i=c[r++].exec(e))for(s=0;s<p.length;s++)n=i[++o],"object"==typeof(a=p[s])&&a.length>0?2==a.length?"function"==typeof a[1]?this[a[0]]=a[1].call(this,n):this[a[0]]=a[1]:3==a.length?"function"!=typeof a[1]||a[1].exec&&a[1].test?this[a[0]]=n?n.replace(a[1],a[2]):void 0:this[a[0]]=n?a[1].call(this,n,a[2]):void 0:4==a.length&&(this[a[0]]=n?a[3].call(this,n.replace(a[1],a[2])):void 0):this[a]=n||void 0;l+=2}},str:function(e,t){for(var r in t)if("object"==typeof t[r]&&t[r].length>0){for(var o=0;o<t[r].length;o++)if(h.has(t[r][o],e))return"?"===r?void 0:r}else if(h.has(t[r],e))return"?"===r?void 0:r;return e}},b={browser:{oldsafari:{version:{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}}},device:{amazon:{model:{"Fire Phone":["SD","KF"]}},sprint:{model:{"Evo Shift 4G":"7373KT"},vendor:{HTC:"APA",Sprint:"Sprint"}}},os:{windows:{version:{ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"}}}},f={browser:[[/(opera\smini)\/([\w\.-]+)/i,/(opera\s[mobiletab]+).+version\/([\w\.-]+)/i,/(opera).+version\/([\w\.]+)/i,/(opera)[\/\s]+([\w\.]+)/i],[n,p],[/(opios)[\/\s]+([\w\.]+)/i],[[n,"Opera Mini"],p],[/\s(opr)\/([\w\.]+)/i],[[n,"Opera"],p],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/\s]?([\w\.]*)/i,/(avant\s|iemobile|slim|baidu)(?:browser)?[\/\s]?([\w\.]*)/i,/(?:ms|\()(ie)\s([\w\.]+)/i,/(rekonq)\/([\w\.]*)/i,/(chromium|flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark)\/([\w\.-]+)/i],[n,p],[/(trident).+rv[:\s]([\w\.]+).+like\sgecko/i],[[n,"IE"],p],[/(edge|edgios|edga)\/((\d+)?[\w\.]+)/i],[[n,"Edge"],p],[/(yabrowser)\/([\w\.]+)/i],[[n,"Yandex"],p],[/(puffin)\/([\w\.]+)/i],[[n,"Puffin"],p],[/(focus)\/([\w\.]+)/i],[[n,"Firefox Focus"],p],[/(opt)\/([\w\.]+)/i],[[n,"Opera Touch"],p],[/((?:[\s\/])uc?\s?browser|(?:juc.+)ucweb)[\/\s]?([\w\.]+)/i],[[n,"UCBrowser"],p],[/(comodo_dragon)\/([\w\.]+)/i],[[n,/_/g," "],p],[/(micromessenger)\/([\w\.]+)/i],[[n,"WeChat"],p],[/(brave)\/([\w\.]+)/i],[[n,"Brave"],p],[/(qqbrowserlite)\/([\w\.]+)/i],[n,p],[/(QQ)\/([\d\.]+)/i],[n,p],[/m?(qqbrowser)[\/\s]?([\w\.]+)/i],[n,p],[/(BIDUBrowser)[\/\s]?([\w\.]+)/i],[n,p],[/(2345Explorer)[\/\s]?([\w\.]+)/i],[n,p],[/(MetaSr)[\/\s]?([\w\.]+)/i],[n],[/(LBBROWSER)/i],[n],[/xiaomi\/miuibrowser\/([\w\.]+)/i],[p,[n,"MIUI Browser"]],[/;fbav\/([\w\.]+);/i],[p,[n,"Facebook"]],[/safari\s(line)\/([\w\.]+)/i,/android.+(line)\/([\w\.]+)\/iab/i],[n,p],[/headlesschrome(?:\/([\w\.]+)|\s)/i],[p,[n,"Chrome Headless"]],[/\swv\).+(chrome)\/([\w\.]+)/i],[[n,/(.+)/,"$1 WebView"],p],[/((?:oculus|samsung)browser)\/([\w\.]+)/i],[[n,/(.+(?:g|us))(.+)/,"$1 $2"],p],[/android.+version\/([\w\.]+)\s+(?:mobile\s?safari|safari)*/i],[p,[n,"Android Browser"]],[/(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?([\w\.]+)/i],[n,p],[/(dolfin)\/([\w\.]+)/i],[[n,"Dolphin"],p],[/((?:android.+)crmo|crios)\/([\w\.]+)/i],[[n,"Chrome"],p],[/(coast)\/([\w\.]+)/i],[[n,"Opera Coast"],p],[/fxios\/([\w\.-]+)/i],[p,[n,"Firefox"]],[/version\/([\w\.]+).+?mobile\/\w+\s(safari)/i],[p,[n,"Mobile Safari"]],[/version\/([\w\.]+).+?(mobile\s?safari|safari)/i],[p,n],[/webkit.+?(gsa)\/([\w\.]+).+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[[n,"GSA"],p],[/webkit.+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[n,[p,m.str,b.browser.oldsafari.version]],[/(konqueror)\/([\w\.]+)/i,/(webkit|khtml)\/([\w\.]+)/i],[n,p],[/(navigator|netscape)\/([\w\.-]+)/i],[[n,"Netscape"],p],[/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo\sbrowser|minimo|conkeror)[\/\s]?([\w\.\+]+)/i,/(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([\w\.-]+)$/i,/(mozilla)\/([\w\.]+).+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir)[\/\s]?([\w\.]+)/i,/(links)\s\(([\w\.]+)/i,/(gobrowser)\/?([\w\.]*)/i,/(ice\s?browser)\/v?([\w\._]+)/i,/(mosaic)[\/\s]([\w\.]+)/i],[n,p]],cpu:[[/(?:(amd|x(?:(?:86|64)[_-])?|wow|win)64)[;\)]/i],[["architecture","amd64"]],[/(ia32(?=;))/i],[["architecture",h.lowerize]],[/((?:i[346]|x)86)[;\)]/i],[["architecture","ia32"]],[/windows\s(ce|mobile);\sppc;/i],[["architecture","arm"]],[/((?:ppc|powerpc)(?:64)?)(?:\smac|;|\))/i],[["architecture",/ower/,"",h.lowerize]],[/(sun4\w)[;\)]/i],[["architecture","sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|arm(?:64|(?=v\d+[;l]))|(?=atmel\s)avr|(?:irix|mips|sparc)(?:64)?(?=;)|pa-risc)/i],[["architecture",h.lowerize]]],device:[[/\((ipad|playbook);[\w\s\);-]+(rim|apple)/i],[i,c,[l,d]],[/applecoremedia\/[\w\.]+ \((ipad)/],[i,[c,"Apple"],[l,d]],[/(apple\s{0,1}tv)/i],[[i,"Apple TV"],[c,"Apple"]],[/(archos)\s(gamepad2?)/i,/(hp).+(touchpad)/i,/(hp).+(tablet)/i,/(kindle)\/([\w\.]+)/i,/\s(nook)[\w\s]+build\/(\w+)/i,/(dell)\s(strea[kpr\s\d]*[\dko])/i],[c,i,[l,d]],[/(kf[A-z]+)\sbuild\/.+silk\//i],[i,[c,"Amazon"],[l,d]],[/(sd|kf)[0349hijorstuw]+\sbuild\/.+silk\//i],[[i,m.str,b.device.amazon.model],[c,"Amazon"],[l,u]],[/android.+aft([bms])\sbuild/i],[i,[c,"Amazon"],[l,"smarttv"]],[/\((ip[honed|\s\w*]+);.+(apple)/i],[i,c,[l,u]],[/\((ip[honed|\s\w*]+);/i],[i,[c,"Apple"],[l,u]],[/(blackberry)[\s-]?(\w+)/i,/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[\s_-]?([\w-]*)/i,/(hp)\s([\w\s]+\w)/i,/(asus)-?(\w+)/i],[c,i,[l,u]],[/\(bb10;\s(\w+)/i],[i,[c,"BlackBerry"],[l,u]],[/android.+(transfo[prime\s]{4,10}\s\w+|eeepc|slider\s\w+|nexus 7|padfone)/i],[i,[c,"Asus"],[l,d]],[/(sony)\s(tablet\s[ps])\sbuild\//i,/(sony)?(?:sgp.+)\sbuild\//i],[[c,"Sony"],[i,"Xperia Tablet"],[l,d]],[/android.+\s([c-g]\d{4}|so[-l]\w+)\sbuild\//i],[i,[c,"Sony"],[l,u]],[/\s(ouya)\s/i,/(nintendo)\s([wids3u]+)/i],[c,i,[l,"console"]],[/android.+;\s(shield)\sbuild/i],[i,[c,"Nvidia"],[l,"console"]],[/(playstation\s[34portablevi]+)/i],[i,[c,"Sony"],[l,"console"]],[/(sprint\s(\w+))/i],[[c,m.str,b.device.sprint.vendor],[i,m.str,b.device.sprint.model],[l,u]],[/(lenovo)\s?(S(?:5000|6000)+(?:[-][\w+]))/i],[c,i,[l,d]],[/(htc)[;_\s-]+([\w\s]+(?=\))|\w+)*/i,/(zte)-(\w*)/i,/(alcatel|geeksphone|lenovo|nexian|panasonic|(?=;\s)sony)[_\s-]?([\w-]*)/i],[c,[i,/_/g," "],[l,u]],[/(nexus\s9)/i],[i,[c,"HTC"],[l,d]],[/d\/huawei([\w\s-]+)[;\)]/i,/(nexus\s6p)/i],[i,[c,"Huawei"],[l,u]],[/(microsoft);\s(lumia[\s\w]+)/i],[c,i,[l,u]],[/[\s\(;](xbox(?:\sone)?)[\s\);]/i],[i,[c,"Microsoft"],[l,"console"]],[/(kin\.[onetw]{3})/i],[[i,/\./g," "],[c,"Microsoft"],[l,u]],[/\s(milestone|droid(?:[2-4x]|\s(?:bionic|x2|pro|razr))?:?(\s4g)?)[\w\s]+build\//i,/mot[\s-]?(\w*)/i,/(XT\d{3,4}) build\//i,/(nexus\s6)/i],[i,[c,"Motorola"],[l,u]],[/android.+\s(mz60\d|xoom[\s2]{0,2})\sbuild\//i],[i,[c,"Motorola"],[l,d]],[/hbbtv\/\d+\.\d+\.\d+\s+\([\w\s]*;\s*(\w[^;]*);([^;]*)/i],[[c,h.trim],[i,h.trim],[l,"smarttv"]],[/hbbtv.+maple;(\d+)/i],[[i,/^/,"SmartTV"],[c,"Samsung"],[l,"smarttv"]],[/\(dtv[\);].+(aquos)/i],[i,[c,"Sharp"],[l,"smarttv"]],[/android.+((sch-i[89]0\d|shw-m380s|gt-p\d{4}|gt-n\d+|sgh-t8[56]9|nexus 10))/i,/((SM-T\w+))/i],[[c,"Samsung"],i,[l,d]],[/smart-tv.+(samsung)/i],[c,[l,"smarttv"],i],[/((s[cgp]h-\w+|gt-\w+|galaxy\snexus|sm-\w[\w\d]+))/i,/(sam[sung]*)[\s-]*(\w+-?[\w-]*)/i,/sec-((sgh\w+))/i],[[c,"Samsung"],i,[l,u]],[/sie-(\w*)/i],[i,[c,"Siemens"],[l,u]],[/(maemo|nokia).*(n900|lumia\s\d+)/i,/(nokia)[\s_-]?([\w-]*)/i],[[c,"Nokia"],i,[l,u]],[/android\s3\.[\s\w;-]{10}(a\d{3})/i],[i,[c,"Acer"],[l,d]],[/android.+([vl]k\-?\d{3})\s+build/i],[i,[c,"LG"],[l,d]],[/android\s3\.[\s\w;-]{10}(lg?)-([06cv9]{3,4})/i],[[c,"LG"],i,[l,d]],[/(lg) netcast\.tv/i],[c,i,[l,"smarttv"]],[/(nexus\s[45])/i,/lg[e;\s\/-]+(\w*)/i,/android.+lg(\-?[\d\w]+)\s+build/i],[i,[c,"LG"],[l,u]],[/android.+(ideatab[a-z0-9\-\s]+)/i],[i,[c,"Lenovo"],[l,d]],[/linux;.+((jolla));/i],[c,i,[l,u]],[/((pebble))app\/[\d\.]+\s/i],[c,i,[l,"wearable"]],[/android.+;\s(oppo)\s?([\w\s]+)\sbuild/i],[c,i,[l,u]],[/crkey/i],[[i,"Chromecast"],[c,"Google"]],[/android.+;\s(glass)\s\d/i],[i,[c,"Google"],[l,"wearable"]],[/android.+;\s(pixel c)[\s)]/i],[i,[c,"Google"],[l,d]],[/android.+;\s(pixel( [23])?( xl)?)\s/i],[i,[c,"Google"],[l,u]],[/android.+;\s(\w+)\s+build\/hm\1/i,/android.+(hm[\s\-_]*note?[\s_]*(?:\d\w)?)\s+build/i,/android.+(mi[\s\-_]*(?:one|one[\s_]plus|note lte)?[\s_]*(?:\d?\w?)[\s_]*(?:plus)?)\s+build/i,/android.+(redmi[\s\-_]*(?:note)?(?:[\s_]*[\w\s]+))\s+build/i],[[i,/_/g," "],[c,"Xiaomi"],[l,u]],[/android.+(mi[\s\-_]*(?:pad)(?:[\s_]*[\w\s]+))\s+build/i],[[i,/_/g," "],[c,"Xiaomi"],[l,d]],[/android.+;\s(m[1-5]\snote)\sbuild/i],[i,[c,"Meizu"],[l,d]],[/(mz)-([\w-]{2,})/i],[[c,"Meizu"],i,[l,u]],[/android.+a000(1)\s+build/i,/android.+oneplus\s(a\d{4})\s+build/i],[i,[c,"OnePlus"],[l,u]],[/android.+[;\/]\s*(RCT[\d\w]+)\s+build/i],[i,[c,"RCA"],[l,d]],[/android.+[;\/\s]+(Venue[\d\s]{2,7})\s+build/i],[i,[c,"Dell"],[l,d]],[/android.+[;\/]\s*(Q[T|M][\d\w]+)\s+build/i],[i,[c,"Verizon"],[l,d]],[/android.+[;\/]\s+(Barnes[&\s]+Noble\s+|BN[RT])(V?.*)\s+build/i],[[c,"Barnes & Noble"],i,[l,d]],[/android.+[;\/]\s+(TM\d{3}.*\b)\s+build/i],[i,[c,"NuVision"],[l,d]],[/android.+;\s(k88)\sbuild/i],[i,[c,"ZTE"],[l,d]],[/android.+[;\/]\s*(gen\d{3})\s+build.*49h/i],[i,[c,"Swiss"],[l,u]],[/android.+[;\/]\s*(zur\d{3})\s+build/i],[i,[c,"Swiss"],[l,d]],[/android.+[;\/]\s*((Zeki)?TB.*\b)\s+build/i],[i,[c,"Zeki"],[l,d]],[/(android).+[;\/]\s+([YR]\d{2})\s+build/i,/android.+[;\/]\s+(Dragon[\-\s]+Touch\s+|DT)(\w{5})\sbuild/i],[[c,"Dragon Touch"],i,[l,d]],[/android.+[;\/]\s*(NS-?\w{0,9})\sbuild/i],[i,[c,"Insignia"],[l,d]],[/android.+[;\/]\s*((NX|Next)-?\w{0,9})\s+build/i],[i,[c,"NextBook"],[l,d]],[/android.+[;\/]\s*(Xtreme\_)?(V(1[045]|2[015]|30|40|60|7[05]|90))\s+build/i],[[c,"Voice"],i,[l,u]],[/android.+[;\/]\s*(LVTEL\-)?(V1[12])\s+build/i],[[c,"LvTel"],i,[l,u]],[/android.+;\s(PH-1)\s/i],[i,[c,"Essential"],[l,u]],[/android.+[;\/]\s*(V(100MD|700NA|7011|917G).*\b)\s+build/i],[i,[c,"Envizen"],[l,d]],[/android.+[;\/]\s*(Le[\s\-]+Pan)[\s\-]+(\w{1,9})\s+build/i],[c,i,[l,d]],[/android.+[;\/]\s*(Trio[\s\-]*.*)\s+build/i],[i,[c,"MachSpeed"],[l,d]],[/android.+[;\/]\s*(Trinity)[\-\s]*(T\d{3})\s+build/i],[c,i,[l,d]],[/android.+[;\/]\s*TU_(1491)\s+build/i],[i,[c,"Rotor"],[l,d]],[/android.+(KS(.+))\s+build/i],[i,[c,"Amazon"],[l,d]],[/android.+(Gigaset)[\s\-]+(Q\w{1,9})\s+build/i],[c,i,[l,d]],[/\s(tablet|tab)[;\/]/i,/\s(mobile)(?:[;\/]|\ssafari)/i],[[l,h.lowerize],c,i],[/(android[\w\.\s\-]{0,9});.+build/i],[i,[c,"Generic"]]],engine:[[/windows.+\sedge\/([\w\.]+)/i],[p,[n,"EdgeHTML"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m)\/([\w\.]+)/i,/(khtml|tasman|links)[\/\s]\(?([\w\.]+)/i,/(icab)[\/\s]([23]\.[\d\.]+)/i],[n,p],[/rv\:([\w\.]{1,9}).+(gecko)/i],[p,n]],os:[[/microsoft\s(windows)\s(vista|xp)/i],[n,p],[/(windows)\snt\s6\.2;\s(arm)/i,/(windows\sphone(?:\sos)*)[\s\/]?([\d\.\s\w]*)/i,/(windows\smobile|windows)[\s\/]?([ntce\d\.\s]+\w)/i],[n,[p,m.str,b.os.windows.version]],[/(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i],[[n,"Windows"],[p,m.str,b.os.windows.version]],[/\((bb)(10);/i],[[n,"BlackBerry"],p],[/(blackberry)\w*\/?([\w\.]*)/i,/(tizen)[\/\s]([\w\.]+)/i,/(android|webos|palm\sos|qnx|bada|rim\stablet\sos|meego|contiki)[\/\s-]?([\w\.]*)/i,/linux;.+(sailfish);/i],[n,p],[/(symbian\s?os|symbos|s60(?=;))[\/\s-]?([\w\.]*)/i],[[n,"Symbian"],p],[/\((series40);/i],[n],[/mozilla.+\(mobile;.+gecko.+firefox/i],[[n,"Firefox OS"],p],[/(nintendo|playstation)\s([wids34portablevu]+)/i,/(mint)[\/\s\(]?(\w*)/i,/(mageia|vectorlinux)[;\s]/i,/(joli|[kxln]?ubuntu|debian|suse|opensuse|gentoo|(?=\s)arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|linpus)[\/\s-]?(?!chrom)([\w\.-]*)/i,/(hurd|linux)\s?([\w\.]*)/i,/(gnu)\s?([\w\.]*)/i],[n,p],[/(cros)\s[\w]+\s([\w\.]+\w)/i],[[n,"Chromium OS"],p],[/(sunos)\s?([\w\.\d]*)/i],[[n,"Solaris"],p],[/\s([frentopc-]{0,4}bsd|dragonfly)\s?([\w\.]*)/i],[n,p],[/(haiku)\s(\w+)/i],[n,p],[/cfnetwork\/.+darwin/i,/ip[honead]{2,4}(?:.*os\s([\w]+)\slike\smac|;\sopera)/i],[[p,/_/g,"."],[n,"iOS"]],[/(mac\sos\sx)\s?([\w\s\.]*)/i,/(macintosh|mac(?=_powerpc)\s)/i],[[n,"Mac OS"],[p,/_/g,"."]],[/((?:open)?solaris)[\/\s-]?([\w\.]*)/i,/(aix)\s((\d)(?=\.|\)|\s)[\w\.])*/i,/(plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos|openvms|fuchsia)/i,/(unix)\s?([\w\.]*)/i],[n,p]]},y=function(e,t){if("object"==typeof e&&(t=e,e=void 0),!(this instanceof y))return new y(e,t).getResult();var r=e||(s&&s.navigator&&s.navigator.userAgent?s.navigator.userAgent:""),o=t?h.extend(f,t):f;return this.getBrowser=function(){var e={name:void 0,version:void 0};return m.rgx.call(e,r,o.browser),e.major=h.major(e.version),e},this.getCPU=function(){var e={architecture:void 0};return m.rgx.call(e,r,o.cpu),e},this.getDevice=function(){var e={vendor:void 0,model:void 0,type:void 0};return m.rgx.call(e,r,o.device),e},this.getEngine=function(){var e={name:void 0,version:void 0};return m.rgx.call(e,r,o.engine),e},this.getOS=function(){var e={name:void 0,version:void 0};return m.rgx.call(e,r,o.os),e},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return r},this.setUA=function(e){return r=e,this},this};y.VERSION="0.7.19",y.BROWSER={NAME:n,MAJOR:"major",VERSION:p},y.CPU={ARCHITECTURE:"architecture"},y.DEVICE={MODEL:i,VENDOR:c,TYPE:l,CONSOLE:"console",MOBILE:u,SMARTTV:"smarttv",TABLET:d,WEARABLE:"wearable",EMBEDDED:"embedded"},y.ENGINE={NAME:n,VERSION:p},y.OS={NAME:n,VERSION:p},void 0!==t?(void 0!==e&&e.exports&&(t=e.exports=y),t.UAParser=y):r("./node_modules/webpack/buildin/amd-options.js")?void 0===(o=function(){return y}.call(t,r,t,e))||(e.exports=o):s&&(s.UAParser=y);var g=s&&(s.jQuery||s.Zepto);if(void 0!==g&&!g.ua){var v=new y;g.ua=v.getResult(),g.ua.get=function(){return v.getUA()},g.ua.set=function(e){v.setUA(e);var t=v.getResult();for(var r in t)g.ua[r]=t[r]}}}("object"==typeof window?window:this)},"./node_modules/webpack/buildin/amd-options.js":function(e,t){(function(t){e.exports=t}).call(this,{})},"./node_modules/xhr/index.js":function(e,t,r){"use strict";var o=r("./node_modules/global/window.js"),s=r("./node_modules/is-function/index.js"),a=r("./node_modules/parse-headers/parse-headers.js"),i=r("./node_modules/xtend/immutable.js");function n(e,t,r){var o=e;return s(t)?(r=t,"string"==typeof e&&(o={uri:e})):o=i(t,{uri:e}),o.callback=r,o}function l(e,t,r){return c(t=n(e,t,r))}function c(e){if(void 0===e.callback)throw new Error("callback argument missing");var t=!1,r=function(r,o,s){t||(t=!0,e.callback(r,o,s))};function o(){var e=void 0;if(e=p.response?p.response:p.responseText||function(e){if("document"===e.responseType)return e.responseXML;var t=e.responseXML&&"parsererror"===e.responseXML.documentElement.nodeName;if(""===e.responseType&&!t)return e.responseXML;return null}(p),y)try{e=JSON.parse(e)}catch(e){}return e}function s(e){return clearTimeout(u),e instanceof Error||(e=new Error(""+(e||"Unknown XMLHttpRequest Error"))),e.statusCode=0,r(e,g)}function i(){if(!c){var t;clearTimeout(u),t=e.useXDR&&void 0===p.status?200:1223===p.status?204:p.status;var s=g,i=null;return 0!==t?(s={body:o(),statusCode:t,method:h,headers:{},url:d,rawRequest:p},p.getAllResponseHeaders&&(s.headers=a(p.getAllResponseHeaders()))):i=new Error("Internal XMLHttpRequest Error"),r(i,s,s.body)}}var n,c,p=e.xhr||null;p||(p=e.cors||e.useXDR?new l.XDomainRequest:new l.XMLHttpRequest);var u,d=p.url=e.uri||e.url,h=p.method=e.method||"GET",m=e.body||e.data,b=p.headers=e.headers||{},f=!!e.sync,y=!1,g={body:void 0,headers:{},statusCode:0,method:h,url:d,rawRequest:p};if("json"in e&&!1!==e.json&&(y=!0,b.accept||b.Accept||(b.Accept="application/json"),"GET"!==h&&"HEAD"!==h&&(b["content-type"]||b["Content-Type"]||(b["Content-Type"]="application/json"),m=JSON.stringify(!0===e.json?m:e.json))),p.onreadystatechange=function(){4===p.readyState&&setTimeout(i,0)},p.onload=i,p.onerror=s,p.onprogress=function(){},p.onabort=function(){c=!0},p.ontimeout=s,p.open(h,d,!f,e.username,e.password),f||(p.withCredentials=!!e.withCredentials),!f&&e.timeout>0&&(u=setTimeout((function(){if(!c){c=!0,p.abort("timeout");var e=new Error("XMLHttpRequest timeout");e.code="ETIMEDOUT",s(e)}}),e.timeout)),p.setRequestHeader)for(n in b)b.hasOwnProperty(n)&&p.setRequestHeader(n,b[n]);else if(e.headers&&!function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}(e.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in e&&(p.responseType=e.responseType),"beforeSend"in e&&"function"==typeof e.beforeSend&&e.beforeSend(p),p.send(m||null),p}e.exports=l,l.XMLHttpRequest=o.XMLHttpRequest||function(){},l.XDomainRequest="withCredentials"in new l.XMLHttpRequest?l.XMLHttpRequest:o.XDomainRequest,function(e,t){for(var r=0;r<e.length;r++)t(e[r])}(["get","put","post","patch","head","delete"],(function(e){l["delete"===e?"del":e]=function(t,r,o){return(r=n(t,r,o)).method=e.toUpperCase(),c(r)}}))},"./node_modules/xtend/immutable.js":function(e,t){e.exports=function(){for(var e={},t=0;t<arguments.length;t++){var o=arguments[t];for(var s in o)r.call(o,s)&&(e[s]=o[s])}return e};var r=Object.prototype.hasOwnProperty},"./src/udemy/js/asset/article/article-asset.less":function(e,t,r){e.exports={content:"article-asset--content--1dAQ9"}},"./src/udemy/js/asset/article/article-asset.mobx-model.js":function(e,t,r){"use strict";r.d(t,"a",(function(){return c}));var o,s,a,i,n=r("./node_modules/mobx/lib/mobx.module.js"),l=r("./src/udemy/js/asset/asset.mobx-model.js"),c=(i=a=function(e){function t(){var e,r;babelHelpers.classCallCheck(this,t);for(var o=arguments.length,a=new Array(o),i=0;i<o;i++)a[i]=arguments[i];return r=babelHelpers.possibleConstructorReturn(this,(e=babelHelpers.getPrototypeOf(t)).call.apply(e,[this].concat(a))),babelHelpers.initializerDefineProperty(r,"body",s,babelHelpers.assertThisInitialized(r)),r}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"apiDataMap",get:function(){return babelHelpers.objectSpread({},babelHelpers.get(babelHelpers.getPrototypeOf(t.prototype),"apiDataMap",this),{body:{source:"body",map:function(e){var t=document.createElement("div");return t.innerHTML=e,Array.from(t.querySelectorAll("a")).forEach((function(e){e.setAttribute("target","_blank")})),Array.from(t.querySelectorAll("img")).forEach((function(e){e.setAttribute("align","middle")})),t.innerHTML}}})}}]),t}(l.a),a.requestFields=l.a.requestFields.concat(["body"]),o=i,s=babelHelpers.applyDecoratedDescriptor(o.prototype,"body",[n.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),o)},"./src/udemy/js/asset/article/article-asset.react-component.js":function(e,t,r){"use strict";var o=r("./node_modules/mobx-react/index.module.js"),s=r("./node_modules/prop-types/index.js"),a=r.n(s),i=r("./node_modules/react/index.js"),n=r.n(i),l=r("./src/udemy/js/base-components/rich-text-viewer.react-component.js"),c=r("./src/udemy/js/asset/asset.react-component.js"),p=r("./src/udemy/js/asset/article/article-asset.mobx-model.js"),u=(r("./src/udemy/js/asset/article/article-asset.less"),Object(o.c)("store")(Object(o.d)((function(e){var t=e.store;return n.a.createElement("div",{className:"p-space-md"},n.a.createElement(l.a,{className:"article-asset--content--1dAQ9",unsafeHTML:t.asset.body}))}))));u.wrappedComponent.propTypes={store:a.a.object.isRequired},t.a=Object(c.a)("ArticleAsset",u,p.a)},"./src/udemy/js/asset/asset.less":function(e,t,r){e.exports={"unsupported-asset":"asset--unsupported-asset--2qVda",center:"asset--center--2XqAH",right:"asset--right--2mJSo"}},"./src/udemy/js/asset/asset.mobx-model.js":function(e,t,r){"use strict";r.d(t,"a",(function(){return u}));var o,s,a,i,n,l,c,p=r("./node_modules/mobx/lib/mobx.module.js"),u=(c=l=function(e){function t(){var e,r;babelHelpers.classCallCheck(this,t);for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];return r=babelHelpers.possibleConstructorReturn(this,(e=babelHelpers.getPrototypeOf(t)).call.apply(e,[this].concat(l))),babelHelpers.initializerDefineProperty(r,"title",s,babelHelpers.assertThisInitialized(r)),babelHelpers.initializerDefineProperty(r,"status",a,babelHelpers.assertThisInitialized(r)),babelHelpers.initializerDefineProperty(r,"delayedAssetMessage",i,babelHelpers.assertThisInitialized(r)),babelHelpers.initializerDefineProperty(r,"processingErrors",n,babelHelpers.assertThisInitialized(r)),r}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"apiDataMap",get:function(){return{id:"id",type:"asset_type",fileName:"filename",externalUrl:"external_url",timeEstimation:"time_estimation",downloadUrls:"download_urls",title:"title",status:"status",delayedAssetMessage:"delayed_asset_message",processingErrors:"processing_errors",isExternal:"is_external"}}},{key:"downloadUrl",get:function(){var e=this.downloadUrls&&this.downloadUrls[this.type];if(e&&e.length>0)return e[0].file}}]),t}(r("./src/udemy/js/utils/mobx.js").a),l.requestFields=["status","delayed_asset_message","processing_errors"],l.extraParams={},o=c,s=babelHelpers.applyDecoratedDescriptor(o.prototype,"title",[p.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),a=babelHelpers.applyDecoratedDescriptor(o.prototype,"status",[p.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),i=babelHelpers.applyDecoratedDescriptor(o.prototype,"delayedAssetMessage",[p.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),n=babelHelpers.applyDecoratedDescriptor(o.prototype,"processingErrors",[p.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),o)},"./src/udemy/js/asset/asset.react-component.js":function(e,t,r){"use strict";var o,s,a,i=r("./node_modules/mobx-react/index.module.js"),n=r("./node_modules/prop-types/index.js"),l=r.n(n),c=r("./node_modules/react/index.js"),p=r.n(c),u=r("./node_modules/mobx/lib/mobx.module.js"),d=r("./src/udemy/js/utils/ud-api.js"),h=r("./src/udemy/js/asset/asset.mobx-model.js"),m=(o=u.observable.ref,s=function(){function e(t,r){babelHelpers.classCallCheck(this,e),babelHelpers.initializerDefineProperty(this,"asset",a,this),this.assetId=t,r||(r=h.a),this.modelClass=r}return babelHelpers.createClass(e,[{key:"fetchData",value:function(e,t){var r=this;if(!e&&!t){var o=this.modelClass.requestFields;return d.d.get("/assets/".concat(this.assetId,"/"),{params:Object.assign({"fields[asset]":"@min,".concat(o.join(","))},this.modelClass.extraParams)}).then(Object(u.action)((function(e){r.asset=new r.modelClass(e.data)})))}this.asset=e||new this.modelClass(t)}}]),e}(),a=babelHelpers.applyDecoratedDescriptor(s.prototype,"asset",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),babelHelpers.applyDecoratedDescriptor(s.prototype,"fetchData",[u.action],Object.getOwnPropertyDescriptor(s.prototype,"fetchData"),s.prototype),s),b=r("./src/udemy/js/asset/constants.js"),f=(r("./src/udemy/js/asset/asset.less"),Object(i.c)("store")((function(e){var t=e.store,r=t.asset?t.asset.delayedAssetMessage:"";return p.a.createElement("div",{className:"asset--unsupported-asset--2qVda"},p.a.createElement("div",{className:"asset-content--delayed"},p.a.createElement("p",null,r)))}))),y=Object(i.c)("store")((function(e){var t=e.store;return p.a.createElement("div",{className:"asset--unsupported-asset--2qVda"},p.a.createElement("div",{className:"asset-content--failed"},p.a.createElement("p",null,gettext("Your video failed to process for the following reasons:")),p.a.createElement("ul",{className:"bulleted-list"},(t.asset.processingErrors||[]).map((function(e,t){return p.a.createElement("li",{key:t,className:"mt10"},p.a.createElement("span",null,e.message),e.help_link&&p.a.createElement("a",{href:e.help_link,target:"_blank",rel:"noopener noreferrer"},"",gettext("Get Help")))})))))})),g=function(){return p.a.createElement("div",{className:"asset--unsupported-asset--2qVda"},p.a.createElement("div",{className:"asset-content--processing"},p.a.createElement("p",null,gettext("We've uploaded your file, and are processing it to ensure it works smoothly on Udemy. As soon as it's ready, we'll send you an email."))))};function v(e,t,r){var o,s;return Object(i.d)((s=o=function(e){function o(e){var t;return babelHelpers.classCallCheck(this,o),(t=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(o).call(this,e))).store=new m(e.id,r),t}return babelHelpers.inherits(o,e),babelHelpers.createClass(o,[{key:"componentDidMount",value:function(){this.store.fetchData(this.props.asset,this.props.assetData)}},{key:"render",value:function(){if(!this.store.asset)return null;var e;switch(this.store.asset.status){case b.a.SUCCESS:e=p.a.createElement(t,this.props);break;case b.a.UNPROCESSED:e=p.a.createElement(g,null);break;case b.a.FAILED:e=p.a.createElement(y,null);break;case b.a.DELAYED:e=p.a.createElement(f,null)}return e?p.a.createElement(i.b,{store:this.store},e):null}}]),o}(p.a.Component),o.displayName=e,o.propTypes={id:l.a.number.isRequired,asset:l.a.object,assetData:l.a.object},o.defaultProps={asset:null,assetData:null},s))}r.d(t,"a",(function(){return v}))},"./src/udemy/js/asset/constants.js":function(e,t,r){"use strict";r.d(t,"b",(function(){return o})),r.d(t,"a",(function(){return s}));var o=Object.freeze({ARTICLE:"Article",AUDIO:"Audio",EBOOK:"E-Book",EXTERNAL_LINK:"ExternalLink",FILE:"File",IFRAME:"IFrame",IMPORT_CONTENT:"ImportContent",PRESENTATION:"Presentation",SOURCE_CODE:"SourceCode",UPCOMING:"Upcoming",VIDEO:"Video",VIDEO_MASHUP:"VideoMashup"}),s=Object.freeze({SUCCESS:1,UNPROCESSED:0,FAILED:-1,DELAYED:-2})},"./src/udemy/js/asset/helpers.js":function(e,t,r){"use strict";var o,s,a,i,n=r("./src/udemy/js/asset/article/article-asset.mobx-model.js"),l=r("./src/udemy/js/asset/article/article-asset.react-component.js"),c=r("./src/udemy/js/asset/constants.js"),p=r("./node_modules/mobx/lib/mobx.module.js"),u=r("./src/udemy/js/asset/asset.mobx-model.js"),d=(i=a=function(e){function t(){var e,r;babelHelpers.classCallCheck(this,t);for(var o=arguments.length,a=new Array(o),i=0;i<o;i++)a[i]=arguments[i];return r=babelHelpers.possibleConstructorReturn(this,(e=babelHelpers.getPrototypeOf(t)).call.apply(e,[this].concat(a))),babelHelpers.initializerDefineProperty(r,"description",s,babelHelpers.assertThisInitialized(r)),r}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"apiDataMap",get:function(){return babelHelpers.objectSpread({},babelHelpers.get(babelHelpers.getPrototypeOf(t.prototype),"apiDataMap",this),{description:"description"})}}]),t}(u.a),a.requestFields=u.a.requestFields.concat(["description","download_urls"]),o=i,s=babelHelpers.applyDecoratedDescriptor(o.prototype,"description",[p.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),o),h=r("./node_modules/mobx-react/index.module.js"),m=r("./node_modules/prop-types/index.js"),b=r.n(m),f=r("./node_modules/react/index.js"),y=r.n(f),g=r("./src/udemy/js/asset/asset.react-component.js"),v=(r("./src/udemy/js/asset/asset.less"),Object(h.c)("store")(Object(h.d)((function(e){var t={};return e.targetBlank&&(t={target:"_blank"}),y.a.createElement("div",{className:"p-space-md asset--unsupported-asset--2qVda"},y.a.createElement("div",{className:"font-heading-lg"},e.title||e.store.asset.title),y.a.createElement("div",{className:"font-text-lg"},e.subtitle),y.a.createElement("div",{className:"mt-space-lg mb-space-sm"},e.description||e.store.asset.description),y.a.createElement("a",Object.assign({className:"btn btn-primary",href:e.downloadUrl||e.store.asset.downloadUrl},t),e.buttonText))}))));v.wrappedComponent.propTypes={targetBlank:b.a.bool,title:b.a.string,subtitle:b.a.string,description:b.a.string,downloadUrl:b.a.string,buttonText:b.a.string,store:b.a.object.isRequired},v.wrappedComponent.defaultProps={targetBlank:!1,title:"",subtitle:"",description:"",downloadUrl:"",buttonText:gettext("Download File")};var w,k,_,E,j=Object(g.a)("DeprecatedAsset",v,d),D=(E=_=function(e){function t(){var e,r;babelHelpers.classCallCheck(this,t);for(var o=arguments.length,s=new Array(o),a=0;a<o;a++)s[a]=arguments[a];return r=babelHelpers.possibleConstructorReturn(this,(e=babelHelpers.getPrototypeOf(t)).call.apply(e,[this].concat(s))),babelHelpers.initializerDefineProperty(r,"objectUrl",k,babelHelpers.assertThisInitialized(r)),r}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"apiDataMap",get:function(){return babelHelpers.objectSpread({},babelHelpers.get(babelHelpers.getPrototypeOf(t.prototype),"apiDataMap",this),{objectUrl:{source:["asset_type","url_set"],map:function(e,t){if(t[e]&&t[e].length)return t[e][0].file}}})}}]),t}(d),_.requestFields=d.requestFields.concat(["url_set"]),w=E,k=babelHelpers.applyDecoratedDescriptor(w.prototype,"objectUrl",[p.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),w),S=Object(h.c)("store")(Object(h.d)((function(e){var t=e.store.asset.objectUrl,r=gettext("Download PDF"),o=gettext("It appears you don't have a pdf plugin for this browser. You can download the file instead.");return y.a.createElement("object",{data:t,type:"application/pdf",width:"100%",height:"100%"},y.a.createElement("param",{name:"src",value:t}),y.a.createElement(v,Object.assign({},e,{description:o,buttonText:r})))})));S.wrappedComponent.propTypes={store:b.a.object.isRequired};var C,O,P,T,x=Object(g.a)("EBookAsset",S,D),R=Object(g.a)("FileAsset",(function(e){var t=gettext("Download and review the file provided by your instructor for this lecture.");return y.a.createElement(v,Object.assign({},e,{description:t}))}),d),H=(T=P=function(e){function t(){var e,r;babelHelpers.classCallCheck(this,t);for(var o=arguments.length,s=new Array(o),a=0;a<o;a++)s[a]=arguments[a];return r=babelHelpers.possibleConstructorReturn(this,(e=babelHelpers.getPrototypeOf(t)).call.apply(e,[this].concat(s))),babelHelpers.initializerDefineProperty(r,"sourceUrl",O,babelHelpers.assertThisInitialized(r)),r}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"apiDataMap",get:function(){return babelHelpers.objectSpread({},babelHelpers.get(babelHelpers.getPrototypeOf(t.prototype),"apiDataMap",this),{sourceUrl:"source_url"})}}]),t}(u.a),P.requestFields=u.a.requestFields.concat(["source_url"]),C=T,O=babelHelpers.applyDecoratedDescriptor(C.prototype,"sourceUrl",[p.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),C),A=Object(h.c)("store")(Object(h.d)((function(e){return y.a.createElement("iframe",{title:gettext("Iframe asset"),src:e.store.asset.sourceUrl,width:"100%",height:"100%",frameBorder:"0"})}))),I=Object(g.a)("IFrameAsset",A,H),L=function(e){function t(){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).apply(this,arguments))}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"apiDataMap",get:function(){return babelHelpers.objectSpread({},babelHelpers.get(babelHelpers.getPrototypeOf(t.prototype),"apiDataMap",this),{externalUrl:"external_url"})}},{key:"downloadUrl",get:function(){return this.externalUrl}}]),t}(d);L.requestFields=d.requestFields.concat(["external_url"]);var M=Object(h.c)("store")(Object(h.d)((function(e){var t=gettext("Visit and review the external content provided by your instructor for this lecture."),r=gettext("Visit Content");return y.a.createElement(v,Object.assign({},e,{description:t,buttonText:r,targetBlank:!0}))})));M.wrappedComponent.propTypes={store:b.a.object.isRequired};var N,F,U=Object(g.a)("ImportContentAsset",M,L),z=r("./src/udemy/js/asset/presentation/presentation-asset.mobx-model.js"),B=r("./src/udemy/js/asset/presentation/presentation-asset.react-component.js"),q=r("./src/udemy/js/asset/video/mashup/video-mashup-asset.mobx-model.js"),G=r("./src/udemy/js/asset/video/mashup/video-mashup-asset.react-component.js"),V=r("./src/udemy/js/asset/video/video-asset.mobx-model.js"),K=r("./src/udemy/js/asset/video/video-asset.react-component.js");r.d(t,"a",(function(){return W})),r.d(t,"b",(function(){return Y}));var W=(N={},babelHelpers.defineProperty(N,c.b.ARTICLE,l.a),babelHelpers.defineProperty(N,c.b.AUDIO,K.default),babelHelpers.defineProperty(N,c.b.EBOOK,x),babelHelpers.defineProperty(N,c.b.EXTERNAL_LINK,j),babelHelpers.defineProperty(N,c.b.FILE,R),babelHelpers.defineProperty(N,c.b.IFRAME,I),babelHelpers.defineProperty(N,c.b.IMPORT_CONTENT,U),babelHelpers.defineProperty(N,c.b.PRESENTATION,B.a),babelHelpers.defineProperty(N,c.b.VIDEO,K.default),babelHelpers.defineProperty(N,c.b.VIDEO_MASHUP,G.a),N),Y=(F={},babelHelpers.defineProperty(F,c.b.ARTICLE,n.a),babelHelpers.defineProperty(F,c.b.AUDIO,V.a),babelHelpers.defineProperty(F,c.b.EBOOK,D),babelHelpers.defineProperty(F,c.b.EXTERNAL_LINK,d),babelHelpers.defineProperty(F,c.b.FILE,d),babelHelpers.defineProperty(F,c.b.IFRAME,H),babelHelpers.defineProperty(F,c.b.IMPORT_CONTENT,L),babelHelpers.defineProperty(F,c.b.PRESENTATION,z.a),babelHelpers.defineProperty(F,c.b.VIDEO,V.a),babelHelpers.defineProperty(F,c.b.VIDEO_MASHUP,q.a),F)},"./src/udemy/js/asset/presentation/presentation-asset.less":function(e,t,r){e.exports={container:"presentation-asset--container--1MxeC",inner:"presentation-asset--inner--Rjy1W","progress-bar":"presentation-asset--progress-bar--3cyrN","inner-bar":"presentation-asset--inner-bar--3Khvf","inner-bar-full":"presentation-asset--inner-bar-full--3_xMv","inner-bar-progress":"presentation-asset--inner-bar-progress--1KcGo","progress-unit":"presentation-asset--progress-unit--2vI0q",controls:"presentation-asset--controls--1rkMW","controls-left":"presentation-asset--controls-left--2Tncc","controls-right":"presentation-asset--controls-right--SMalg","slide-counter-display":"presentation-asset--slide-counter-display--1wH7f","btn-slide-control":"presentation-asset--btn-slide-control--2VvNT",slide:"presentation-asset--slide--X97Pn","slide--center":"presentation-asset--slide--center--3bb_A","slide--right":"presentation-asset--slide--right---_KX4","slide--left":"presentation-asset--slide--left--1C5oe"}},"./src/udemy/js/asset/presentation/presentation-asset.mobx-model.js":function(e,t,r){"use strict";r.d(t,"a",(function(){return c}));var o,s,a,i,n=r("./node_modules/mobx/lib/mobx.module.js"),l=r("./src/udemy/js/asset/asset.mobx-model.js"),c=(i=a=function(e){function t(){var e,r;babelHelpers.classCallCheck(this,t);for(var o=arguments.length,a=new Array(o),i=0;i<o;i++)a[i]=arguments[i];return r=babelHelpers.possibleConstructorReturn(this,(e=babelHelpers.getPrototypeOf(t)).call.apply(e,[this].concat(a))),babelHelpers.initializerDefineProperty(r,"slideUrls",s,babelHelpers.assertThisInitialized(r)),r}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"apiDataMap",get:function(){return babelHelpers.objectSpread({},babelHelpers.get(babelHelpers.getPrototypeOf(t.prototype),"apiDataMap",this),{slideUrls:"slide_urls"})}}]),t}(l.a),a.requestFields=l.a.requestFields.concat(["slide_urls"]),o=i,s=babelHelpers.applyDecoratedDescriptor(o.prototype,"slideUrls",[n.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),o)},"./src/udemy/js/asset/presentation/presentation-asset.react-component.js":function(e,t,r){"use strict";var o,s,a,i,n,l,c,p,u=r("./node_modules/babel-plugin-react-css-modules/dist/browser/getClassName.js"),d=r.n(u),h=r("./node_modules/autobind-decorator/lib/esm/index.js"),m=r("./node_modules/classnames/index.js"),b=r.n(m),f=r("./node_modules/lodash-es/noop.js"),y=r("./node_modules/mobx-react/index.module.js"),g=r("./node_modules/prop-types/index.js"),v=r.n(g),w=r("./node_modules/react/index.js"),k=r.n(w),_=r("./node_modules/react-hotkeys/lib/index.js"),E=r("./src/udemy/js/base-components/button.react-component.js"),j=r("./src/udemy/js/base-components/icon.react-component.js"),D=r("./src/udemy/js/base-components/image.react-component.js"),S=r("./src/udemy/js/asset/asset.react-component.js"),C=r("./src/udemy/js/asset/presentation/presentation-asset.mobx-model.js"),O=r("./node_modules/mobx/lib/mobx.module.js"),P=r("./src/udemy/js/utils/fullscreen.js"),T=r("./src/udemy/js/utils/ud-moment.js"),x=(o=function(){function e(t,r,o){babelHelpers.classCallCheck(this,e),babelHelpers.initializerDefineProperty(this,"currentSlideNum",s,this),babelHelpers.initializerDefineProperty(this,"isTransitioning",a,this),babelHelpers.initializerDefineProperty(this,"isFullscreen",i,this),this.slideUrls=t,this.updateProgressFn=r,this.onCompleteFn=o}return babelHelpers.createClass(e,[{key:"toggleFullscreen",value:function(e){this.isFullscreen&&!1!==P.a.exitFullscreen()?this.isFullscreen=!1:this.isFullscreen||!1===P.a.requestFullscreen(e)||(this.isFullscreen=!0)}},{key:"goToNext",value:function(){this.isNextDisabled||this.skipTo(this.currentSlideNum+1)}},{key:"goToPrev",value:function(){this.isPrevDisabled||this.skipTo(this.currentSlideNum-1)}},{key:"skipTo",value:function(e){e===this.currentSlideNum||this.isTransitioning||(this.isTransitioning=!0,this.currentSlideNum=e,this.updateProgress(),this.isTransitioning=!1)}},{key:"updateProgress",value:function(){var e=[{position:this.currentSlideNum,total:this.numSlides,context:{type:"Presentation"},time:Object(T.b)().format("YYYY-MM-DDTHH:mm:ssZ+HH:mm")}];this.updateProgressFn(e),this.currentSlideNum===this.numSlides&&this.onCompleteFn()}},{key:"numSlides",get:function(){return this.slideUrls.length}},{key:"progressUnitWidth",get:function(){return 100/this.numSlides}},{key:"progressUnitWidths",get:function(){var e=Array(this.numSlides-1).fill("".concat(this.progressUnitWidth,"%"));return e.push("".concat(100-(this.numSlides-1)*this.progressUnitWidth,"%")),e}},{key:"currentProgressWidth",get:function(){var e=100;return this.currentSlideNum<this.numSlides&&(e=this.progressUnitWidth*this.currentSlideNum),"".concat(e,"%")}},{key:"isPrevDisabled",get:function(){return 1===this.currentSlideNum||this.isTransitioning}},{key:"isNextDisabled",get:function(){return this.currentSlideNum>=this.numSlides||this.isTransitioning}}]),e}(),s=babelHelpers.applyDecoratedDescriptor(o.prototype,"currentSlideNum",[O.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),a=babelHelpers.applyDecoratedDescriptor(o.prototype,"isTransitioning",[O.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),i=babelHelpers.applyDecoratedDescriptor(o.prototype,"isFullscreen",[O.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),babelHelpers.applyDecoratedDescriptor(o.prototype,"toggleFullscreen",[h.a,O.action],Object.getOwnPropertyDescriptor(o.prototype,"toggleFullscreen"),o.prototype),babelHelpers.applyDecoratedDescriptor(o.prototype,"goToNext",[h.a],Object.getOwnPropertyDescriptor(o.prototype,"goToNext"),o.prototype),babelHelpers.applyDecoratedDescriptor(o.prototype,"goToPrev",[h.a],Object.getOwnPropertyDescriptor(o.prototype,"goToPrev"),o.prototype),babelHelpers.applyDecoratedDescriptor(o.prototype,"skipTo",[O.action],Object.getOwnPropertyDescriptor(o.prototype,"skipTo"),o.prototype),babelHelpers.applyDecoratedDescriptor(o.prototype,"currentProgressWidth",[O.computed],Object.getOwnPropertyDescriptor(o.prototype,"currentProgressWidth"),o.prototype),babelHelpers.applyDecoratedDescriptor(o.prototype,"isPrevDisabled",[O.computed],Object.getOwnPropertyDescriptor(o.prototype,"isPrevDisabled"),o.prototype),babelHelpers.applyDecoratedDescriptor(o.prototype,"isNextDisabled",[O.computed],Object.getOwnPropertyDescriptor(o.prototype,"isNextDisabled"),o.prototype),o),R=(r("./src/udemy/js/asset/presentation/presentation-asset.less"),{"./presentation-asset.less":{container:"presentation-asset--container--1MxeC",inner:"presentation-asset--inner--Rjy1W","progress-bar":"presentation-asset--progress-bar--3cyrN","inner-bar":"presentation-asset--inner-bar--3Khvf",transition:"presentation-asset--transition--QQ9Ae","inner-bar-full":"presentation-asset--inner-bar-full--3_xMv","bg-rain-light":"presentation-asset--bg-rain-light--YY1r-","inner-bar-progress":"presentation-asset--inner-bar-progress--1KcGo","bg-primary":"presentation-asset--bg-primary--2QKVg","progress-unit":"presentation-asset--progress-unit--2vI0q","box-shadow":"presentation-asset--box-shadow--2JKot",controls:"presentation-asset--controls--1rkMW","fx-c":"presentation-asset--fx-c--J0k8G","controls-left":"presentation-asset--controls-left--2Tncc","fx-lc":"presentation-asset--fx-lc--2qmOu","controls-right":"presentation-asset--controls-right--SMalg","fx-rc":"presentation-asset--fx-rc--ZJUmU",fx:"presentation-asset--fx--2w6UQ","slide-counter-display":"presentation-asset--slide-counter-display--1wH7f","btn-slide-control":"presentation-asset--btn-slide-control--2VvNT",slide:"presentation-asset--slide--X97Pn","slide--center":"presentation-asset--slide--center--3bb_A","slide--right":"presentation-asset--slide--right---_KX4","slide--left":"presentation-asset--slide--left--1C5oe"}}),H=Object(y.c)("store")(n=Object(y.d)((p=c=function(e){function t(e){var r;return babelHelpers.classCallCheck(this,t),(r=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this,e))).store=new x(e.store.asset.slideUrls,e.updateProgress,e.onComplete),r}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"componentDidMount",value:function(){this.store.updateProgress(),this.ref.focus()}},{key:"onSkipToProgressUnit",value:function(e){var t=parseInt(e.target.dataset.index,10);this.store.skipTo(t+1)}},{key:"toggleFullscreen",value:function(){this.store.toggleFullscreen(this.ref)}},{key:"renderFooter",value:function(){return this.props.renderFooter?this.props.renderFooter(this.navigationControls):k.a.createElement("div",{"data-purpose":"presentation-footer"},k.a.createElement("div",{className:"presentation-asset--controls--1rkMW"},k.a.createElement("div",{className:"presentation-asset--controls-left--2Tncc"},this.navigationControls),k.a.createElement("div",{className:"presentation-asset--controls-right--SMalg"},this.rightControls)))}},{key:"render",value:function(){var e=this,t={toggleFullscreen:this.toggleFullscreen,goToPrev:this.store.goToPrev,goToNext:this.store.goToNext};return k.a.createElement(_.HotKeys,{keyMap:{toggleFullscreen:{sequence:"f",action:"keyup"},goToPrev:{sequence:"left",action:"keyup"},goToNext:{sequence:"right",action:"keyup"}},handlers:t,className:"presentation-asset--container--1MxeC"},k.a.createElement("div",{className:"presentation-asset--inner--Rjy1W",tabIndex:"0",ref:function(t){e.ref=t}},k.a.createElement("div",{className:"pos-r w100p h100p"},this.slideImages),k.a.createElement("div",{className:"presentation-asset--progress-bar--3cyrN"},k.a.createElement("div",{className:"presentation-asset--inner-bar--3Khvf presentation-asset--inner-bar-full--3_xMv"}),k.a.createElement("div",{className:"presentation-asset--inner-bar--3Khvf presentation-asset--inner-bar-progress--1KcGo",style:{width:this.store.currentProgressWidth}}),k.a.createElement("div",{className:"presentation-asset--inner-bar--3Khvf"},this.slideLinks)),this.renderFooter()))}},{key:"slideImages",get:function(){var e=this;return this.props.store.asset.slideUrls.map((function(t,r){var o=b()("slide","slide--center",{"slide--left":r+1<e.store.currentSlideNum},{"slide--right":r+1>e.store.currentSlideNum});return k.a.createElement("div",{key:r,"data-purpose":"slide-image-container",className:d()(o,R)},k.a.createElement(D.a,{src:t,alt:gettext("Slide"),width:720,height:540}))}))}},{key:"slideLinks",get:function(){var e=this;return this.store.progressUnitWidths.map((function(t,r){return k.a.createElement("div",{key:r,role:"button",tabIndex:"0",className:"presentation-asset--progress-unit--2vI0q",style:{width:t},"data-index":r,onClick:e.onSkipToProgressUnit,onKeyPress:e.onSkipToProgressUnit,"data-purpose":"slide-link"})}))}},{key:"currentSlideText",get:function(){var e=gettext("%(currentSlideNum)s of %(totalSlides)s Slides");return interpolate(e,{currentSlideNum:this.store.currentSlideNum,totalSlides:this.store.numSlides},!0)}},{key:"navigationControls",get:function(){return k.a.createElement(k.a.Fragment,null,k.a.createElement(E.default,{bsSize:"small",bsStyle:"primary",className:"presentation-asset--btn-slide-control--2VvNT",onClick:this.store.goToPrev,disabled:this.store.isPrevDisabled,"aria-label":gettext("Previous"),"data-purpose":"previous-slide"},k.a.createElement(j.a,{glyph:"previous"})),k.a.createElement(E.default,{bsSize:"small",bsStyle:"primary",className:"presentation-asset--btn-slide-control--2VvNT",onClick:this.store.goToNext,disabled:this.store.isNextDisabled,"aria-label":gettext("Next"),"data-purpose":"next-slide"},k.a.createElement(j.a,{glyph:"next"})),k.a.createElement("span",{className:"presentation-asset--slide-counter-display--1wH7f","data-purpose":"slide-text"},this.currentSlideText))}},{key:"rightControls",get:function(){return k.a.createElement(E.default,{bsSize:"small",onClick:this.toggleFullscreen,"data-purpose":"fullscreen-toggle-button","aria-label":gettext("Fullscreen")},k.a.createElement(j.a,{glyph:this.store.isFullscreen?"collapse":"expand"}))}}]),t}(k.a.Component),c.propTypes={store:v.a.object.isRequired,updateProgress:v.a.func,onComplete:v.a.func,renderFooter:v.a.func},c.defaultProps={updateProgress:f.a,onComplete:f.a,renderFooter:void 0},l=p,babelHelpers.applyDecoratedDescriptor(l.prototype,"onSkipToProgressUnit",[h.a],Object.getOwnPropertyDescriptor(l.prototype,"onSkipToProgressUnit"),l.prototype),babelHelpers.applyDecoratedDescriptor(l.prototype,"toggleFullscreen",[h.a],Object.getOwnPropertyDescriptor(l.prototype,"toggleFullscreen"),l.prototype),n=l))||n)||n;t.a=Object(S.a)("PresentationAsset",H,C.a)},"./src/udemy/js/asset/video/mashup/video-mashup-asset.mobx-model.js":function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));var o=r("./src/udemy/js/utils/ud-utils.js"),s=r("./src/udemy/js/asset/video/video-asset.mobx-model.js"),a=function(e){function t(){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).apply(this,arguments))}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"apiDataMap",get:function(){return babelHelpers.objectSpread({},babelHelpers.get(babelHelpers.getPrototypeOf(t.prototype),"apiDataMap",this),{slides:"slides",length:"length"})}},{key:"videoPlayerProps",get:function(){return o.a.Object.deepMergeWithArrayMerge(babelHelpers.get(babelHelpers.getPrototypeOf(t.prototype),"videoPlayerProps",this),{videojsSetupData:{plugins:{mashup:{slides:this.slides,length:this.length}}}})}}]),t}(s.a);a.requestFields=s.a.requestFields.concat(["slides","length"]).filter((function(e){return"thumbnail_sprite"!==e}))},"./src/udemy/js/asset/video/mashup/video-mashup-asset.react-component.js":function(e,t,r){"use strict";var o=r("./src/udemy/js/asset/asset.react-component.js"),s=r("./src/udemy/js/asset/video/video-asset.react-component.js"),a=r("./src/udemy/js/asset/video/mashup/video-mashup-asset.mobx-model.js");t.a=Object(o.a)("VideoMashupAsset",s.VideoAssetBase,a.a)},"./src/udemy/js/asset/video/video-asset.mobx-model.js":function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));var o=r("./src/udemy/js/utils/a11y.js"),s=r("./src/udemy/js/asset/asset.mobx-model.js"),a=function(e){function t(e){var r;return babelHelpers.classCallCheck(this,t),(r=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this,e))).playerId=Object(o.a)("playerId__".concat(r.id)),r}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"apiDataMap",get:function(){return babelHelpers.objectSpread({},babelHelpers.get(babelHelpers.getPrototypeOf(t.prototype),"apiDataMap",this),{thumbnailUrl:"thumbnail_url",thumbnailSprite:"thumbnail_sprite",streamUrls:"stream_urls",captions:{source:"captions",defaultValue:[]},created:"created"})}}]),babelHelpers.createClass(t,[{key:"videoPlayerProps",get:function(){return{playerId:this.playerId,assetId:this.id,streamUrls:this.streamUrls,duration:this.timeEstimation,captions:this.captions.slice(),thumbnailSprite:this.thumbnailSprite}}}]),t}(s.a);a.requestFields=s.a.requestFields.concat(["time_estimation","stream_urls","thumbnail_url","captions","thumbnail_sprite","created"]),a.extraParams=Object.assign({},s.a.extraParams,{"fields[caption]":"@default,is_translation"})},"./src/udemy/js/asset/video/video-asset.react-component.js":function(e,t,r){"use strict";r.r(t);var o=r("./node_modules/mobx/lib/mobx.module.js"),s=r("./node_modules/mobx-react/index.module.js"),a=r("./node_modules/prop-types/index.js"),i=r.n(a),n=r("./node_modules/react/index.js"),l=r.n(n),c=r("./src/udemy/js/base-components/udlite/error-boundary/error-boundary.react-component.js"),p=r("./src/udemy/js/utils/ud-utils.js"),u=r("./src/udemy/js/video-player/video-player.react-component.js"),d=r("./src/udemy/js/asset/asset.react-component.js"),h=r("./node_modules/react-helmet/lib/Helmet.js"),m=r.n(h),b=r("./src/udemy/js/utils/get-config-data.js"),f=Object(b.a)(),y=function(e){function t(e){var r;return babelHelpers.classCallCheck(this,t),(r=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this,e))).schemaObject={"@type":"VideoObject","@context":"http://schema.org",publisher:{"@type":"Organization",name:"Udemy",sameAs:f.url.to_app,logo:{"@type":"ImageObject",url:"".concat(f.url.to_app,"/staticx/udemy/images/v6/apple-touch-icon-60x60.png"),height:60,width:60}},provider:{"@type":"Organization",name:e.course.visible_instructors[0].display_name,sameAs:"".concat(f.url.to_app.slice(0,-1)).concat(e.course.visible_instructors[0].url)},name:e.title,description:e.course.headline,isAccessibleForFree:!0,image:e.asset.thumbnailUrl,inLanguage:e.course.locale.locale.slice(0,2),thumbnailUrl:e.asset.thumbnailUrl,uploadDate:e.asset.created},r}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"render",value:function(){return l.a.createElement(m.a,null,l.a.createElement("script",{type:"application/ld+json"},JSON.stringify(this.schemaObject)))}}]),t}(n.Component);y.propTypes={course:i.a.shape({headline:i.a.string.isRequired,visible_instructors:i.a.arrayOf(i.a.shape({display_name:i.a.string.isRequired,url:i.a.string.isRequired}).isRequired).isRequired,locale:i.a.shape({locale:i.a.string.isRequired})}).isRequired,title:i.a.string.isRequired,asset:i.a.shape({thumbnailUrl:i.a.string.isRequired,created:i.a.string.isRequired}).isRequired};var g,v,w,k=r("./src/udemy/js/asset/video/video-asset.mobx-model.js");r.d(t,"VideoAssetBase",(function(){return _}));var _=Object(s.c)("store")(g=Object(s.d)((w=v=function(e){function t(){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).apply(this,arguments))}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"render",value:function(){var e=p.a.Object.deepMergeWithArrayMerge(this.props.playerOptions,this.props.store.asset.videoPlayerProps);return e=Object(o.toJS)(e),l.a.createElement(l.a.Fragment,null,l.a.createElement(c.a,null,this.props.addGoogleVideoSchema&&l.a.createElement(y,{title:this.props.title,course:this.props.course,asset:this.props.store.asset})),l.a.createElement(u.a,e,this.props.children))}}]),t}(l.a.Component),v.propTypes={store:i.a.object.isRequired,id:i.a.number.isRequired,playerOptions:i.a.object,addGoogleVideoSchema:i.a.bool,course:i.a.object,title:i.a.string},v.defaultProps={playerOptions:{},addGoogleVideoSchema:!1,course:{},title:"",asset:{}},g=w))||g)||g;t.default=Object(d.a)("VideoAsset",_,k.a)},"./src/udemy/js/base-components/ajax-modal/open-ajax-modal.react-component.js":function(e,t,r){"use strict";r.d(t,"a",(function(){return y}));var o,s,a,i,n,l=r("./node_modules/autobind-decorator/lib/esm/index.js"),c=r("./node_modules/lodash-es/noop.js"),p=r("./node_modules/mobx/lib/mobx.module.js"),u=r("./node_modules/mobx-react/index.module.js"),d=r("./node_modules/prop-types/index.js"),h=r.n(d),m=r("./node_modules/react/index.js"),b=r.n(m),f=r("./src/udemy/js/base-components/ajax-modal/ajax-modal.react-component.js"),y=Object(u.d)((n=i=function(e){function t(){var e,r;babelHelpers.classCallCheck(this,t);for(var o=arguments.length,s=new Array(o),i=0;i<o;i++)s[i]=arguments[i];return r=babelHelpers.possibleConstructorReturn(this,(e=babelHelpers.getPrototypeOf(t)).call.apply(e,[this].concat(s))),babelHelpers.initializerDefineProperty(r,"isOpen",a,babelHelpers.assertThisInitialized(r)),r}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"onClick",value:function(e){var t=this.props,r=t.children,o=t.onClick;r.props.onClick&&r.props.onClick(e),o(e),this.isOpen=!0}},{key:"onHide",value:function(e){this.props.onHide(e),this.isOpen=!1}},{key:"render",value:function(){var e=b.a.cloneElement(b.a.Children.only(this.props.children),{onClick:this.onClick});return b.a.createElement(b.a.Fragment,null,e,b.a.createElement(f.a,Object.assign({},this.modalProps,{show:this.isVisible,url:this.props.url,onClick:this.props.onModalClick,onHide:this.onHide})))}},{key:"modalProps",get:function(){var e=this.props;e.children,e.onClick,e.onHide,e.onModalClick,e.url;return babelHelpers.objectWithoutProperties(e,["children","onClick","onHide","onModalClick","url"])}},{key:"isVisible",get:function(){return void 0!==this.props.show?this.props.show:this.isOpen}}]),t}(m.Component),i.propTypes={children:h.a.node.isRequired,onClick:h.a.func,onHide:h.a.func,onModalClick:h.a.func,url:h.a.string.isRequired,show:h.a.bool},i.defaultProps={onClick:c.a,onHide:c.a,onModalClick:void 0,show:void 0},s=n,a=babelHelpers.applyDecoratedDescriptor(s.prototype,"isOpen",[p.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),babelHelpers.applyDecoratedDescriptor(s.prototype,"onClick",[l.a,p.action],Object.getOwnPropertyDescriptor(s.prototype,"onClick"),s.prototype),babelHelpers.applyDecoratedDescriptor(s.prototype,"onHide",[l.a,p.action],Object.getOwnPropertyDescriptor(s.prototype,"onHide"),s.prototype),o=s))||o},"./src/udemy/js/base-components/confirm-modal.react-component.js":function(e,t,r){"use strict";var o=r("./node_modules/prop-types/index.js"),s=r.n(o),a=r("./node_modules/react/index.js"),i=r.n(a),n=r("./src/udemy/js/base-components/button.react-component.js"),l=r("./src/udemy/js/base-components/modal.react-component.js");r.d(t,"a",(function(){return c}));var c=function(e){function t(){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).apply(this,arguments))}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"render",value:function(){return i.a.createElement(l.a,Object.assign({show:this.props.show,onHide:this.props.onCancel},this.modalProps),i.a.createElement(l.a.Header,{closeButton:this.props.showCloseButton},i.a.createElement(l.a.Title,{id:"confirm-title"},this.props.title||gettext("Please Confirm"))),i.a.createElement(l.a.Body,null,this.props.body),i.a.createElement(l.a.Footer,null,i.a.createElement(n.default,{"data-purpose":"cancel-confirm-modal",bsStyle:this.props.cancelBsStyle,onClick:this.props.onCancel,type:"reset"},this.props.cancelText||gettext("Cancel")),i.a.createElement(n.default,{"data-purpose":"submit-confirm-modal",bsStyle:this.props.confirmBsStyle,onClick:this.props.onConfirm,type:"submit"},this.props.confirmText||gettext("OK"))))}},{key:"modalProps",get:function(){return e=this.props,r=t.propTypes,o=Object.keys(e).filter((function(e){return!(e in r)})),s={},o.forEach((function(t){s[t]=e[t]})),s;var e,r,o,s}}]),t}(a.Component);c.propTypes={body:s.a.node.isRequired,cancelText:s.a.string,cancelBsStyle:s.a.string,confirmText:s.a.string,confirmBsStyle:s.a.string,onCancel:s.a.func.isRequired,onConfirm:s.a.func.isRequired,show:s.a.bool.isRequired,showCloseButton:s.a.bool,title:s.a.node},c.defaultProps={cancelText:void 0,confirmText:void 0,cancelBsStyle:"quaternary",confirmBsStyle:"secondary",showCloseButton:!0,title:void 0}},"./src/udemy/js/base-components/input-range.less":function(e,t,r){e.exports={"step-container":"input-range--step-container--121Cf","step-line":"input-range--step-line--PP08r","step-title":"input-range--step-title--GW0Oi","input-range":"input-range--input-range--19Lja"}},"./src/udemy/js/base-components/input-range.react-component.js":function(e,t,r){"use strict";r.d(t,"a",(function(){return h}));var o,s,a,i=r("./node_modules/autobind-decorator/lib/esm/index.js"),n=r("./node_modules/lodash-es/noop.js"),l=r("./node_modules/lodash-es/times.js"),c=r("./node_modules/prop-types/index.js"),p=r.n(c),u=r("./node_modules/react/index.js"),d=r.n(u),h=(r("./src/udemy/js/base-components/input-range.less"),a=s=function(e){function t(e){var r;if(babelHelpers.classCallCheck(this,t),(r=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this,e))).isTouching=!1,0!==r.props.stepTitles.length&&r.props.stepTitles.length!==r.numberOfSteps+1)throw new Error("Step titles length does not match the number of steps");return r}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"onChange",value:function(e){this.props.onInput(e),!this.isTouching&&this.props.onChange(e)}},{key:"onTouchEnd",value:function(e){this.isTouching=!1,this.onChange(e)}},{key:"onTouchStart",value:function(){this.isTouching=!0}},{key:"renderStepTitle",value:function(e){return this.props.stepTitles.length?d.a.createElement("span",{"data-purpose":"step-title",className:"input-range--step-title--GW0Oi",title:this.props.stepTitles[e]},this.props.stepTitles[e]):null}},{key:"render",value:function(){var e=this,t=this.props,r=t.value,o=(t.onInput,t.stepTitles,babelHelpers.objectWithoutProperties(t,["value","onInput","stepTitles"])),s=babelHelpers.objectSpread({},o,{onChange:this.onChange,onTouchEnd:this.onTouchEnd,onTouchStart:this.onTouchStart,defaultValue:null!==r?r:this.props.min+(this.props.max-this.props.min)/2});return d.a.createElement("div",null,d.a.createElement("input",Object.assign({type:"range"},s,{className:"input-range--input-range--19Lja","data-purpose":"input-range"})),d.a.createElement("div",{className:"input-range--step-container--121Cf"},Object(l.a)(this.numberOfSteps+1,(function(t){return d.a.createElement("div",{key:t,className:"input-range--step-line--PP08r","data-purpose":"step-line"},e.renderStepTitle(t))}))))}},{key:"numberOfSteps",get:function(){return(this.props.max-this.props.min)/this.props.step}}]),t}(u.Component),s.propTypes={min:p.a.number.isRequired,max:p.a.number.isRequired,step:p.a.number.isRequired,stepTitles:p.a.array,value:function(e,t){return null!==e[t]&&(e[t]<e.min||e[t]>e.max)?new Error("Provided value is not in range"):null},onChange:p.a.func,onInput:p.a.func},s.defaultProps={value:null,onChange:n.a,onInput:n.a,stepTitles:[]},o=a,babelHelpers.applyDecoratedDescriptor(o.prototype,"onChange",[i.a],Object.getOwnPropertyDescriptor(o.prototype,"onChange"),o.prototype),babelHelpers.applyDecoratedDescriptor(o.prototype,"onTouchEnd",[i.a],Object.getOwnPropertyDescriptor(o.prototype,"onTouchEnd"),o.prototype),babelHelpers.applyDecoratedDescriptor(o.prototype,"onTouchStart",[i.a],Object.getOwnPropertyDescriptor(o.prototype,"onTouchStart"),o.prototype),o)},"./src/udemy/js/base-components/merchandising-course-card/common/mark-course-card-as-seen.js":function(e,t,r){"use strict";var o=r("./node_modules/mobx/lib/mobx.module.js"),s=r("./src/udemy/js/ng/services/funnel-tracking/funnel-tracking.js"),a=r("./src/udemy/js/utils/get-config-data.js"),i=Object(a.a)();t.a=function(e,t){i.brand.has_organization?s.a.markAsSeen(e,t):Object(o.when)((function(){return void 0!==e.price}),(function(){s.a.markAsSeen(e,t)}))}},"./src/udemy/js/base-components/merchandising-course-card/index.js":function(e,t,r){"use strict";var o=r("./src/udemy/js/base-components/merchandising-course-card/base/merchandising-course-card.react-component.js"),s=r("./src/udemy/js/base-components/merchandising-course-card/list-view/list-view-course-card.react-component.js"),a=r("./src/udemy/js/base-components/merchandising-course-card/list-view/list-view-course-card.mobx-model.js"),i=r("./src/udemy/js/base-components/merchandising-course-card/common/merchandising-course.mobx-model.js"),n=(r("./src/udemy/js/base-components/merchandising-course-card/common/quick-view-box.react-component.js"),r("./src/udemy/js/base-components/merchandising-course-card/common/wishlist-button.react-component.js")),l=r("./node_modules/prop-types/index.js"),c=r.n(l),p=r("./node_modules/react/index.js"),u=r.n(p),d=r("./src/udemy/js/base-components/icon.react-component.js"),h=r("./src/udemy/js/base-components/star-rating.react-component.js"),m=(r("./src/udemy/js/base-components/merchandising-course-card/common/star-rating.less"),function(e){var t=e.course,r=Object(h.d)(t.rating);return u.a.createElement("span",{"data-purpose":"details-rating","aria-label":Object(h.c)(r,t.num_reviews),className:"star-rating--rating-fraction--3oiVb"},u.a.createElement(d.a,{glyph:"star",size:"small",className:"star-rating--star-icon--34S38"}),u.a.createElement("span",{className:"star-rating--rating-score--3P-ZS","data-purpose":"rating-score"},r))});m.propTypes={course:c.a.instanceOf(i.a).isRequired};var b=m;r.d(t,"c",(function(){return o.a})),r.d(t,"a",(function(){return s.a})),r.d(t,"b",(function(){return a.a})),r.d(t,"d",(function(){return i.a})),r.d(t,"f",(function(){return n.a})),r.d(t,"e",(function(){return b}))},"./src/udemy/js/base-components/merchandising-course-card/list-view/course-objectives/course-objectives-quick-view.less":function(e,t,r){e.exports={title:"course-objectives-quick-view--title--1jMBK"}},"./src/udemy/js/base-components/merchandising-course-card/list-view/list-view-course-card.less":function(e,t,r){e.exports={"course-card-wrapper":"list-view-course-card--course-card-wrapper--TJ6ET",container:"list-view-course-card--container--2fJ9s","bottom-border":"list-view-course-card--bottom-border--3bYxz",content:"list-view-course-card--content--1TGG4","headline-and-instructor-container":"list-view-course-card--headline-and-instructor-container--1z6wI","image-container":"list-view-course-card--image-container--16j0R","course-image":"list-view-course-card--course-image--1XvxT","instructor-container":"list-view-course-card--instructor-container--1ZPqI",instructor:"list-view-course-card--instructor--2lbmP","meta-with-badge-container":"list-view-course-card--meta-with-badge-container--2AmUC","price-rating":"list-view-course-card--price-rating--3vt-J","price-container":"list-view-course-card--price-container--3pq7h","rating-container":"list-view-course-card--rating-container--1BLNe",rating:"list-view-course-card--rating--za-yU",title:"list-view-course-card--title--2pfA0","meta-item":"list-view-course-card--meta-item--1Pyfe",icon:"list-view-course-card--icon--2k0d7","headline-and-instructor":"list-view-course-card--headline-and-instructor--2nbyp","meta-with-badge":"list-view-course-card--meta-with-badge--3oqjF","badge-with-context":"list-view-course-card--badge-with-context--3pIpP",badge:"list-view-course-card--badge--3El7q","badge-context-container":"list-view-course-card--badge-context-container--JAIBQ","badge-context":"list-view-course-card--badge-context--2beYY","closed-caption-icon":"list-view-course-card--closed-caption-icon--1HS7S","speech-bubble-icon":"list-view-course-card--speech-bubble-icon--3ERks","with-context-menu":"list-view-course-card--with-context-menu--FR8xX"}},"./src/udemy/js/base-components/merchandising-course-card/list-view/list-view-course-card.mobx-model.js":function(e,t,r){"use strict";var o,s=r("./node_modules/autobind-decorator/lib/esm/index.js"),a=r("./node_modules/lodash-es/escape.js"),i=r("./src/udemy/js/base-components/star-rating.react-component.js"),n=r("./src/udemy/js/utils/get-config-data.js"),l=r("./src/udemy/js/base-components/merchandising-course-card/common/mark-course-card-as-seen.js"),c=r("./src/udemy/js/utils/ud-api-stat.js"),p=r("./src/udemy/js/utils/user-agent/get-is-mobile-browser.js"),u=function(){function e(){babelHelpers.classCallCheck(this,e),this.platform=Object(p.a)()?"mobile-web":"web"}return babelHelpers.createClass(e,[{key:"trackClick",value:function(e,t,r){r&&c.c.trackPageEvent("trackclick",r,{item:t,courseId:e.id,platform:this.platform})}},{key:"trackSeen",value:function(e,t,r,o){c.c.trackPageEvent("trackseen",o,{component:e,itemKey:t,itemValue:r,platform:this.platform})}}]),e}();r.d(t,"a",(function(){return h}));var d=Object(n.a)(),h=(o=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=r.quickViewBoxEnabled,s=void 0!==o&&o;babelHelpers.classCallCheck(this,e),this._course=t,this.hasBeenMarkedAsSeen=!1,this.tracking=new u,this.clickTrackingPageName="",this.quickViewBoxEnabled=s}return babelHelpers.createClass(e,[{key:"setClickTrackingPageName",value:function(e){this.clickTrackingPageName=e}},{key:"markAsSeen",value:function(e){this.hasBeenMarkedAsSeen||(this.hasBeenMarkedAsSeen=!0,Object(l.a)(this._course,e))}},{key:"trackCourseCardClick",value:function(){this.tracking.trackClick(this._course,"course-card",this.clickTrackingPageName)}},{key:"trackTitleClick",value:function(){this.tracking.trackClick(this._course,"course-card-title",this.clickTrackingPageName)}},{key:"trackCourseImageClick",value:function(){this.tracking.trackClick(this._course,"course-image",this.clickTrackingPageName)}},{key:"trackInstructorClick",value:function(){this.tracking.trackClick(this._course,"instructor-name",this.clickTrackingPageName)}},{key:"trackNumOfRatingsClick",value:function(){this.tracking.trackClick(this._course,"num-of-ratings",this.clickTrackingPageName)}},{key:"trackReviewsClick",value:function(){this.tracking.trackClick(this._course,"reviews",this.clickTrackingPageName)}},{key:"trackSeenReviewHighlightsQuickView",value:function(){this.tracking.trackSeen("review-highlights-quick-view-only","courseId",this._course.id,"search-result-page")}},{key:"id",get:function(){return this._course.id}},{key:"image",get:function(){return this._course.image_240x135}},{key:"imageSize",get:function(){return{width:240,height:135}}},{key:"image2x",get:function(){return this._course.image_480x270}},{key:"title",get:function(){return this._course.title}},{key:"price",get:function(){return d.brand.has_organization?null:this._course.is_paid?this._course.price:0}},{key:"captionLanguages",get:function(){return this._course.caption_languages}},{key:"priceDetail",get:function(){return this._course.price_detail}},{key:"url",get:function(){return this._course.url}},{key:"discountPrice",get:function(){return this._course.discount?this._course.discount.price:null}},{key:"rating",get:function(){return Object(i.a)(this._course.rating||0)}},{key:"numReviews",get:function(){return this._course.num_reviews||0}},{key:"badge",get:function(){return this._course.badges&&(this._course.badges.length?this._course.badges[0]:null)}},{key:"instructorName",get:function(){return this._course.instructor_name?this._course.instructor_name:Object(a.a)(this._course.visible_instructors[0].title)}},{key:"isPracticeTestCourse",get:function(){return this._course.is_practice_test_course}},{key:"hasObjectiveSummary",get:function(){return this._course.objectives_summary&&this._course.objectives_summary.length>0}},{key:"practiceTestsCount",get:function(){return this._course.num_published_practice_tests}},{key:"practiceTestsLength",get:function(){return this._course.content_length_practice_test_questions}},{key:"numPublishedLectures",get:function(){return this._course.num_published_lectures}},{key:"curriculumItems",get:function(){return this._course.curriculum_items||[]}},{key:"courseLanguage",get:function(){return gettext(this._course.locale.simple_english_title)}},{key:"locale",get:function(){return this._course.locale}},{key:"captionLocales",get:function(){return this._course.caption_locales}},{key:"contentInfo",get:function(){return this._course.content_info}},{key:"instructionalLevelSimple",get:function(){return this._course.instructional_level_simple}},{key:"headline",get:function(){return this._course.headline}},{key:"predictiveScore",get:function(){return this._course.predictive_score}},{key:"inputFeatures",get:function(){return this._course.input_features}},{key:"relevancyScore",get:function(){return this._course.relevancy_score}},{key:"orderInResults",get:function(){return this._course.order_in_results}}]),e}(),babelHelpers.applyDecoratedDescriptor(o.prototype,"markAsSeen",[s.a],Object.getOwnPropertyDescriptor(o.prototype,"markAsSeen"),o.prototype),babelHelpers.applyDecoratedDescriptor(o.prototype,"trackCourseCardClick",[s.a],Object.getOwnPropertyDescriptor(o.prototype,"trackCourseCardClick"),o.prototype),babelHelpers.applyDecoratedDescriptor(o.prototype,"trackTitleClick",[s.a],Object.getOwnPropertyDescriptor(o.prototype,"trackTitleClick"),o.prototype),babelHelpers.applyDecoratedDescriptor(o.prototype,"trackCourseImageClick",[s.a],Object.getOwnPropertyDescriptor(o.prototype,"trackCourseImageClick"),o.prototype),babelHelpers.applyDecoratedDescriptor(o.prototype,"trackInstructorClick",[s.a],Object.getOwnPropertyDescriptor(o.prototype,"trackInstructorClick"),o.prototype),babelHelpers.applyDecoratedDescriptor(o.prototype,"trackNumOfRatingsClick",[s.a],Object.getOwnPropertyDescriptor(o.prototype,"trackNumOfRatingsClick"),o.prototype),babelHelpers.applyDecoratedDescriptor(o.prototype,"trackReviewsClick",[s.a],Object.getOwnPropertyDescriptor(o.prototype,"trackReviewsClick"),o.prototype),babelHelpers.applyDecoratedDescriptor(o.prototype,"trackSeenReviewHighlightsQuickView",[s.a],Object.getOwnPropertyDescriptor(o.prototype,"trackSeenReviewHighlightsQuickView"),o.prototype),o)},"./src/udemy/js/base-components/merchandising-course-card/list-view/list-view-course-card.react-component.js":function(e,t,r){"use strict";var o,s,a,i,n,l,c,p,u,d=r("./node_modules/babel-plugin-react-css-modules/dist/browser/getClassName.js"),h=r.n(d),m=r("./node_modules/autobind-decorator/lib/esm/index.js"),b=r("./node_modules/classnames/index.js"),f=r.n(b),y=r("./node_modules/lodash-es/isEmpty.js"),g=r("./node_modules/mobx-react/index.module.js"),v=r("./node_modules/prop-types/index.js"),w=r.n(v),k=r("./node_modules/react/index.js"),_=r.n(k),E=r("./node_modules/react-waypoint/build/waypoint.js"),j=r.n(E),D=r("./src/udemy/js/base-components/badge-with-context.react-component.js"),S=r("./src/udemy/js/base-components/context-info.react-component.js"),C=r("./src/udemy/js/base-components/course-badge.react-component.js"),O=r("./src/udemy/js/base-components/icon.react-component.js"),P=r("./src/udemy/js/base-components/image.react-component.js"),T=r("./src/udemy/js/base-components/merchandising-course-card/common/course-price.react-component.js"),x=r("./src/udemy/js/base-components/performance-mark-on-load.react-component.js"),R=r("./src/udemy/js/base-components/popover.react-component.js"),H=r("./src/udemy/js/base-components/price-text/price-text.react-component.js"),A=r("./src/udemy/js/base-components/star-rating.react-component.js"),I=r("./src/udemy/js/base-components/udlite/error-boundary/error-boundary.react-component.js"),L=r("./src/udemy/js/base-components/udlite/price-text/constants.js"),M=r("./src/udemy/js/event-tracking/common-tracking.js"),N=r("./src/udemy/js/organization-common/resource-context-menu/constants.js"),F=r("./src/udemy/js/organization-common/resource-context-menu/wrappers/ufb-submenu-context-menu.react-component.js"),U=r("./src/udemy/js/utils/escape/safely-set-inner-html.js"),z=r("./src/udemy/js/utils/get-config-data.js"),B=r("./src/udemy/js/utils/machine-translation-helpers.js"),q=r("./src/udemy/js/utils/ud-numeral.js"),G=(r("./src/udemy/js/base-components/merchandising-course-card/list-view/list-view-course-card.less"),r("./node_modules/mobx/lib/mobx.module.js")),V=r("./src/udemy/js/base-components/universal/variables.js"),K=r("./src/udemy/js/utils/window-measurement.mobx-store.js"),W=(o=function(){function e(t){babelHelpers.classCallCheck(this,e),this.overrides=t||{}}return babelHelpers.createClass(e,[{key:"isMobileSize",get:function(){return K.a.innerWidth<V.a["screen-sm-min"]}},{key:"showQuickView",get:function(){return K.a.innerWidth>=V.a["screen-md-min"]}},{key:"wholeCardClickable",get:function(){return!this.isMobileSize}},{key:"noLinks",get:function(){return void 0!==this.overrides.noLinks&&this.overrides.noLinks}},{key:"linkInnerComponents",get:function(){return!this.wholeCardClickable&&!this.noLinks}},{key:"titleWithBadgeOnHover",get:function(){return this.isMobileSize}}]),e}(),babelHelpers.applyDecoratedDescriptor(o.prototype,"isMobileSize",[G.computed],Object.getOwnPropertyDescriptor(o.prototype,"isMobileSize"),o.prototype),babelHelpers.applyDecoratedDescriptor(o.prototype,"showQuickView",[G.computed],Object.getOwnPropertyDescriptor(o.prototype,"showQuickView"),o.prototype),babelHelpers.applyDecoratedDescriptor(o.prototype,"wholeCardClickable",[G.computed],Object.getOwnPropertyDescriptor(o.prototype,"wholeCardClickable"),o.prototype),babelHelpers.applyDecoratedDescriptor(o.prototype,"titleWithBadgeOnHover",[G.computed],Object.getOwnPropertyDescriptor(o.prototype,"titleWithBadgeOnHover"),o.prototype),o),Y=r("./src/udemy/js/base-components/merchandising-course-card/common/quick-view-box.react-component.js"),X=r("./src/udemy/js/base-components/merchandising-course-card/list-view/list-view-course-card.mobx-model.js"),Q=(r("./src/udemy/js/base-components/merchandising-course-card/list-view/course-objectives/course-objectives-quick-view.less"),Object(g.d)((n=i=function(e){function t(){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).apply(this,arguments))}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"onSeen",value:function(){this.props.course.trackSeenReviewHighlightsQuickView()}},{key:"render",value:function(){var e=this.props.course;return e.hasObjectiveSummary?_.a.createElement("div",null,_.a.createElement("div",null,_.a.createElement("div",{className:"course-objectives-quick-view--title--1jMBK"},gettext("What you'll learn")),_.a.createElement(Y.a,{course:e._course,simplified:!0})),_.a.createElement(j.a,{onEnter:this.onSeen})):null}}]),t}(k.Component),i.propTypes={course:w.a.instanceOf(X.a).isRequired},a=n,babelHelpers.applyDecoratedDescriptor(a.prototype,"onSeen",[m.a],Object.getOwnPropertyDescriptor(a.prototype,"onSeen"),a.prototype),s=a))||s);r.d(t,"a",(function(){return ne}));var J={"./list-view-course-card.less":{"course-card-wrapper":"list-view-course-card--course-card-wrapper--TJ6ET",container:"list-view-course-card--container--2fJ9s","bottom-border":"list-view-course-card--bottom-border--3bYxz",content:"list-view-course-card--content--1TGG4",fx:"list-view-course-card--fx--1ohlz","headline-and-instructor-container":"list-view-course-card--headline-and-instructor-container--1z6wI","image-container":"list-view-course-card--image-container--16j0R","course-image":"list-view-course-card--course-image--1XvxT","instructor-container":"list-view-course-card--instructor-container--1ZPqI",instructor:"list-view-course-card--instructor--2lbmP","ellipsis-1-line":"list-view-course-card--ellipsis-1-line--3Kt8D","meta-with-badge-container":"list-view-course-card--meta-with-badge-container--2AmUC","price-rating":"list-view-course-card--price-rating--3vt-J","price-container":"list-view-course-card--price-container--3pq7h","font-heading-sm":"list-view-course-card--font-heading-sm--1Q5ZS","font-text-sm":"list-view-course-card--font-text-sm--8LRAQ","rating-container":"list-view-course-card--rating-container--1BLNe",rating:"list-view-course-card--rating--za-yU",title:"list-view-course-card--title--2pfA0","font-heading-xs":"list-view-course-card--font-heading-xs--126Wb","meta-item":"list-view-course-card--meta-item--1Pyfe",icon:"list-view-course-card--icon--2k0d7","headline-and-instructor":"list-view-course-card--headline-and-instructor--2nbyp","meta-with-badge":"list-view-course-card--meta-with-badge--3oqjF","badge-with-context":"list-view-course-card--badge-with-context--3pIpP",badge:"list-view-course-card--badge--3El7q","badge-context-container":"list-view-course-card--badge-context-container--JAIBQ","badge-context":"list-view-course-card--badge-context--2beYY",transition:"list-view-course-card--transition--3zOd4",transform:"list-view-course-card--transform--3DrO-","closed-caption-icon":"list-view-course-card--closed-caption-icon--1HS7S","speech-bubble-icon":"list-view-course-card--speech-bubble-icon--3ERks","with-context-menu":"list-view-course-card--with-context-menu--FR8xX"}},Z=Object(z.a)(),$=function(e){var t=e.course,r=e.configuration,o=e.anchorTagProps;return r.linkInnerComponents?_.a.createElement("div",{className:"list-view-course-card--title--2pfA0"},_.a.createElement("a",Object.assign({"data-purpose":"search-course-card-title",href:t.url,onClick:t.trackTitleClick},o),_.a.createElement("h4",null,t.title)),t.badge&&_.a.createElement(D.a,{withTooltip:!1,content:t.badge})):_.a.createElement("div",{"data-purpose":"search-course-card-title",className:"list-view-course-card--title--2pfA0"},_.a.createElement("h4",null,t.title))};$.propTypes={course:w.a.instanceOf(X.a).isRequired,configuration:w.a.instanceOf(W).isRequired,anchorTagProps:w.a.object},$.defaultProps={anchorTagProps:{}};var ee=function(e){var t=e.course,r=e.configuration,o=e.anchorTagProps,s=e.perfTrackingPageName,a=_.a.createElement(P.a,{src:t.image,alt:t.title,srcSet:"".concat(t.image," 1x, ").concat(t.image2x," 2x"),width:t.imageSize.width,height:t.imageSize.height,className:"list-view-course-card--course-image--1XvxT"}),i=t.shouldSendPerfMetric&&s?_.a.createElement(x.a,{markName:s},a):a;return r.linkInnerComponents?_.a.createElement("a",Object.assign({href:t.url,onClick:t.trackCourseImageClick},o),i):i};ee.propTypes={course:w.a.instanceOf(X.a).isRequired,configuration:w.a.instanceOf(W).isRequired,anchorTagProps:w.a.object,perfTrackingPageName:w.a.string},ee.defaultProps={anchorTagProps:{},perfTrackingPageName:""};var te=function(e){var t=e.course,r=e.configuration,o=e.anchorTagProps,s=Object(A.d)(t.rating),a=Object(q.a)(t.numReviews).format("0,0");return t.numReviews>1e3&&r.overrides.cap_reviews_at_1000&&(a="".concat(Object(q.a)(1e3).format("0,0"),"+")),r.linkInnerComponents?_.a.createElement("div",{className:"list-view-course-card--rating--za-yU"},_.a.createElement("a",Object.assign({href:"".concat(t.url,"#reviews"),onClick:t.trackReviewsClick},o),_.a.createElement(A.b,{rating:t.rating,size:"tiny"}),s),_.a.createElement("a",Object.assign({href:"".concat(t.url,"#reviews"),onClick:t.trackNumOfRatingsClick},o),_.a.createElement("span",{className:"ml5"},"(".concat(ninterpolate("%(numReviews)s rating","%(numReviews)s ratings",t.numReviews,{numReviews:a}),")")))):_.a.createElement("div",{className:"list-view-course-card--rating--za-yU"},_.a.createElement("span",null,_.a.createElement(A.b,{rating:t.rating,size:"tiny"}),s),_.a.createElement("span",{className:"ml5"},"(".concat(ninterpolate("%(numReviews)s rating","%(numReviews)s ratings",t.numReviews,{numReviews:a}),")")))};te.propTypes={course:w.a.instanceOf(X.a).isRequired,configuration:w.a.instanceOf(W).isRequired,anchorTagProps:w.a.object},te.defaultProps={anchorTagProps:{}};var re=function(e){var t=e.course,r=e.configuration,o=e.anchorTagProps,s=_.a.createElement("span",Object(U.a)({descriptionOfCaller:"list-view-course-card:instructor-name",html:t.instructorName}));return r.linkInnerComponents?_.a.createElement("div",{className:"list-view-course-card--instructor--2lbmP"},_.a.createElement("a",Object.assign({href:"".concat(t.url,"#instructor"),onClick:t.trackInstructorClick,"data-purpose":"search-course-card-instructor-ref"},o),s)):_.a.createElement("div",{className:"list-view-course-card--instructor--2lbmP"},s)};re.propTypes={course:w.a.instanceOf(X.a).isRequired,configuration:w.a.instanceOf(W).isRequired,anchorTagProps:w.a.object},re.defaultProps={anchorTagProps:{}};var oe=function(e){var t=e.course.captionLanguages;return t&&t.length?_.a.createElement(O.a,{glyph:"closed-caption"}):null};oe.propTypes={course:w.a.instanceOf(X.a).isRequired};var se=function(e){var t=e.course,r=e.hideIcons,o=e.hideClosedCaptions,s=Object(B.a)(t);return _.a.createElement(_.a.Fragment,null,s&&_.a.createElement("span",{className:"list-view-course-card--meta-item--1Pyfe"},_.a.createElement(O.a,{glyph:"closed-caption",className:"list-view-course-card--closed-caption-icon--1HS7S"})),s&&_.a.createElement("span",{className:"list-view-course-card--meta-item--1Pyfe"},_.a.createElement(O.a,{glyph:"comment",className:"list-view-course-card--speech-bubble-icon--3ERks"}),Object(B.b)(t)),t.isPracticeTestCourse&&_.a.createElement("span",{className:"list-view-course-card--meta-item--1Pyfe"},!r&&_.a.createElement(O.a,{glyph:"file-text-o",className:"list-view-course-card--icon--2k0d7"}),ninterpolate("%s practice test","%s practice tests",t.practiceTestsCount)),t.isPracticeTestCourse&&_.a.createElement("span",{className:"list-view-course-card--meta-item--1Pyfe"},!r&&_.a.createElement(O.a,{glyph:"question-circle",className:"list-view-course-card--icon--2k0d7"}),ninterpolate("%s question","%s questions",t.practiceTestsLength)),!t.isPracticeTestCourse&&!s&&_.a.createElement("span",{className:"list-view-course-card--meta-item--1Pyfe"},!r&&_.a.createElement(O.a,{glyph:"play-circle",className:"list-view-course-card--icon--2k0d7"}),ninterpolate("%s lecture","%s lectures",t.numPublishedLectures)),_.a.createElement("span",{className:"list-view-course-card--meta-item--1Pyfe"},!r&&_.a.createElement(O.a,{glyph:"clock",className:"list-view-course-card--icon--2k0d7"}),t.contentInfo),!t.isPracticeTestCourse&&!s&&_.a.createElement("span",{className:"list-view-course-card--meta-item--1Pyfe"},!r&&_.a.createElement(O.a,{glyph:"search-filter",className:"list-view-course-card--icon--2k0d7"}),t.instructionalLevelSimple),!o&&s&&_.a.createElement("span",{className:"list-view-course-card--meta-item--1Pyfe"},_.a.createElement(oe,{course:t})))};se.propTypes={course:w.a.instanceOf(X.a).isRequired,hideIcons:w.a.bool,hideClosedCaptions:w.a.bool},se.defaultProps={hideIcons:!1,hideClosedCaptions:!1};var ae=function(e){var t=e.course,r=interpolate("By %s",[t.instructorName]);return _.a.createElement("div",{className:"list-view-course-card--headline-and-instructor--2nbyp"},_.a.createElement("span",Object(U.a)({descriptionOfCaller:"list-view-course-card:course-headline",html:t.headline}))," | ",_.a.createElement("span",Object(U.a)({descriptionOfCaller:"list-view-course-card:instructor-name",html:r})))};ae.propTypes={course:w.a.instanceOf(X.a).isRequired};var ie=function(e){var t=e.course,r=e.showMeta;return _.a.createElement("div",{className:"list-view-course-card--meta-with-badge--3oqjF"},t.badge&&_.a.createElement("div",{className:"list-view-course-card--badge-with-context--3pIpP"},_.a.createElement("span",{className:"list-view-course-card--badge--3El7q"},_.a.createElement(C.a,{content:t.badge})),_.a.createElement("span",{className:"list-view-course-card--badge-context-container--JAIBQ"},_.a.createElement("span",{className:"list-view-course-card--badge-context--2beYY"},_.a.createElement(S.a,{withoutHyperlink:!0,contextInfo:t.badge.context_info})))),r&&_.a.createElement(se,{course:t,hideIcons:!0,hideClosedCaptions:!0}))};ie.propTypes={course:w.a.instanceOf(X.a).isRequired,showMeta:w.a.bool},ie.defaultProps={showMeta:!0};var ne=Object(g.d)((u=p=function(e){function t(e){var r;return babelHelpers.classCallCheck(this,t),r=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this,e)),e.course.setClickTrackingPageName(e.clickTrackingPageName),r.configuration=new W(e.overrides),r}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"markCourseAsSeen",value:function(){var e=this.props,t=e.trackCourseImpression,r=e.course,o=e.funnelTrackingContext;r.markAsSeen(o),t&&t(r,this.props.eventTrackingContext)}},{key:"trackClick",value:function(){var e=this.props.course._course;Object(M.a)({courseId:e.id,courseTrackingId:e.tracking_id,componentName:"listViewCourseCard"}),this.props.course.trackCourseCardClick()}},{key:"wrapQuickView",value:function(e,t){if(this.configuration.showQuickView&&e.quickViewBoxEnabled&&e.hasObjectiveSummary){var r=_.a.createElement(Q,{course:e});t=_.a.createElement(R.a,{placement:R.a.PLACEMENT.RIGHT,boundaryBehavior:R.a.BOUNDARY_BEHAVIOR.ANTICLOCKWISE,trigger:R.a.TRIGGER.HOVER,content:r},t)}return t}},{key:"renderContextMenu",value:function(e){var t={id:e.id,title:e.title,url:e.url,is_published:!0},r="";return Object(y.a)(this.props.funnelTrackingContext)||(r=N.c[this.props.funnelTrackingContext.context]||N.c[this.props.funnelTrackingContext.context2]),this.isContextMenuEnabled&&_.a.createElement(F.a,{course:t,context:r,color:N.a.BLUE,openLeft:!0})}},{key:"render",value:function(){var e=this.props,t=e.className,r=e.course,o=e.hasBottomBorder,s=e.containerClassName,a=this.props.openInNewTab?{rel:"noopener noreferrer",target:"_blank"}:{},i=f()("container",{"bottom-border":o}),n=_.a.createElement("div",{className:(f()(s,{"badge-hover":this.configuration.titleWithBadgeOnHover})?f()(s,{"badge-hover":this.configuration.titleWithBadgeOnHover})+" ":"")+h()(i,J)},_.a.createElement("div",{className:"list-view-course-card--image-container--16j0R"},_.a.createElement(ee,{course:r,configuration:this.configuration,anchorTagProps:a,perfTrackingPageName:this.props.perfTrackingPageName})),_.a.createElement("div",{className:"list-view-course-card--content--1TGG4"},_.a.createElement($,{course:r,configuration:this.configuration,anchorTagProps:a}),_.a.createElement("div",{className:"list-view-course-card--meta-with-badge-container--2AmUC"},_.a.createElement(ie,{course:r})),_.a.createElement("div",{className:"list-view-course-card--instructor-container--1ZPqI"},_.a.createElement(re,{course:r,configuration:this.configuration,anchorTagProps:a})),_.a.createElement("div",{className:"list-view-course-card--headline-and-instructor-container--1z6wI"},_.a.createElement(ae,{course:r})),_.a.createElement("div",{className:h()(f()("price-rating",{"with-context-menu":this.isContextMenuEnabled}),J)},_.a.createElement("div",{className:"list-view-course-card--price-container--3pq7h"},this.props.renderPriceText({course:r,align:H.a.RIGHT,discountColor:H.b.BLACK,discountFontWeight:H.d.BOLD,verticalLayout:!0,trackingEventContext:{context:this.props.funnelTrackingContext.context,buyableId:r.id,priceType:L.a.individual_buyable,buyableType:"course"}})),_.a.createElement("div",{className:"list-view-course-card--rating-container--1BLNe"},_.a.createElement(te,{course:r,configuration:this.configuration,anchorTagProps:a})))),_.a.createElement(j.a,{scrollableAncestor:window,onEnter:this.markCourseAsSeen}));return this.configuration.wholeCardClickable&&!this.configuration.noLinks&&(n=_.a.createElement("a",Object.assign({href:r.url,onClick:this.trackClick},a),n," ")),n=this.wrapQuickView(r,n),_.a.createElement(I.a,null,_.a.createElement("div",{"data-purpose":"search-course-cards",className:(t?t+" ":"")+"list-view-course-card--course-card-wrapper--TJ6ET"},n,this.renderContextMenu(r)))}},{key:"isContextMenuEnabled",get:function(){return Z.brand.has_organization&&Z.brand.organization.is_context_menu_enabled}}]),t}(k.Component),p.propTypes={className:w.a.string,containerClassName:w.a.string,course:w.a.instanceOf(X.a).isRequired,hasBottomBorder:w.a.bool,openInNewTab:w.a.bool,renderPriceText:w.a.func,funnelTrackingContext:w.a.object,clickTrackingPageName:w.a.string,perfTrackingPageName:w.a.string,overrides:w.a.object,trackCourseImpression:w.a.func,eventTrackingContext:w.a.object},p.defaultProps={className:null,containerClassName:"",hasBottomBorder:!0,renderPriceText:function(e){return _.a.createElement(T.a,Object.assign({},e,{course:e.course._course}))},openInNewTab:!1,funnelTrackingContext:{},clickTrackingPageName:"",perfTrackingPageName:"",overrides:{},trackCourseImpression:null,eventTrackingContext:{}},c=u,babelHelpers.applyDecoratedDescriptor(c.prototype,"markCourseAsSeen",[m.a],Object.getOwnPropertyDescriptor(c.prototype,"markCourseAsSeen"),c.prototype),babelHelpers.applyDecoratedDescriptor(c.prototype,"trackClick",[m.a],Object.getOwnPropertyDescriptor(c.prototype,"trackClick"),c.prototype),l=c))||l},"./src/udemy/js/base-components/open-full-size-image.less":function(e,t,r){e.exports={"open-full-size-image-wrapper":"open-full-size-image--open-full-size-image-wrapper--uus7o","open-full-size-image":"open-full-size-image--open-full-size-image--3-bi_","open-full-size-image-backdrop":"open-full-size-image--open-full-size-image-backdrop--dB0c3","modal--full-size-image":"open-full-size-image--modal--full-size-image--3RRcV"}},"./src/udemy/js/base-components/open-full-size-image.react-component.js":function(e,t,r){"use strict";r.d(t,"a",(function(){return w}));var o,s,a,i,n,l=r("./node_modules/autobind-decorator/lib/esm/index.js"),c=r("./node_modules/mobx/lib/mobx.module.js"),p=r("./node_modules/mobx-react/index.module.js"),u=r("./node_modules/prop-types/index.js"),d=r.n(u),h=r("./node_modules/react/index.js"),m=r.n(h),b=r("./src/udemy/js/base-components/button.react-component.js"),f=r("./src/udemy/js/base-components/icon.react-component.js"),y=r("./src/udemy/js/base-components/image.react-component.js"),g=r("./src/udemy/js/base-components/modal.react-component.js"),v=r("./src/udemy/js/base-components/safe-anchor.react-component.js"),w=(r("./src/udemy/js/base-components/open-full-size-image.less"),Object(p.d)((n=i=function(e){function t(){var e,r;babelHelpers.classCallCheck(this,t);for(var o=arguments.length,s=new Array(o),i=0;i<o;i++)s[i]=arguments[i];return r=babelHelpers.possibleConstructorReturn(this,(e=babelHelpers.getPrototypeOf(t)).call.apply(e,[this].concat(s))),babelHelpers.initializerDefineProperty(r,"isModalOpen",a,babelHelpers.assertThisInitialized(r)),r}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"openModal",value:function(e){e.preventDefault(),this.isModalOpen=!0}},{key:"closeModal",value:function(){this.isModalOpen=!1}},{key:"render",value:function(){var e=this.props,t=e.alt,r=e.src,o=e.href,s=m.a.createElement(y.a,{src:r,alt:t,lazy:!1,height:"unset",width:"unset"});return m.a.createElement("div",{className:"open-full-size-image--open-full-size-image-wrapper--uus7o"},m.a.createElement(v.default,{"data-purpose":"open-full-size-image",onClick:this.openModal},m.a.createElement("span",{className:"sr-only"},gettext("Larger image")),m.a.createElement("div",{className:"pos-r"},s,m.a.createElement("div",{className:"fx-c pos-a open-full-size-image--open-full-size-image-backdrop--dB0c3"},m.a.createElement(f.a,{glyph:"zoom-in",className:"open-full-size-image--open-full-size-image--3-bi_"})))),m.a.createElement(g.a,{show:this.isModalOpen,onHide:this.closeModal,className:"open-full-size-image--modal--full-size-image--3RRcV"},m.a.createElement(g.a.Body,null,o?m.a.createElement("a",{href:o,rel:"nofollow noopener noreferrer",target:"_blank"},s):s,m.a.createElement(b.default,{bsStyle:"link",className:"close","data-purpose":"close-popup","aria-label":gettext("Close"),onClick:this.closeModal},m.a.createElement("span",{"aria-hidden":"true"},"")))))}}]),t}(h.Component),i.propTypes={alt:d.a.string,src:d.a.string.isRequired,href:d.a.string},i.defaultProps={alt:"",href:null},s=n,a=babelHelpers.applyDecoratedDescriptor(s.prototype,"isModalOpen",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),babelHelpers.applyDecoratedDescriptor(s.prototype,"openModal",[l.a,c.action],Object.getOwnPropertyDescriptor(s.prototype,"openModal"),s.prototype),babelHelpers.applyDecoratedDescriptor(s.prototype,"closeModal",[l.a,c.action],Object.getOwnPropertyDescriptor(s.prototype,"closeModal"),s.prototype),o=s))||o)},"./src/udemy/js/base-components/program-card/program-card.less":function(e,t,r){e.exports={"program-card":"program-card--program-card--x71Vt","coming-soon":"program-card--coming-soon--2eAx-",large:"program-card--large--3mlvJ",content:"program-card--content--2i4Sc",title:"program-card--title--3BxVF","extra-info":"program-card--extra-info--2G6pL","visual-info":"program-card--visual-info--1m5_b","main-icon":"program-card--main-icon--2Xjry",pattern:"program-card--pattern--3euAo",play:"program-card--play--2a2mS","progress-bar":"program-card--progress-bar--25k39"}},"./src/udemy/js/base-components/program-card/program-card.react-component.js":function(e,t,r){"use strict";r.d(t,"a",(function(){return C}));var o,s,a,i=r("./node_modules/babel-plugin-react-css-modules/dist/browser/getClassName.js"),n=r.n(i),l=r("./node_modules/autobind-decorator/lib/esm/index.js"),c=r("./node_modules/classnames/index.js"),p=r.n(c),u=r("./node_modules/prop-types/index.js"),d=r.n(u),h=r("./node_modules/react/index.js"),m=r.n(h),b=r("./src/udemy/js/base-components/icon.react-component.js"),f=r("./src/udemy/js/base-components/progress-bar.react-component.js"),y=r("./src/udemy/js/base-components/safe-anchor.react-component.js"),g=r("./src/udemy/js/base-components/udlite/duration/duration.react-component.js"),v=r("./src/udemy/js/base-components/udlite/l10n/localized-html.react-component.js"),w=r("./src/udemy/js/utils/ud-api-stat.js"),k=r("./src/udemy/js/base-components/program-card/pattern-program-for-vendor.react-component.js"),_=r("./src/udemy/js/base-components/program-card/program-card-icon.react-component.js"),E=(r("./src/udemy/js/base-components/program-card/program-card.less"),{"./program-card.less":{"program-card":"program-card--program-card--x71Vt","coming-soon":"program-card--coming-soon--2eAx-",large:"program-card--large--3mlvJ",content:"program-card--content--2i4Sc",title:"program-card--title--3BxVF","ellipsis-n-lines":"program-card--ellipsis-n-lines--32pml","extra-info":"program-card--extra-info--2G6pL","visual-info":"program-card--visual-info--1m5_b","main-icon":"program-card--main-icon--2Xjry",pattern:"program-card--pattern--3euAo",play:"program-card--play--2a2mS","progress-bar":"program-card--progress-bar--25k39"}}),j=(a=s=function(e){function t(){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).apply(this,arguments))}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"trackGoToProgramClick",value:function(){w.c.trackPageEvent("trackclick",this.props.pageType,{action:"go-to-program-clicked",programId:this.props.programId})}},{key:"render",value:function(){var e=this.props,t=(e.pageType,e.programId,babelHelpers.objectWithoutProperties(e,["pageType","programId"]));return this.props.href?m.a.createElement(y.default,Object.assign({},t,{onClick:this.trackGoToProgramClick})):m.a.createElement("div",t)}}]),t}(h.Component),s.propTypes={href:d.a.string,pageType:d.a.string.isRequired,programId:d.a.number.isRequired},s.defaultProps={href:void 0},o=a,babelHelpers.applyDecoratedDescriptor(o.prototype,"trackGoToProgramClick",[l.a],Object.getOwnPropertyDescriptor(o.prototype,"trackGoToProgramClick"),o.prototype),o),D=function(e){function t(){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).apply(this,arguments))}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"render",value:function(){var e=this.props.program;return e.comingSoon?m.a.createElement(m.a.Fragment,null,gettext("Coming soon...")):e.isEnrolled?m.a.createElement(m.a.Fragment,null,m.a.createElement(b.a,{glyph:"play-circle",size:"small",className:"program-card--play--2a2mS"})," ",gettext("Continue learning")):m.a.createElement("div",null,e.contentDuration>0&&m.a.createElement(v.a,{style:{display:"block"},dangerouslySetInnerHTML:{__html:gettext('<span class="duration">%(duration)s</span> of content')},interpolate:{duration:m.a.createElement(g.a,{numSeconds:e.contentDuration,precision:g.a.PRECISION.HOURS})}}),e.numPractices>0&&m.a.createElement("div",null,ninterpolate("%(numPractices)s practice test","%(numPractices)s practice tests",e.numPractices,{numPractices:e.numPractices})),e.qAOffer&&m.a.createElement("div",null,interpolate(gettext("%(qAOffer)s Q&A discussions"),{qAOffer:e.qAOffer},!0)))}}]),t}(h.Component);D.propTypes={program:d.a.object.isRequired};var S={id:d.a.number.isRequired,title:d.a.string.isRequired,icon:d.a.oneOf(["cloud","security","server","assignment","people"]).isRequired},C=function(e){function t(){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).apply(this,arguments))}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"render",value:function(){var e=this.props,t=e.program,r=e.size,o=e.pageType,s=p()("program-card",{"coming-soon":t.comingSoon,large:"large"===r}),a=t.comingSoon?null:t.url;return m.a.createElement(j,{href:a,"data-purpose":"program-card",pageType:o,programId:t.id,className:n()(s,E)},m.a.createElement("div",{className:"program-card--visual-info--1m5_b"},t.comingSoon?null:m.a.createElement(k.a,{vendor:t.vendor,level:t.level,className:"program-card--pattern--3euAo",dimensions:"180px"}),m.a.createElement(_.a,{program:t,className:"program-card--main-icon--2Xjry"})),m.a.createElement("div",{className:"program-card--content--2i4Sc"},m.a.createElement("div",{className:"program-card--title--3BxVF","data-purpose":"program-card-title"},t.title),m.a.createElement("div",{className:"program-card--extra-info--2G6pL"},m.a.createElement(D,{program:t})),t.completionRatio?m.a.createElement(f.a,{className:"program-card--progress-bar--25k39",now:t.completionRatio}):null))}}]),t}(h.Component);C.propTypes={program:d.a.oneOfType([d.a.shape(babelHelpers.objectSpread({},S,{comingSoon:d.a.bool.isRequired})),d.a.shape(babelHelpers.objectSpread({},S,{vendor:d.a.string.isRequired,level:d.a.oneOf([1,2,3]),url:d.a.string,completionRatio:d.a.number.isRequired,isEnrolled:d.a.bool.isRequired})),d.a.shape(babelHelpers.objectSpread({},S,{vendor:d.a.string.isRequired,qAOffer:d.a.string.isRequired,numPractices:d.a.number.isRequired,contentDuration:d.a.number.isRequired,level:d.a.oneOf([1,2,3]),url:d.a.string}))]).isRequired,size:d.a.oneOf(["large","small"]),pageType:d.a.string.isRequired},C.defaultProps={size:"small"}},"./src/udemy/js/base-components/review-star-input.less":function(e,t,r){e.exports={"review-star":"review-star-input--review-star--1tfgA","review-star--filled":"review-star-input--review-star--filled--VK-bI","review-star--left":"review-star-input--review-star--left--3Symo","review-star--right":"review-star-input--review-star--right--1VhZD"}},"./src/udemy/js/base-components/review-stars-input.less":function(e,t,r){e.exports={"review-stars":"review-stars-input--review-stars--367x-","review-stars--focused":"review-stars-input--review-stars--focused--3gU4v","review-stars--align-center":"review-stars-input--review-stars--align-center--2ZzC8","review-stars--small":"review-stars-input--review-stars--small--2-ztm","review-stars--medium":"review-stars-input--review-stars--medium--K1MgR","review-stars--large":"review-stars-input--review-stars--large--uNfCd","review-stars--xlarge":"review-stars-input--review-stars--xlarge--1nk4-","review-stars--enabled":"review-stars-input--review-stars--enabled--2xQWV","rating-slider":"review-stars-input--rating-slider--10RUT"}},"./src/udemy/js/base-components/review-stars-input.react-component.js":function(e,t,r){"use strict";var o,s,a,i,n,l,c,p,u,d=r("./node_modules/babel-plugin-react-css-modules/dist/browser/getClassName.js"),h=r.n(d),m=r("./node_modules/autobind-decorator/lib/esm/index.js"),b=r("./node_modules/classnames/index.js"),f=r.n(b),y=r("./node_modules/lodash-es/noop.js"),g=r("./node_modules/lodash-es/range.js"),v=r("./node_modules/mobx/lib/mobx.module.js"),w=r("./node_modules/mobx-react/index.module.js"),k=r("./node_modules/prop-types/index.js"),_=r.n(k),E=r("./node_modules/react/index.js"),j=r.n(E),D=r("./src/udemy/js/utils/user-agent/get-is-mobile-browser.js"),S=r("./src/udemy/js/base-components/input-range.react-component.js"),C=(r("./src/udemy/js/base-components/review-star-input.less"),{"./review-star-input.less":{"review-star":"review-star-input--review-star--1tfgA",icomoon:"review-star-input--icomoon--rdRbv","review-star--filled":"review-star-input--review-star--filled--VK-bI","review-star--left":"review-star-input--review-star--left--3Symo","review-star--right":"review-star-input--review-star--right--1VhZD"}}),O=(a=s=function(e){function t(){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).apply(this,arguments))}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"onHover",value:function(){this.props.onHover(this.props.rating)}},{key:"onTouchStart",value:function(e){e.stopPropagation(),this.props.onChoose(this.props.rating)}},{key:"onChoose",value:function(e){e.target.checked&&this.props.onChoose(this.props.rating)}},{key:"render",value:function(){var e=this.props.rating%1!=0,t=f()({"review-star--left":e,"review-star--right":!e,"review-star--filled":this.props.filled});return j.a.createElement("label",{htmlFor:this.props.labelFor,onMouseEnter:this.onHover,onTouchStart:this.onTouchStart,"data-purpose":"review-star-input-".concat(this.props.rating,"-label"),className:h()(t,C)},j.a.createElement("input",{type:"radio",className:"sr-only",name:this.props.name,id:this.props.inputId,value:this.props.rating,checked:this.props.chosen,"aria-label":interpolate(gettext("%(rating)s out of %(maxValue)s"),{rating:this.props.rating,maxValue:this.props.maxRatingValue},!0),onClick:this.onChoose,onChange:y.a,disabled:this.props.disabled,"data-purpose":"review-star-".concat(this.props.rating,"-input")}))}}]),t}(E.Component),s.propTypes={disabled:_.a.bool.isRequired,onHover:_.a.func.isRequired,onChoose:_.a.func.isRequired,rating:_.a.number.isRequired,filled:_.a.bool.isRequired,chosen:_.a.bool.isRequired,name:_.a.string.isRequired,labelFor:_.a.string.isRequired,inputId:_.a.string.isRequired,maxRatingValue:_.a.number},s.defaultProps={maxRatingValue:5},o=a,babelHelpers.applyDecoratedDescriptor(o.prototype,"onHover",[m.a],Object.getOwnPropertyDescriptor(o.prototype,"onHover"),o.prototype),babelHelpers.applyDecoratedDescriptor(o.prototype,"onTouchStart",[m.a],Object.getOwnPropertyDescriptor(o.prototype,"onTouchStart"),o.prototype),babelHelpers.applyDecoratedDescriptor(o.prototype,"onChoose",[m.a],Object.getOwnPropertyDescriptor(o.prototype,"onChoose"),o.prototype),o);r("./src/udemy/js/base-components/review-stars-input.less");r.d(t,"a",(function(){return A}));var P={"./review-stars-input.less":{"review-stars--star-spacing":"review-stars-input--review-stars--star-spacing--1-G4U","review-stars":"review-stars-input--review-stars--367x-","review-stars--focused":"review-stars-input--review-stars--focused--3gU4v","review-stars--align-center":"review-stars-input--review-stars--align-center--2ZzC8","review-stars--small":"review-stars-input--review-stars--small--2-ztm","review-stars--medium":"review-stars-input--review-stars--medium--K1MgR","review-stars--large":"review-stars-input--review-stars--large--uNfCd","review-stars--xlarge":"review-stars-input--review-stars--xlarge--1nk4-","review-stars--enabled":"review-stars-input--review-stars--enabled--2xQWV","rating-slider":"review-stars-input--rating-slider--10RUT"}},T=0,x={align:_.a.oneOf(["left","center"])},R={align:"center"},H=function(e){var t=e.rating,r=e.align,o={1:gettext("Awful, not what I expected at all"),1.5:gettext("Awful / Poor"),2:gettext("Poor, pretty disappointed"),2.5:gettext("Poor / Average"),3:gettext("Average, could be better"),3.5:gettext("Average / Good"),4:gettext("Good, what I expected"),4.5:gettext("Good / Amazing"),5:gettext("Amazing, above expectations!")};return j.a.createElement("h4",{className:"text-".concat(r)},o[t]||gettext("Select Rating"))};H.propTypes=babelHelpers.objectSpread({rating:_.a.number},x),H.defaultProps=babelHelpers.objectSpread({rating:void 0},R);var A=Object(w.d)((u=p=function(e){function t(e){var r;return babelHelpers.classCallCheck(this,t),r=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this,e)),babelHelpers.initializerDefineProperty(r,"hoverRating",l,babelHelpers.assertThisInitialized(r)),babelHelpers.initializerDefineProperty(r,"isFocused",c,babelHelpers.assertThisInitialized(r)),r.name="review-stars-react-".concat(T++),r.inputIdBase="review-stars-react-".concat(T++,"-input-"),r}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"onMouseLeave",value:function(){this.setHoverRating(0),this.props.onHover(0)}},{key:"onHover",value:function(e){.5===e&&(e=1),this.setHoverRating(e),this.props.onHover(e)}},{key:"setHoverRating",value:function(e){this.hoverRating=e}},{key:"onSliderInput",value:function(e){this.onHover(parseFloat(e.target.value))}},{key:"onSliderChange",value:function(e){this.props.onChoose(parseFloat(e.target.value))}},{key:"onFocusToggle",value:function(){this.isFocused=!this.isFocused}},{key:"render",value:function(){var e=this,t=null===this.props.hoverRating||void 0===this.props.hoverRating?this.hoverRating:this.props.hoverRating,r=this.props.showSlider&&!this.props.disabled,o=r?"medium":this.props.size,s=this.props.disabled||this.props.showSlider,a=this.props.align,i=f()("review-stars","review-stars--".concat(o),{"review-stars--enabled":!s,"review-stars--align-center":"center"===a,"review-stars--focused":this.isFocused}),n=function(t){return e.inputIdBase+t};return j.a.createElement("div",null,this.props.showGuidanceText&&j.a.createElement(H,{rating:this.guidedRating,align:a}),j.a.createElement("div",{onMouseLeave:this.onMouseLeave,"data-purpose":"review-stars-container",onFocus:this.onFocusToggle,onBlur:this.onFocusToggle,className:h()(i,P)},j.a.createElement("fieldset",null,j.a.createElement("legend",{className:"sr-only"},gettext("Course rating")),Object(g.a)(.5,5.5,.5).map((function(r){return j.a.createElement(O,{rating:r,key:r,filled:(t||e.props.rating)>=r,chosen:e.props.rating===r,onHover:s?y.a:e.onHover,onChoose:s?y.a:e.props.onChoose,disabled:s||.5===r,labelFor:n(.5===r?1:r),inputId:n(r),name:e.name})})))),r&&j.a.createElement("div",{className:"review-stars-input--rating-slider--10RUT"},j.a.createElement(S.a,{min:1,max:5,step:.5,value:this.props.rating,onChange:this.onSliderChange,onInput:this.onSliderInput})))}},{key:"guidedRating",get:function(){return this.hoverRating?this.hoverRating:this.props.rating}}]),t}(E.Component),p.propTypes=babelHelpers.objectSpread({disabled:_.a.bool,hoverRating:_.a.number,onHover:_.a.func,onChoose:_.a.func,rating:_.a.number,showGuidanceText:_.a.bool},x,{size:_.a.oneOf(["small","medium","large","xlarge"]),showSlider:_.a.bool}),p.defaultProps=babelHelpers.objectSpread({disabled:!1,hoverRating:null,onHover:y.a,onChoose:y.a,rating:null,showGuidanceText:!1},R,{size:"small",showSlider:D.b}),n=u,l=babelHelpers.applyDecoratedDescriptor(n.prototype,"hoverRating",[v.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),c=babelHelpers.applyDecoratedDescriptor(n.prototype,"isFocused",[v.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),babelHelpers.applyDecoratedDescriptor(n.prototype,"guidedRating",[v.computed],Object.getOwnPropertyDescriptor(n.prototype,"guidedRating"),n.prototype),babelHelpers.applyDecoratedDescriptor(n.prototype,"onMouseLeave",[m.a],Object.getOwnPropertyDescriptor(n.prototype,"onMouseLeave"),n.prototype),babelHelpers.applyDecoratedDescriptor(n.prototype,"onHover",[m.a],Object.getOwnPropertyDescriptor(n.prototype,"onHover"),n.prototype),babelHelpers.applyDecoratedDescriptor(n.prototype,"setHoverRating",[v.action],Object.getOwnPropertyDescriptor(n.prototype,"setHoverRating"),n.prototype),babelHelpers.applyDecoratedDescriptor(n.prototype,"onSliderInput",[m.a],Object.getOwnPropertyDescriptor(n.prototype,"onSliderInput"),n.prototype),babelHelpers.applyDecoratedDescriptor(n.prototype,"onSliderChange",[m.a],Object.getOwnPropertyDescriptor(n.prototype,"onSliderChange"),n.prototype),babelHelpers.applyDecoratedDescriptor(n.prototype,"onFocusToggle",[m.a,v.action],Object.getOwnPropertyDescriptor(n.prototype,"onFocusToggle"),n.prototype),i=n))||i},"./src/udemy/js/base-components/rich-text-viewer.react-component.js":function(e,t,r){"use strict";r.d(t,"a",(function(){return y}));var o,s,a,i,n=r("./node_modules/autobind-decorator/lib/esm/index.js"),l=r("./node_modules/mobx-react/index.module.js"),c=r("./node_modules/prop-types/index.js"),p=r.n(c),u=r("./node_modules/react/index.js"),d=r.n(u),h=r("./src/udemy/js/utils/escape/safely-set-inner-html.js"),m=r("./src/udemy/js/utils/ud-render-react-components.js"),b=r("./src/udemy/js/base-components/code-block.react-component.js"),f=r("./src/udemy/js/base-components/open-full-size-image.react-component.js"),y=Object(l.d)((i=a=function(e){function t(){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).apply(this,arguments))}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"componentDidMount",value:function(){this.fixupHtml()}},{key:"componentDidUpdate",value:function(e){e.unsafeHTML!==this.props.unsafeHTML&&this.fixupHtml()}},{key:"fixupHtml",value:function(){this.wrapCodeBlocks(this.node),this.props.wrapImages&&this.wrapImages(this.node),this.props.openBlankTarget&&this.blankTargets(this.node)}},{key:"blankTargets",value:function(e){Array.from(e.querySelectorAll("a")).forEach((function(e){e.setAttribute("target","_blank"),e.setAttribute("rel","noopener noreferrer")}))}},{key:"wrapCodeBlocks",value:function(e){var t=this,r="ud-component--base-components--code-block";Array.from(e.querySelectorAll("pre.prettyprint")).forEach((function(e){var o=e.parentNode;if(!o.classList.contains(r)){var s=document.createElement("div");s.className=r,o.insertBefore(s,e),s.appendChild(e),Object(m.a)(s,".".concat(r),b.a,babelHelpers.objectSpread({},t.props.prettify,{value:e.textContent,className:e.className,showLineNumbers:e.classList.contains("linenums")}))}}))}},{key:"wrapImages",value:function(e){var t="ud-component--base-components--open-full-size-image";Array.from(e.querySelectorAll("img")).forEach((function(e){e.classList.add("hidden");var r=e.nextSibling;if(!(r&&r.classList&&r.classList.contains(t))){var o=document.createElement("span");o.className=t,e.parentNode.insertBefore(o,r),Object(m.a)(o,".".concat(t),f.a,{alt:e.getAttribute("alt")||"",src:e.getAttribute("src"),href:e.parentNode.getAttribute("href")})}}))}},{key:"setRefs",value:function(e){this.node=e}},{key:"render",value:function(){var e=this.props,t=(e.prettify,e.wrapImages,e.unsafeHTML),r=(e.openBlankTarget,babelHelpers.objectWithoutProperties(e,["prettify","wrapImages","unsafeHTML","openBlankTarget"])),o=t.replace(/src="https:\/\/udemy-images\.s3\.amazonaws\.com:443/g,'src="https://i.udemycdn.com');return d.a.createElement("div",Object.assign({ref:this.setRefs},Object(h.a)({descriptionOfCaller:"rich-text-viewer:html",html:o}),r))}}]),t}(u.Component),a.propTypes={unsafeHTML:p.a.string.isRequired,prettify:p.a.shape({preventClick:p.a.bool}),wrapImages:p.a.bool,openBlankTarget:p.a.bool},a.defaultProps={prettify:{},wrapImages:!1,openBlankTarget:!1},s=i,babelHelpers.applyDecoratedDescriptor(s.prototype,"setRefs",[n.a],Object.getOwnPropertyDescriptor(s.prototype,"setRefs"),s.prototype),o=s))||o},"./src/udemy/js/base-components/udlite/error-boundary/error-boundary.react-component.js":function(e,t,r){"use strict";r.d(t,"a",(function(){return d})),r.d(t,"b",(function(){return h}));var o,s,a,i,n=r("./node_modules/mobx/lib/mobx.module.js"),l=r("./node_modules/mobx-react/index.module.js"),c=r("./node_modules/react/index.js"),p=r.n(c),u=r("./src/udemy/js/utils/ud-raven.js"),d=Object(l.d)((s=function(e){function t(){var e,r;babelHelpers.classCallCheck(this,t);for(var o=arguments.length,s=new Array(o),n=0;n<o;n++)s[n]=arguments[n];return r=babelHelpers.possibleConstructorReturn(this,(e=babelHelpers.getPrototypeOf(t)).call.apply(e,[this].concat(s))),babelHelpers.initializerDefineProperty(r,"error",a,babelHelpers.assertThisInitialized(r)),babelHelpers.initializerDefineProperty(r,"info",i,babelHelpers.assertThisInitialized(r)),r}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"componentDidCatch",value:function(e,t){u.a.captureException(e),this.setErrorState(e,t)}},{key:"setErrorState",value:function(e,t){this.error=e,this.info=t}},{key:"render",value:function(){return this.error?null:this.props.children}}]),t}(c.Component),a=babelHelpers.applyDecoratedDescriptor(s.prototype,"error",[n.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),i=babelHelpers.applyDecoratedDescriptor(s.prototype,"info",[n.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),babelHelpers.applyDecoratedDescriptor(s.prototype,"setErrorState",[n.action],Object.getOwnPropertyDescriptor(s.prototype,"setErrorState"),s.prototype),o=s))||o,h=function(e){return function(t){return p.a.createElement(d,null,p.a.createElement(e,t))}}},"./src/udemy/js/base-components/udlite/router/page-tracking-route.react-component.js":function(e,t,r){"use strict";var o=r("./node_modules/prop-types/index.js"),s=r.n(o),a=r("./node_modules/react-router-dom/es/Route.js"),i=r("./src/udemy/js/event-tracking/events.js"),n=r("./src/udemy/js/event-tracking/tracker/helpers.js"),l=r("./src/udemy/js/event-tracking/tracker/tracker.js"),c=r("./src/udemy/js/utils/server-or-client.js"),p=r("./src/udemy/js/utils/ud-user-specific-tracking-params.js"),u=function(e){function t(){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).apply(this,arguments))}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"computeMatch",value:function(e,r){return c.a.isClient&&this.handlePageChange(e),babelHelpers.get(babelHelpers.getPrototypeOf(t.prototype),"computeMatch",this).call(this,e,r)}},{key:"handlePageChange",value:function(e){var t=!!p.a.spaTrackingActive;p.a.spaTrackingActive=!0;var r=l.a.context.pathname;window.location.pathname!==r&&(l.a.setPageContext({pageKey:e.pageKey,pageTrackingId:Object(n.b)()}),l.a.publishEvent(new i.c(t)))}},{key:"componentWillUnmount",value:function(){delete p.a.spaTrackingActive}}]),t}(a.a);u.propTypes=babelHelpers.objectSpread({pageKey:s.a.string.isRequired},a.a.propTypes),t.a=u},"./src/udemy/js/base-components/view-more/view-more-container.less":function(e,t,r){e.exports={"view-more":"view-more-container--view-more--25_En","view-more__collapse-btn":"view-more-container--view-more__collapse-btn--1bVN9","view-more__button-container--gradient-cart":"view-more-container--view-more__button-container--gradient-cart--3HJVY","view-more__button-container--gradient":"view-more-container--view-more__button-container--gradient--CmaZZ","view-more__button-container--gradient-clp":"view-more-container--view-more__button-container--gradient-clp--1ed1p","view-more__button-container--gradient-course-taking":"view-more-container--view-more__button-container--gradient-course-taking--21zk_","view-more__button-container--gradient-onboarding":"view-more-container--view-more__button-container--gradient-onboarding--2vkby","view-more__button-container--gradient-warning-alert":"view-more-container--view-more__button-container--gradient-warning-alert--2VEup","view-more__button-container--gradient-ufb-sidebar":"view-more-container--view-more__button-container--gradient-ufb-sidebar--12JMD","view-more__title":"view-more-container--view-more__title--3OY_y"}},"./src/udemy/js/base-components/view-more/view-more-container.react-component.js":function(e,t,r){"use strict";r.d(t,"a",(function(){return j}));var o,s,a,i,n=r("./node_modules/babel-plugin-react-css-modules/dist/browser/getClassName.js"),l=r.n(n),c=r("./node_modules/autobind-decorator/lib/esm/index.js"),p=r("./node_modules/classnames/index.js"),u=r.n(p),d=r("./node_modules/lodash-es/noop.js"),h=r("./node_modules/mobx-react/index.module.js"),m=r("./node_modules/prop-types/index.js"),b=r.n(m),f=r("./node_modules/react/index.js"),y=r.n(f),g=r("./src/udemy/js/base-components/button.react-component.js"),v=r("./src/udemy/js/utils/escape/safely-set-inner-html.js"),w=(r("./src/udemy/js/base-components/view-more/view-more-container.less"),{"./view-more-container.less":{"view-more":"view-more-container--view-more--25_En","view-more__collapse-btn":"view-more-container--view-more__collapse-btn--1bVN9","view-more__button-container--gradient-cart":"view-more-container--view-more__button-container--gradient-cart--3HJVY","font-text-xs":"view-more-container--font-text-xs--1Cyoy","view-more__button-container--gradient":"view-more-container--view-more__button-container--gradient--CmaZZ","view-more__button-container--gradient-clp":"view-more-container--view-more__button-container--gradient-clp--1ed1p","view-more__button-container--gradient-course-taking":"view-more-container--view-more__button-container--gradient-course-taking--21zk_","view-more__button-container--gradient-onboarding":"view-more-container--view-more__button-container--gradient-onboarding--2vkby","view-more__button-container--gradient-warning-alert":"view-more-container--view-more__button-container--gradient-warning-alert--2VEup","view-more__button-container--gradient-ufb-sidebar":"view-more-container--view-more__button-container--gradient-ufb-sidebar--12JMD","view-more__title":"view-more-container--view-more__title--3OY_y"}}),k=function(e){var t=e.title;return y.a.createElement("div",Object.assign({className:"view-more-container--view-more__title--3OY_y"},Object(v.a)({descriptionOfCaller:"view-more:title",html:t})))};k.propTypes={title:b.a.string.isRequired};var _=function(e){var t=e.onClickHandler,r=e.toggleText,o=e.dataPurpose;return y.a.createElement(g.default,{"data-purpose":o,bsStyle:"link",className:"view-more-container--view-more__collapse-btn--1bVN9",onClick:t},r)},E={title:b.a.string,moreButtonLabel:b.a.string,lessButtonLabel:b.a.string,className:b.a.string,style:b.a.object,dataPurpose:b.a.string,gradientStyling:b.a.string,onShowMore:b.a.func,onShowLess:b.a.func},j=Object(h.d)((i=a=function(e){function t(){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).apply(this,arguments))}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"onClick",value:function(e){this.props.viewMoreStore.expanded?this.props.onShowLess(e):this.props.onShowMore(e),this.props.viewMoreStore.toggleExpanded(e)}},{key:"render",value:function(){var e=this.props,t=e.title,r=e.moreButtonLabel,o=e.lessButtonLabel,s=e.className,a=e.style,i=e.dataPurpose,n=e.children,c=e.shouldShowMoreButton,p=e.viewMoreStore,d=!p.expanded&&c,h=p.expanded?o:r,m=u()(babelHelpers.defineProperty({"view-more__button-container--gradient":d},"view-more__button-container--gradient-".concat(this.props.gradientStyling),this.props.gradientStyling));return y.a.createElement("div",{className:(s?s+" ":"")+"view-more-container--view-more--25_En",style:a},t&&y.a.createElement(k,{title:t}),n,c&&y.a.createElement("div",{className:l()(m,w)},y.a.createElement(_,{dataPurpose:i,onClickHandler:this.onClick,toggleText:h})))}}]),t}(f.Component),a.commonPropTypes=E,a.propTypes=babelHelpers.objectSpread({},E,{shouldShowMoreButton:b.a.bool.isRequired,viewMoreStore:b.a.shape({expanded:b.a.bool.isRequired,toggleExpanded:b.a.func.isRequired}).isRequired}),a.defaultProps={lessButtonLabel:"- ".concat(gettext("See less")),moreButtonLabel:"+ ".concat(gettext("See more")),className:"",style:{},gradientStyling:"",onShowMore:d.a,onShowLess:d.a,title:""},s=i,babelHelpers.applyDecoratedDescriptor(s.prototype,"onClick",[c.a],Object.getOwnPropertyDescriptor(s.prototype,"onClick"),s.prototype),o=s))||o},"./src/udemy/js/base-components/view-more/view-more-max-height-container.react-component.js":function(e,t,r){"use strict";r.d(t,"a",(function(){return v}));var o,s,a,i,n,l=r("./node_modules/autobind-decorator/lib/esm/index.js"),c=r("./node_modules/mobx/lib/mobx.module.js"),p=r("./node_modules/mobx-react/index.module.js"),u=r("./node_modules/prop-types/index.js"),d=r.n(u),h=r("./node_modules/react/index.js"),m=r.n(h),b=r("./node_modules/react-measure/lib/react-measure.js"),f=r.n(b),y=r("./src/udemy/js/base-components/view-more/view-more-container.react-component.js"),g=r("./src/udemy/js/base-components/view-more/view-more.mobx-store.js"),v=Object(p.d)((n=i=function(e){function t(e){var r;return babelHelpers.classCallCheck(this,t),r=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this,e)),babelHelpers.initializerDefineProperty(r,"contentDimensions",a,babelHelpers.assertThisInitialized(r)),r.viewMoreStore=new g.a,r}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"setContentDimensions",value:function(e){this.contentDimensions=e}},{key:"render",value:function(){var e=this.props,t=e.children,r=e.collapsedHeight,o=babelHelpers.objectWithoutProperties(e,["children","collapsedHeight"]),s=Boolean(this.contentDimensions&&this.contentDimensions.height>r),a=!this.viewMoreStore.expanded&&s&&0!==r?{height:"".concat(r,"px"),overflow:"hidden"}:{};return m.a.createElement(y.a,Object.assign({shouldShowMoreButton:s,viewMoreStore:this.viewMoreStore},o),m.a.createElement("div",{style:a},m.a.createElement(f.a,{onMeasure:this.setContentDimensions},m.a.createElement("div",null,t))))}}]),t}(h.Component),i.propTypes=babelHelpers.objectSpread({},y.a.commonPropTypes,{collapsedHeight:d.a.number.isRequired}),i.defaultProps=babelHelpers.objectSpread({},y.a.defaultProps),s=n,a=babelHelpers.applyDecoratedDescriptor(s.prototype,"contentDimensions",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),babelHelpers.applyDecoratedDescriptor(s.prototype,"setContentDimensions",[l.a,c.action],Object.getOwnPropertyDescriptor(s.prototype,"setContentDimensions"),s.prototype),o=s))||o},"./src/udemy/js/base-components/view-more/view-more.mobx-store.js":function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));var o,s,a=r("./node_modules/mobx/lib/mobx.module.js"),i=(o=function(){function e(){babelHelpers.classCallCheck(this,e),babelHelpers.initializerDefineProperty(this,"expanded",s,this)}return babelHelpers.createClass(e,[{key:"toggleExpanded",value:function(){this.expanded=!this.expanded}}]),e}(),s=babelHelpers.applyDecoratedDescriptor(o.prototype,"expanded",[a.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),babelHelpers.applyDecoratedDescriptor(o.prototype,"toggleExpanded",[a.action],Object.getOwnPropertyDescriptor(o.prototype,"toggleExpanded"),o.prototype),o)},"./src/udemy/js/browse/components/my-learning-unit/subscribed-learning-path-card.less":function(e,t,r){e.exports={"learning-path-card-container":"subscribed-learning-path-card--learning-path-card-container--2b4_j","card-wrapper":"subscribed-learning-path-card--card-wrapper--1MfiT",card:"subscribed-learning-path-card--card--24Vfz","card-menu":"subscribed-learning-path-card--card-menu--1m892","card-content":"subscribed-learning-path-card--card-content--3_Sr_","path-title":"subscribed-learning-path-card--path-title--1f9nk","assignment-info":"subscribed-learning-path-card--assignment-info--3QNo6","assigned-badge":"subscribed-learning-path-card--assigned-badge--2kxAw","calendar-icon":"subscribed-learning-path-card--calendar-icon--a5yky","due-date":"subscribed-learning-path-card--due-date--3tyqW","path-status-container":"subscribed-learning-path-card--path-status-container--1k5mX","path-callout":"subscribed-learning-path-card--path-callout--6kjtL","favicon-container":"subscribed-learning-path-card--favicon-container--4n5jJ","learning-path-progress":"subscribed-learning-path-card--learning-path-progress--NOy-N"}},"./src/udemy/js/browse/components/my-learning-unit/subscribed-learning-path-card.react-component.js":function(e,t,r){"use strict";r.d(t,"a",(function(){return E}));var o,s,a,i=r("./node_modules/autobind-decorator/lib/esm/index.js"),n=r("./node_modules/mobx/lib/mobx.module.js"),l=r("./node_modules/mobx-react/index.module.js"),c=r("./node_modules/prop-types/index.js"),p=r.n(c),u=r("./node_modules/react/index.js"),d=r.n(u),h=r("./src/udemy/js/base-components/icon.react-component.js"),m=r("./src/udemy/js/base-components/label.react-component.js"),b=r("./src/udemy/js/base-components/progress-bar.react-component.js"),f=r("./src/udemy/js/base-components/udlite/brand/ufb-only.react-component.js"),y=r("./src/udemy/js/browse/components/ufb-favicon-image/index.js"),g=r("./src/udemy/js/learning-path/context-menu/learning-path-context-menu.react-component.js"),v=r("./src/udemy/js/learning-path/learning-path.mobx-model.js"),w=r("./src/udemy/js/utils/ud-link.js"),k=r("./src/udemy/js/utils/ud-moment.js"),_=(r("./src/udemy/js/browse/components/my-learning-unit/subscribed-learning-path-card.less"),function(e){var t=e.dueDate,r=Object(k.b)(t,"YYYY-MM-DD").format("ll");return d.a.createElement(d.a.Fragment,null,d.a.createElement(h.a,{className:"subscribed-learning-path-card--calendar-icon--a5yky",glyph:"calendar-o"}),d.a.createElement("span",{"data-purpose":"due-date",className:"subscribed-learning-path-card--due-date--3tyqW"},interpolate(gettext("Due %(dueDateText)s"),{dueDateText:r},!0)))});_.propTypes={dueDate:p.a.string.isRequired};var E=(a=s=function(e){function t(e){var r;babelHelpers.classCallCheck(this,t),(r=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this,e))).learningPathModel=new v.a(e.learningPath);var o=r.learningPathModel,s=o.canUserEdit,a=o.isStudent,i=o.isShareToSlackEnabled;return r.contextMenuItems=n.observable.map({Edit:{visible:s,enabled:!0},Assign:{visible:!a,enabled:!0},ShareToSlack:{visible:i,enabled:!0},Duplicate:{visible:!0,enabled:!0},ViewActivity:{visible:!a,enabled:!0}}),r}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"getDefaultOrCompletionText",value:function(){var e=this.props.learningPath;if(!e.completionRatio||0===e.completionRatio)return gettext("Get started");var t=gettext("%(completedSteps)s of %(totalSteps)s steps complete");return interpolate(t,{completedSteps:e.completed_steps,totalSteps:e.total_steps},!0)}},{key:"handleEditClick",value:function(){this.props.window.location.href=this.learningPathModel.editUrl}},{key:"render",value:function(){var e=this.props,t=e.learningPath,r=e.className,o=e.pageType;return d.a.createElement("div",{className:"subscribed-learning-path-card--learning-path-card-container--2b4_j"},d.a.createElement("div",{className:(r?r+" ":"")+"subscribed-learning-path-card--card-wrapper--1MfiT","data-purpose":"path-card"},d.a.createElement("div",{className:"subscribed-learning-path-card--card-menu--1m892"},d.a.createElement(l.b,{actionCallbacks:{handleEditClick:this.handleEditClick}},d.a.createElement(g.a,{itemConfig:this.contextMenuItems,learningPath:this.learningPathModel,context:o,dropup:!1}))),d.a.createElement("a",{className:"subscribed-learning-path-card--card--24Vfz",href:this.learningPathUrl,role:"presentation","data-purpose":"path-link"},d.a.createElement(f.a,null,d.a.createElement("div",{className:"subscribed-learning-path-card--favicon-container--4n5jJ","data-purpose":"ufb-favicon"},d.a.createElement(y.a,null))),d.a.createElement("div",{className:"subscribed-learning-path-card--card-content--3_Sr_"},d.a.createElement("div",{"data-purpose":"path-title",className:"subscribed-learning-path-card--path-title--1f9nk"},t.title),d.a.createElement("div",null,t.assignment&&d.a.createElement("div",{className:"subscribed-learning-path-card--assignment-info--3QNo6"},d.a.createElement(m.a,{className:"subscribed-learning-path-card--assigned-badge--2kxAw","data-purpose":"assigned-badge"},pgettext("e.g. A course has been *assigned* to you","Assigned")),t.assignment.due_date&&d.a.createElement(_,{dueDate:t.assignment.due_date})),d.a.createElement("div",{className:"subscribed-learning-path-card--path-status-container--1k5mX"},d.a.createElement("span",{className:"subscribed-learning-path-card--path-callout--6kjtL"},gettext("Learning Path")),d.a.createElement("span",null,this.getDefaultOrCompletionText()))))),d.a.createElement("div",{className:"subscribed-learning-path-card--learning-path-progress--NOy-N"},d.a.createElement(b.a,{now:t.completionRatio,bsSize:"xsmall",inline:!0}))))}},{key:"learningPathUrl",get:function(){return w.a.toLearningPath(this.props.learningPath.id)}}]),t}(u.Component),s.propTypes={className:p.a.string,pageType:p.a.string.isRequired,learningPath:p.a.object.isRequired,isMobileViewportSize:p.a.bool,window:p.a.object},s.defaultProps={isMobileViewportSize:!1,className:"",window:window},o=a,babelHelpers.applyDecoratedDescriptor(o.prototype,"handleEditClick",[i.a],Object.getOwnPropertyDescriptor(o.prototype,"handleEditClick"),o.prototype),o)},"./src/udemy/js/caption/caption.mobx-model.js":function(e,t,r){"use strict";r.d(t,"b",(function(){return g})),r.d(t,"a",(function(){return v}));var o,s,a,i,n,l=r("./node_modules/autobind-decorator/lib/esm/index.js"),c=r("./node_modules/axios/index.js"),p=r.n(c),u=r("./node_modules/mobx/lib/mobx.module.js"),d=r("./src/udemy/js/utils/ud-api-stat.js"),h=r("./src/udemy/js/utils/ud-me.js"),m=r("./src/udemy/js/utils/ud-raven.js"),b=r("./src/udemy/js/caption/constants.js"),f=r("./src/udemy/js/caption/cue.mobx-model.js"),y=r("./src/udemy/js/caption/vtt-parser.js"),g=(o=function(){function e(t){var r=this;babelHelpers.classCallCheck(this,e),babelHelpers.initializerDefineProperty(this,"_cues",s,this),babelHelpers.initializerDefineProperty(this,"isLoaded",a,this),babelHelpers.initializerDefineProperty(this,"error",i,this),babelHelpers.initializerDefineProperty(this,"status",n,this),this.errorData=void 0,this.id=t.id,this.locale=t.locale_id||t.locale&&t.locale.locale,this.language=this.locale?this.locale.slice(0,2):void 0,this.source=t.source,this.title=t.title,this.url=t.url,this.confidenceThreshold=t.confidence_threshold,this.assetId=t.asset_id,this.isEdit=t.is_edit,this.isEditOfAutoCaption=t.is_edit_of_autocaption,this.isTranslation=t.is_translation,this.modified=t.modified,this.retries=0,this.setStatus(t.status),this._correctedCueIds=(t.corrected_cue_ids||[]).map((function(e){return parseInt(e,10)})),Object(u.when)((function(){return r.error}),(function(){r.error.errorType===b.i.PARSING&&m.a.captureException(new Error("Caption failed when ".concat(r.error.errorType))),d.c.increment(b.j.ERROR,r.error),d.c.trackPageEvent(d.a.PLAYER_TIMING_EVENTS,d.b.COURSE_TAKING,{key:b.e.ERROR,assetId:r.assetId,userAgent:window.navigator&&window.navigator.userAgent,extra:babelHelpers.objectSpread({captionId:r.id,data:r.errorData},r.error)})}))}return babelHelpers.createClass(e,[{key:"setStatus",value:function(e){this.status=e}},{key:"constructCue",value:function(e){return new f.b(e)}},{key:"loadFromSource",value:function(){var e=this,t=0;return p.a.get(this.url).then((function(r){Object(y.c)(r.data,Object(u.action)((function(r){r.id=t,r.isCorrect=e._correctedCueIds.includes(t),e._cues.push(e.constructCue(r)),t++})),Object(u.action)((function(){e.isLoaded=!0,d.c.increment(b.j.LOADED,{language:e.language,userCountry:h.a.country,retries:e.retries})})),e._handleParsingError)})).catch(this._handleLoadingError)}},{key:"_handleParsingError",value:function(e){this.error={errorType:b.i.PARSING,message:e.message}}},{key:"_shouldRetryLoading",value:function(e){return this.retries<b.f&&(e.message===b.k||b.l.includes(e.status))}},{key:"_retryLoading",value:function(){var e=1e3*Math.pow(2,this.retries);this.retries++,setTimeout(this.loadFromSource,e)}},{key:"_handleLoadingError",value:function(e){var t={status:e.response&&e.response.status,message:e.message,userCountry:h.a.country,retries:this.retries};this._shouldRetryLoading(t)?(t.errorType=b.i.RETRY,this.error=t,this._retryLoading()):(t.errorType=b.i.LOADING,this.error=t,this.errorData=e.response&&e.response.data)}},{key:"cues",get:function(){return this.isLoaded?this._cues:[]}},{key:"asString",get:function(){return["WEBVTT",this.cues.map((function(e){var t=Object(f.a)(e.startTime,3),r=Object(f.a)(e.endTime,3);return[e.id,"".concat(t," --\x3e ").concat(r),e.text].join("\n")})).join("\n\n")].join("\n\n")}},{key:"correctedCueIds",get:function(){return this.cues.reduce((function(e,t){return t.isCorrect&&e.push(t.id),e}),[])}}]),e}(),s=babelHelpers.applyDecoratedDescriptor(o.prototype,"_cues",[u.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),a=babelHelpers.applyDecoratedDescriptor(o.prototype,"isLoaded",[u.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),i=babelHelpers.applyDecoratedDescriptor(o.prototype,"error",[u.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),n=babelHelpers.applyDecoratedDescriptor(o.prototype,"status",[u.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),babelHelpers.applyDecoratedDescriptor(o.prototype,"setStatus",[u.action],Object.getOwnPropertyDescriptor(o.prototype,"setStatus"),o.prototype),babelHelpers.applyDecoratedDescriptor(o.prototype,"loadFromSource",[l.a],Object.getOwnPropertyDescriptor(o.prototype,"loadFromSource"),o.prototype),babelHelpers.applyDecoratedDescriptor(o.prototype,"_handleParsingError",[l.a,u.action],Object.getOwnPropertyDescriptor(o.prototype,"_handleParsingError"),o.prototype),babelHelpers.applyDecoratedDescriptor(o.prototype,"_retryLoading",[l.a,u.action],Object.getOwnPropertyDescriptor(o.prototype,"_retryLoading"),o.prototype),babelHelpers.applyDecoratedDescriptor(o.prototype,"_handleLoadingError",[l.a,u.action],Object.getOwnPropertyDescriptor(o.prototype,"_handleLoadingError"),o.prototype),babelHelpers.applyDecoratedDescriptor(o.prototype,"cues",[u.computed],Object.getOwnPropertyDescriptor(o.prototype,"cues"),o.prototype),babelHelpers.applyDecoratedDescriptor(o.prototype,"asString",[u.computed],Object.getOwnPropertyDescriptor(o.prototype,"asString"),o.prototype),babelHelpers.applyDecoratedDescriptor(o.prototype,"correctedCueIds",[u.computed],Object.getOwnPropertyDescriptor(o.prototype,"correctedCueIds"),o.prototype),o);function v(e,t){var r=new Blob([e.asString],{type:"text/vtt"});return t&&(r.name=t),r}},"./src/udemy/js/caption/constants.js":function(e,t,r){"use strict";r.d(t,"h",(function(){return o})),r.d(t,"g",(function(){return s})),r.d(t,"a",(function(){return a})),r.d(t,"b",(function(){return i})),r.d(t,"c",(function(){return n})),r.d(t,"d",(function(){return l})),r.d(t,"i",(function(){return c})),r.d(t,"j",(function(){return p})),r.d(t,"e",(function(){return u})),r.d(t,"f",(function(){return d})),r.d(t,"k",(function(){return h})),r.d(t,"l",(function(){return m}));var o=Object.freeze({PUBLISHED:"caption",DRAFT:"draft-caption",CROWDSOURCED:"crowdsourced-caption"}),s=Object.freeze({PROCESSING:-3,FAILED:-1,UNPROCESSED:0,SUCCESS:1,TRANSCODED:2,DELETING:42}),a=Object.freeze({INITIAL:20,UPLOADING:70,FINAL:10}),i=Object.freeze({VALIDATION:"VALIDATION",UPLOAD:"UPLOAD",NAME_COLLISION:"NAME_COLLISION"}),n=Object.freeze(["vtt"]),l=Object.freeze(n.map((function(e){return".".concat(e)}))),c=Object.freeze({LOADING:"loading",PARSING:"parsing",RETRY:"retry"}),p=Object.freeze({ERROR:"caption_model.error",LOADED:"caption_model.loaded"}),u=Object.freeze({ERROR:"caption_error"}),d=4,h="Network Error",m=[503,504]},"./src/udemy/js/caption/cue.mobx-model.js":function(e,t,r){"use strict";var o=r("./node_modules/lodash-es/toString.js"),s=r("./node_modules/lodash-es/_basePropertyOf.js"),a=Object(s.a)({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),i=/&(?:amp|lt|gt|quot|#39);/g,n=RegExp(i.source);var l,c,p,u=function(e){return(e=Object(o.a)(e))&&n.test(e)?e.replace(i,a):e},d=r("./node_modules/mobx/lib/mobx.module.js"),h=r("./src/udemy/js/utils/ud-utils.js");r.d(t,"b",(function(){return m})),r.d(t,"a",(function(){return b}));var m=(l=function(){function e(t){babelHelpers.classCallCheck(this,e),babelHelpers.initializerDefineProperty(this,"text",c,this),babelHelpers.initializerDefineProperty(this,"isCorrect",p,this),this.id=parseInt(t.id,10),this.startTime=t.startTime,this.endTime=t.endTime,this.setObservablesFromAPIData(t)}return babelHelpers.createClass(e,[{key:"setObservablesFromAPIData",value:function(e){this.text=e.text,this.isCorrect=e.isCorrect}},{key:"setText",value:function(e){this.text=e}},{key:"markCorrect",value:function(e){this.isCorrect=e}},{key:"displayText",get:function(){return u(h.a.trimTags(this.text))}}]),e}(),c=babelHelpers.applyDecoratedDescriptor(l.prototype,"text",[d.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),p=babelHelpers.applyDecoratedDescriptor(l.prototype,"isCorrect",[d.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),babelHelpers.applyDecoratedDescriptor(l.prototype,"setObservablesFromAPIData",[d.action],Object.getOwnPropertyDescriptor(l.prototype,"setObservablesFromAPIData"),l.prototype),babelHelpers.applyDecoratedDescriptor(l.prototype,"setText",[d.action],Object.getOwnPropertyDescriptor(l.prototype,"setText"),l.prototype),babelHelpers.applyDecoratedDescriptor(l.prototype,"markCorrect",[d.action],Object.getOwnPropertyDescriptor(l.prototype,"markCorrect"),l.prototype),babelHelpers.applyDecoratedDescriptor(l.prototype,"displayText",[d.computed],Object.getOwnPropertyDescriptor(l.prototype,"displayText"),l.prototype),l);function b(e,t){var r=(e%1).toFixed(t).substring(2);e=Math.trunc(e);var o=Math.floor(e/3600),s=Math.floor(e/60)-60*o,a=e-(3600*o+60*s);function i(e){var t="".concat(e);return"00".substring(0,2-t.length)+t}var n=[i(s),i(a)];return o>0&&n.unshift(i(o)),"".concat(n.join(":")).concat(t?".".concat(r):"")}},"./src/udemy/js/caption/vtt-parser.js":function(e,t,r){"use strict";r.d(t,"c",(function(){return s})),r.d(t,"a",(function(){return a})),r.d(t,"b",(function(){return i}));var o=r("./node_modules/videojs-vtt.js/lib/browser-index.js");function s(e,t,r,s){var a=new o.WebVTT.Parser(null,o,o.WebVTT.StringDecoder());a.oncue=t,a.onflush=r,a.onparsingerror=s,a.parse(e),a.flush()}function a(e){return!e.trim().length||!o.WebVTT.convertCueToDOMTree(window,e).textContent.trim().length}function i(e){return/-->/.test(e)}},"./src/udemy/js/course-auto-enroll/constants.js":function(e,t,r){"use strict";r.d(t,"a",(function(){return o})),r.d(t,"b",(function(){return s}));var o="/users/me/enrollments/",s=96},"./src/udemy/js/course-reviews/common/alt-leave-rating.mobx-store.js":function(e,t,r){"use strict";r.d(t,"a",(function(){return f}));var o,s,a,i,n,l=r("./node_modules/autobind-decorator/lib/esm/index.js"),c=r("./node_modules/lodash-es/noop.js"),p=r("./node_modules/mobx/lib/mobx.module.js"),u=r("./src/udemy/js/utils/ud-me.js"),d=r("./src/udemy/js/utils/ud-utils.js"),h=r("./src/udemy/js/browse/lib/utils.js"),m=r("./src/udemy/js/course-reviews/review-editor/review-editor.mobx-store.js"),b=r("./src/udemy/js/course-reviews/common/review-backend.js"),f=(o=function(){function e(t,r,o,l,u){var d=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,h=arguments.length>6&&void 0!==arguments[6]&&arguments[6],m=arguments.length>7&&void 0!==arguments[7]&&arguments[7],f=arguments.length>8&&void 0!==arguments[8]&&arguments[8],y=arguments.length>9&&void 0!==arguments[9]?arguments[9]:Object(b.a)(),g=arguments.length>10&&void 0!==arguments[10]?arguments[10]:c.a,v=arguments.length>11&&void 0!==arguments[11]?arguments[11]:c.a,w=arguments.length>12&&void 0!==arguments[12]?arguments[12]:c.a,k=!(arguments.length>13&&void 0!==arguments[13])||arguments[13];babelHelpers.classCallCheck(this,e),babelHelpers.initializerDefineProperty(this,"showEditPopup",s,this),babelHelpers.initializerDefineProperty(this,"isFocused",a,this),babelHelpers.initializerDefineProperty(this,"showReviewEditor",i,this),babelHelpers.initializerDefineProperty(this,"reviewEditorStore",n,this),Object(p.extendObservable)(this,{course:t,review:r,sourcePage:o,isInstructor:m,emptyReviewText:l,existingReviewText:u,hoverStateText:d,autoOpen:f,showInitiatorWhenReviewExists:k}),this.backend=y.forCourse(t.id),this.initReviewEditor(r),this.onSetReview=g,this.onStartReviewCallback=v,this.onFinishReviewCallback=w,h&&!m&&this._loadReview()}return babelHelpers.createClass(e,[{key:"_loadReview",value:function(){var e=this;return this.backend.get({user:u.a.id}).then((function(t){return e.setReview(t,!0),e.autoOpen&&e.review&&e.onShowEditPopup(),e.review}))}},{key:"onStartReview",value:function(){this.review?this.onShowEditPopup():this.onShowReviewEditor(),this.onStartReviewCallback(!0)}},{key:"initReviewEditor",value:function(e){this.reviewEditorStore=new m.b(e?e.id:null,e?e.rating:null,e?e.content:null,this.sourcePage,Object(h.d)(this.course),this.setReview,this.sourcePage,null)}},{key:"reviewPageUrl",value:function(e){var t=e,r="dh";return"my_courses"===this.sourcePage&&(t+=this.course.published_title,r="mc"),(t+="/reviews/?location=".concat(r)).replace(/\/+/g,"/")}},{key:"setIsFocused",value:function(e){this.isFocused=e}},{key:"setReview",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t&&this.initReviewEditor(e),this.review=e,this.onSetReview(e)}},{key:"setCourse",value:function(e){this.course=e}},{key:"triggerReviewEditor",value:function(){this.initReviewEditor(this.review),this.onHideEditPopup(),this.onShowReviewEditor()}},{key:"onShowEditPopup",value:function(){this.showEditPopup=!0}},{key:"onHideEditPopup",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];e&&this.onFinishReviewCallback(this.review),this.showEditPopup=!1}},{key:"onShowReviewEditor",value:function(){this.showReviewEditor=!0}},{key:"onHideReviewEditor",value:function(){this.onFinishReviewCallback(this.review),this.showReviewEditor=!1}},{key:"onDeleteReview",value:function(){var e=this;return this.backend.delete(this.review.id).then((function(){return e.setReview(null,!0),e.review})).catch((function(){d.a.Feedback.fromText(gettext("An error occurred while deleting your review. Please try again."),d.a.MessageType.error)})).finally((function(){return e.onHideEditPopup(!0)}))}},{key:"showInitiator",get:function(){return!this.review||this.showInitiatorWhenReviewExists}},{key:"helperText",get:function(){return this.review?this.isFocused&&this.hoverStateText||this.existingReviewText:this.emptyReviewText}}]),e}(),s=babelHelpers.applyDecoratedDescriptor(o.prototype,"showEditPopup",[p.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),a=babelHelpers.applyDecoratedDescriptor(o.prototype,"isFocused",[p.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),i=babelHelpers.applyDecoratedDescriptor(o.prototype,"showReviewEditor",[p.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),n=babelHelpers.applyDecoratedDescriptor(o.prototype,"reviewEditorStore",[p.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),babelHelpers.applyDecoratedDescriptor(o.prototype,"showInitiator",[p.computed],Object.getOwnPropertyDescriptor(o.prototype,"showInitiator"),o.prototype),babelHelpers.applyDecoratedDescriptor(o.prototype,"onStartReview",[l.a,p.action],Object.getOwnPropertyDescriptor(o.prototype,"onStartReview"),o.prototype),babelHelpers.applyDecoratedDescriptor(o.prototype,"initReviewEditor",[l.a,p.action],Object.getOwnPropertyDescriptor(o.prototype,"initReviewEditor"),o.prototype),babelHelpers.applyDecoratedDescriptor(o.prototype,"helperText",[p.computed],Object.getOwnPropertyDescriptor(o.prototype,"helperText"),o.prototype),babelHelpers.applyDecoratedDescriptor(o.prototype,"reviewPageUrl",[l.a],Object.getOwnPropertyDescriptor(o.prototype,"reviewPageUrl"),o.prototype),babelHelpers.applyDecoratedDescriptor(o.prototype,"setIsFocused",[l.a,p.action],Object.getOwnPropertyDescriptor(o.prototype,"setIsFocused"),o.prototype),babelHelpers.applyDecoratedDescriptor(o.prototype,"setReview",[l.a,p.action],Object.getOwnPropertyDescriptor(o.prototype,"setReview"),o.prototype),babelHelpers.applyDecoratedDescriptor(o.prototype,"setCourse",[l.a,p.action],Object.getOwnPropertyDescriptor(o.prototype,"setCourse"),o.prototype),babelHelpers.applyDecoratedDescriptor(o.prototype,"triggerReviewEditor",[l.a],Object.getOwnPropertyDescriptor(o.prototype,"triggerReviewEditor"),o.prototype),babelHelpers.applyDecoratedDescriptor(o.prototype,"onShowEditPopup",[l.a,p.action],Object.getOwnPropertyDescriptor(o.prototype,"onShowEditPopup"),o.prototype),babelHelpers.applyDecoratedDescriptor(o.prototype,"onHideEditPopup",[l.a,p.action],Object.getOwnPropertyDescriptor(o.prototype,"onHideEditPopup"),o.prototype),babelHelpers.applyDecoratedDescriptor(o.prototype,"onShowReviewEditor",[l.a,p.action],Object.getOwnPropertyDescriptor(o.prototype,"onShowReviewEditor"),o.prototype),babelHelpers.applyDecoratedDescriptor(o.prototype,"onHideReviewEditor",[l.a,p.action],Object.getOwnPropertyDescriptor(o.prototype,"onHideReviewEditor"),o.prototype),babelHelpers.applyDecoratedDescriptor(o.prototype,"onDeleteReview",[l.a],Object.getOwnPropertyDescriptor(o.prototype,"onDeleteReview"),o.prototype),o)},"./src/udemy/js/course-reviews/common/alt-leave-rating.react-component.js":function(e,t,r){"use strict";var o,s,a,i,n,l,c,p,u,d=r("./node_modules/babel-plugin-react-css-modules/dist/browser/getClassName.js"),h=r.n(d),m=r("./node_modules/autobind-decorator/lib/esm/index.js"),b=r("./node_modules/classnames/index.js"),f=r.n(b),y=r("./node_modules/lodash-es/noop.js"),g=r("./node_modules/mobx-react/index.module.js"),v=r("./node_modules/prop-types/index.js"),w=r.n(v),k=r("./node_modules/react/index.js"),_=r.n(k),E=r("./src/udemy/js/base-components/icon.react-component.js"),j=r("./src/udemy/js/base-components/modal.react-component.js"),D=r("./src/udemy/js/base-components/star-rating.react-component.js"),S=r("./src/udemy/js/utils/a11y.js"),C=r("./src/udemy/js/course-reviews/review-editor/review-editor.react-component.js"),O=r("./node_modules/mobx/lib/mobx.module.js"),P=r("./src/udemy/js/base-components/button-toolbar.react-component.js"),T=r("./src/udemy/js/base-components/button.react-component.js"),x=(r("./src/udemy/js/course-reviews/common/review-popup.less"),r("./src/udemy/js/course-reviews/display/individual-review.react-component.js")),R=Object(g.d)((n=i=function(e){function t(){var e,r;babelHelpers.classCallCheck(this,t);for(var o=arguments.length,s=new Array(o),i=0;i<o;i++)s[i]=arguments[i];return r=babelHelpers.possibleConstructorReturn(this,(e=babelHelpers.getPrototypeOf(t)).call.apply(e,[this].concat(s))),babelHelpers.initializerDefineProperty(r,"isDeleteAttempted",a,babelHelpers.assertThisInitialized(r)),r}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){e.show!=this.props.show&&e.show&&this.onCancelDeleteClicked()}},{key:"onDeleteClicked",value:function(){this.isDeleteAttempted=!0,this.props.onLogAction("view-popup-delete-confirmation")}},{key:"onCancelDeleteClicked",value:function(){this.isDeleteAttempted=!1,this.props.onLogAction("view-popup-review-summary")}},{key:"renderDeleteConfirmation",value:function(){return _.a.createElement("div",null,_.a.createElement("p",{className:"review-popup--confirmation-text--1p38u"},gettext("Are you sure you want to delete your review?")),_.a.createElement(P.a,{className:"review-popup--button-toolbar--1x99T"},_.a.createElement(T.default,{"data-purpose":"cancel-delete-button",onClick:this.onCancelDeleteClicked},gettext("Cancel")),_.a.createElement(T.default,{"data-purpose":"delete-button-confirm",bsStyle:"danger",onClick:this.props.onDeleteConfirmed},gettext("Yes, Delete My Review"))))}},{key:"renderDialog",value:function(){return _.a.createElement("div",null,_.a.createElement(x.a,{className:"review-popup--review-container--2HhTL",review:this.props.review,previewMode:!0}),_.a.createElement(P.a,{className:"review-popup--button-toolbar--1x99T"},_.a.createElement(T.default,{"data-purpose":"delete-button",bsStyle:"danger",onClick:this.onDeleteClicked},gettext("Delete")),_.a.createElement(T.default,{"data-purpose":"edit-button",bsStyle:"primary",onClick:this.props.onEditClicked},gettext("Edit Review"))))}},{key:"render",value:function(){if(!this.props.show)return null;var e=this.isDeleteAttempted?this.renderDeleteConfirmation():this.renderDialog(),t=this.isDeleteAttempted?gettext("Delete Your Review?"):gettext("Your Review");return _.a.createElement(j.a,{show:this.props.show,onHide:this.props.onHide,className:"review-popup--review-popup__modal--2Jwus"},_.a.createElement(j.a.Header,{closeButton:!0},_.a.createElement(j.a.Title,null,t)),_.a.createElement(j.a.Body,null,e))}}]),t}(k.Component),i.propTypes={show:w.a.bool,onDeleteConfirmed:w.a.func,onEditClicked:w.a.func,onHide:w.a.func,onLogAction:w.a.func,review:w.a.object.isRequired},i.defaultProps={show:!0,onDeleteConfirmed:y.a,onEditClicked:y.a,onHide:y.a,onLogAction:y.a},s=n,a=babelHelpers.applyDecoratedDescriptor(s.prototype,"isDeleteAttempted",[O.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),babelHelpers.applyDecoratedDescriptor(s.prototype,"onDeleteClicked",[m.a,O.action],Object.getOwnPropertyDescriptor(s.prototype,"onDeleteClicked"),s.prototype),babelHelpers.applyDecoratedDescriptor(s.prototype,"onCancelDeleteClicked",[m.a,O.action],Object.getOwnPropertyDescriptor(s.prototype,"onCancelDeleteClicked"),s.prototype),o=s))||o;r("./src/udemy/js/course-reviews/common/leave-rating.less");r.d(t,"a",(function(){return L}));var H={"./leave-rating.less":{"review-editor__modal":"leave-rating--review-editor__modal--1ARWx","review-container":"leave-rating--review-container--RqDHa","review-container--vertical":"leave-rating--review-container--vertical--120k4","review-container--horizontal":"leave-rating--review-container--horizontal--3WGfJ","helper-text":"leave-rating--helper-text--21RPx","num-reviews-text":"leave-rating--num-reviews-text--6a_Jk","single-star":"leave-rating--single-star--1QqJX","simple-review-container":"leave-rating--simple-review-container--6B50X"}},A=function(e){var t=e.store,r="/instructor/reviews/?course=".concat(t.course.id);return _.a.createElement("div",null,t.course.rating?_.a.createElement(D.b,{rating:t.course.rating||0,size:"small","data-purpose":"star-rating-ins"}):null,t.course.numReviews>0?_.a.createElement("a",{href:r,className:"leave-rating--num-reviews-text--6a_Jk","data-purpose":"reviews-link"},ninterpolate("%s review","%s reviews",t.course.numReviews)):null)};A.propTypes={store:w.a.object.isRequired};var I=Object(g.d)((function(e){var t,r=e.store,o=e.layout,s=e.onRatingClick,a=e.onMouseEnter,i=e.onMouseLeave,n=e.numStars,l={"review-container--vertical":void 0===n&&"vertical"===o,"review-container--horizontal":void 0===n&&"horizontal"===o,"simple-review-container":1===n},c=1===n;return t=0===n?null:c?_.a.createElement(E.a,{glyph:"star",size:"small",className:"leave-rating--single-star--1QqJX"}):_.a.createElement(D.b,{rating:r.review?r.review.rating:0,size:"small","data-purpose":"star-rating"}),_.a.createElement("div",{onMouseEnter:a,onMouseLeave:i,onClick:s,onKeyDown:Object(S.d)(s),role:"button",tabIndex:"0","data-purpose":"review-button",className:h()(f()(l),H)},t,_.a.createElement("span",{className:(f()({"font-text-sm":c})?f()({"font-text-sm":c})+" ":"")+"leave-rating--helper-text--21RPx","data-purpose":"helper-text"},r.helperText))}));I.propTypes={store:w.a.object.isRequired,layout:w.a.oneOf(["horizontal","vertical"]).isRequired,onRatingClick:w.a.func.isRequired,onMouseEnter:w.a.func.isRequired,onMouseLeave:w.a.func.isRequired};var L=Object(g.d)((u=p=function(e){function t(){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).apply(this,arguments))}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"onMouseEnter",value:function(){this.props.store.setIsFocused(!0)}},{key:"onMouseLeave",value:function(){this.props.store.setIsFocused(!1)}},{key:"onRatingClick",value:function(e){this.props.store.onStartReview(),e.preventDefault()}},{key:"onEditClick",value:function(){var e=this.props.store;e.initReviewEditor(e.review),e.onHideEditPopup(!1),e.onShowReviewEditor()}},{key:"onDeleteReview",value:function(){this.props.store.onDeleteReview(),this.props.onDeleteReview()}},{key:"renderReviewEditor",value:function(){var e=this.props.store;return _.a.createElement(j.a,{show:e.showReviewEditor,onHide:e.onHideReviewEditor,className:"leave-rating--review-editor__modal--1ARWx"},_.a.createElement(j.a.Body,null,_.a.createElement(C.a,{store:e.reviewEditorStore,onCancelReview:e.onHideReviewEditor})))}},{key:"render",value:function(){var e=this.props,t=e.store,r=e.layout,o=e.numStars;return _.a.createElement("div",null,t.review?_.a.createElement(R,{review:t.review,show:t.showEditPopup,onEditClicked:this.onEditClick,onDeleteConfirmed:this.onDeleteReview,onHide:t.onHideEditPopup,"data-purpose":"review-popup"}):null,t.showReviewEditor?this.renderReviewEditor():null,t.showInitiator?t.isInstructor?_.a.createElement(A,{store:t,"data-purpose":"instructor-component"}):_.a.createElement(I,{store:t,layout:r,onRatingClick:this.onRatingClick,onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,"data-purpose":"student-component",numStars:o}):null)}}]),t}(k.Component),p.propTypes={store:w.a.object.isRequired,layout:w.a.oneOf(["horizontal","vertical"]),onDeleteReview:w.a.func,numStars:w.a.number},p.defaultProps={layout:"vertical",onDeleteReview:y.a,numStars:void 0},c=u,babelHelpers.applyDecoratedDescriptor(c.prototype,"onMouseEnter",[m.a],Object.getOwnPropertyDescriptor(c.prototype,"onMouseEnter"),c.prototype),babelHelpers.applyDecoratedDescriptor(c.prototype,"onMouseLeave",[m.a],Object.getOwnPropertyDescriptor(c.prototype,"onMouseLeave"),c.prototype),babelHelpers.applyDecoratedDescriptor(c.prototype,"onRatingClick",[m.a],Object.getOwnPropertyDescriptor(c.prototype,"onRatingClick"),c.prototype),babelHelpers.applyDecoratedDescriptor(c.prototype,"onEditClick",[m.a],Object.getOwnPropertyDescriptor(c.prototype,"onEditClick"),c.prototype),babelHelpers.applyDecoratedDescriptor(c.prototype,"onDeleteReview",[m.a],Object.getOwnPropertyDescriptor(c.prototype,"onDeleteReview"),c.prototype),babelHelpers.applyDecoratedDescriptor(c.prototype,"renderReviewEditor",[m.a],Object.getOwnPropertyDescriptor(c.prototype,"renderReviewEditor"),c.prototype),l=c))||l},"./src/udemy/js/course-reviews/common/leave-rating.less":function(e,t,r){e.exports={"review-editor__modal":"leave-rating--review-editor__modal--1ARWx","review-container":"leave-rating--review-container--RqDHa","review-container--vertical":"leave-rating--review-container--vertical--120k4","review-container--horizontal":"leave-rating--review-container--horizontal--3WGfJ","helper-text":"leave-rating--helper-text--21RPx","num-reviews-text":"leave-rating--num-reviews-text--6a_Jk","single-star":"leave-rating--single-star--1QqJX","simple-review-container":"leave-rating--simple-review-container--6B50X"}},"./src/udemy/js/course-reviews/common/locations.js":function(e,t,r){"use strict";r.d(t,"a",(function(){return o})),r.d(t,"b",(function(){return s}));var o="my_courses",s=[o,"dashboard"]},"./src/udemy/js/course-reviews/common/review-backend.js":function(e,t,r){"use strict";r.d(t,"a",(function(){return s}));var o=r("./src/udemy/js/utils/ud-api.js");function s(){var e={"fields[course_review]":"@min,location,response"},t=function(e,t){return t?"courses/".concat(e,"/reviews/").concat(t,"/"):"courses/".concat(e,"/reviews/")};return{forCourse:function(r){return{create:function(s){return o.d.post(t(r),s,{params:e})},update:function(s,a){return o.d.patch(t(r,s),a,{params:e})},get:function(s){return o.d.get(t(r),{params:babelHelpers.objectSpread({},s,e)}).then((function(e){return e.data.results.length>0?e.data.results[0]:null}))},delete:function(e){return o.d.delete(t(r,e))}}}}}},"./src/udemy/js/course-reviews/common/review-popup.less":function(e,t,r){e.exports={"review-popup__modal":"review-popup--review-popup__modal--2Jwus","button-toolbar":"review-popup--button-toolbar--1x99T","confirmation-text":"review-popup--confirmation-text--1p38u","review-container":"review-popup--review-container--2HhTL"}},"./src/udemy/js/course-reviews/display/helpful-buttons.less":function(e,t,r){e.exports={text:"helpful-buttons--text--A1vvA",thanks:"helpful-buttons--thanks--3EFdu","thanks--hidden":"helpful-buttons--thanks--hidden--zIbI9","button-container":"helpful-buttons--button-container--3GGvV","report-container":"helpful-buttons--report-container--SowIt","report-abuse__link":"helpful-buttons--report-abuse__link--2CDGh",button:"helpful-buttons--button--AGfLY",container:"helpful-buttons--container--22EKo"}},"./src/udemy/js/course-reviews/display/helpful-buttons.react-component.js":function(e,t,r){"use strict";var o,s,a,i,n,l,c,p=r("./node_modules/babel-plugin-react-css-modules/dist/browser/getClassName.js"),u=r.n(p),d=r("./node_modules/classnames/index.js"),h=r.n(d),m=r("./node_modules/mobx-react/index.module.js"),b=r("./node_modules/prop-types/index.js"),f=r.n(b),y=r("./node_modules/react/index.js"),g=r.n(y),v=r("./src/udemy/js/report-abuse/report-abuse-launcher.react-component.js"),w=r("./src/udemy/js/utils/get-config-data.js"),k=r("./node_modules/autobind-decorator/lib/esm/index.js"),_=r("./src/udemy/js/base-components/form/checkbox.react-component.js"),E=(r("./src/udemy/js/course-reviews/display/helpful-buttons.less"),Object(m.d)((i=a=function(e){function t(){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).apply(this,arguments))}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"onToggle",value:function(){this.props.onToggle(this.props.value)}},{key:"render",value:function(){var e=this.props,t=e.children,r=(e.value,e.onToggle,e.styles,babelHelpers.objectWithoutProperties(e,["children","value","onToggle","styles"]));return(g.a.createElement("div",{className:"helpful-buttons--button-container--3GGvV"},g.a.createElement(_.a,Object.assign({button:!0,"data-purpose":"helpful-button-checkbox",onChange:this.onToggle},r,{className:(r.className?r.className+" ":"")+"helpful-buttons--button--AGfLY"}),t)))}}]),t}(y.Component),a.propTypes=babelHelpers.objectSpread({value:f.a.string.isRequired,onToggle:f.a.func.isRequired,styles:f.a.object},_.a.propTypes),a.defaultProps={styles:void 0},s=i,babelHelpers.applyDecoratedDescriptor(s.prototype,"onToggle",[k.a],Object.getOwnPropertyDescriptor(s.prototype,"onToggle"),s.prototype),o=s))||o);r.d(t,"a",(function(){return C}));var j={"./helpful-buttons.less":{text:"helpful-buttons--text--A1vvA",thanks:"helpful-buttons--thanks--3EFdu","thanks--hidden":"helpful-buttons--thanks--hidden--zIbI9","button-container":"helpful-buttons--button-container--3GGvV","report-container":"helpful-buttons--report-container--SowIt","report-abuse__link":"helpful-buttons--report-abuse__link--2CDGh",button:"helpful-buttons--button--AGfLY","checkbox-button-sm":"helpful-buttons--checkbox-button-sm--4C7bG",container:"helpful-buttons--container--22EKo","checkbox-button-xs":"helpful-buttons--checkbox-button-xs--vhj9u"}},D=Object(w.a)(),S=[{value:"yes",label:gettext("Yes"),glyph:"icon-check",style:"success"},{value:"no",label:gettext("No"),glyph:"icon-xmark",style:"danger"}],C=Object(m.d)((c=l=function(e){function t(){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).apply(this,arguments))}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"render",value:function(){if(!D.features.course_review.leave_feedback)return null;var e=this.props.store,t=e.value,r=e.onToggle,o=e.reviewId;return g.a.createElement("div",{className:"form-inline helpful-buttons--container--22EKo"},g.a.createElement("span",{className:"form-static helpful-buttons--text--A1vvA","data-purpose":"helpfulness-prompt"},gettext("Was this review helpful?")),g.a.createElement("span",{className:"form-group"},S.map((function(e){return g.a.createElement(E,{key:e.value,checked:t===e.value,value:e.value,bsStyle:e.style,glyph:e.glyph,onToggle:r,"data-purpose":"helpfulness-button-".concat(e.value)},e.label)})),g.a.createElement("span",{className:"helpful-buttons--report-container--SowIt"},g.a.createElement(v.a,{showLabel:!0,useAnchor:!0,showTooltip:!1,text:gettext("Report"),className:"helpful-buttons--report-abuse__link--2CDGh",objectType:"coursereview",objectId:o}))),g.a.createElement("div",{"data-purpose":"helpfulness-thanks",className:u()(h()("thanks",{"thanks--hidden":null===t}),j)},gettext("Thank you! You have successfully submitted feedback for this review.")))}}]),t}(y.Component),l.propTypes={store:f.a.shape({value:f.a.string,onToggle:f.a.func.isRequired,reviewId:f.a.number.isRequired}).isRequired},n=c))||n},"./src/udemy/js/course-reviews/display/individual-review.less":function(e,t,r){e.exports={"author-avatar":"individual-review--author-avatar--15MOW",container:"individual-review--container--3kHO-","comment-content":"individual-review--comment-content--2pCWg","comment-content-empty":"individual-review--comment-content-empty--19ztm","detail-container":"individual-review--detail-container--30whp","detail-user-name":"individual-review--detail-user-name--2JyaY","detail-created":"individual-review--detail-created--1liJC","detail-created-inline":"individual-review--detail-created-inline--2ouer","left-column":"individual-review--left-column--uKkcj","detail-report-abuse":"individual-review--detail-report-abuse--zHSk2","container--no-avatar":"individual-review--container--no-avatar--2usMH","right-column":"individual-review--right-column--1jp7O","container--preview-mode":"individual-review--container--preview-mode--1k2mr"}},"./src/udemy/js/course-reviews/display/individual-review.react-component.js":function(e,t,r){"use strict";r.d(t,"a",(function(){return S}));var o,s,a,i,n=r("./node_modules/babel-plugin-react-css-modules/dist/browser/getClassName.js"),l=r.n(n),c=r("./node_modules/autobind-decorator/lib/esm/index.js"),p=r("./node_modules/classnames/index.js"),u=r.n(p),d=r("./node_modules/lodash-es/noop.js"),h=r("./node_modules/mobx-react/index.module.js"),m=r("./node_modules/prop-types/index.js"),b=r.n(m),f=r("./node_modules/react/index.js"),y=r.n(f),g=r("./node_modules/react-waypoint/build/waypoint.js"),v=r.n(g),w=r("./src/udemy/js/base-components/star-rating.react-component.js"),k=r("./src/udemy/js/base-components/user-image.react-component.js"),_=r("./src/udemy/js/base-components/view-more/view-more-max-height-container.react-component.js"),E=r("./src/udemy/js/course-reviews/display/helpful-buttons.react-component.js"),j=r("./src/udemy/js/course-reviews/display/instructor-response.react-component.js"),D=(r("./src/udemy/js/course-reviews/display/individual-review.less"),{"./individual-review.less":{"author-avatar":"individual-review--author-avatar--15MOW",m_fx:"individual-review--m_fx--2R2qQ",container:"individual-review--container--3kHO-",clearfix:"individual-review--clearfix--8imXo","comment-content":"individual-review--comment-content--2pCWg","comment-content-empty":"individual-review--comment-content-empty--19ztm","detail-container":"individual-review--detail-container--30whp","m_fx-flex":"individual-review--m_fx-flex--Cwhht","m_fx-align-items":"individual-review--m_fx-align-items--uyTOG","detail-user-name":"individual-review--detail-user-name--2JyaY","detail-created":"individual-review--detail-created--1liJC","detail-created-inline":"individual-review--detail-created-inline--2ouer","left-column":"individual-review--left-column--uKkcj","m_fx-direction":"individual-review--m_fx-direction--BPCAS","detail-report-abuse":"individual-review--detail-report-abuse--zHSk2","m_fx-order":"individual-review--m_fx-order--3OcFQ","container--no-avatar":"individual-review--container--no-avatar--2usMH","right-column":"individual-review--right-column--1jp7O","container--preview-mode":"individual-review--container--preview-mode--1k2mr"}}),S=Object(h.d)((i=a=function(e){function t(){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).apply(this,arguments))}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"onSeen",value:function(){this.props.onSeen(this.props.review.id,this.props.viewPosition)}},{key:"renderReviewContent",value:function(){var e=this.props,t=e.renderContent,r=e.review;return""===r.content?y.a.createElement("div",{className:"individual-review--comment-content-empty--19ztm","data-purpose":"review-comment-content"},gettext("There are no written comments for your review.")):y.a.createElement("div",null,y.a.createElement(v.a,{onEnter:this.onSeen}),y.a.createElement("div",{className:"individual-review--comment-content--2pCWg"},y.a.createElement(_.a,{collapsedHeight:200},y.a.createElement("div",{"data-purpose":"review-comment-content"},t(r.content)))))}},{key:"render",value:function(){var e=this.props,t=e.helpfulnessStore,r=e.previewMode,o=e.review,s=e.showUserAvatar,a=e.renderContent;return y.a.createElement("div",{className:l()(u()("container",{"container--no-avatar":!s,"container--preview-mode":r}),D)},y.a.createElement("div",{className:"individual-review--right-column--1jp7O"},y.a.createElement(w.b,{rating:o.rating,size:"small"}),r?y.a.createElement("span",{className:"individual-review--detail-created-inline--2ouer","data-purpose":"review-detail-review-created"},o.created_formatted_with_time_since):null,this.renderReviewContent()),r?null:y.a.createElement("div",{className:"individual-review--left-column--uKkcj"},s?y.a.createElement(k.c,{user:o.user,"data-purpose":"review-author-avatar",className:"individual-review--author-avatar--15MOW"}):null,y.a.createElement("div",{className:"individual-review--detail-container--30whp"},y.a.createElement("div",{className:"ellipsis individual-review--detail-user-name--2JyaY","data-purpose":"review-detail-user-name"},o.user.display_name),y.a.createElement("div",{className:"individual-review--detail-created--1liJC"},o.created_formatted_with_time_since))),y.a.createElement("div",{className:"individual-review--right-column--1jp7O"},y.a.createElement(j.a,{response:o.response,renderContent:a}),t?y.a.createElement(E.a,{store:t}):null))}}]),t}(f.Component),a.propTypes={helpfulnessStore:b.a.object,review:b.a.object.isRequired,renderContent:b.a.func,showUserAvatar:b.a.bool,previewMode:b.a.bool,viewPosition:b.a.number,onSeen:b.a.func},a.defaultProps={helpfulnessStore:null,renderContent:function(e){return e.split(/\n+/).map((function(e,t){return y.a.createElement("p",{key:t},e)}))},previewMode:!1,showUserAvatar:!0,viewPosition:null,onSeen:d.a},s=i,babelHelpers.applyDecoratedDescriptor(s.prototype,"onSeen",[c.a],Object.getOwnPropertyDescriptor(s.prototype,"onSeen"),s.prototype),o=s))||o},"./src/udemy/js/course-reviews/display/instructor-response.less":function(e,t,r){e.exports={arrow:"instructor-response--arrow--1Qcf6",container:"instructor-response--container--yPk8G",comment:"instructor-response--comment--tvKuv","detail-container":"instructor-response--detail-container--JSoVZ","detail-created":"instructor-response--detail-created--8K3gn"}},"./src/udemy/js/course-reviews/display/instructor-response.react-component.js":function(e,t,r){"use strict";var o=r("./node_modules/prop-types/index.js"),s=r.n(o),a=r("./node_modules/react/index.js"),i=r.n(a),n=r("./src/udemy/js/base-components/view-more/view-more-max-height-container.react-component.js"),l=(r("./src/udemy/js/course-reviews/display/instructor-response.less"),function(e){var t=e.response,r=e.renderContent;return t?i.a.createElement("div",{className:"instructor-response--container--yPk8G"},i.a.createElement("div",{className:"instructor-response--arrow--1Qcf6"}),i.a.createElement("div",{className:"instructor-response--detail-container--JSoVZ"},i.a.createElement("span",{className:"ellipsis","data-purpose":"review-response-instructor-name"},interpolate(gettext("%(instructor_name)s (Instructor)"),{instructor_name:t.user.display_name},!0)),",",i.a.createElement("span",{className:"instructor-response--detail-created--8K3gn"},t.created_formatted_with_time_since)),i.a.createElement("div",{className:"instructor-response--comment--tvKuv"},i.a.createElement(n.a,{collapsedHeight:200,gradientStyling:"clp"},i.a.createElement("div",{"data-purpose":"review-response-content"},r(t.content))))):null});l.propTypes={response:s.a.object,renderContent:s.a.func.isRequired},l.defaultProps={response:null},t.a=l},"./src/udemy/js/course-reviews/review-editor/confirmation-page.less":function(e,t,r){e.exports={"main-header":"confirmation-page--main-header--2MZvh","public-review-notice":"confirmation-page--public-review-notice--1rXXi","page-container":"confirmation-page--page-container--3qMQ7","review-container":"confirmation-page--review-container--3kJJP"}},"./src/udemy/js/course-reviews/review-editor/review-editor.less":function(e,t,r){e.exports={container:"review-editor--container--1-1O7","top-buttons-container":"review-editor--top-buttons-container--2V0a5","top-buttons-container--reverse":"review-editor--top-buttons-container--reverse--1VkVu","page-content":"review-editor--page-content--3EQiG","component-container":"review-editor--component-container--_f-hV","child-page":"review-editor--child-page--3Vgs_","bottom-container":"review-editor--bottom-container--1Wa22","leave-star-container":"review-editor--leave-star-container--3WXs4","ask-later-button":"review-editor--ask-later-button--3l0Ef","dont-ask-again-button":"review-editor--dont-ask-again-button--1nKZ9","action-button":"review-editor--action-button--2AvAK","write-comment-page":"review-editor--write-comment-page--1qa7S","review-content":"review-editor--review-content--2lVDX","survey-container":"review-editor--survey-container--3n9W3","survey-container__survey":"review-editor--survey-container__survey--2Dxup"}},"./src/udemy/js/course-reviews/review-editor/review-editor.mobx-store.js":function(e,t,r){"use strict";r.d(t,"a",(function(){return d})),r.d(t,"b",(function(){return h}));var o,s,a,i=r("./node_modules/autobind-decorator/lib/esm/index.js"),n=r("./node_modules/javascript-state-machine/state-machine.js"),l=r.n(n),c=r("./node_modules/mobx/lib/mobx.module.js"),p=r("./src/udemy/js/utils/ud-user-tracker-logger.js"),u=r("./src/udemy/js/course-reviews/common/review-backend.js"),d={init:"init",starRating:"starRating",comment:"comment",survey:"survey",confirmation:"confirmation"},h=(o=function(){function e(t,r,o,n,p,h,m,b){var f=this,y=arguments.length>8&&void 0!==arguments[8]?arguments[8]:u.a;babelHelpers.classCallCheck(this,e),babelHelpers.initializerDefineProperty(this,"review",s,this),babelHelpers.initializerDefineProperty(this,"currentState",a,this),o=o||"",Object(c.extendObservable)(this,{reviewId:t,rating:r,reviewContent:o,location:n,course:p}),this.onSaveReview=h,this.sourcePage=m,this.extraLoggingData=b;var g=[{name:"forward",from:d.starRating,to:d.comment},{name:"save",from:d.starRating,to:d.starRating},{name:"save",from:d.comment,to:d.comment},{name:"forward",from:d.comment,to:p.is_practice_test_course?d.confirmation:d.survey},{name:"back",from:d.survey,to:d.comment},{name:"forward",from:d.survey,to:d.confirmation},{name:"back",from:d.confirmation,to:p.is_practice_test_course?d.comment:d.survey}];this.rating||g.push({name:"back",from:d.comment,to:d.starRating});var v={initial:this.rating?d.comment:d.starRating,events:g,callbacks:{onenterstate:Object(i.a)(Object(c.action)((function(e,t,r){f.currentState=r;var o={transition:e,old_page:t,new_page:r};f.logAction("view-editor-page",o)}))),onsave:Object(i.a)(Object(c.action)((function(){var e=f.reviewId?"update":"create";f.logAction(e);var t={rating:f.rating,content:f.reviewContent,location:f.location};return(f.reviewId?f.reviewBackend.update(f.reviewId,t):f.reviewBackend.create(t)).then(Object(c.action)((function(e){f.reviewId=e.data.id,f.onSaveReview(e.data)})))})))}};this.reviewLeavingStateMachine=l.a.create(v),this.reviewBackend=y().forCourse(p.id)}return babelHelpers.createClass(e,[{key:"gotoPreviousState",value:function(){this.reviewLeavingStateMachine.back()}},{key:"goForward",value:function(){return this.reviewLeavingStateMachine.forward()}},{key:"canGoBack",value:function(){return this.reviewLeavingStateMachine.can("back")}},{key:"rate",value:function(e){this.rating=e,this.reviewLeavingStateMachine.save()}},{key:"saveAndForward",value:function(){this.reviewLeavingStateMachine.save(),this.reviewLeavingStateMachine.forward()}},{key:"updateComment",value:function(e){this.reviewContent=e.target.value}},{key:"deleteReview",value:function(){return this.reviewId?this.reviewBackend.delete(this.reviewId):Promise.resolve()}},{key:"logAction",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=this.course.id,o=this.reviewId,s="review",a="Review",i=this.course.is_paid?"Paid":"Free";t=babelHelpers.objectSpread({},t,this.extraLoggingData,{category:"Review",location:this.location}),p.a.logEvents({events:[{action:e,category:a,courseId:r,objectId:o,objectType:s,courseType:i,extra:JSON.stringify(t)}],page:this.sourcePage})}}]),e}(),s=babelHelpers.applyDecoratedDescriptor(o.prototype,"review",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),a=babelHelpers.applyDecoratedDescriptor(o.prototype,"currentState",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),babelHelpers.applyDecoratedDescriptor(o.prototype,"gotoPreviousState",[i.a],Object.getOwnPropertyDescriptor(o.prototype,"gotoPreviousState"),o.prototype),babelHelpers.applyDecoratedDescriptor(o.prototype,"goForward",[i.a],Object.getOwnPropertyDescriptor(o.prototype,"goForward"),o.prototype),babelHelpers.applyDecoratedDescriptor(o.prototype,"canGoBack",[i.a],Object.getOwnPropertyDescriptor(o.prototype,"canGoBack"),o.prototype),babelHelpers.applyDecoratedDescriptor(o.prototype,"rate",[i.a,c.action],Object.getOwnPropertyDescriptor(o.prototype,"rate"),o.prototype),babelHelpers.applyDecoratedDescriptor(o.prototype,"saveAndForward",[i.a,c.action],Object.getOwnPropertyDescriptor(o.prototype,"saveAndForward"),o.prototype),babelHelpers.applyDecoratedDescriptor(o.prototype,"updateComment",[i.a,c.action],Object.getOwnPropertyDescriptor(o.prototype,"updateComment"),o.prototype),babelHelpers.applyDecoratedDescriptor(o.prototype,"deleteReview",[i.a,c.action],Object.getOwnPropertyDescriptor(o.prototype,"deleteReview"),o.prototype),o)},"./src/udemy/js/course-reviews/review-editor/review-editor.react-component.js":function(e,t,r){"use strict";var o,s,a,i,n,l,c,p,u,d,h,m,b,f,y,g,v,w,k,_,E,j=r("./node_modules/babel-plugin-react-css-modules/dist/browser/getClassName.js"),D=r.n(j),S=r("./node_modules/autobind-decorator/lib/esm/index.js"),C=r("./node_modules/mobx-react/index.module.js"),O=r("./node_modules/prop-types/index.js"),P=r.n(O),T=r("./node_modules/react/index.js"),x=r.n(T),R=r("./src/udemy/js/base-components/button.react-component.js"),H=r("./src/udemy/js/course-reviews/common/locations.js"),A=r("./src/udemy/js/base-components/review-stars-input.react-component.js"),I=r("./src/udemy/js/course-taking/reviews/constants.js"),L=r("./src/udemy/js/utils/user-agent/get-is-mobile-browser.js"),M=(r("./src/udemy/js/course-reviews/review-editor/review-editor.less"),a=s=function(e){function t(e){var r;return babelHelpers.classCallCheck(this,t),(r=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this,e))).isMobileBrowser=L.b,r}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"onRatingChange",value:function(e){this.props.store.rate(e),this.isMobileBrowser||this.props.store.goForward()}},{key:"onClickAskMeLater",value:function(){this.props.store.deleteReview(),this.props.onCancelReview()}},{key:"onClickAskMeEndOfTheCourse",value:function(){this.props.store.deleteReview(),this.props.onCancelReview(!0)}},{key:"render",value:function(){var e=this.props.store;return x.a.createElement("div",{className:"review-editor--leave-star-container--3WXs4","data-purpose":"leave-rating"},x.a.createElement(A.a,{size:"large",rating:e.rating,"data-purpose":"review-stars",onChoose:this.onRatingChange,showGuidanceText:!0}),this.isMobileBrowser&&x.a.createElement(R.default,{onClick:e.goForward,bsStyle:"secondary","data-purpose":"next-button",className:"review-editor--action-button--2AvAK"},gettext("Next")," "),I.b.concat(H.b).includes(e.location)?null:x.a.createElement("div",null,x.a.createElement(R.default,{className:"review-editor--ask-later-button--3l0Ef",bsStyle:"quaternary","data-purpose":"ask-me-later-button",onClick:this.onClickAskMeLater},gettext("Ask me later")),x.a.createElement(R.default,{className:"review-editor--dont-ask-again-button--1nKZ9",bsStyle:"quintinary","data-purpose":"dont-ask-button",onClick:this.onClickAskMeEndOfTheCourse},gettext("Ask me at the end of the course"))))}}]),t}(T.Component),s.propTypes={store:P.a.object.isRequired,onCancelReview:P.a.func.isRequired},o=a,babelHelpers.applyDecoratedDescriptor(o.prototype,"onRatingChange",[S.a],Object.getOwnPropertyDescriptor(o.prototype,"onRatingChange"),o.prototype),babelHelpers.applyDecoratedDescriptor(o.prototype,"onClickAskMeLater",[S.a],Object.getOwnPropertyDescriptor(o.prototype,"onClickAskMeLater"),o.prototype),babelHelpers.applyDecoratedDescriptor(o.prototype,"onClickAskMeEndOfTheCourse",[S.a],Object.getOwnPropertyDescriptor(o.prototype,"onClickAskMeEndOfTheCourse"),o.prototype),o),N=r("./src/udemy/js/course-reviews/review-editor/review-editor.mobx-store.js"),F=r("./src/udemy/js/utils/ud-me.js"),U=r("./src/udemy/js/share/constants.js"),z=r("./src/udemy/js/share/marketplace-social-share-button.react-component.js"),B=r("./src/udemy/js/share/social-share.mobx-store.js"),q=r("./src/udemy/js/course-reviews/display/individual-review.react-component.js"),G=(r("./src/udemy/js/course-reviews/review-editor/confirmation-page.less"),Object(C.d)((l=n=function(e){function t(e){var r;return babelHelpers.classCallCheck(this,t),(r=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this,e))).socialShareStore=new B.a({id:e.course.id,type:"course",is_private:e.course.is_private,title:e.course.title},e.course.url,U.e.HIGH_RATING),r}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"render",value:function(){var e=this.props;return x.a.createElement("div",{className:"confirmation-page--page-container--3qMQ7"},x.a.createElement("h2",{className:"confirmation-page--main-header--2MZvh","data-purpose":"main-header"},gettext("Thanks for helping our community!")),x.a.createElement("p",{className:"confirmation-page--public-review-notice--1rXXi","data-purpose":"public-review-notice"},gettext("Your review will be public within 24 hours.")),x.a.createElement("div",{className:"confirmation-page--review-container--3kJJP"},x.a.createElement(q.a,{"data-purpose":"review-preview",review:{content:e.reviewText,rating:e.rating,user:e.user}})),e.rating>=4&&x.a.createElement(z.a,{store:this.socialShareStore,showReferralTerms:!0}))}}]),t}(T.Component),n.propTypes={course:P.a.object.isRequired,reviewText:P.a.string.isRequired,rating:P.a.number.isRequired,user:P.a.object.isRequired},i=l))||i),V=Object(C.d)((d=u=function(e){function t(){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).apply(this,arguments))}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"onClickExit",value:function(){this.props.onCancelReview()}},{key:"render",value:function(){var e=this.props.store;return x.a.createElement("div",null,x.a.createElement(G,{course:e.course,reviewText:e.reviewContent,rating:e.rating,user:F.a}),x.a.createElement(R.default,{bsStyle:"secondary",className:"review-editor--action-button--2AvAK","data-purpose":"save-button",onClick:this.onClickExit},gettext("Save and Exit")," "))}}]),t}(T.Component),u.propTypes={store:P.a.object.isRequired,onCancelReview:P.a.func.isRequired},p=d,babelHelpers.applyDecoratedDescriptor(p.prototype,"onClickExit",[S.a],Object.getOwnPropertyDescriptor(p.prototype,"onClickExit"),p.prototype),c=p))||c,K=r("./src/udemy/js/survey/survey.react-component.js"),W=(b=m=function(e){function t(){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).apply(this,arguments))}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"setSurveyRef",value:function(e){this.surveyComponent=e}},{key:"onSaveClick",value:function(){this.surveyComponent.save(),this.props.store.goForward()}},{key:"render",value:function(){var e=this.props.store;return x.a.createElement("div",{className:"review-editor--survey-container--3n9W3"},x.a.createElement("div",{className:"review-editor--survey-container__survey--2Dxup"},x.a.createElement(K.a,{surveyCode:"review-survey",courseId:e.course.id,populate:!0,ref:this.setSurveyRef})),x.a.createElement("div",null,x.a.createElement(R.default,{bsStyle:"secondary",className:"review-editor--action-button--2AvAK","data-purpose":"save-button",onClick:this.onSaveClick},gettext("Save and Continue")),x.a.createElement(R.default,{bsStyle:"quaternary",className:"review-editor--action-button--2AvAK","data-purpose":"skip-button",onClick:e.goForward},gettext("Skip"))))}}]),t}(T.Component),m.propTypes={store:P.a.object.isRequired},h=b,babelHelpers.applyDecoratedDescriptor(h.prototype,"setSurveyRef",[S.a],Object.getOwnPropertyDescriptor(h.prototype,"setSurveyRef"),h.prototype),babelHelpers.applyDecoratedDescriptor(h.prototype,"onSaveClick",[S.a],Object.getOwnPropertyDescriptor(h.prototype,"onSaveClick"),h.prototype),h),Y=r("./src/udemy/js/base-components/form/form-control.react-component.js"),X=Object(C.d)((g=y=function(e){function t(){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).apply(this,arguments))}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"render",value:function(){var e=this.props.store;return x.a.createElement("div",{className:"review-editor--write-comment-page--1qa7S","data-purpose":"write-comment"},x.a.createElement(A.a,{rating:e.rating,size:"medium","data-purpose":"review-stars",onChoose:e.rate,showGuidanceText:!0}),x.a.createElement(Y.a,{className:"review-editor--review-content--2lVDX",componentClass:"textarea","data-purpose":"review-content",value:e.reviewContent,onChange:e.updateComment,placeholder:gettext("Tell us about your own personal experience taking this course. Was it a good match for you?")}),x.a.createElement(R.default,{onClick:e.saveAndForward,bsStyle:"secondary","data-purpose":"save-button",className:"review-editor--action-button--2AvAK"},gettext("Save and Continue")," "))}}]),t}(T.Component),y.propTypes={store:P.a.object.isRequired},f=g))||f;r.d(t,"a",(function(){return ee}));var Q={"./review-editor.less":{container:"review-editor--container--1-1O7","top-buttons-container":"review-editor--top-buttons-container--2V0a5","top-buttons-container--reverse":"review-editor--top-buttons-container--reverse--1VkVu","page-content":"review-editor--page-content--3EQiG","component-container":"review-editor--component-container--_f-hV","child-page":"review-editor--child-page--3Vgs_","bottom-container":"review-editor--bottom-container--1Wa22","leave-star-container":"review-editor--leave-star-container--3WXs4","ask-later-button":"review-editor--ask-later-button--3l0Ef","dont-ask-again-button":"review-editor--dont-ask-again-button--1nKZ9","action-button":"review-editor--action-button--2AvAK","write-comment-page":"review-editor--write-comment-page--1qa7S","review-content":"review-editor--review-content--2lVDX","survey-container":"review-editor--survey-container--3n9W3","survey-container__survey":"review-editor--survey-container__survey--2Dxup"}},J=(v={},babelHelpers.defineProperty(v,N.a.starRating,M),babelHelpers.defineProperty(v,N.a.comment,X),babelHelpers.defineProperty(v,N.a.survey,W),babelHelpers.defineProperty(v,N.a.confirmation,V),v),Z={course_taking__middle:gettext("  Great job on making it halfway!"),course_taking__initial:gettext("Why did you leave this rating?"),course_taking__callout:gettext("Why did you leave this rating?"),course_taking__interstitial:gettext("Why did you leave this rating?"),course_taking__final:" ".concat(gettext("Congrats on finishing the course!")),my_courses:gettext("Why did you leave this rating?"),dashboard:gettext("Why did you leave this rating?"),"course_taking__initial--end":gettext("Why did you leave this rating?")},$=function(e){var t,r,o=e.location;switch(e.reviewState){case N.a.starRating:"course_taking__initial--end"===o?(t=" ".concat(gettext("Congrats on finishing the course!")),r=gettext("Would you like to leave a review?")):t=H.b.includes(o)?gettext("How would you rate this course?"):gettext("How would you rate your experience with the course so far?");break;case N.a.comment:t=Z[o],r={course_taking__middle:gettext("Would you like to update your review?"),course_taking__final:gettext("Would you like to update your review?")}[o];break;case N.a.survey:t=gettext("Please tell us more (optional).")}return x.a.createElement("div",null,t&&x.a.createElement("h2",{"data-purpose":"primary-message"},t),r&&x.a.createElement("h2",{"data-purpose":"secondary-message"},r))};$.propTypes={location:P.a.string.isRequired,reviewState:P.a.string.isRequired};var ee=Object(C.d)((E=_=function(e){function t(){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).apply(this,arguments))}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"onClickGoToCourse",value:function(){this.props.onCancelReview()}},{key:"render",value:function(){var e=J[this.props.store.currentState],t=this.props,r=t.store,o=t.onCancelReview,s=t.closeButtonEnabled,a=t.closeButtonText;return x.a.createElement("div",{className:"review-editor--container--1-1O7","data-purpose":"review-editor"},x.a.createElement("div",{className:D()(s?"top-buttons-container--reverse":"top-buttons-container",Q)},s&&x.a.createElement(R.default,{bsStyle:"quintinary","data-purpose":"close-button",onClick:this.onClickGoToCourse},a),this.props.store.canGoBack()&&x.a.createElement(R.default,{bsStyle:"tertiary","data-purpose":"back-button",onClick:this.props.store.gotoPreviousState},gettext("Back"))),x.a.createElement("div",{className:"review-editor--page-content--3EQiG"},x.a.createElement($,{location:r.location,reviewState:r.currentState}),x.a.createElement("div",{className:"review-editor--component-container--_f-hV"},x.a.createElement(e,{store:r,onCancelReview:o}))))}}]),t}(T.Component),_.propTypes={store:P.a.object.isRequired,onCancelReview:P.a.func.isRequired,closeButtonEnabled:P.a.bool,closeButtonText:P.a.string},_.defaultProps={closeButtonEnabled:!0,closeButtonText:gettext("Close")},k=E,babelHelpers.applyDecoratedDescriptor(k.prototype,"onClickGoToCourse",[S.a],Object.getOwnPropertyDescriptor(k.prototype,"onClickGoToCourse"),k.prototype),w=k))||w},"./src/udemy/js/course-taking/constants.js":function(e,t,r){"use strict";r.d(t,"q",(function(){return o})),r.d(t,"o",(function(){return s})),r.d(t,"p",(function(){return a})),r.d(t,"b",(function(){return i})),r.d(t,"c",(function(){return n})),r.d(t,"a",(function(){return l})),r.d(t,"g",(function(){return c})),r.d(t,"i",(function(){return p})),r.d(t,"e",(function(){return d})),r.d(t,"d",(function(){return h})),r.d(t,"h",(function(){return m})),r.d(t,"f",(function(){return b})),r.d(t,"t",(function(){return f})),r.d(t,"l",(function(){return y})),r.d(t,"r",(function(){return g})),r.d(t,"w",(function(){return v})),r.d(t,"u",(function(){return w})),r.d(t,"s",(function(){return k})),r.d(t,"v",(function(){return _})),r.d(t,"j",(function(){return E})),r.d(t,"n",(function(){return j})),r.d(t,"m",(function(){return D})),r.d(t,"k",(function(){return S}));var o=5,s=56,a=56,i=["title","headline","description","prerequisites","objectives","target_audiences","url","is_published","is_approved","is_practice_test_course","content_length_video","instructional_level","locale","content_length_practice_test_questions","content_info","num_subscribers","visible_instructors","is_paid","is_private","is_owner_terms_banned","is_owned_by_instructor_team","image_240x135","instructor_status","is_cpe_compliant","cpe_field_of_study","cpe_program_level","num_cpe_credits"].join(","),n=["available_features","features","gift_url","has_certificate","has_closed_caption"].join(","),l=[i,n].join(","),c=["simple_english_title"].join(","),p=["url","title","job_title","image_200_H","description","display_name","image_50x50","initials","url_twitter","url_facebook","url_linkedin","url_youtube","url_personal_website"].join(","),u=["title","object_index","is_published","sort_order"],d={"fields[lecture]":u.concat(["created","asset","supplementary_assets","is_free"]).join(","),"fields[quiz]":u.concat(["type"]).join(","),"fields[practice]":u.join(","),"fields[chapter]":u.join(","),"fields[asset]":["title","filename","asset_type","status","time_estimation"].join(",")},h=babelHelpers.objectSpread({},d,{"fields[asset]":["title","filename","asset_type","status","time_estimation","is_external"].join(",")}),m=["completed_lecture_ids","completed_quiz_ids","last_seen_page","completed_assignment_ids","first_completion_time"],b={"fields[course_has_user]":["archive_time","favorite_time","was_purchased_by_student","was_paid_by_student","is_in_refund_period","notification_settings","available_features"].join(",")},f=Object.freeze({PRACTICE_TEST_QUESTIONS:"practice_test_questions",TRANSCRIPT:"transcript",DEFAULT:"default",NONE:"none"}),y=15e3,g=1400,v=Object.freeze({INSTRUCTOR:"Instructor",STUDENT:"Student"}),w=Object.freeze({HEADER:"header",DASHBOARD:"dashboard",PROGRESS:"progress",LECTURE:"Lecture",PRACTICE:"Practice",SEARCH:"search",PLAYER_SETTINGS:"player_settings",NAVIGATION:"navigation",BOOKMARK:"bookmark",INTERSTITIAL:"interstitial",TRANSCRIPT:"transcript",QUESTION:"question",COURSE_DISCUSSION:"coursediscussion",COURSE_DISCUSSION_REPLY:"coursediscussionreply",END_SCREEN:"end_screen",REVIEW:"review",MOBILE_END_SCREEN:"mobile_end_screen",MOBILE_REVIEW:"mobile_review",POSITIVE_REINFORCEMENT:"positive_reinforcement",CAPTIONS_SURVEY:"captions_survey",COURSE_CONTENT:"course_content"}),k=Object.freeze({MARK_COMPLETE:"mark-complete",MARK_RESET:"mark-reset",RESET_ALL:"reset-all"}),_={SIDEBAR_CONTENT:"sidebar_content",DASHBOARD_TAB:"dashboard_tab"},E={CERTIFICATE:"certificate",Q_AND_A_ENABLED:"q_and_a_enabled"},j="udemy",D="nasba",S=[j,D]},"./src/udemy/js/course-taking/curriculum/constants.js":function(e,t,r){"use strict";r.d(t,"c",(function(){return o})),r.d(t,"a",(function(){return s})),r.d(t,"f",(function(){return a})),r.d(t,"d",(function(){return i})),r.d(t,"e",(function(){return n})),r.d(t,"b",(function(){return l})),r.d(t,"g",(function(){return c}));var o=Object.freeze({CURRICULUM_ITEM:"curriculum_item",LOCKED_SCREEN:"locked_screen",END_SCREEN:"end_screen",REVIEW_PROMPT:"review_prompt"}),s=Object.freeze({LECTURE:"lecture",QUIZ:"quiz",PRACTICE:"practice",CHAPTER:"chapter"}),a="chapter",i={completed_lecture_ids:s.LECTURE,completed_quiz_ids:s.QUIZ,completed_assignment_ids:s.PRACTICE},n=Object.freeze({CODING_EXERCISE:"coding-exercise",PRACTICE_TEST:"practice-test",SIMPLE_QUIZ:"simple-quiz"}),l="start",c=Object.freeze({NEXT:"next_lecture",PREVIOUS:"previous_lecture"})},"./src/udemy/js/course-taking/curriculum/curriculum-item.mobx-model.js":function(e,t,r){"use strict";r.d(t,"a",(function(){return f}));var o,s,a,i,n,l=r("./node_modules/autobind-decorator/lib/esm/index.js"),c=r("./node_modules/mobx/lib/mobx.module.js"),p=r("./src/udemy/js/asset/asset.mobx-model.js"),u=r("./src/udemy/js/asset/helpers.js"),d=r("./src/udemy/js/utils/mobx.js"),h=r("./src/udemy/js/utils/ud-api.js"),m=r("./src/udemy/js/utils/ud-raven.js"),b=r("./src/udemy/js/utils/ud-utils.js"),f=(o=function(e){function t(e,r){var o;if(babelHelpers.classCallCheck(this,t),o=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this,e)),babelHelpers.initializerDefineProperty(o,"isCompleted",s,babelHelpers.assertThisInitialized(o)),babelHelpers.initializerDefineProperty(o,"isSelected",a,babelHelpers.assertThisInitialized(o)),babelHelpers.initializerDefineProperty(o,"isLoading",i,babelHelpers.assertThisInitialized(o)),babelHelpers.initializerDefineProperty(o,"isCpeFinalExam",n,babelHelpers.assertThisInitialized(o)),o.constructor===t)throw new Error("Cannot instantiate CurriculumItem base class directly - use one of the available subclasses.");return o.courseId=r,o}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"apiDataMap",get:function(){return{id:{source:"id",defaultValue:-1},type:"_class",isPublished:{source:"is_published",defaultValue:!0},objectIndex:"object_index",sortOrder:"sort_order",title:"title",resources:{source:"supplementary_assets",map:function(e){return e.map((function(e){return new(u.b[e.asset_type]||p.a)(e)}))},defaultValue:[]}}}},{key:"isExcludedFromCurriculumCount",get:function(){return!1}}]),babelHelpers.createClass(t,[{key:"setIsSelected",value:function(e){this.isSelected=e}},{key:"setComplete",value:function(){this.isCompleted=!0}},{key:"setIncomplete",value:function(){this.isCompleted=!1}},{key:"toggleComplete",value:function(){return this.isCompleted?this.markAsIncomplete():this.markAsComplete()}},{key:"markAsComplete",value:function(){throw new Error("Unable to mark ".concat(this.constructor.name," as completed."))}},{key:"markAsIncomplete",value:function(){var e=this;return this.isCompleted?(this.isLoading=!0,this.setIncomplete(),h.d.delete(this.markIncompleteUrl).catch(this.setComplete).finally(Object(c.action)((function(){e.isLoading=!1})))):Promise.resolve()}},{key:"updateProgress",value:function(e){return h.d.post(this.progressApiUrl,e)}},{key:"getResourceExternalURL",value:function(e){return e.isLoading=!0,h.d.get("".concat(this.resourcesApiUrl).concat(e.id,"/"),{params:{"fields[asset]":"external_url"}}).then(Object(c.action)((function(t){var r=t.data;if(e.isLoading=!1,!r.external_url)throw new Error("Could not fetch external URL for resource ".concat(e.id," (").concat(e.type,")"));return r.external_url}))).catch((function(e){return m.a.captureException(e),b.a.Feedback.fromText(gettext("Unable to redirect to the selected resource."),b.a.MessageType.error),e}))}},{key:"getResourceDownloadURL",value:function(e){return e.isLoading=!0,h.d.get("".concat(this.resourcesApiUrl).concat(e.id,"/"),{params:{"fields[asset]":"download_urls"}}).then(Object(c.action)((function(t){var r=t.data;if(e.isLoading=!1,r.download_urls&&r.download_urls[e.type]&&r.download_urls[e.type].length)return r.download_urls[e.type][0].file;throw new Error("Could not fetch download URL for resource ".concat(e.id," (").concat(e.type,")"))}))).catch((function(e){return m.a.captureException(e),b.a.Feedback.fromText(gettext("Unable to download selected item."),b.a.MessageType.error),e}))}},{key:"titleIndex",get:function(){return""}},{key:"displayTitle",get:function(){return this.isCpeFinalExam?this.title:"".concat(this.titleIndex," ").concat(this.title)}},{key:"canBeCompleted",get:function(){return this.isPublished}},{key:"canUserToggleCompletion",get:function(){return!0}},{key:"resourcesApiUrl",get:function(){throw new Error("Currriculum item does not support resources.")}},{key:"progressApiUrl",get:function(){throw new Error("Currriculum item does not support progress updates.")}},{key:"markIncompleteUrl",get:function(){throw new Error("Unable to mark ".concat(this.constructor.name," as incomplete."))}}]),t}(d.a),s=babelHelpers.applyDecoratedDescriptor(o.prototype,"isCompleted",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),a=babelHelpers.applyDecoratedDescriptor(o.prototype,"isSelected",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),i=babelHelpers.applyDecoratedDescriptor(o.prototype,"isLoading",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),n=babelHelpers.applyDecoratedDescriptor(o.prototype,"isCpeFinalExam",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),babelHelpers.applyDecoratedDescriptor(o.prototype,"setIsSelected",[l.a,c.action],Object.getOwnPropertyDescriptor(o.prototype,"setIsSelected"),o.prototype),babelHelpers.applyDecoratedDescriptor(o.prototype,"setComplete",[l.a,c.action],Object.getOwnPropertyDescriptor(o.prototype,"setComplete"),o.prototype),babelHelpers.applyDecoratedDescriptor(o.prototype,"setIncomplete",[l.a,c.action],Object.getOwnPropertyDescriptor(o.prototype,"setIncomplete"),o.prototype),babelHelpers.applyDecoratedDescriptor(o.prototype,"toggleComplete",[l.a,c.action],Object.getOwnPropertyDescriptor(o.prototype,"toggleComplete"),o.prototype),babelHelpers.applyDecoratedDescriptor(o.prototype,"markAsComplete",[l.a],Object.getOwnPropertyDescriptor(o.prototype,"markAsComplete"),o.prototype),babelHelpers.applyDecoratedDescriptor(o.prototype,"markAsIncomplete",[l.a,c.action],Object.getOwnPropertyDescriptor(o.prototype,"markAsIncomplete"),o.prototype),babelHelpers.applyDecoratedDescriptor(o.prototype,"getResourceExternalURL",[l.a,c.action],Object.getOwnPropertyDescriptor(o.prototype,"getResourceExternalURL"),o.prototype),babelHelpers.applyDecoratedDescriptor(o.prototype,"getResourceDownloadURL",[l.a,c.action],Object.getOwnPropertyDescriptor(o.prototype,"getResourceDownloadURL"),o.prototype),babelHelpers.applyDecoratedDescriptor(o.prototype,"displayTitle",[c.computed],Object.getOwnPropertyDescriptor(o.prototype,"displayTitle"),o.prototype),o)},"./src/udemy/js/course-taking/curriculum/curriculum-section.mobx-model.js":function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));var o,s,a=r("./node_modules/mobx/lib/mobx.module.js"),i=(o=function(e){function t(){var e,r;babelHelpers.classCallCheck(this,t);for(var o=arguments.length,a=new Array(o),i=0;i<o;i++)a[i]=arguments[i];return r=babelHelpers.possibleConstructorReturn(this,(e=babelHelpers.getPrototypeOf(t)).call.apply(e,[this].concat(a))),babelHelpers.initializerDefineProperty(r,"items",s,babelHelpers.assertThisInitialized(r)),r}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"addItem",value:function(e){this.items.push(e)}},{key:"setIsSelected",value:function(e){this.items.forEach((function(t){t.setIsSelected(e)}))}},{key:"isSelected",get:function(){return this.items.every((function(e){return e.isSelected}))}},{key:"legend",get:function(){var e=this.isPublished?gettext("Section %(index)s: "):gettext("Unpublished Section  %(index)s: ");return void 0===this.objectIndex?interpolate(e,{index:0},!0):interpolate(e,{index:this.objectIndex},!0)}},{key:"publishedItems",get:function(){return t.filterPublishedItems(this.items)}},{key:"numPublishedItems",get:function(){return this.items.filter((function(e){return e.isPublished})).length}},{key:"numCompletedItems",get:function(){return this.items.filter((function(e){return e.isCompleted&&e.isPublished})).length}},{key:"timeEstimation",get:function(){return t.calculateEstimatedTime(this.items)}}],[{key:"filterPublishedItems",value:function(e){return e.filter((function(e){return e.isPublished}))}},{key:"calculateEstimatedTime",value:function(e){return e.reduce((function(e,t){return t.asset&&(e+=t.asset.timeEstimation),e}),0)}}]),t}(r("./src/udemy/js/course-taking/curriculum/curriculum-item.mobx-model.js").a),s=babelHelpers.applyDecoratedDescriptor(o.prototype,"items",[a.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),babelHelpers.applyDecoratedDescriptor(o.prototype,"addItem",[a.action],Object.getOwnPropertyDescriptor(o.prototype,"addItem"),o.prototype),babelHelpers.applyDecoratedDescriptor(o.prototype,"isSelected",[a.computed],Object.getOwnPropertyDescriptor(o.prototype,"isSelected"),o.prototype),babelHelpers.applyDecoratedDescriptor(o.prototype,"publishedItems",[a.computed],Object.getOwnPropertyDescriptor(o.prototype,"publishedItems"),o.prototype),babelHelpers.applyDecoratedDescriptor(o.prototype,"numPublishedItems",[a.computed],Object.getOwnPropertyDescriptor(o.prototype,"numPublishedItems"),o.prototype),babelHelpers.applyDecoratedDescriptor(o.prototype,"numCompletedItems",[a.computed],Object.getOwnPropertyDescriptor(o.prototype,"numCompletedItems"),o.prototype),babelHelpers.applyDecoratedDescriptor(o.prototype,"setIsSelected",[a.action],Object.getOwnPropertyDescriptor(o.prototype,"setIsSelected"),o.prototype),o)},"./src/udemy/js/course-taking/curriculum/lecture.mobx-model.js":function(e,t,r){"use strict";r.d(t,"a",(function(){return u}));var o,s,a=r("./node_modules/autobind-decorator/lib/esm/index.js"),i=r("./node_modules/mobx/lib/mobx.module.js"),n=r("./src/udemy/js/asset/asset.mobx-model.js"),l=r("./src/udemy/js/asset/constants.js"),c=r("./src/udemy/js/asset/helpers.js"),p=r("./src/udemy/js/utils/ud-api.js"),u=(o=function(e){function t(){var e,r;babelHelpers.classCallCheck(this,t);for(var o=arguments.length,a=new Array(o),i=0;i<o;i++)a[i]=arguments[i];return r=babelHelpers.possibleConstructorReturn(this,(e=babelHelpers.getPrototypeOf(t)).call.apply(e,[this].concat(a))),babelHelpers.initializerDefineProperty(r,"lastWatchedSecond",s,babelHelpers.assertThisInitialized(r)),r}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"setLastWatchedSecond",value:function(e){this.lastWatchedSecond=e}},{key:"markAsViewed",value:function(){return p.d.post("/users/me/subscribed-courses/".concat(this.courseId,"/lectures/").concat(this.id,"/view-logs/"))}},{key:"markAsComplete",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isCompleted)return Promise.resolve();this.isLoading=!0,this.setComplete();var r="/users/me/subscribed-courses/".concat(this.courseId,"/completed-lectures/"),o={lecture_id:this.id,downloaded:t};return p.d.post(r,o).catch(this.setIncomplete).finally(Object(i.action)((function(){e.isLoading=!1})))}},{key:"apiDataMap",get:function(){return babelHelpers.objectSpread({},babelHelpers.get(babelHelpers.getPrototypeOf(t.prototype),"apiDataMap",this),{description:"description",downloadUrl:"download_url",isFree:"is_free",lastWatchedSecond:{source:"last_watched_second",map:function(e){return null!==e?e:void 0}},asset:{source:"asset",map:function(e){if(e)return new(c.b[e.asset_type]||n.a)(e)}},url:"url"})}},{key:"titleIndex",get:function(){return this.isPublished?"".concat(this.objectIndex,"."):gettext("Unpublished lecture:")}},{key:"isVideo",get:function(){return this.asset&&[l.b.VIDEO,l.b.VIDEO_MASHUP,l.b.AUDIO].includes(this.asset.type)}},{key:"isMissingAsset",get:function(){return!this.asset||this.asset.type===l.b.UPCOMING||this.asset.status!==l.a.SUCCESS}},{key:"resourcesApiUrl",get:function(){return"/users/me/subscribed-courses/".concat(this.courseId,"/lectures/").concat(this.id,"/supplementary-assets/")}},{key:"progressApiUrl",get:function(){return"/users/me/subscribed-courses/".concat(this.courseId,"/lectures/").concat(this.id,"/progress-logs/")}},{key:"markIncompleteUrl",get:function(){return"/users/me/subscribed-courses/".concat(this.courseId,"/completed-lectures/").concat(this.id,"/")}},{key:"icon",get:function(){return this.isVideo?"play-circle":{Article:"article",Presentation:"presentation"}[this.asset&&this.asset.type]||"ellipsis-h"}}]),t}(r("./src/udemy/js/course-taking/curriculum/curriculum-item.mobx-model.js").a),s=babelHelpers.applyDecoratedDescriptor(o.prototype,"lastWatchedSecond",[i.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),babelHelpers.applyDecoratedDescriptor(o.prototype,"setLastWatchedSecond",[i.action],Object.getOwnPropertyDescriptor(o.prototype,"setLastWatchedSecond"),o.prototype),babelHelpers.applyDecoratedDescriptor(o.prototype,"markAsComplete",[a.a,i.action],Object.getOwnPropertyDescriptor(o.prototype,"markAsComplete"),o.prototype),o)},"./src/udemy/js/course-taking/curriculum/practice.mobx-model.js":function(e,t,r){"use strict";r.d(t,"a",(function(){return c}));var o,s,a,i,n,l=r("./node_modules/mobx/lib/mobx.module.js"),c=(o=function(e){function t(){var e,r;babelHelpers.classCallCheck(this,t);for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];return r=babelHelpers.possibleConstructorReturn(this,(e=babelHelpers.getPrototypeOf(t)).call.apply(e,[this].concat(l))),babelHelpers.initializerDefineProperty(r,"videoComponent",s,babelHelpers.assertThisInitialized(r)),babelHelpers.initializerDefineProperty(r,"textComponent",a,babelHelpers.assertThisInitialized(r)),babelHelpers.initializerDefineProperty(r,"downloadableAssets",i,babelHelpers.assertThisInitialized(r)),babelHelpers.initializerDefineProperty(r,"questions",n,babelHelpers.assertThisInitialized(r)),r}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"setVideoComponent",value:function(e){this.videoComponent=e}},{key:"setTextComponent",value:function(e){this.textComponent=e}},{key:"addDownloadableAsset",value:function(e){this.downloadableAssets.push(e)}},{key:"setQuestions",value:function(e){this.questions=e}},{key:"apiDataMap",get:function(){return babelHelpers.objectSpread({},babelHelpers.get(babelHelpers.getPrototypeOf(t.prototype),"apiDataMap",this),{description:"description",estimatedDuration:"estimated_duration",isFree:"is_free",numSubmissions:{source:"num_submissions",defaultValue:0}})}},{key:"isExcludedFromCurriculumCount",get:function(){return!0}},{key:"titleIndex",get:function(){return interpolate(gettext("Assignment %(index)s:"),{index:this.objectIndex},!0)}},{key:"canUserToggleCompletion",get:function(){return!1}},{key:"resourcesApiUrl",get:function(){return"/practices/".concat(this.id,"/supplementary-assets/")}},{key:"progressApiUrl",get:function(){return"/users/me/subscribed-courses/".concat(this.courseId,"/practices/").concat(this.id,"/progress-logs/")}}]),t}(r("./src/udemy/js/course-taking/curriculum/curriculum-item.mobx-model.js").a),s=babelHelpers.applyDecoratedDescriptor(o.prototype,"videoComponent",[l.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),a=babelHelpers.applyDecoratedDescriptor(o.prototype,"textComponent",[l.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),i=babelHelpers.applyDecoratedDescriptor(o.prototype,"downloadableAssets",[l.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),n=babelHelpers.applyDecoratedDescriptor(o.prototype,"questions",[l.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),babelHelpers.applyDecoratedDescriptor(o.prototype,"setVideoComponent",[l.action],Object.getOwnPropertyDescriptor(o.prototype,"setVideoComponent"),o.prototype),babelHelpers.applyDecoratedDescriptor(o.prototype,"setTextComponent",[l.action],Object.getOwnPropertyDescriptor(o.prototype,"setTextComponent"),o.prototype),babelHelpers.applyDecoratedDescriptor(o.prototype,"addDownloadableAsset",[l.action],Object.getOwnPropertyDescriptor(o.prototype,"addDownloadableAsset"),o.prototype),babelHelpers.applyDecoratedDescriptor(o.prototype,"setQuestions",[l.action],Object.getOwnPropertyDescriptor(o.prototype,"setQuestions"),o.prototype),o)},"./src/udemy/js/course-taking/curriculum/quiz.mobx-model.js":function(e,t,r){"use strict";r.d(t,"a",(function(){return l}));var o,s=r("./node_modules/autobind-decorator/lib/esm/index.js"),a=r("./node_modules/mobx/lib/mobx.module.js"),i=r("./src/udemy/js/utils/ud-api.js"),n=r("./src/udemy/js/course-taking/curriculum/constants.js"),l=(o=function(e){function t(){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).apply(this,arguments))}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"markAsComplete",value:function(){var e=this;if(this.isCompleted)return Promise.resolve();this.isLoading=!0,this.setComplete();var t="/users/me/subscribed-courses/".concat(this.courseId,"/quizzes/").concat(this.id,"/user-attempted-quizzes/");return i.d.post(t,{marked_completed:!0}).catch(this.setIncomplete).finally(Object(a.action)((function(){e.isLoading=!1})))}},{key:"apiDataMap",get:function(){return babelHelpers.objectSpread({},babelHelpers.get(babelHelpers.getPrototypeOf(t.prototype),"apiDataMap",this),{quizType:"type",description:"description",numAssessments:"num_assessments",version:"version",durationHours:{source:"duration",map:function(e){return Math.floor(e/3600)}},durationMinutes:{source:"duration",map:function(e){return Math.floor(e/60)%60}},isDraft:"is_draft",passPercent:"pass_percent",changelog:"changelog"})}},{key:"titleIndex",get:function(){return this.isPublished?this.quizType===n.e.CODING_EXERCISE?interpolate(gettext("Coding Exercise %(index)s:"),{index:this.objectIndex},!0):this.quizType===n.e.PRACTICE_TEST?interpolate(gettext("Practice Test %(index)s:"),{index:this.objectIndex},!0):interpolate(gettext("Quiz %(index)s:"),{index:this.objectIndex},!0):this.unpublishedTitle}},{key:"unpublishedTitle",get:function(){return this.quizType===n.e.CODING_EXERCISE?gettext("Unpublished Coding Exercise:"):this.quizType===n.e.PRACTICE_TEST?gettext("Unpublished Practice Test:"):gettext("Unpublished Quiz:")}},{key:"canBeCompleted",get:function(){return babelHelpers.get(babelHelpers.getPrototypeOf(t.prototype),"canBeCompleted",this)&&this.quizType!==n.e.PRACTICE_TEST}},{key:"markIncompleteUrl",get:function(){return"/users/me/subscribed-courses/".concat(this.courseId,"/completed-quizzes/").concat(this.id,"/")}}]),t}(r("./src/udemy/js/course-taking/curriculum/curriculum-item.mobx-model.js").a),babelHelpers.applyDecoratedDescriptor(o.prototype,"markAsComplete",[s.a,a.action],Object.getOwnPropertyDescriptor(o.prototype,"markAsComplete"),o.prototype),o)},"./src/udemy/js/course-taking/enrollment.mobx-model.js":function(e,t,r){"use strict";r.d(t,"a",(function(){return u}));var o,s,a,i,n=r("./node_modules/autobind-decorator/lib/esm/index.js"),l=r("./node_modules/mobx/lib/mobx.module.js"),c=r("./src/udemy/js/utils/mobx.js"),p=r("./src/udemy/js/utils/ud-api.js"),u=(o=function(e){function t(){var e,r;babelHelpers.classCallCheck(this,t);for(var o=arguments.length,n=new Array(o),l=0;l<o;l++)n[l]=arguments[l];return r=babelHelpers.possibleConstructorReturn(this,(e=babelHelpers.getPrototypeOf(t)).call.apply(e,[this].concat(n))),babelHelpers.initializerDefineProperty(r,"favoritedTime",s,babelHelpers.assertThisInitialized(r)),babelHelpers.initializerDefineProperty(r,"archivedTime",a,babelHelpers.assertThisInitialized(r)),babelHelpers.initializerDefineProperty(r,"notificationSettings",i,babelHelpers.assertThisInitialized(r)),r.favoriteEndpoint="/users/me/favorited-courses/",r.archiveEndpoint="/users/me/archived-courses/",r}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"favorite",value:function(){var e=this;return p.d.post(this.favoriteEndpoint,{course_id:this.courseId},{params:{"fields[course]":"favorite_time"}}).then(Object(l.action)((function(t){return e.favoritedTime=t.data.favorite_time,e.favoritedTime})))}},{key:"unfavorite",value:function(){var e=this;return p.d.delete("".concat(this.favoriteEndpoint).concat(this.courseId,"/")).then(Object(l.action)((function(){e.favoritedTime=null})))}},{key:"toggleFavorited",value:function(){return this.favoritedTime?this.unfavorite():this.favorite()}},{key:"archive",value:function(){var e=this;return p.d.post(this.archiveEndpoint,{course_id:this.courseId},{params:{"fields[course]":"archive_time"}}).then(Object(l.action)((function(t){e.archivedTime=t.data.archive_time})))}},{key:"unarchive",value:function(){var e=this;return p.d.delete("".concat(this.archiveEndpoint).concat(this.courseId,"/")).then(Object(l.action)((function(){e.archivedTime=null})))}},{key:"toggleArchived",value:function(){return this.archivedTime?this.unarchive():this.archive()}},{key:"unenroll",value:function(){return p.d.delete("users/me/subscribed-courses/".concat(this.courseId,"/"))}},{key:"apiDataMap",get:function(){return{courseId:"courseId",archivedTime:"archive_time",favoritedTime:"favorite_time",notificationSettings:"notification_settings",wasPurchased:"was_purchased_by_student",wasPaid:"was_paid_by_student",isInRefundPeriod:"is_in_refund_period",availableFeatures:"available_features"}}}]),t}(c.a),s=babelHelpers.applyDecoratedDescriptor(o.prototype,"favoritedTime",[l.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),a=babelHelpers.applyDecoratedDescriptor(o.prototype,"archivedTime",[l.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),i=babelHelpers.applyDecoratedDescriptor(o.prototype,"notificationSettings",[l.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),babelHelpers.applyDecoratedDescriptor(o.prototype,"toggleFavorited",[n.a],Object.getOwnPropertyDescriptor(o.prototype,"toggleFavorited"),o.prototype),babelHelpers.applyDecoratedDescriptor(o.prototype,"unarchive",[l.action],Object.getOwnPropertyDescriptor(o.prototype,"unarchive"),o.prototype),babelHelpers.applyDecoratedDescriptor(o.prototype,"toggleArchived",[n.a],Object.getOwnPropertyDescriptor(o.prototype,"toggleArchived"),o.prototype),o)},"./src/udemy/js/course-taking/reviews/constants.js":function(e,t,r){"use strict";r.d(t,"d",(function(){return o})),r.d(t,"g",(function(){return s})),r.d(t,"e",(function(){return a})),r.d(t,"h",(function(){return i})),r.d(t,"b",(function(){return n})),r.d(t,"f",(function(){return l})),r.d(t,"i",(function(){return c})),r.d(t,"a",(function(){return p})),r.d(t,"c",(function(){return u}));var o=720,s=3600,a=7200,i=Object.freeze({INITIAL:{key:"course_taking__initial",urlParam:"in",id:"i"},INITIAL_PRACTICE:{key:"course_taking__initial",urlParam:"in",id:"ip"},MIDDLE:{key:"course_taking__middle",urlParam:"mi",id:"m"},FINAL:{key:"course_taking__final",urlParam:"fi",id:"f"},FINAL_NEW:{key:"course_taking__initial--end",urlParam:"ie",id:"fn"}}),n=Object.freeze([i.FINAL.key,i.FINAL_NEW.key]),l=Object.freeze({VIEW_PROMPT:"view-review-attributes-preprompt",CANCEL:"cancel"}),c="review_prompt_id",p=gettext("Congrats on finishing the course!"),u=gettext("Congrats on finishing the selected portion of this course")},"./src/udemy/js/invite/invite-alert/invite-alert.less":function(e,t,r){e.exports={"invite-alert":"invite-alert--invite-alert--6BYhb","invite-alert__content":"invite-alert--invite-alert__content--FTJwY","invite-alert__content-container":"invite-alert--invite-alert__content-container--37BgU","invite-alert__icon":"invite-alert--invite-alert__icon--JiRgf"}},"./src/udemy/js/invite/invite-alert/invite-alert.react-component.js":function(e,t,r){"use strict";var o=r("./node_modules/autobind-decorator/lib/esm/index.js"),s=r("./node_modules/mobx-react/index.module.js"),a=r("./node_modules/prop-types/index.js"),i=r.n(a),n=r("./node_modules/react/index.js"),l=r.n(n),c=r("./src/udemy/js/base-components/alert.react-component.js"),p=r("./src/udemy/js/base-components/image.react-component.js"),u=r("./src/udemy/js/base-components/udlite/brand/marketplace-only.react-component.js"),d=r("./src/udemy/js/share/config.js"),h=r("./src/udemy/js/share/constants.js"),m=r("./src/udemy/js/share/helpers.js"),b=r("./src/udemy/js/utils/currency-formatter.js"),f=r("./src/udemy/js/utils/escape/safely-set-inner-html.js"),y=r("./src/udemy/js/utils/get-request-data.js"),g=r("./src/udemy/js/utils/ud-api-stat.js"),v=r("./src/udemy/js/utils/ud-link.js"),w=r("./node_modules/lodash-es/partial.js"),k=r("./node_modules/mobx/lib/mobx.module.js"),_=r("./src/udemy/js/utils/ud-expiring-local-storage.js"),E=r("./src/udemy/js/utils/ud-moment.js"),j=Object(w.a)(_.a,"Alert");var D,S,C=function(){var e,t=Object(E.b)(new Date).add(60,"days").toDate(),r=j("invite",t),o=Object(k.observable)({hidden:r.get("hidden")||!1});return e={disable:Object(k.action)((function(){r.set("hidden",!0),o.hidden=!0})),get hidden(){return o.hidden}},babelHelpers.applyDecoratedDescriptor(e,"hidden",[k.computed],Object.getOwnPropertyDescriptor(e,"hidden"),e),e};r("./src/udemy/js/invite/invite-alert/invite-alert.less");r.d(t,"a",(function(){return T}));var O=Object(y.a)(),P=function(e){var t=e.text,r=e.onClick;return l.a.createElement("a",{href:"/invite",onClick:r,rel:"noopener noreferrer",target:"_blank"},t)};P.propTypes={onClick:i.a.func.isRequired,text:i.a.string.isRequired};var T=Object(s.d)((S=function(e){function t(e){var r;return babelHelpers.classCallCheck(this,t),(r=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this,e))).alertStore=new C,r}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"onInviteClick",value:function(){g.c.trackPageEvent("trackclick","invite-alert",{pathname:window.location.pathname})}},{key:"render",value:function(){if(this.alertStore.hidden)return null;var e=l.a.createElement(P,{onClick:this.onInviteClick,text:gettext("Share Udemy with friends")});if(Object(m.b)()){var t=Object(b.a)(h.a,{locale:O.locale,symbol:"$",scale:0});e=l.a.createElement("div",null,l.a.createElement("span",Object(f.a)({descriptionOfCaller:"invite-alert:referral-type",html:interpolate(d.b[Object(m.c)()?h.c.TWO_SIDED:h.c.ONE_SIDED].inviteAlert,{creditAmount:t},!0)})),l.a.createElement(P,{onClick:this.onInviteClick,text:gettext("Learn more.")}))}return l.a.createElement(u.a,null,l.a.createElement("div",{className:"container","data-purpose":"invite-alert"},l.a.createElement(c.a,{bsStyle:"info",icon:!1,className:"invite-alert--invite-alert--6BYhb",onDismiss:this.alertStore.disable},l.a.createElement("div",{className:"invite-alert--invite-alert__content-container--37BgU"},l.a.createElement(p.a,{alt:gettext("Credit"),height:50,src:v.a.toS3Images("home/referral_program/credit_icon.svg"),className:"invite-alert--invite-alert__icon--JiRgf",width:59}),l.a.createElement("div",{className:"invite-alert--invite-alert__content--FTJwY"},e)))))}}]),t}(n.Component),babelHelpers.applyDecoratedDescriptor(S.prototype,"onInviteClick",[o.a],Object.getOwnPropertyDescriptor(S.prototype,"onInviteClick"),S.prototype),D=S))||D},"./src/udemy/js/learning-path/context-menu/context-menu-event-tracker.js":function(e,t,r){"use strict";var o=r("./src/udemy/js/learning-path/constants.js"),s=r("./src/udemy/js/organization-common/user-tracking-analytics/user-tracker.js"),a=function(){function e(){babelHelpers.classCallCheck(this,e)}return babelHelpers.createClass(e,[{key:"clickedAction",value:function(e,t){s.a.sendToUFB("".concat(e,".InContextActions"),{action:o.c.CLICKED_ACTION,label:t})}},{key:"deletedPath",value:function(e){s.a.sendAll(e,{action:o.c.DELETED_PATH})}}]),e}();t.a=new a},"./src/udemy/js/learning-path/context-menu/learning-path-context-menu.react-component.js":function(e,t,r){"use strict";var o,s,a,i,n,l,c,p,u,d,h,m,b,f,y,g,v,w,k,_,E,j,D,S,C,O,P,T,x,R,H,A,I,L,M,N,F,U,z,B,q,G,V,K,W,Y,X,Q,J,Z,$,ee,te,re,oe,se,ae,ie,ne,le,ce,pe,ue,de,he=r("./node_modules/mobx-react/index.module.js"),me=r("./node_modules/prop-types/index.js"),be=r.n(me),fe=r("./node_modules/react/index.js"),ye=r.n(fe),ge=r("./src/udemy/js/base-components/dropdown-ellipsis.react-component.js"),ve=r("./src/udemy/js/organization-common/notification-message/notification-message.react-component.js"),we=r("./src/udemy/js/organization-common/notifier.mobx-store.js"),ke=r("./src/udemy/js/utils/a11y.js"),_e=r("./src/udemy/js/learning-path/learning-path.mobx-model.js"),Ee=r("./node_modules/autobind-decorator/lib/esm/index.js"),je=r("./src/udemy/js/base-components/icon.react-component.js"),De=r("./src/udemy/js/base-components/menu-item.react-component.js"),Se=r("./src/udemy/js/learning-path/context-menu/context-menu-event-tracker.js"),Ce=r("./node_modules/mobx/lib/mobx.module.js"),Oe=r("./src/udemy/js/learning-path/list-page/constants.js"),Pe=r("./src/udemy/js/learning-path/list-page/folders/learning-path-folder.mobx-model.js"),Te=r("./src/udemy/js/learning-path/utils.js"),xe=r("./src/udemy/js/utils/get-config-data.js"),Re=r("./src/udemy/js/utils/ud-api.js"),He=Object(xe.a)(),Ae=(o=function(){function e(t){babelHelpers.classCallCheck(this,e),babelHelpers.initializerDefineProperty(this,"isAddToFoldersModalVisible",s,this),babelHelpers.initializerDefineProperty(this,"isAddToFoldersFormVisible",a,this),babelHelpers.initializerDefineProperty(this,"isLoadingFolders",i,this),babelHelpers.initializerDefineProperty(this,"isCreatingFolder",n,this),babelHelpers.initializerDefineProperty(this,"folders",l,this),babelHelpers.initializerDefineProperty(this,"newFolderTitle",c,this),this.learningPath=t}var t,r,o;return babelHelpers.createClass(e,[{key:"fetchFolders",value:(o=babelHelpers.asyncToGenerator(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._setLoadingFolders(!0),e.prev=1,e.next=4,Re.d.get("/structured-data/tags/learning_path_folder/",{params:{page_size:Oe.f}});case 4:t=e.sent,this._setFolders(t.data.results),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),Object(Te.a)(e.t0,Oe.l.UNABLE_TO_LOAD_FOLDERS);case 11:return e.prev=11,this._setLoadingFolders(!1),e.finish(11);case 14:case"end":return e.stop()}}),e,this,[[1,8,11,14]])}))),function(){return o.apply(this,arguments)})},{key:"createNewFolder",value:(r=babelHelpers.asyncToGenerator(regeneratorRuntime.mark((function e(){var t,r,o=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={},this.isCreatingFolder=!0,e.prev=2,e.next=5,Re.d.post("/structured-data/actions/",{actions:[{action:Oe.g.CREATE,options:{org:{id:He.brand.organization.id},title:this.newFolderTitle}}]});case 5:return r=e.sent,Object(Ce.runInAction)((function(){(t=new Pe.a(r.data.results[0].data)).setIsSelected(!0),o.folders.push(t),o.newFolderTitle=""})),e.abrupt("return",t);case 10:e.prev=10,e.t0=e.catch(2),Object(Te.a)(e.t0,Oe.l.UNABLE_TO_CREATE_FOLDER);case 13:return e.prev=13,Object(Ce.runInAction)((function(){o.isCreatingFolder=!1,o.isAddToFoldersFormVisible=!1})),e.finish(13);case 16:case"end":return e.stop()}}),e,this,[[2,10,13,16]])}))),function(){return r.apply(this,arguments)})},{key:"_setFolders",value:function(e){this.folders=e.map((function(e){return new Pe.a(e)}))}},{key:"_setLoadingFolders",value:function(e){this.isLoadingFolders=e}},{key:"toggleAddToFoldersForm",value:function(){this.isAddToFoldersFormVisible=!this.isAddToFoldersFormVisible}},{key:"setNewFolderTitle",value:function(e){this.newFolderTitle=e.target.value.trim()}},{key:"toggleAddToFoldersModalAndCloseForm",value:function(){this.isAddToFoldersModalVisible=!this.isAddToFoldersModalVisible,this.isAddToFoldersFormVisible=!1}},{key:"addSelectedFolderIdsToPath",value:function(){var e=this;this.selectedFolders.map((function(t){return e.learningPath.setNewFolderIdForPath(t)}))}},{key:"addLearningPathToFolders",value:(t=babelHelpers.asyncToGenerator(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Re.d.post("/structured-data/actions/",{actions:[{action:Oe.g.ASSIGN_LP_TO_FOLDERS,options:{learning_path:{id:this.learningPath.id},learning_path_folders:{items:this.selectedFolders}}}]});case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),Object(Te.a)(e.t0,Oe.l.UNABLE_TO_ADD_PATH_TO_FOLDERS);case 8:return e.prev=8,this.toggleAddToFoldersModalAndCloseForm(),this.addSelectedFolderIdsToPath(),e.finish(8);case 12:case"end":return e.stop()}}),e,this,[[0,5,8,12]])}))),function(){return t.apply(this,arguments)})},{key:"selectedFolders",get:function(){return this.folders.reduce((function(e,t){return t.isSelected&&e.push({id:t.id}),e}),[])}}]),e}(),s=babelHelpers.applyDecoratedDescriptor(o.prototype,"isAddToFoldersModalVisible",[Ce.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),a=babelHelpers.applyDecoratedDescriptor(o.prototype,"isAddToFoldersFormVisible",[Ce.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),i=babelHelpers.applyDecoratedDescriptor(o.prototype,"isLoadingFolders",[Ce.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),n=babelHelpers.applyDecoratedDescriptor(o.prototype,"isCreatingFolder",[Ce.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),l=babelHelpers.applyDecoratedDescriptor(o.prototype,"folders",[Ce.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),c=babelHelpers.applyDecoratedDescriptor(o.prototype,"newFolderTitle",[Ce.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),babelHelpers.applyDecoratedDescriptor(o.prototype,"fetchFolders",[Ee.a],Object.getOwnPropertyDescriptor(o.prototype,"fetchFolders"),o.prototype),babelHelpers.applyDecoratedDescriptor(o.prototype,"createNewFolder",[Ee.a,Ce.action],Object.getOwnPropertyDescriptor(o.prototype,"createNewFolder"),o.prototype),babelHelpers.applyDecoratedDescriptor(o.prototype,"_setFolders",[Ce.action],Object.getOwnPropertyDescriptor(o.prototype,"_setFolders"),o.prototype),babelHelpers.applyDecoratedDescriptor(o.prototype,"_setLoadingFolders",[Ce.action],Object.getOwnPropertyDescriptor(o.prototype,"_setLoadingFolders"),o.prototype),babelHelpers.applyDecoratedDescriptor(o.prototype,"toggleAddToFoldersForm",[Ee.a,Ce.action],Object.getOwnPropertyDescriptor(o.prototype,"toggleAddToFoldersForm"),o.prototype),babelHelpers.applyDecoratedDescriptor(o.prototype,"setNewFolderTitle",[Ee.a,Ce.action],Object.getOwnPropertyDescriptor(o.prototype,"setNewFolderTitle"),o.prototype),babelHelpers.applyDecoratedDescriptor(o.prototype,"toggleAddToFoldersModalAndCloseForm",[Ee.a,Ce.action],Object.getOwnPropertyDescriptor(o.prototype,"toggleAddToFoldersModalAndCloseForm"),o.prototype),babelHelpers.applyDecoratedDescriptor(o.prototype,"addSelectedFolderIdsToPath",[Ce.action],Object.getOwnPropertyDescriptor(o.prototype,"addSelectedFolderIdsToPath"),o.prototype),babelHelpers.applyDecoratedDescriptor(o.prototype,"selectedFolders",[Ce.computed],Object.getOwnPropertyDescriptor(o.prototype,"selectedFolders"),o.prototype),babelHelpers.applyDecoratedDescriptor(o.prototype,"addLearningPathToFolders",[Ee.a],Object.getOwnPropertyDescriptor(o.prototype,"addLearningPathToFolders"),o.prototype),o),Ie=r("./src/udemy/js/base-components/button.react-component.js"),Le=r("./src/udemy/js/base-components/form/form-group.react-component.js"),Me=r("./src/udemy/js/base-components/loader.react-component.js"),Ne=r("./src/udemy/js/base-components/modal.react-component.js"),Fe=r("./src/udemy/js/base-components/form/checkbox.react-component.js"),Ue=(r("./src/udemy/js/learning-path/context-menu/menu-items/add-to-folders/add-to-folders-modal.less"),Object(he.d)((h=d=function(e){function t(){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).apply(this,arguments))}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"handleChange",value:function(e){this.props.folder.setIsSelected(e.target.checked)}},{key:"render",value:function(){var e=this.props.folder;return ye.a.createElement(Fe.a,{className:"add-to-folders-modal--folder-selection-checkbox---wAkL","data-purpose":"folder-checkbox-".concat(e.id),id:"folder-".concat(e.id),onChange:this.handleChange,defaultChecked:this.props.isPathInFolder||e.isSelected},e.title)}}]),t}(fe.Component),d.propTypes={folder:be.a.instanceOf(Pe.a).isRequired,isPathInFolder:be.a.bool.isRequired},u=h,babelHelpers.applyDecoratedDescriptor(u.prototype,"handleChange",[Ee.a],Object.getOwnPropertyDescriptor(u.prototype,"handleChange"),u.prototype),p=u))||p),ze=r("./src/udemy/js/base-components/form/form-control.react-component.js"),Be=Object(he.c)("actionCallbacks","lpToFolderStore")(m=Object(he.d)((y=f=function(e){function t(){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).apply(this,arguments))}var r;return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"scrollToFolder",value:function(e){setTimeout((function(){var t=document.getElementById("folder-".concat(e));t&&t.scrollIntoView(!0)}))}},{key:"handleClick",value:(r=babelHelpers.asyncToGenerator(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==t.target.value){e.next=2;break}return e.abrupt("return",null);case 2:return e.next=4,this.props.lpToFolderStore.createNewFolder();case 4:(r=e.sent)&&(this.props.actionCallbacks.handleAddNewFolder(r),this.scrollToFolder(r.id));case 6:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"render",value:function(){var e=this.props.lpToFolderStore,t=e.setNewFolderTitle,r=e.isCreatingFolder;return ye.a.createElement(ye.a.Fragment,null,ye.a.createElement(ze.a,{className:"add-to-folders-modal--folder-title-input--1o9Je",onChange:t,onKeyDown:Object(ke.c)(this.handleClick),placeholder:gettext("Type the name of the new folder here"),disabled:r,autoFocus:!0,type:"text",maxLength:255,withCounter:!r}),r&&ye.a.createElement(ze.a.Feedback,null,ye.a.createElement(Me.a,null)))}}]),t}(ye.a.Component),f.propTypes={lpToFolderStore:be.a.instanceOf(Ae).isRequired,actionCallbacks:be.a.shape({handleAddNewFolder:be.a.func.isRequired}).isRequired},b=y,babelHelpers.applyDecoratedDescriptor(b.prototype,"scrollToFolder",[Ee.a],Object.getOwnPropertyDescriptor(b.prototype,"scrollToFolder"),b.prototype),babelHelpers.applyDecoratedDescriptor(b.prototype,"handleClick",[Ee.a],Object.getOwnPropertyDescriptor(b.prototype,"handleClick"),b.prototype),m=b))||m)||m,qe=Object(he.c)("lpToFolderStore")(g=Object(he.d)((w=v=function(e){function t(){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).apply(this,arguments))}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"componentDidMount",value:function(){this.props.lpToFolderStore.fetchFolders()}},{key:"renderCreateNewFolderContent",value:function(){var e=this.props.lpToFolderStore,t=e.isAddToFoldersFormVisible,r=e.toggleAddToFoldersForm;return t?ye.a.createElement(Be,null):ye.a.createElement(Ie.default,{bsStyle:"link",onClick:r,"data-purpose":"create-new-folder-btn"},gettext("Create new folder"))}},{key:"renderContent",value:function(){var e=this.props.lpToFolderStore,t=e.isLoadingFolders,r=e.learningPath,o=e.folders;return t?ye.a.createElement(Me.a,{size:"small",block:!0}):ye.a.createElement(ye.a.Fragment,null,ye.a.createElement("h5",null,gettext("Which folder would you like this path added to?")),ye.a.createElement("div",{className:"add-to-folders-modal--folders-selection--3zmld","data-purpose":"folders-selection"},ye.a.createElement(Le.a,{className:"add-to-folders-modal--folders-selection-checkbox-group--3oxyA"},o.map((function(e){return ye.a.createElement(Ue,{key:e.id,folder:e,isPathInFolder:r.folderIds.includes(e.id)})}))),ye.a.createElement(Le.a,{className:"add-to-folders-modal--folder-create-new--zoQEW"},this.renderCreateNewFolderContent())))}},{key:"render",value:function(){var e=this.props.lpToFolderStore,t=e.isAddToFoldersModalVisible,r=e.toggleAddToFoldersModalAndCloseForm,o=e.addLearningPathToFolders,s=e.selectedFolders;return ye.a.createElement(Ne.a,{show:t,onHide:r},ye.a.createElement(Ne.a.Header,{closeButton:!0},ye.a.createElement(Ne.a.Title,null,gettext("Add to folder"))),ye.a.createElement(Ne.a.Body,null,this.renderContent()),ye.a.createElement(Ne.a.Footer,null,ye.a.createElement(Ie.default,{bsStyle:"default",onClick:r,"data-purpose":"add-to-folders-cancel-btn"},gettext("Cancel")),ye.a.createElement(Ie.default,{bsStyle:"secondary",onClick:o,disabled:!s.length,"data-purpose":"add-to-folders-save-btn"},gettext("Save"))))}}]),t}(ye.a.Component),v.propTypes={lpToFolderStore:be.a.instanceOf(Ae).isRequired},g=w))||g)||g,Ge=Object(he.c)("learningPath","context")(k=Object(he.d)((j=E=function(e){function t(e){var r;return babelHelpers.classCallCheck(this,t),(r=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this,e))).lpToFolderStore=new Ae(r.props.learningPath),r}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"handleClick",value:function(){return Se.a.clickedAction(this.props.context,"Add to folder"),this.lpToFolderStore.toggleAddToFoldersModalAndCloseForm()}},{key:"render",value:function(){var e=this.lpToFolderStore.isAddToFoldersModalVisible;return ye.a.createElement(ye.a.Fragment,null,ye.a.createElement(De.a,{onClick:this.handleClick},ye.a.createElement(je.a,{glyph:"plus-circle",className:"mr-space-xs"}),gettext("Add to folder")),e&&ye.a.createElement(he.b,{lpToFolderStore:this.lpToFolderStore},ye.a.createElement(qe,null)))}}]),t}(ye.a.Component),E.propTypes={learningPath:me.PropTypes.instanceOf(_e.a).isRequired,context:me.PropTypes.string.isRequired},_=j,babelHelpers.applyDecoratedDescriptor(_.prototype,"handleClick",[Ee.a],Object.getOwnPropertyDescriptor(_.prototype,"handleClick"),_.prototype),k=_))||k)||k,Ve=r("./src/udemy/js/learning-path/context-menu/menu-items/assign.react-component.js"),Ke=r("./src/udemy/js/base-components/alert.react-component.js"),We=(D=function(){function e(t){babelHelpers.classCallCheck(this,e),babelHelpers.initializerDefineProperty(this,"isDeleteModalVisible",S,this),babelHelpers.initializerDefineProperty(this,"isConfirmBoxChecked",C,this),this.learningPath=t}return babelHelpers.createClass(e,[{key:"toggleDeleteModal",value:function(){this.isDeleteModalVisible=!this.isDeleteModalVisible}},{key:"handleConfirmBoxClick",value:function(){this.isConfirmBoxChecked=!this.isConfirmBoxChecked}}]),e}(),S=babelHelpers.applyDecoratedDescriptor(D.prototype,"isDeleteModalVisible",[Ce.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),C=babelHelpers.applyDecoratedDescriptor(D.prototype,"isConfirmBoxChecked",[Ce.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),babelHelpers.applyDecoratedDescriptor(D.prototype,"toggleDeleteModal",[Ee.a,Ce.action],Object.getOwnPropertyDescriptor(D.prototype,"toggleDeleteModal"),D.prototype),babelHelpers.applyDecoratedDescriptor(D.prototype,"handleConfirmBoxClick",[Ee.a,Ce.action],Object.getOwnPropertyDescriptor(D.prototype,"handleConfirmBoxClick"),D.prototype),D),Ye=Object(he.c)("context","learningPath","actionCallbacks")(O=Object(he.d)((x=T=function(e){function t(){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).apply(this,arguments))}var r;return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"deleteLearningPath",value:(r=babelHelpers.asyncToGenerator(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.props.learningPath.deletePath();case 3:Se.a.deletedPath(this.props.context),this.props.actionCallbacks.onDeleteSuccess(),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),this.props.actionCallbacks.onDeleteError();case 10:case"end":return e.stop()}}),e,this,[[0,7]])}))),function(){return r.apply(this,arguments)})},{key:"render",value:function(){var e=this.props.deleteStore,t=e.isDeleteModalVisible,r=e.toggleDeleteModal,o=e.isConfirmBoxChecked,s=e.handleConfirmBoxClick,a=this.props.learningPath.pathTitle;return ye.a.createElement(Ne.a,{show:t,onHide:r},ye.a.createElement(Ne.a.Header,{closeButton:!0},ye.a.createElement(Ne.a.Title,null,gettext("Delete path"))),ye.a.createElement(Ne.a.Body,null,ye.a.createElement(Ke.a,{bsStyle:"warning",icon:"warning"},interpolate(gettext("You are about to delete '%(pathTitle)s'"),{pathTitle:a},!0)),ye.a.createElement(Fe.a,{checked:o,onChange:s},ye.a.createElement("span",null,gettext("I understand that this path will be permanently deleted and I will not be able to access it in the future")))),ye.a.createElement(Ne.a.Footer,null,ye.a.createElement(Ie.default,{bsStyle:"default",onClick:r},gettext("Cancel")),ye.a.createElement(Ie.default,{bsStyle:"secondary",disabled:!o,onClick:this.deleteLearningPath},gettext("Delete"))))}}]),t}(ye.a.Component),T.propTypes={deleteStore:be.a.instanceOf(We).isRequired,context:be.a.string.isRequired,learningPath:be.a.instanceOf(_e.a).isRequired,actionCallbacks:be.a.shape({onDeleteSuccess:be.a.func,onDeleteError:be.a.func})},T.defaultProps={actionCallbacks:{}},P=x,babelHelpers.applyDecoratedDescriptor(P.prototype,"deleteLearningPath",[Ee.a],Object.getOwnPropertyDescriptor(P.prototype,"deleteLearningPath"),P.prototype),O=P))||O)||O,Xe=Object(he.c)("learningPath","context")(R=Object(he.d)((I=A=function(e){function t(e){var r;return babelHelpers.classCallCheck(this,t),(r=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this,e))).deleteStore=new We(e.learningPath),r}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"handleClick",value:function(){Se.a.clickedAction(this.props.context,"Delete"),this.deleteStore.toggleDeleteModal()}},{key:"render",value:function(){var e=this.props,t=e.learningPath,r=babelHelpers.objectWithoutProperties(e,["learningPath"]),o=this.deleteStore.isDeleteModalVisible;return ye.a.createElement(ye.a.Fragment,null,ye.a.createElement(De.a,{divider:!0}),ye.a.createElement(De.a,Object.assign({onClick:this.handleClick},r),ye.a.createElement(je.a,{glyph:"trash",className:"mr-space-xs"}),gettext("Delete")),o&&ye.a.createElement(Ye,{deleteStore:this.deleteStore,learningPath:t}))}}]),t}(ye.a.Component),A.propTypes={learningPath:me.PropTypes.instanceOf(_e.a).isRequired,context:me.PropTypes.string.isRequired},H=I,babelHelpers.applyDecoratedDescriptor(H.prototype,"handleClick",[Ee.a],Object.getOwnPropertyDescriptor(H.prototype,"handleClick"),H.prototype),R=H))||R)||R,Qe=r("./src/udemy/js/learning-path/constants.js"),Je=Object(he.c)("learningPath","context","notifier")(L=Object(he.d)((F=N=function(e){function t(){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).apply(this,arguments))}var r;return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"handleClick",value:(r=babelHelpers.asyncToGenerator(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Se.a.clickedAction(this.props.context,"Duplicate"),e.prev=1,e.next=4,this.props.learningPath.duplicate();case 4:t=e.sent,this.props.window.location.href="".concat(Qe.a).concat(t,"/edit/"),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),this.props.notifier.error(e.t0.message);case 11:case"end":return e.stop()}}),e,this,[[1,8]])}))),function(){return r.apply(this,arguments)})},{key:"render",value:function(){var e=this.props,t=(e.learningPath,babelHelpers.objectWithoutProperties(e,["learningPath"]));return ye.a.createElement(De.a,Object.assign({onClick:this.handleClick},t),ye.a.createElement(je.a,{glyph:"presentation",className:"mr-space-xs"}),gettext("Duplicate"))}}]),t}(ye.a.Component),N.propTypes={learningPath:me.instanceOf(_e.a).isRequired,context:me.string.isRequired,notifier:me.instanceOf(we.a).isRequired,window:me.object},N.defaultProps={window:window},M=F,babelHelpers.applyDecoratedDescriptor(M.prototype,"handleClick",[Ee.a],Object.getOwnPropertyDescriptor(M.prototype,"handleClick"),M.prototype),L=M))||L)||L,Ze=Object(he.c)("actionCallbacks","context")(U=Object(he.d)((q=B=function(e){function t(){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).apply(this,arguments))}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"handleClick",value:function(){return Se.a.clickedAction(this.props.context,"Edit"),this.props.actionCallbacks.handleEditClick()}},{key:"render",value:function(){var e=this.props,t=(e.actionCallbacks,babelHelpers.objectWithoutProperties(e,["actionCallbacks"]));return ye.a.createElement(De.a,Object.assign({onClick:this.handleClick},t),ye.a.createElement(je.a,{glyph:"pencil",className:"mr-space-xs"}),gettext("Edit"))}}]),t}(ye.a.Component),B.propTypes={actionCallbacks:me.PropTypes.shape({handleEditClick:me.PropTypes.func}),context:me.PropTypes.string.isRequired},B.defaultProps={actionCallbacks:{}},z=q,babelHelpers.applyDecoratedDescriptor(z.prototype,"handleClick",[Ee.a],Object.getOwnPropertyDescriptor(z.prototype,"handleClick"),z.prototype),U=z))||U)||U,$e=Object(he.c)("learningPath","context")(G=Object(he.d)((W=K=function(e){function t(){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).apply(this,arguments))}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"handleClick",value:function(){return Se.a.clickedAction(this.props.context,"Enroll"),this.props.learningPath.addEnrollmentToPath()}},{key:"render",value:function(){var e=this.props,t=(e.learningPath,babelHelpers.objectWithoutProperties(e,["learningPath"]));return ye.a.createElement(De.a,Object.assign({onClick:this.handleClick},t,{"data-purpose":"enroll-path"}),ye.a.createElement(je.a,{glyph:"check-circle",className:"mr-space-xs"}),gettext("Enroll"))}}]),t}(ye.a.Component),K.propTypes={learningPath:me.PropTypes.instanceOf(_e.a).isRequired,context:me.PropTypes.string.isRequired},V=W,babelHelpers.applyDecoratedDescriptor(V.prototype,"handleClick",[Ee.a],Object.getOwnPropertyDescriptor(V.prototype,"handleClick"),V.prototype),G=V))||G)||G,et=Object(he.c)("actionCallbacks","context")(Y=Object(he.d)((J=Q=function(e){function t(){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).apply(this,arguments))}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"handleClick",value:function(){return Se.a.clickedAction(this.props.context,"Remove from folder"),this.props.actionCallbacks.handleRemovePathFromFolder()}},{key:"render",value:function(){var e=this.props,t=(e.actionCallbacks,babelHelpers.objectWithoutProperties(e,["actionCallbacks"]));return ye.a.createElement(De.a,Object.assign({onClick:this.handleClick},t,{"data-purpose":"remove-path-from-folder"}),ye.a.createElement(je.a,{glyph:"times-circle",className:"mr-space-xs"}),gettext("Remove from folder"))}}]),t}(ye.a.Component),Q.propTypes={actionCallbacks:me.PropTypes.shape({handleRemovePathFromFolder:me.PropTypes.func.isRequired}).isRequired,context:me.PropTypes.string.isRequired},X=J,babelHelpers.applyDecoratedDescriptor(X.prototype,"handleClick",[Ee.a],Object.getOwnPropertyDescriptor(X.prototype,"handleClick"),X.prototype),Y=X))||Y)||Y,tt=r("./src/udemy/js/organization-common/resource-context-menu/menu-items/share-to-slack-menu-item-store.mobx-store.js"),rt=r("./src/udemy/js/organization-common/ufb-social-share/constants.js"),ot=r("./src/udemy/js/organization-common/ufb-social-share/share-on-slack-modal.react-component.js"),st=r("./src/udemy/js/learning-path/context-menu/menu-items/constants.js"),at=Object(he.c)("learningPath","context")(Z=Object(he.d)((te=ee=function(e){function t(e){var r;return babelHelpers.classCallCheck(this,t),(r=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this,e))).shareToSlackStore=new tt.a(e.learningPath.id,rt.c,e.context,r.props.window),r}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"handleClick",value:function(){Se.a.clickedAction(this.props.context,Qe.c.SHARE_TO_SLACK),this.shareToSlackStore.toggleIsLoading(),this.shareToSlackStore.shareResource()}},{key:"render",value:function(){var e=this.props,t=e.learningPath,r=babelHelpers.objectWithoutProperties(e,["learningPath"]);return ye.a.createElement(ye.a.Fragment,null,ye.a.createElement(De.a,Object.assign({onClick:this.handleClick},r),ye.a.createElement(je.a,{glyph:"slack",className:"mr-space-xs"}),st.b),ye.a.createElement(ot.a,{show:this.shareToSlackStore.isModalShown,onHide:this.shareToSlackStore.hideModal,onSubmit:this.shareToSlackStore.hideModal,onEntered:this.shareToSlackStore.toggleIsLoading,resourceId:t.id,resourceType:rt.c,context:this.props.context,shareData:this.shareToSlackStore.shareData,isUsingOldPermissionScopes:this.shareToSlackStore.isUsingOldPermissionScopes,teamName:this.shareToSlackStore.slackTeamName,checkSlackAuthentication:this.shareToSlackStore.checkSlackAuthentication,animation:!0}))}}]),t}(ye.a.Component),ee.propTypes={learningPath:be.a.instanceOf(_e.a).isRequired,context:be.a.string.isRequired,window:be.a.object},ee.defaultProps={window:window},$=te,babelHelpers.applyDecoratedDescriptor($.prototype,"handleClick",[Ee.a],Object.getOwnPropertyDescriptor($.prototype,"handleClick"),$.prototype),Z=$))||Z)||Z,it=Object(he.c)("learningPath","context")(re=Object(he.d)((ae=se=function(e){function t(){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).apply(this,arguments))}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"handleClick",value:function(){return Se.a.clickedAction(this.props.context,"Unenroll"),this.props.learningPath.removeEnrollmentFromPath()}},{key:"render",value:function(){var e=this.props,t=(e.learningPath,babelHelpers.objectWithoutProperties(e,["learningPath"]));return ye.a.createElement(De.a,Object.assign({onClick:this.handleClick},t,{"data-purpose":"unenroll-path"}),ye.a.createElement(je.a,{glyph:"times-circle",className:"mr-space-xs"}),gettext("Unenroll"))}}]),t}(ye.a.Component),se.propTypes={learningPath:me.PropTypes.instanceOf(_e.a).isRequired,context:me.PropTypes.string.isRequired},oe=ae,babelHelpers.applyDecoratedDescriptor(oe.prototype,"handleClick",[Ee.a],Object.getOwnPropertyDescriptor(oe.prototype,"handleClick"),oe.prototype),re=oe))||re)||re,nt=Object(he.c)("learningPath","context")(ie=Object(he.d)((ce=le=function(e){function t(){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).apply(this,arguments))}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"viewActivity",value:function(){Se.a.clickedAction(this.props.context,"View activity"),this.props.window.location.href="/organization-manage/path-insights/".concat(this.props.learningPath.id,"/")}},{key:"render",value:function(){var e=this.props,t=(e.learningPath,babelHelpers.objectWithoutProperties(e,["learningPath"]));return ye.a.createElement(De.a,Object.assign({onClick:this.viewActivity},t),ye.a.createElement(je.a,{glyph:"level-all",className:"mr-space-xs"}),gettext("View path activity"))}}]),t}(ye.a.Component),le.propTypes={learningPath:me.PropTypes.instanceOf(_e.a).isRequired,context:me.PropTypes.string.isRequired,window:me.PropTypes.object},le.defaultProps={window:window},ne=ce,babelHelpers.applyDecoratedDescriptor(ne.prototype,"viewActivity",[Ee.a],Object.getOwnPropertyDescriptor(ne.prototype,"viewActivity"),ne.prototype),ie=ne))||ie)||ie;r.d(t,"a",(function(){return ct}));var lt=function(e){var t=e.itemConfig,r=e.menuItems,o=babelHelpers.objectWithoutProperties(e,["itemConfig","menuItems"]);return Array.from(t.entries()).reduce((function(e,t,s){var a=babelHelpers.slicedToArray(t,2),i=a[0],n=a[1];if(r[i]&&n.visible){var l=r[i];e.push(ye.a.createElement(l,Object.assign({key:s,disabled:!n.enabled},o)))}return e}),[])},ct=Object(he.d)((de=ue=function(e){function t(){var e,r;babelHelpers.classCallCheck(this,t);for(var o=arguments.length,s=new Array(o),a=0;a<o;a++)s[a]=arguments[a];return(r=babelHelpers.possibleConstructorReturn(this,(e=babelHelpers.getPrototypeOf(t)).call.apply(e,[this].concat(s)))).menuItems={Assign:Ve.a,Delete:Xe,Edit:Ze,Unenroll:it,Enroll:$e,ViewActivity:nt,AddToFolders:Ge,RemoveFromFolder:et,Duplicate:Je,ShareToSlack:at},r.notifier=new we.a,r}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"renderItems",value:function(){return ye.a.createElement(lt,{"data-purpose":"learning-path-context-menu-item",itemConfig:this.props.itemConfig,menuItems:this.menuItems})}},{key:"render",value:function(){return 0===this.numberOfVisibleItems?null:ye.a.createElement(ye.a.Fragment,null,ye.a.createElement(he.b,{context:this.props.context,notifier:this.notifier,learningPath:this.props.learningPath},ye.a.createElement(ge.a,{id:Object(ke.a)("context-menu"),"data-purpose":"options-dropdown",title:gettext("Actions"),pullRight:this.props.pullRight,bsSize:this.props.size,dropup:this.props.dropup},this.renderItems())),ye.a.createElement(ve.a,{show:this.notifier.displayed,text:this.notifier.message,type:this.notifier.type,onClose:this.notifier.hideNotification}))}},{key:"numberOfVisibleItems",get:function(){return Array.from(this.props.itemConfig.entries()).filter((function(e){return e[1].visible})).length}}]),t}(ye.a.Component),ue.propTypes=babelHelpers.objectSpread({itemConfig:he.a.observableMap.isRequired,context:me.PropTypes.string.isRequired,learningPath:me.PropTypes.instanceOf(_e.a).isRequired,size:me.PropTypes.string},ge.a.PropTypes),ue.defaultProps={size:void 0,pullRight:!0},pe=de))||pe},"./src/udemy/js/learning-path/context-menu/menu-items/add-to-folders/add-to-folders-modal.less":function(e,t,r){e.exports={"folders-selection":"add-to-folders-modal--folders-selection--3zmld","folders-selection-checkbox-group":"add-to-folders-modal--folders-selection-checkbox-group--3oxyA","folder-selection-checkbox":"add-to-folders-modal--folder-selection-checkbox---wAkL","folder-create-new":"add-to-folders-modal--folder-create-new--zoQEW","folder-title-input":"add-to-folders-modal--folder-title-input--1o9Je"}},"./src/udemy/js/learning-path/context-menu/menu-items/assign.react-component.js":function(e,t,r){"use strict";r.d(t,"a",(function(){return E}));var o,s,a,i,n,l=r("./node_modules/autobind-decorator/lib/esm/index.js"),c=r("./node_modules/mobx/lib/mobx.module.js"),p=r("./node_modules/mobx-react/index.module.js"),u=r("./node_modules/prop-types/index.js"),d=r("./node_modules/react/index.js"),h=r.n(d),m=r("./src/udemy/js/base-components/button.react-component.js"),b=r("./src/udemy/js/base-components/icon.react-component.js"),f=r("./src/udemy/js/base-components/menu-item.react-component.js"),y=r("./src/udemy/js/organization-common/assign-resource/assign-resource-modal.react-component.js"),g=r("./src/udemy/js/utils/get-config-data.js"),v=r("./src/udemy/js/learning-path/learning-path.mobx-model.js"),w=r("./src/udemy/js/learning-path/context-menu/context-menu-event-tracker.js"),k=r("./src/udemy/js/learning-path/context-menu/menu-items/constants.js"),_=Object(g.a)(),E=Object(p.c)("learningPath","context","notifier")(o=Object(p.d)((n=i=function(e){function t(){var e,r;babelHelpers.classCallCheck(this,t);for(var o=arguments.length,s=new Array(o),i=0;i<o;i++)s[i]=arguments[i];return r=babelHelpers.possibleConstructorReturn(this,(e=babelHelpers.getPrototypeOf(t)).call.apply(e,[this].concat(s))),babelHelpers.initializerDefineProperty(r,"isAssignResourceModalVisible",a,babelHelpers.assertThisInitialized(r)),r}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"handleClick",value:function(){w.a.clickedAction(this.props.context,"Assign"),this.toggleAssignResourceModal()}},{key:"toggleAssignResourceModal",value:function(){this.isAssignResourceModalVisible=!this.isAssignResourceModalVisible}},{key:"onResourceAssigned",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"success";this.props.notifier[t](e)}},{key:"render",value:function(){var e=this.props,t=e.learningPath,r=e.type,o=babelHelpers.objectWithoutProperties(e,["learningPath","type"]),s=r===k.a.BUTTON?m.default:f.a,a=r===k.a.BUTTON?{bsStyle:"default",bsSize:"small",className:"mr-space-xs"}:o;return h.a.createElement(h.a.Fragment,null,h.a.createElement(s,Object.assign({onClick:this.handleClick},a,{"data-purpose":"assign-path"}),h.a.createElement(b.a,{glyph:"share",className:"mr-space-xs"}),gettext("Assign")),this.isAssignResourceModalVisible&&h.a.createElement(y.a,{resource:t,isVisible:this.isAssignResourceModalVisible,onHide:this.toggleAssignResourceModal,onResourceAssigned:this.onResourceAssigned,organizationId:_.brand.organization.id,context:this.props.context}))}}]),t}(h.a.Component),i.propTypes={learningPath:u.PropTypes.instanceOf(v.a).isRequired,context:u.PropTypes.string.isRequired,notifier:u.PropTypes.object.isRequired,type:u.PropTypes.oneOf(Object.values(k.a))},i.defaultProps={type:k.a.MENU_ITEM},s=n,a=babelHelpers.applyDecoratedDescriptor(s.prototype,"isAssignResourceModalVisible",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),babelHelpers.applyDecoratedDescriptor(s.prototype,"handleClick",[l.a],Object.getOwnPropertyDescriptor(s.prototype,"handleClick"),s.prototype),babelHelpers.applyDecoratedDescriptor(s.prototype,"toggleAssignResourceModal",[l.a,c.action],Object.getOwnPropertyDescriptor(s.prototype,"toggleAssignResourceModal"),s.prototype),babelHelpers.applyDecoratedDescriptor(s.prototype,"onResourceAssigned",[l.a],Object.getOwnPropertyDescriptor(s.prototype,"onResourceAssigned"),s.prototype),o=s))||o)||o},"./src/udemy/js/learning-path/context-menu/menu-items/constants.js":function(e,t,r){"use strict";r.d(t,"a",(function(){return o})),r.d(t,"b",(function(){return s}));var o={BUTTON:"button",MENU_ITEM:"menuItem"},s=gettext("Share to Slack")},"./src/udemy/js/learning-path/learning-path-item-content.mobx-model.js":function(e,t,r){"use strict";r.d(t,"a",(function(){return f}));var o,s,a,i=r("./node_modules/mobx/lib/mobx.module.js"),n=r("./src/udemy/js/course-auto-enroll/constants.js"),l=r("./src/udemy/js/course-taking/constants.js"),c=r("./src/udemy/js/course-taking/curriculum/constants.js"),p=r("./src/udemy/js/course-taking/curriculum/curriculum-section.mobx-model.js"),u=r("./src/udemy/js/course-taking/curriculum/lecture.mobx-model.js"),d=r("./src/udemy/js/course-taking/curriculum/practice.mobx-model.js"),h=r("./src/udemy/js/course-taking/curriculum/quiz.mobx-model.js"),m=r("./src/udemy/js/utils/mobx.js"),b=r("./src/udemy/js/utils/ud-api.js"),f=(o=function(e){function t(){var e,r;babelHelpers.classCallCheck(this,t);for(var o=arguments.length,i=new Array(o),n=0;n<o;n++)i[n]=arguments[n];return r=babelHelpers.possibleConstructorReturn(this,(e=babelHelpers.getPrototypeOf(t)).call.apply(e,[this].concat(i))),babelHelpers.initializerDefineProperty(r,"curriculumSections",s,babelHelpers.assertThisInitialized(r)),babelHelpers.initializerDefineProperty(r,"isCurriculumLoading",a,babelHelpers.assertThisInitialized(r)),r}var r,o;return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"enroll",value:(o=babelHelpers.asyncToGenerator(regeneratorRuntime.mark((function e(){var t,r,o,s=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:{},r=babelHelpers.objectSpread({course_id:this.courseId},t),e.next=4,b.d.post(this.enrollmentUrl,r);case 4:return o=e.sent,e.abrupt("return",o);case 6:case"end":return e.stop()}}),e,this)}))),function(){return o.apply(this,arguments)})},{key:"loadCurriculum",value:(r=babelHelpers.asyncToGenerator(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._setCurriculumLoading(!0),this.clearCurriculum(),e.next=4,b.d.get(this.curriculumUrl,{params:babelHelpers.objectSpread({page_size:l.r},l.e)});case 4:t=e.sent,this._parseCurriculum(t.data.results),this._setCurriculumLoading(!1);case 7:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"_parseCurriculum",value:function(e){var t=this,r=null;e.forEach((function(e){if(e._class===c.f)r=new p.a(e),t.curriculumSections.push(r);else{var o;switch(r||(r=new p.a({}),t.curriculumSections.push(r)),e._class){case c.a.LECTURE:o=new u.a(e,t.courseId);break;case c.a.QUIZ:o=new h.a(e,t.courseId);break;case c.a.PRACTICE:o=new d.a(e,t.courseId);break;default:throw new Error("Unknown curriculum item type, ".concat(e._class,"."))}t._checkItemSelection(o),r.addItem(o)}}))}},{key:"_checkItemSelection",value:function(e){e.setIsSelected(!0)}},{key:"clearCurriculum",value:function(){this.curriculumSections=[]}},{key:"_setCurriculumLoading",value:function(e){this.isCurriculumLoading=e}},{key:"setIsSelectAllChecked",value:function(e){this.curriculumSections.forEach((function(t){t.setIsSelected(e)}))}},{key:"userSelectedItems",get:function(){var e=[];return this.curriculumSections.forEach((function(t){t.items.forEach((function(t){t.isSelected&&e.push([t.type,t.id])}))})),e}},{key:"numUserSelectedItems",get:function(){return this.userSelectedItems.length}},{key:"isSelectAllChecked",get:function(){return this.curriculumSections.every((function(e){return e.isSelected}))}},{key:"apiDataMap",get:function(){return{id:"id",url:"url",enrollUrl:"enroll_url"}}},{key:"courseId",get:function(){return this.id}},{key:"curriculumUrl",get:function(){return"/courses/".concat(this.courseId,"/public-curriculum-items/")}},{key:"enrollmentUrl",get:function(){return n.a}}]),t}(m.a),s=babelHelpers.applyDecoratedDescriptor(o.prototype,"curriculumSections",[i.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),a=babelHelpers.applyDecoratedDescriptor(o.prototype,"isCurriculumLoading",[i.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),babelHelpers.applyDecoratedDescriptor(o.prototype,"userSelectedItems",[i.computed],Object.getOwnPropertyDescriptor(o.prototype,"userSelectedItems"),o.prototype),babelHelpers.applyDecoratedDescriptor(o.prototype,"numUserSelectedItems",[i.computed],Object.getOwnPropertyDescriptor(o.prototype,"numUserSelectedItems"),o.prototype),babelHelpers.applyDecoratedDescriptor(o.prototype,"isSelectAllChecked",[i.computed],Object.getOwnPropertyDescriptor(o.prototype,"isSelectAllChecked"),o.prototype),babelHelpers.applyDecoratedDescriptor(o.prototype,"_parseCurriculum",[i.action],Object.getOwnPropertyDescriptor(o.prototype,"_parseCurriculum"),o.prototype),babelHelpers.applyDecoratedDescriptor(o.prototype,"clearCurriculum",[i.action],Object.getOwnPropertyDescriptor(o.prototype,"clearCurriculum"),o.prototype),babelHelpers.applyDecoratedDescriptor(o.prototype,"_setCurriculumLoading",[i.action],Object.getOwnPropertyDescriptor(o.prototype,"_setCurriculumLoading"),o.prototype),o)},"./src/udemy/js/learning-path/learning-path-section-item.mobx-model.js":function(e,t,r){"use strict";var o,s,a,i,n,l,c,p,u,d,h,m,b,f=r("./node_modules/autobind-decorator/lib/esm/index.js"),y=r("./node_modules/mobx/lib/mobx.module.js"),g=r("./src/udemy/js/utils/ud-api.js"),v=r("./src/udemy/js/learning-path/editable-api-model.mobx-model.js"),w=r("./src/udemy/js/learning-path/learning-path-item-content.mobx-model.js"),k=r("./src/udemy/js/learning-path/utils.js"),_=(o=function(e){function t(){var e,r;babelHelpers.classCallCheck(this,t);for(var o=arguments.length,a=new Array(o),i=0;i<o;i++)a[i]=arguments[i];return r=babelHelpers.possibleConstructorReturn(this,(e=babelHelpers.getPrototypeOf(t)).call.apply(e,[this].concat(a))),babelHelpers.initializerDefineProperty(r,"selectedItemsMap",s,babelHelpers.assertThisInitialized(r)),r}var r;return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"_checkItemSelection",value:function(e){e.setIsSelected(!!this.selectedItemsMap[[e.type,e.id]])}},{key:"enroll",value:(r=babelHelpers.asyncToGenerator(regeneratorRuntime.mark((function e(){var r,o,s=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>0&&void 0!==s[0]?s[0]:{},e.next=3,babelHelpers.get(babelHelpers.getPrototypeOf(t.prototype),"enroll",this).call(this,babelHelpers.objectSpread({course_portion_id:this.id},r));case 3:return o=e.sent,e.abrupt("return",o);case 5:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"apiDataMap",get:function(){return babelHelpers.objectSpread({},babelHelpers.get(babelHelpers.getPrototypeOf(t.prototype),"apiDataMap",this),{title:{source:"course",map:function(e){return e.title}},image:{source:"course",map:function(e){return e.image_125_H}},imageMobile:{source:"course",map:function(e){return e.image_75x75}},numItems:{source:"course",map:function(e){return e.num_of_published_curriculum_objects}},numSelectedItems:"num_selected_items",duration:"estimated_content_length",_courseId:{source:"course",map:function(e){return e.id}},selectedItemsMap:{source:"items",map:function(e){var t={};return e.forEach((function(e){t[e]=1})),t}},courseLabel:{source:"course",map:function(e){var t=e.course_has_labels;return Object(k.d)(t)}}})}},{key:"courseId",get:function(){return this._courseId}}]),t}(w.a),s=babelHelpers.applyDecoratedDescriptor(o.prototype,"selectedItemsMap",[y.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),o),E=function(e){function t(){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).apply(this,arguments))}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"apiDataMap",get:function(){return babelHelpers.objectSpread({},babelHelpers.get(babelHelpers.getPrototypeOf(t.prototype),"apiDataMap",this),{title:"title",duration:"estimated_content_length",image:"image_125_H",imageMobile:"image_75x75",numItems:"num_of_published_curriculum_objects",numSelectedItems:"num_of_published_curriculum_objects",courseLabel:{source:"course_has_labels",map:function(e){return Object(k.d)(e)}}})}}]),t}(w.a),j=r("./src/udemy/js/learning-path/learning-path-page/constants.js"),D=(a=function(e){function t(){var e,r;babelHelpers.classCallCheck(this,t);for(var o=arguments.length,s=new Array(o),a=0;a<o;a++)s[a]=arguments[a];return r=babelHelpers.possibleConstructorReturn(this,(e=babelHelpers.getPrototypeOf(t)).call.apply(e,[this].concat(s))),babelHelpers.initializerDefineProperty(r,"image",i,babelHelpers.assertThisInitialized(r)),r}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"apiDataMap",get:function(){return{id:"id",title:"title",url:"url",image:"image"}}}]),t}(r("./src/udemy/js/utils/mobx.js").a),i=babelHelpers.applyDecoratedDescriptor(a.prototype,"image",[y.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),a);r.d(t,"a",(function(){return S}));var S=(n=y.observable.ref,m=h=function(e){function t(e,r){var o;return babelHelpers.classCallCheck(this,t),o=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this,e)),babelHelpers.initializerDefineProperty(o,"isCompleted",c,babelHelpers.assertThisInitialized(o)),babelHelpers.initializerDefineProperty(o,"learningPathSection",p,babelHelpers.assertThisInitialized(o)),babelHelpers.initializerDefineProperty(o,"content",u,babelHelpers.assertThisInitialized(o)),babelHelpers.initializerDefineProperty(o,"isContentSaving",d,babelHelpers.assertThisInitialized(o)),o.learningPathSection=r,o}var r,o,s;return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"editableFieldsMap",get:function(){return new Map([["title","title"],["description","description"]])}},{key:"resourceUrl",get:function(){return"".concat(this.learningPathSection.itemsUrl).concat(this.id,"/")}},{key:"completeUrl",get:function(){return"".concat(this.resourceUrl,"complete/")}},{key:"editContentUrl",get:function(){return"".concat(this.resourceUrl,"edit-content/")}},{key:"isEnrollable",get:function(){return j.l.includes(this.type)}}]),babelHelpers.createClass(t,[{key:"complete",value:(s=babelHelpers.asyncToGenerator(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isCompleted||this.type!==j.C){e.next=4;break}return e.next=3,this._storeCompletion();case 3:this.setIsCompleted(!0);case 4:return e.abrupt("return",!1);case 5:case"end":return e.stop()}}),e,this)}))),function(){return s.apply(this,arguments)})},{key:"_storeCompletion",value:(o=babelHelpers.asyncToGenerator(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.d.post(this.completeUrl);case 2:case"end":return e.stop()}}),e,this)}))),function(){return o.apply(this,arguments)})},{key:"editContent",value:(r=babelHelpers.asyncToGenerator(regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(j.k.includes(this.type)){e.next=2;break}throw new Error("Unable to edit content for this item");case 2:if(!this.isContentSaving){e.next=4;break}return e.abrupt("return",!1);case 4:return t={items:[],select_all:!1},this.content.isSelectAllChecked?t.select_all=!0:t.items=this.content.userSelectedItems,this._setContentSaving(!0),e.next=9,g.d.post(this.editContentUrl,t);case 9:r=e.sent,this.setDataFromAPI(r.data),this._setContentSaving(!1);case 12:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"_setContentSaving",value:function(e){this.isContentSaving=e}},{key:"setIsCompleted",value:function(e){this.isCompleted=e}},{key:"setTitle",value:function(e){this.type!==j.j&&this._changeEditableField("title",e)}},{key:"setDescription",value:function(e){this._changeEditableField("description",e)}},{key:"resetImage",value:function(){this.content.image=""}},{key:"apiDataMap",get:function(){return{id:"id",title:{source:["title","related_object_type","content"],map:function(e,t,r){return t===j.j?r.title:t===j.n?r.course.title:e}},description:"description",type:"related_object_type",content:{source:["related_object_type","content"],map:function(e,r){return new t.contentTypeMapping[e](r)}},isRemoved:"is_removed"}}}]),t}(v.a),h.contentTypeMapping=(b={},babelHelpers.defineProperty(b,j.j,E),babelHelpers.defineProperty(b,j.n,_),babelHelpers.defineProperty(b,j.C,D),b),l=m,c=babelHelpers.applyDecoratedDescriptor(l.prototype,"isCompleted",[y.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),p=babelHelpers.applyDecoratedDescriptor(l.prototype,"learningPathSection",[n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),u=babelHelpers.applyDecoratedDescriptor(l.prototype,"content",[y.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=babelHelpers.applyDecoratedDescriptor(l.prototype,"isContentSaving",[y.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),babelHelpers.applyDecoratedDescriptor(l.prototype,"complete",[f.a],Object.getOwnPropertyDescriptor(l.prototype,"complete"),l.prototype),babelHelpers.applyDecoratedDescriptor(l.prototype,"editContent",[f.a],Object.getOwnPropertyDescriptor(l.prototype,"editContent"),l.prototype),babelHelpers.applyDecoratedDescriptor(l.prototype,"_setContentSaving",[y.action],Object.getOwnPropertyDescriptor(l.prototype,"_setContentSaving"),l.prototype),babelHelpers.applyDecoratedDescriptor(l.prototype,"setIsCompleted",[y.action],Object.getOwnPropertyDescriptor(l.prototype,"setIsCompleted"),l.prototype),babelHelpers.applyDecoratedDescriptor(l.prototype,"setTitle",[f.a],Object.getOwnPropertyDescriptor(l.prototype,"setTitle"),l.prototype),babelHelpers.applyDecoratedDescriptor(l.prototype,"setDescription",[f.a],Object.getOwnPropertyDescriptor(l.prototype,"setDescription"),l.prototype),babelHelpers.applyDecoratedDescriptor(l.prototype,"resetImage",[f.a,y.action],Object.getOwnPropertyDescriptor(l.prototype,"resetImage"),l.prototype),l)},"./src/udemy/js/learning-path/learning-path-section.mobx-model.js":function(e,t,r){"use strict";r.d(t,"a",(function(){return y}));var o,s,a,i,n,l,c,p,u=r("./node_modules/autobind-decorator/lib/esm/index.js"),d=r("./node_modules/mobx/lib/mobx.module.js"),h=r("./src/udemy/js/utils/ud-api.js"),m=r("./src/udemy/js/learning-path/editable-api-model.mobx-model.js"),b=r("./src/udemy/js/learning-path/learning-path-page/constants.js"),f=r("./src/udemy/js/learning-path/learning-path-section-item.mobx-model.js"),y=(o=d.observable.ref,s=function(e){function t(e,r){var o;return babelHelpers.classCallCheck(this,t),o=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this,e)),babelHelpers.initializerDefineProperty(o,"learningPath",a,babelHelpers.assertThisInitialized(o)),babelHelpers.initializerDefineProperty(o,"title",i,babelHelpers.assertThisInitialized(o)),babelHelpers.initializerDefineProperty(o,"description",n,babelHelpers.assertThisInitialized(o)),babelHelpers.initializerDefineProperty(o,"items",l,babelHelpers.assertThisInitialized(o)),babelHelpers.initializerDefineProperty(o,"isExpanded",c,babelHelpers.assertThisInitialized(o)),babelHelpers.initializerDefineProperty(o,"isVisible",p,babelHelpers.assertThisInitialized(o)),o.learningPath=r,o}var r,o;return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"apiDataMap",get:function(){var e=this;return{id:"id",title:"title",description:"description",order:"order",items:{source:"items",map:function(t){return t.map((function(t){return new f.a(t,e)}))}}}}},{key:"editableFieldsMap",get:function(){return new Map([["title","title"],["description","description"]])}},{key:"resourceUrl",get:function(){return"".concat(this.learningPath.sectionsUrl).concat(this.id,"/")}},{key:"itemsUrl",get:function(){return"".concat(this.resourceUrl,"items/")}}]),babelHelpers.createClass(t,[{key:"createItem",value:(o=babelHelpers.asyncToGenerator(regeneratorRuntime.mark((function e(t,r){var o,s,a,i=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=i.length>2&&void 0!==i[2]?i[2]:null,!this.isCreatingItem){e.next=3;break}return e.abrupt("return");case 3:return s={url:t,type:r},r===b.C&&(s.title=b.i[b.C].untitled),null!==o&&(s.position=o+1),e.next=8,h.d.post(this.itemsUrl,s);case 8:a=e.sent,this.addItemFromData(a.data,o);case 10:case"end":return e.stop()}}),e,this)}))),function(e,t){return o.apply(this,arguments)})},{key:"insertCourses",value:(r=babelHelpers.asyncToGenerator(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.d.post("".concat(this.itemsUrl,"insert-courses/"),{course_ids:t});case 2:r=e.sent,this.addItemsFromData(r.data.results);case 4:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"deleteItemAt",value:function(e){this.items.splice(e,1)}},{key:"setTitle",value:function(e){this._changeEditableField("title",e)}},{key:"setDescription",value:function(e){this._changeEditableField("description",e)}},{key:"addItemFromData",value:function(e,t){var r=new f.a(e,this);null===t?this.items.push(r):this.items.splice(t+1,0,r)}},{key:"addItemsFromData",value:function(e){var t,r=this,o=e.map((function(e){return new f.a(e,r)}));(t=this.items).push.apply(t,babelHelpers.toConsumableArray(o))}},{key:"addItems",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];t.forEach((function(t){t.learningPathSection=e,e.items.push(t)}))}},{key:"toggleExpanded",value:function(){this.isExpanded=!this.isExpanded}},{key:"collapse",value:function(){this.isExpanded=!1}},{key:"itemsCount",get:function(){return this.items.reduce((function(e,t){return t.isRemoved||(e+=1),e}),0)}},{key:"totalDuration",get:function(){return this.items.reduce((function(e,t){var r=t.content.duration;return r&&!t.isRemoved&&(e+=r),e}),0)}},{key:"removedItemsCount",get:function(){return this.items.filter((function(e){return e.isRemoved})).length}},{key:"isSavingModeEnabled",get:function(){return this.isSaving||this.items.some((function(e){return e.isSaving}))}},{key:"isSavingFailed",get:function(){return this.apiError||this.items.some((function(e){return e.apiError}))}},{key:"hasRemovedCourseInSection",get:function(){return this.items.some((function(e){return e.isRemoved}))}}]),t}(m.a),a=babelHelpers.applyDecoratedDescriptor(s.prototype,"learningPath",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),i=babelHelpers.applyDecoratedDescriptor(s.prototype,"title",[d.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),n=babelHelpers.applyDecoratedDescriptor(s.prototype,"description",[d.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),l=babelHelpers.applyDecoratedDescriptor(s.prototype,"items",[d.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),c=babelHelpers.applyDecoratedDescriptor(s.prototype,"isExpanded",[d.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),p=babelHelpers.applyDecoratedDescriptor(s.prototype,"isVisible",[d.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),babelHelpers.applyDecoratedDescriptor(s.prototype,"deleteItemAt",[u.a,d.action],Object.getOwnPropertyDescriptor(s.prototype,"deleteItemAt"),s.prototype),babelHelpers.applyDecoratedDescriptor(s.prototype,"setTitle",[u.a],Object.getOwnPropertyDescriptor(s.prototype,"setTitle"),s.prototype),babelHelpers.applyDecoratedDescriptor(s.prototype,"setDescription",[u.a],Object.getOwnPropertyDescriptor(s.prototype,"setDescription"),s.prototype),babelHelpers.applyDecoratedDescriptor(s.prototype,"addItemFromData",[d.action],Object.getOwnPropertyDescriptor(s.prototype,"addItemFromData"),s.prototype),babelHelpers.applyDecoratedDescriptor(s.prototype,"addItemsFromData",[d.action],Object.getOwnPropertyDescriptor(s.prototype,"addItemsFromData"),s.prototype),babelHelpers.applyDecoratedDescriptor(s.prototype,"addItems",[d.action],Object.getOwnPropertyDescriptor(s.prototype,"addItems"),s.prototype),babelHelpers.applyDecoratedDescriptor(s.prototype,"toggleExpanded",[u.a,d.action],Object.getOwnPropertyDescriptor(s.prototype,"toggleExpanded"),s.prototype),babelHelpers.applyDecoratedDescriptor(s.prototype,"collapse",[d.action],Object.getOwnPropertyDescriptor(s.prototype,"collapse"),s.prototype),babelHelpers.applyDecoratedDescriptor(s.prototype,"itemsCount",[d.computed],Object.getOwnPropertyDescriptor(s.prototype,"itemsCount"),s.prototype),babelHelpers.applyDecoratedDescriptor(s.prototype,"totalDuration",[d.computed],Object.getOwnPropertyDescriptor(s.prototype,"totalDuration"),s.prototype),babelHelpers.applyDecoratedDescriptor(s.prototype,"removedItemsCount",[d.computed],Object.getOwnPropertyDescriptor(s.prototype,"removedItemsCount"),s.prototype),babelHelpers.applyDecoratedDescriptor(s.prototype,"isSavingModeEnabled",[d.computed],Object.getOwnPropertyDescriptor(s.prototype,"isSavingModeEnabled"),s.prototype),babelHelpers.applyDecoratedDescriptor(s.prototype,"isSavingFailed",[d.computed],Object.getOwnPropertyDescriptor(s.prototype,"isSavingFailed"),s.prototype),babelHelpers.applyDecoratedDescriptor(s.prototype,"hasRemovedCourseInSection",[d.computed],Object.getOwnPropertyDescriptor(s.prototype,"hasRemovedCourseInSection"),s.prototype),s)},"./src/udemy/js/learning-path/learning-path.mobx-model.js":function(e,t,r){"use strict";r.d(t,"a",(function(){return C}));var o,s,a,i,n,l,c,p,u,d,h,m,b,f=r("./node_modules/autobind-decorator/lib/esm/index.js"),y=r("./node_modules/mobx/lib/mobx.module.js"),g=r("./src/udemy/js/utils/get-config-data.js"),v=r("./src/udemy/js/utils/ud-api.js"),w=r("./src/udemy/js/utils/ud-me.js"),k=r("./src/udemy/js/learning-path/constants.js"),_=r("./src/udemy/js/learning-path/editable-api-model.mobx-model.js"),E=r("./src/udemy/js/learning-path/learning-path-page/constants.js"),j=r("./src/udemy/js/learning-path/learning-path-section.mobx-model.js"),D=r("./src/udemy/js/learning-path/utils.js"),S=Object(g.a)(),C=(o=function(e){function t(){var e,r;babelHelpers.classCallCheck(this,t);for(var o=arguments.length,f=new Array(o),y=0;y<o;y++)f[y]=arguments[y];return r=babelHelpers.possibleConstructorReturn(this,(e=babelHelpers.getPrototypeOf(t)).call.apply(e,[this].concat(f))),babelHelpers.initializerDefineProperty(r,"id",s,babelHelpers.assertThisInitialized(r)),babelHelpers.initializerDefineProperty(r,"title",a,babelHelpers.assertThisInitialized(r)),babelHelpers.initializerDefineProperty(r,"description",i,babelHelpers.assertThisInitialized(r)),babelHelpers.initializerDefineProperty(r,"isPublic",n,babelHelpers.assertThisInitialized(r)),babelHelpers.initializerDefineProperty(r,"isUserEnrolled",l,babelHelpers.assertThisInitialized(r)),babelHelpers.initializerDefineProperty(r,"isUserAutoEnrollDisabled",c,babelHelpers.assertThisInitialized(r)),babelHelpers.initializerDefineProperty(r,"numberOfEnrollments",p,babelHelpers.assertThisInitialized(r)),babelHelpers.initializerDefineProperty(r,"sections",u,babelHelpers.assertThisInitialized(r)),babelHelpers.initializerDefineProperty(r,"folderIds",d,babelHelpers.assertThisInitialized(r)),babelHelpers.initializerDefineProperty(r,"duration",h,babelHelpers.assertThisInitialized(r)),babelHelpers.initializerDefineProperty(r,"isCurriculumLoading",m,babelHelpers.assertThisInitialized(r)),babelHelpers.initializerDefineProperty(r,"invisibleSection",b,babelHelpers.assertThisInitialized(r)),r.type=k.d,r}var r,o,f,g,_,C,O,P,T,x,R;return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"createSection",value:(R=babelHelpers.asyncToGenerator(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.d.post(this.sectionsUrl,{title:E.i[E.E].untitled,position:t+1});case 2:r=e.sent,this.insertSectionFromData(t,r.data);case 4:case"end":return e.stop()}}),e,this)}))),function(e){return R.apply(this,arguments)})},{key:"insertSections",value:(x=babelHelpers.asyncToGenerator(regeneratorRuntime.mark((function e(t,r){var o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.d.post("".concat(this.sectionsUrl,"insert-sections/"),{start_position:t+1,sections:r});case 2:o=e.sent,this.insertSectionsFromData(t,o.data.results);case 4:case"end":return e.stop()}}),e,this)}))),function(e,t){return x.apply(this,arguments)})},{key:"deletePath",value:(T=babelHelpers.asyncToGenerator(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.d.delete(this.resourceUrl);case 2:case"end":return e.stop()}}),e,this)}))),function(){return T.apply(this,arguments)})},{key:"fetchCurriculum",value:(P=babelHelpers.asyncToGenerator(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._setCurriculumLoading(!0),e.prev=1,e.next=4,v.d.get(this.sectionsUrl,{params:{page_size:9999,"fields[learning_path_section]":E.u.join(",")}});case 4:t=e.sent,this.setSections(t.data.results),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),Object(D.a)(e.t0,E.t.UNABLE_TO_LOAD_CONTENT);case 11:return e.prev=11,this._setCurriculumLoading(!1),e.finish(11);case 14:case"end":return e.stop()}}),e,this,[[1,8,11,14]])}))),function(){return P.apply(this,arguments)})},{key:"setTitle",value:function(e){this._changeEditableField("title",e)}},{key:"setDescription",value:function(e){this._changeEditableField("description",e)}},{key:"setIsPublic",value:function(e){this._changeEditableField("isPublic",e)}},{key:"setSections",value:function(e){var t=this,r=e[0];if(r){var o=new j.a(r,this);o.isVisible=!1,this.invisibleSection=o,this.sections=e.slice(1).map((function(e){return new j.a(e,t)}))}}},{key:"setCompletedItems",value:function(e){e=new Set(e),this.sections.forEach((function(t){t.items.forEach((function(t){e.has(t.id)&&t.setIsCompleted(!0)}))})),this.invisibleSection.items.forEach((function(t){e.has(t.id)&&t.setIsCompleted(!0)}))}},{key:"setNewFolderIdForPath",value:function(e){return this.folderIds.push(e.id)}},{key:"insertSectionFromData",value:function(e,t){this.sections.splice(e,0,new j.a(t,this))}},{key:"insertSectionsFromData",value:function(e,t){var r,o=this,s=t.map((function(e){return new j.a(e,o)}));(r=this.sections).splice.apply(r,[e,0].concat(babelHelpers.toConsumableArray(s)))}},{key:"enrollUser",value:function(){this.isUserEnrolled=!0,this.numberOfEnrollments+=1}},{key:"unenrollUser",value:function(){this.isUserEnrolled=!1,this.numberOfEnrollments-=1,this.isUserAutoEnrollDisabled=!0}},{key:"addEnrollmentToPath",value:(O=babelHelpers.asyncToGenerator(regeneratorRuntime.mark((function e(){var t,r=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:{},e.prev=1,e.next=4,v.d.post(this.enrollmentsUrl,t);case 4:this.enrollUser(),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),Object(D.a)(e.t0,E.t.UNABLE_TO_ENROLL_USER);case 10:case"end":return e.stop()}}),e,this,[[1,7]])}))),function(){return O.apply(this,arguments)})},{key:"removeEnrollmentFromPath",value:(C=babelHelpers.asyncToGenerator(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v.d.delete(this.enrollmentsUrl);case 3:this.unenrollUser(),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),Object(D.a)(e.t0,E.t.UNABLE_TO_UNENROLL_USER);case 9:case"end":return e.stop()}}),e,this,[[0,6]])}))),function(){return C.apply(this,arguments)})},{key:"reorderSection",value:(_=babelHelpers.asyncToGenerator(regeneratorRuntime.mark((function e(t,r){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.d.post("".concat(this.sectionsUrl).concat(this.sections[t].id,"/reorder/"),{position:r+1});case 2:this._reorderObservableSections(t,r);case 3:case"end":return e.stop()}}),e,this)}))),function(e,t){return _.apply(this,arguments)})},{key:"moveSectionToUnsectionedArea",value:(g=babelHelpers.asyncToGenerator(regeneratorRuntime.mark((function e(t,r){var o,s=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=this.sections[t],Object(y.runInAction)((function(){s.invisibleSection.items.length&&s._moveItemsToNewSection(s.invisibleSection,o,r),t>0&&s._reorderObservableSections(t,0)})),e.next=4,v.d.post("".concat(this.sectionsUrl).concat(o.id,"/merge/"),{target_section_id:this.invisibleSection.id,position:r});case 4:case"end":return e.stop()}}),e,this)}))),function(e,t){return g.apply(this,arguments)})},{key:"_moveItemsToNewSection",value:function(e,t,r){e.items.splice(r).forEach((function(e){e.learningPathSection=t,t.items.push(e)}))}},{key:"_reorderObservableSections",value:function(e,t){this.sections.splice(t,0,this.sections.splice(e,1)[0])}},{key:"_getSectionByOrderIndex",value:function(e){return e===E.p?this.invisibleSection:this.sections[e]}},{key:"reorderItem",value:(f=babelHelpers.asyncToGenerator(regeneratorRuntime.mark((function e(t,r,o,s){var a,i,n,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={position:r},i=this._getSectionByOrderIndex(o),n=this._getSectionByOrderIndex(s),l=i.items[t].id,i.id!==n.id&&(a.container=n.id),this._reorderObservableItem(t,r,i,n),e.next=8,v.d.post("".concat(this.sectionsUrl).concat(i.id,"/items/").concat(l,"/reorder/"),a);case 8:case"end":return e.stop()}}),e,this)}))),function(e,t,r,o){return f.apply(this,arguments)})},{key:"autoEnroll",value:(o=babelHelpers.asyncToGenerator(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.shouldAutoEnroll){e.next=2;break}return e.abrupt("return",!1);case 2:return e.prev=2,e.next=5,this.addEnrollmentToPath({is_auto_enroll:!0});case 5:return e.abrupt("return",!0);case 8:return e.prev=8,e.t0=e.catch(2),e.abrupt("return",!1);case 11:case"end":return e.stop()}}),e,this,[[2,8]])}))),function(){return o.apply(this,arguments)})},{key:"_reorderObservableItem",value:function(e,t,r,o){var s=r.items.splice(e,1)[0];s.learningPathSection=o,o.items.splice(t,0,s)}},{key:"_setCurriculumLoading",value:function(e){this.isCurriculumLoading=e}},{key:"deleteSectionAt",value:function(e){var t=e>0?this.sections[e-1]:this.invisibleSection;t&&(t.addItems(this.sections[e].items),this.sections.splice(e,1))}},{key:"duplicate",value:(r=babelHelpers.asyncToGenerator(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v.d.post(this.duplicateUrl);case 3:return t=e.sent,e.abrupt("return",t.data.id);case 7:e.prev=7,e.t0=e.catch(0),Object(D.a)(e.t0,E.t.UNABLE_TO_DUPLICATE_PATH);case 10:case"end":return e.stop()}}),e,this,[[0,7]])}))),function(){return r.apply(this,arguments)})},{key:"isSavingModeEnabled",get:function(){return this.isSaving||this.sections.some((function(e){return e.isSavingModeEnabled}))}},{key:"isSavingFailed",get:function(){return this.apiError||this.sections.some((function(e){return e.isSavingFailed}))}},{key:"isEmpty",get:function(){return 0===this.itemsCount&&0===this.sections.length}},{key:"hasRemovedCourseInSection",get:function(){return this.sections.some((function(e){return e.hasRemovedCourseInSection}))}},{key:"hasRemovedCourseInInvisibleSection",get:function(){return this.invisibleSection&&this.invisibleSection.hasRemovedCourseInSection}},{key:"isEmptyState",get:function(){return(!this.isEmpty||!this.canUserEdit||!this.hasRemovedCourseInSection&&!this.hasRemovedCourseInInvisibleSection)&&this.isEmpty}},{key:"isInvisibleSectionShown",get:function(){return!(!this.invisibleSection||!this.invisibleSection.items.length)}},{key:"lastSection",get:function(){return this.sections.length?this.sections[this.sections.length-1]:this.invisibleSection}},{key:"shouldAutoEnroll",get:function(){return!this.isUserEnrolled&&!this.isUserAutoEnrollDisabled}},{key:"editableFieldsMap",get:function(){return new Map([["title","title"],["description","description"],["isPublic","is_public"]])}},{key:"apiDataMap",get:function(){return{id:"id",title:"title",description:"description",isPublic:"is_public",owner:"owner",isUserEnrolled:"is_user_enrolled",numberOfEnrollments:"num_enrollments",numberOfAssignments:"num_assignments",duration:"estimated_content_length",totalSteps:"total_steps",folderIds:"folder_ids",isOwnerInGroup:"is_owner_in_group",isUserAutoEnrollDisabled:"is_user_auto_enroll_disabled"}}},{key:"resourceUrl",get:function(){return"".concat(k.a).concat(this.id,"/")}},{key:"editUrl",get:function(){return"".concat(this.resourceUrl,"edit/")}},{key:"sectionsUrl",get:function(){return"".concat(this.resourceUrl,"sections/")}},{key:"enrollmentsUrl",get:function(){return"".concat(this.resourceUrl,"enrollments/")}},{key:"pathInsightsUrl",get:function(){return"/organization-manage/path-insights/".concat(this.id,"/")}},{key:"duplicateUrl",get:function(){return"".concat(this.resourceUrl,"duplicate/")}},{key:"pathTitle",get:function(){return this.title}},{key:"isUserGroupAdmin",get:function(){return w.a.organization.isGroupAdmin}},{key:"isStudent",get:function(){return w.a.organization.isStudent}},{key:"isUserEditor",get:function(){return this.owner.id===w.a.id}},{key:"canUserEdit",get:function(){return this.isUserEditor||Object(D.c)()||this.isUserGroupAdmin&&this.isOwnerInGroup}},{key:"itemsCount",get:function(){var e=this.sections.reduce((function(e,t){return e+=t.itemsCount}),0);return this.invisibleSection&&(e+=this.invisibleSection.itemsCount),e}},{key:"totalDuration",get:function(){var e=this.sections.reduce((function(e,t){return t.totalDuration&&(e+=t.totalDuration),e}),0);return this.invisibleSection&&(e+=this.invisibleSection.totalDuration),e}},{key:"removedItemsCount",get:function(){var e=this.sections.reduce((function(e,t){return e+=t.removedItemsCount}),0);return this.invisibleSection&&(e+=this.invisibleSection.removedItemsCount),e}},{key:"isCopyItemEnabled",get:function(){var e,t;return null===(e=S.features.organization)||void 0===e?void 0:null===(t=e.learning_path)||void 0===t?void 0:t.copy_learning_path_item}},{key:"isShareToSlackEnabled",get:function(){var e,t;return this.isPublic&&S.brand.is_share_on_slack_enabled&&(null===(e=S.features.organization)||void 0===e?void 0:null===(t=e.learning_path)||void 0===t?void 0:t.share_to_slack)}}]),t}(_.a),s=babelHelpers.applyDecoratedDescriptor(o.prototype,"id",[y.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),a=babelHelpers.applyDecoratedDescriptor(o.prototype,"title",[y.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),i=babelHelpers.applyDecoratedDescriptor(o.prototype,"description",[y.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),n=babelHelpers.applyDecoratedDescriptor(o.prototype,"isPublic",[y.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),l=babelHelpers.applyDecoratedDescriptor(o.prototype,"isUserEnrolled",[y.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),c=babelHelpers.applyDecoratedDescriptor(o.prototype,"isUserAutoEnrollDisabled",[y.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),p=babelHelpers.applyDecoratedDescriptor(o.prototype,"numberOfEnrollments",[y.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),u=babelHelpers.applyDecoratedDescriptor(o.prototype,"sections",[y.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),d=babelHelpers.applyDecoratedDescriptor(o.prototype,"folderIds",[y.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),h=babelHelpers.applyDecoratedDescriptor(o.prototype,"duration",[y.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),m=babelHelpers.applyDecoratedDescriptor(o.prototype,"isCurriculumLoading",[y.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),b=babelHelpers.applyDecoratedDescriptor(o.prototype,"invisibleSection",[y.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),babelHelpers.applyDecoratedDescriptor(o.prototype,"isSavingModeEnabled",[y.computed],Object.getOwnPropertyDescriptor(o.prototype,"isSavingModeEnabled"),o.prototype),babelHelpers.applyDecoratedDescriptor(o.prototype,"isSavingFailed",[y.computed],Object.getOwnPropertyDescriptor(o.prototype,"isSavingFailed"),o.prototype),babelHelpers.applyDecoratedDescriptor(o.prototype,"isEmpty",[y.computed],Object.getOwnPropertyDescriptor(o.prototype,"isEmpty"),o.prototype),babelHelpers.applyDecoratedDescriptor(o.prototype,"hasRemovedCourseInSection",[y.computed],Object.getOwnPropertyDescriptor(o.prototype,"hasRemovedCourseInSection"),o.prototype),babelHelpers.applyDecoratedDescriptor(o.prototype,"hasRemovedCourseInInvisibleSection",[y.computed],Object.getOwnPropertyDescriptor(o.prototype,"hasRemovedCourseInInvisibleSection"),o.prototype),babelHelpers.applyDecoratedDescriptor(o.prototype,"isEmptyState",[y.computed],Object.getOwnPropertyDescriptor(o.prototype,"isEmptyState"),o.prototype),babelHelpers.applyDecoratedDescriptor(o.prototype,"isInvisibleSectionShown",[y.computed],Object.getOwnPropertyDescriptor(o.prototype,"isInvisibleSectionShown"),o.prototype),babelHelpers.applyDecoratedDescriptor(o.prototype,"lastSection",[y.computed],Object.getOwnPropertyDescriptor(o.prototype,"lastSection"),o.prototype),babelHelpers.applyDecoratedDescriptor(o.prototype,"shouldAutoEnroll",[y.computed],Object.getOwnPropertyDescriptor(o.prototype,"shouldAutoEnroll"),o.prototype),babelHelpers.applyDecoratedDescriptor(o.prototype,"setTitle",[f.a],Object.getOwnPropertyDescriptor(o.prototype,"setTitle"),o.prototype),babelHelpers.applyDecoratedDescriptor(o.prototype,"setDescription",[f.a],Object.getOwnPropertyDescriptor(o.prototype,"setDescription"),o.prototype),babelHelpers.applyDecoratedDescriptor(o.prototype,"setIsPublic",[f.a,y.action],Object.getOwnPropertyDescriptor(o.prototype,"setIsPublic"),o.prototype),babelHelpers.applyDecoratedDescriptor(o.prototype,"setSections",[y.action],Object.getOwnPropertyDescriptor(o.prototype,"setSections"),o.prototype),babelHelpers.applyDecoratedDescriptor(o.prototype,"setCompletedItems",[y.action],Object.getOwnPropertyDescriptor(o.prototype,"setCompletedItems"),o.prototype),babelHelpers.applyDecoratedDescriptor(o.prototype,"setNewFolderIdForPath",[y.action],Object.getOwnPropertyDescriptor(o.prototype,"setNewFolderIdForPath"),o.prototype),babelHelpers.applyDecoratedDescriptor(o.prototype,"insertSectionFromData",[y.action],Object.getOwnPropertyDescriptor(o.prototype,"insertSectionFromData"),o.prototype),babelHelpers.applyDecoratedDescriptor(o.prototype,"insertSectionsFromData",[y.action],Object.getOwnPropertyDescriptor(o.prototype,"insertSectionsFromData"),o.prototype),babelHelpers.applyDecoratedDescriptor(o.prototype,"enrollUser",[y.action],Object.getOwnPropertyDescriptor(o.prototype,"enrollUser"),o.prototype),babelHelpers.applyDecoratedDescriptor(o.prototype,"unenrollUser",[y.action],Object.getOwnPropertyDescriptor(o.prototype,"unenrollUser"),o.prototype),babelHelpers.applyDecoratedDescriptor(o.prototype,"addEnrollmentToPath",[f.a],Object.getOwnPropertyDescriptor(o.prototype,"addEnrollmentToPath"),o.prototype),babelHelpers.applyDecoratedDescriptor(o.prototype,"removeEnrollmentFromPath",[f.a],Object.getOwnPropertyDescriptor(o.prototype,"removeEnrollmentFromPath"),o.prototype),babelHelpers.applyDecoratedDescriptor(o.prototype,"itemsCount",[y.computed],Object.getOwnPropertyDescriptor(o.prototype,"itemsCount"),o.prototype),babelHelpers.applyDecoratedDescriptor(o.prototype,"totalDuration",[y.computed],Object.getOwnPropertyDescriptor(o.prototype,"totalDuration"),o.prototype),babelHelpers.applyDecoratedDescriptor(o.prototype,"removedItemsCount",[y.computed],Object.getOwnPropertyDescriptor(o.prototype,"removedItemsCount"),o.prototype),babelHelpers.applyDecoratedDescriptor(o.prototype,"reorderSection",[f.a],Object.getOwnPropertyDescriptor(o.prototype,"reorderSection"),o.prototype),babelHelpers.applyDecoratedDescriptor(o.prototype,"moveSectionToUnsectionedArea",[f.a],Object.getOwnPropertyDescriptor(o.prototype,"moveSectionToUnsectionedArea"),o.prototype),babelHelpers.applyDecoratedDescriptor(o.prototype,"_reorderObservableSections",[y.action],Object.getOwnPropertyDescriptor(o.prototype,"_reorderObservableSections"),o.prototype),babelHelpers.applyDecoratedDescriptor(o.prototype,"_reorderObservableItem",[y.action],Object.getOwnPropertyDescriptor(o.prototype,"_reorderObservableItem"),o.prototype),babelHelpers.applyDecoratedDescriptor(o.prototype,"_setCurriculumLoading",[y.action],Object.getOwnPropertyDescriptor(o.prototype,"_setCurriculumLoading"),o.prototype),babelHelpers.applyDecoratedDescriptor(o.prototype,"deleteSectionAt",[y.action],Object.getOwnPropertyDescriptor(o.prototype,"deleteSectionAt"),o.prototype),babelHelpers.applyDecoratedDescriptor(o.prototype,"duplicate",[f.a,y.action],Object.getOwnPropertyDescriptor(o.prototype,"duplicate"),o.prototype),o)},"./src/udemy/js/learning-path/utils.js":function(e,t,r){"use strict";r.d(t,"a",(function(){return a})),r.d(t,"d",(function(){return i})),r.d(t,"b",(function(){return n})),r.d(t,"e",(function(){return l})),r.d(t,"c",(function(){return c}));var o=r("./src/udemy/js/utils/ud-me.js"),s=r("./src/udemy/js/utils/ud-raven.js");function a(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(e.response)throw new Error(t);s.a.captureException(e)}function i(e){var t=e.filter((function(e){return e.is_primary})).find(Boolean);return t?t.label:{}}function n(e){var t=null!==e?e.offsetHeight:0,r=document.querySelectorAll("ul[id^=section] > li");if(r.length)return Array.from(r).find((function(e){return e.getBoundingClientRect().top>t}))}function l(e,t,r){var o=document.getElementById(t);e&&e.getBoundingClientRect().top>0?window.scrollTop=window.scrollTop-e.getBoundingClientRect().top:(o.scrollIntoView(),document.scrollingElement.scrollTop=document.scrollingElement.scrollTop-r)}function c(){return o.a.organization.isAdmin||o.a.organization.isOwner}},"./src/udemy/js/my-courses-v3/app.js":function(e,t,r){"use strict";r.r(t);var o,s,a,i=r("./node_modules/prop-types/index.js"),n=r.n(i),l=r("./node_modules/react/index.js"),c=r.n(l),p=r("./node_modules/react-router-bootstrap/lib/index.js"),u=r("./node_modules/react-router-dom/es/Switch.js"),d=r("./node_modules/react-router-dom/es/Redirect.js"),h=r("./src/udemy/js/base-components/jumbotron.react-component.js"),m=r("./src/udemy/js/base-components/nav-item.react-component.js"),b=r("./src/udemy/js/base-components/nav.react-component.js"),f=r("./src/udemy/js/base-components/udlite/brand/ufb-only.react-component.js"),y=r("./src/udemy/js/base-components/udlite/router/memoized-browser-router.react-component.js"),g=r("./src/udemy/js/base-components/udlite/router/page-tracking-route.react-component.js"),v=r("./node_modules/autobind-decorator/lib/esm/index.js"),w=r("./node_modules/mobx-react/index.module.js"),k=r("./assets/udemy/images/program/empty-state.png"),_=r.n(k),E=r("./src/udemy/js/base-components/image.react-component.js"),j=r("./src/udemy/js/base-components/loader.react-component.js"),D=r("./src/udemy/js/base-components/program-card/program-card.react-component.js"),S=r("./src/udemy/js/subscription/urls.js"),C=r("./node_modules/mobx/lib/mobx.module.js"),O=r("./src/udemy/js/utils/ud-api.js"),P=r("./src/udemy/js/utils/ud-raven.js"),T=r("./src/udemy/js/utils/ud-utils.js");function x(e){throw T.a.Feedback.fromText(gettext("Something went wrong, please try again later"),T.a.MessageType.error),P.a.captureException(e),new Error(e)}var R,H,A,I,L=(o=function(){function e(t){babelHelpers.classCallCheck(this,e),babelHelpers.initializerDefineProperty(this,"dataLoaded",s,this),babelHelpers.initializerDefineProperty(this,"programs",a,this),t?(this.programs=t,this.dataLoaded=!0):this.getUserPrograms()}return babelHelpers.createClass(e,[{key:"getUserPrograms",value:function(){var e=this;return O.d.get("/users/me/programs/",{params:{"fields[program]":"slug,title,completion_ratio,vendor,level,icon"}}).then(Object(C.action)((function(t){var r=t.data.results.map((function(e){return{id:e.id,slug:e.slug,title:e.title,completionRatio:e.completion_ratio,vendor:e.vendor,level:e.level,icon:e.icon,isEnrolled:!0,url:"/program-dashboard-redirect/?program_title=".concat(e.slug)}}));e.programs=Object(C.observable)(r),e.dataLoaded=!0}))).catch(x)}}]),e}(),s=babelHelpers.applyDecoratedDescriptor(o.prototype,"dataLoaded",[C.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),a=babelHelpers.applyDecoratedDescriptor(o.prototype,"programs",[C.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),o),M=(r("./src/udemy/js/subscription/my-programs/my-programs.less"),function(e){var t=e.subscriptionOffer;return c.a.createElement("div",{className:"my-programs--empty-state--2EKxt"},c.a.createElement("p",null,c.a.createElement(E.a,{src:_.a,alt:"",lazy:!1,height:114,width:291}),c.a.createElement("strong",null,gettext("You've not enrolled in any programs yet."))),c.a.createElement("p",null,c.a.createElement("a",{className:"bold",href:Object(S.c)(t.slug)},gettext("View all IT Certification Programs"))))});M.propTypes={subscriptionOffer:n.a.object.isRequired};var N,F,U,z,B,q,G,V,K,W,Y,X,Q,J,Z,$,ee,te,re,oe,se,ae,ie,ne,le,ce,pe,ue,de,he,me,be,fe,ye=Object(w.d)((I=A=function(e){function t(e){var r;return babelHelpers.classCallCheck(this,t),(r=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this,e))).store=e.store||new L,r}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"onView",value:function(e){this.store.viewProgram(e)}},{key:"render",value:function(){var e=this.props.subscriptionOffer,t=this.store,r=t.dataLoaded,o=t.programs,s=!(o&&o.length>0);return c.a.createElement("div",{className:"container"},r?s?c.a.createElement("div",{className:"my-programs--content--35DpD"},c.a.createElement(M,{subscriptionOffer:e})):c.a.createElement(c.a.Fragment,null,c.a.createElement("h2",{className:"sr-only"},gettext("Recently accessed")),c.a.createElement("div",{className:"my-programs--content--35DpD"},o.map((function(e){return c.a.createElement("div",{className:"my-programs--program-card--149wt",key:e.id},c.a.createElement(D.a,{program:e,pageType:"my-programs"}))})),c.a.createElement("p",{className:"my-programs--link-udemy-pro--2AhmX"},c.a.createElement("a",{className:"bold",href:Object(S.c)(e.slug)},gettext("View all IT Certification Programs"))))):c.a.createElement("div",{className:"my-programs--content--35DpD"},c.a.createElement(j.a,{size:"medium",className:"my-programs--loader--2JDPC"})))}}]),t}(l.Component),A.propTypes={subscriptionOffer:n.a.object.isRequired,store:n.a.object},A.defaultProps={store:void 0},H=I,babelHelpers.applyDecoratedDescriptor(H.prototype,"onView",[v.a],Object.getOwnPropertyDescriptor(H.prototype,"onView"),H.prototype),R=H))||R,ge=r("./src/udemy/js/utils/get-config-data.js"),ve=r("./src/udemy/js/utils/ud-render-react-components.js"),we=r("./src/udemy/js/base-components/pagination.react-component.js"),ke=r("./src/udemy/js/utils/escape/safely-set-inner-html.js"),_e=r("./src/udemy/js/utils/site-stats.js"),Ee=r("./node_modules/classnames/index.js"),je=r.n(Ee),De=r("./src/udemy/js/base-components/performance-mark-on-load.react-component.js"),Se=r("./src/udemy/js/course-reviews/common/alt-leave-rating.react-component.js"),Ce=r("./node_modules/@researchgate/react-intersection-observer/lib/es/index.js"),Oe=r("./src/udemy/js/base-components/dropdown-ellipsis.react-component.js"),Pe=r("./src/udemy/js/base-components/icon.react-component.js"),Te=r("./src/udemy/js/base-components/menu-item.react-component.js"),xe=r("./src/udemy/js/share/constants.js"),Re=r("./src/udemy/js/share/marketplace-social-share-modal.react-component.js"),He=r("./src/udemy/js/share/social-share.mobx-store.js"),Ae=Object(w.d)((B=z=function(e){function t(){var e,r;babelHelpers.classCallCheck(this,t);for(var o=arguments.length,s=new Array(o),a=0;a<o;a++)s[a]=arguments[a];return r=babelHelpers.possibleConstructorReturn(this,(e=babelHelpers.getPrototypeOf(t)).call.apply(e,[this].concat(s))),babelHelpers.initializerDefineProperty(r,"isLoading",U,babelHelpers.assertThisInitialized(r)),r}var r;return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"toggleCourseInCollection",value:(r=babelHelpers.asyncToGenerator(regeneratorRuntime.mark((function e(){var t,r,o,s=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isLoading=!0,t=this.props,r=t.collection,o=t.courseId,e.prev=2,!this.courseInCollection){e.next=9;break}return e.next=6,O.d.delete("/users/me/subscribed-courses-collections/".concat(r.id,"/courses/").concat(o,"/"));case 6:Object(C.runInAction)((function(){r.courses=r.courses.filter((function(e){return e.id!==o})),s.isLoading=!1})),e.next=12;break;case 9:return e.next=11,O.d.post("/users/me/subscribed-courses-collections/".concat(r.id,"/courses/"),{course:o});case 11:Object(C.runInAction)((function(){r.courses.push({_class:"course",id:o}),s.isLoading=!1}));case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(2),Object(C.runInAction)((function(){s.isLoading=!1,P.a.captureException(e.t0)}));case 17:case"end":return e.stop()}}),e,this,[[2,14]])}))),function(){return r.apply(this,arguments)})},{key:"render",value:function(){var e=this.props.collection;return c.a.createElement("li",{className:"collection-item",key:e.id},c.a.createElement("a",{className:"collection-item__link dropdown-menu-link",onClick:this.toggleCourseInCollection,onKeyPress:this.toggleCourseInCollection,role:"menuitem",tabIndex:"0"},c.a.createElement("span",{className:"collection-item__title"},e.title),this.isLoading?c.a.createElement(j.a,{size:"small"}):this.courseInCollection?c.a.createElement("span",{className:"fx-c fx-ic"},c.a.createElement(Pe.a,{className:"fx-c fx-ic text-primary",glyph:"check",size:"small"})):null))}},{key:"courseInCollection",get:function(){return this.props.collection.courses.map((function(e){return e.id})).indexOf(this.props.courseId)>-1}}]),t}(l.Component),z.propTypes={collection:n.a.object.isRequired,courseId:n.a.number.isRequired},F=B,U=babelHelpers.applyDecoratedDescriptor(F.prototype,"isLoading",[C.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),babelHelpers.applyDecoratedDescriptor(F.prototype,"toggleCourseInCollection",[v.a,C.action],Object.getOwnPropertyDescriptor(F.prototype,"toggleCourseInCollection"),F.prototype),babelHelpers.applyDecoratedDescriptor(F.prototype,"courseInCollection",[C.computed],Object.getOwnPropertyDescriptor(F.prototype,"courseInCollection"),F.prototype),N=F))||N,Ie=r("./node_modules/lodash-es/noop.js"),Le=r("./src/udemy/js/base-components/button.react-component.js"),Me=r("./src/udemy/js/base-components/form/form-control.react-component.js"),Ne=r("./src/udemy/js/base-components/modal.react-component.js"),Fe=(q=function(){function e(){babelHelpers.classCallCheck(this,e),babelHelpers.initializerDefineProperty(this,"id",G,this),babelHelpers.initializerDefineProperty(this,"title",V,this),babelHelpers.initializerDefineProperty(this,"description",K,this),babelHelpers.initializerDefineProperty(this,"isLoading",W,this)}return babelHelpers.createClass(e,[{key:"setCollection",value:function(e){e&&(this.id=e.id,this.setTitle(e.title),this.setDescription(e.description))}},{key:"setTitle",value:function(e){this.title=e}},{key:"setDescription",value:function(e){this.description=e}},{key:"createCollection",value:function(){var e=this;return this.isLoading=!0,O.d.post("/users/me/subscribed-courses-collections/",{title:this.title,description:this.description}).then(Object(C.action)((function(t){return e.setTitle(""),e.setDescription(""),e.isLoading=!1,t.data}))).catch(Object(C.action)((function(){e.isLoading=!1,T.a.Feedback.fromText(gettext("Unexpected error occurred"),T.a.MessageType.error)})))}},{key:"updateCollection",value:function(){var e=this;return this.isLoading=!0,O.d.patch("/users/me/subscribed-courses-collections/".concat(this.id,"/"),{title:this.title,description:this.description}).then(Object(C.action)((function(){T.a.Feedback.fromText(interpolate(gettext('Your collection "%s" has been updated.'),[e.title]),T.a.MessageType.info),e.isLoading=!1}))).catch(Object(C.action)((function(){e.isLoading=!1,T.a.Feedback.fromText(gettext("Unexpected error occurred"),T.a.MessageType.error)})))}}]),e}(),G=babelHelpers.applyDecoratedDescriptor(q.prototype,"id",[C.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=babelHelpers.applyDecoratedDescriptor(q.prototype,"title",[C.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),K=babelHelpers.applyDecoratedDescriptor(q.prototype,"description",[C.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),W=babelHelpers.applyDecoratedDescriptor(q.prototype,"isLoading",[C.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),babelHelpers.applyDecoratedDescriptor(q.prototype,"setCollection",[C.action],Object.getOwnPropertyDescriptor(q.prototype,"setCollection"),q.prototype),babelHelpers.applyDecoratedDescriptor(q.prototype,"setTitle",[C.action],Object.getOwnPropertyDescriptor(q.prototype,"setTitle"),q.prototype),babelHelpers.applyDecoratedDescriptor(q.prototype,"setDescription",[C.action],Object.getOwnPropertyDescriptor(q.prototype,"setDescription"),q.prototype),babelHelpers.applyDecoratedDescriptor(q.prototype,"createCollection",[C.action],Object.getOwnPropertyDescriptor(q.prototype,"createCollection"),q.prototype),babelHelpers.applyDecoratedDescriptor(q.prototype,"updateCollection",[C.action],Object.getOwnPropertyDescriptor(q.prototype,"updateCollection"),q.prototype),q),Ue=Object(w.d)((J=Q=function(e){function t(e){var r;return babelHelpers.classCallCheck(this,t),(r=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this,e))).store=new Fe,r.store.setCollection(e.collection),r}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"setTitleValue",value:function(e){this.store.setTitle(e.target.value)}},{key:"setDescriptionValue",value:function(e){this.store.setDescription(e.target.value)}},{key:"saveCollection",value:function(){var e=this;this.store.id?this.store.updateCollection().then((function(){e.props.onUpdateSuccess()})):this.store.createCollection().then((function(t){e.props.onCreateSuccess(t)}))}},{key:"render",value:function(){return c.a.createElement(Ne.a,{show:this.props.show,onHide:this.props.onClose},c.a.createElement(Ne.a.Header,{closeButton:!0},c.a.createElement(Ne.a.Title,null,this.store.id?gettext("Edit your collection"):gettext("Create new collection"))),c.a.createElement(Ne.a.Body,null,c.a.createElement(Me.a,{maxLength:25,className:"mb15",placeholder:gettext("Name your collection e.g. HTML skills"),value:this.store.title,onChange:this.setTitleValue,withCounter:!0}),c.a.createElement(Me.a,{maxLength:25,className:"mb15",componentClass:"textarea",placeholder:gettext("Why are you creating this collection? e.g. To start a new business, To get a new job, To become a web developer"),value:this.store.description,onChange:this.setDescriptionValue,withCounter:!0})),c.a.createElement(Ne.a.Footer,null,c.a.createElement(Le.default,{onClick:this.props.onClose,bsStyle:"tertiary"},gettext("Cancel")),c.a.createElement(Le.default,{onClick:this.saveCollection,bsStyle:"secondary",name:"submit",disabled:this.store.title.length<2||this.store.isLoading},this.store.id?gettext("Edit"):gettext("Create"))))}}]),t}(l.Component),Q.propTypes={show:n.a.bool.isRequired,onClose:n.a.func.isRequired,onUpdateSuccess:n.a.func,onCreateSuccess:n.a.func,collection:n.a.object},Q.defaultProps={onCreateSuccess:Ie.a,onUpdateSuccess:Ie.a,collection:void 0},X=J,babelHelpers.applyDecoratedDescriptor(X.prototype,"setTitleValue",[v.a],Object.getOwnPropertyDescriptor(X.prototype,"setTitleValue"),X.prototype),babelHelpers.applyDecoratedDescriptor(X.prototype,"setDescriptionValue",[v.a],Object.getOwnPropertyDescriptor(X.prototype,"setDescriptionValue"),X.prototype),babelHelpers.applyDecoratedDescriptor(X.prototype,"saveCollection",[v.a],Object.getOwnPropertyDescriptor(X.prototype,"saveCollection"),X.prototype),Y=X))||Y,ze=r("./src/udemy/js/utils/ud-api-stat.js"),Be=r("./src/udemy/js/utils/ud-me.js"),qe=function(e){return ze.c.trackPageEvent("trackclick","my-courses",{user:Be.a.id,action:e})},Ge=Object(ge.a)(),Ve=Object(w.d)((re=te=function(e){function t(e){var r;babelHelpers.classCallCheck(this,t),r=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this,e)),babelHelpers.initializerDefineProperty(r,"showCollectionModal",ee,babelHelpers.assertThisInitialized(r));var o=r.props.course;return r.socialShareStore=new He.a(r.socialShareCourseObj,o.url,xe.e.COURSE_TAKING),r}var r,o;return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"onShareItemSelect",value:function(){var e=this;this.socialShareStore.getOrPopulateUrl().then((function(){e.socialShareStore.showShareModal()})).catch(Object(C.action)((function(){T.a.Feedback.fromText(gettext("Something went wrong, please try again later"),T.a.MessageType.error)})))}},{key:"onModalHide",value:function(){this.socialShareStore.hideShareModal()}},{key:"renderShare",value:function(){return this.props.course.is_private||Ge.brand.has_organization||!Ge.brand.is_external_sources_enabled?null:c.a.createElement(c.a.Fragment,{key:"share"},c.a.createElement(Te.a,{eventKey:"share","data-purpose":"share-course",onSelect:this.onShareItemSelect},c.a.createElement(Pe.a,{glyph:"share",size:"small"})," ",gettext("Share")),c.a.createElement(Re.a,{onHide:this.onModalHide,show:this.socialShareStore.isShareModalShown,store:this.socialShareStore}))}},{key:"selectFavorite",value:function(){var e=this.props.course.enrollment,t=e.favoritedTime?"unfavorite":"favorite";qe(t),e.toggleFavorited()}},{key:"renderFavorite",value:function(){var e=this.props.course.enrollment;return c.a.createElement(Te.a,{key:"favorite",eventKey:"toggle-favorite","data-purpose":"toggle-favorite",unclickable:!0},c.a.createElement("a",{onClick:this.selectFavorite,onKeyPress:this.selectFavorite,role:"menuitem",tabIndex:"0"},c.a.createElement(Pe.a,{glyph:"line-star",size:"small"})," ",e.favoritedTime?gettext("Unfavorite"):gettext("Favorite")))}},{key:"handleChange",value:function(e){e.isIntersecting&&this.props.store.loadCollections()}},{key:"renderCollections",value:function(){var e=this,t=this.props.store,r=this.props.course.id;return c.a.createElement(c.a.Fragment,{key:"collections"},c.a.createElement(Te.a,{header:!0},gettext("Collections")),c.a.createElement("li",null,c.a.createElement("ul",{className:"collections-dropdown"},t.collections.map((function(o,s){var a=c.a.createElement(Ae,{collection:o,courseId:r,key:o.id});return s===t.collections.length-1?c.a.createElement(Ce.a,{key:a.key,onChange:e.handleChange},a):a})),t.collectionsLoading?c.a.createElement(j.a,{block:!0,size:"small"}):null)),!t.collections.length&&!t.collectionsLoading&&c.a.createElement("li",{className:"dropdown-header"},c.a.createElement("small",{className:"text-muted"},gettext("You have no collections"))))}},{key:"hideCollectionModal",value:function(){this.showCollectionModal=!1}},{key:"onSelectCollectionModal",value:function(){qe("add-collection"),this.showCollectionModal=!0}},{key:"onCollectionAddSuccess",value:(o=babelHelpers.asyncToGenerator(regeneratorRuntime.mark((function e(t){var r=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.hideCollectionModal(),e.prev=1,e.next=4,O.d.post("/users/me/subscribed-courses-collections/".concat(t.id,"/courses/"),{course:this.props.course.id});case 4:T.a.Feedback.fromText(interpolate(gettext('%(courseTitle)s has been added to your collection "%(collectionTitle)s."'),{courseTitle:this.props.course.title,collectionTitle:t.title},!0),T.a.MessageType.info),Object(C.runInAction)((function(){var e=r.props.store.collections.find((function(e){return e.id===t.id}));e?e.courses.push({_class:"course",id:r.props.course.id}):(t.courses=[{_class:"course",id:r.props.course.id}],r.props.store.collections.push(t),r.props.store.collections.replace(r.props.store.collections.sort((function(e,t){return e.title.localeCompare(t.title)}))))})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),P.a.captureException(e.t0);case 11:case"end":return e.stop()}}),e,this,[[1,8]])}))),function(e){return o.apply(this,arguments)})},{key:"renderAddCollection",value:function(){return c.a.createElement(c.a.Fragment,{key:"add-collection"},c.a.createElement(Te.a,{eventKey:"add-collection","data-purpose":"add-collection",onSelect:this.onSelectCollectionModal},c.a.createElement(Pe.a,{glyph:"add",size:"small"})," ",gettext("Create New Collection")),c.a.createElement(Ue,{onClose:this.hideCollectionModal,show:this.showCollectionModal,onCreateSuccess:this.onCollectionAddSuccess}))}},{key:"removeCourseFromCollection",value:function(){var e=this,t=this.props,r=t.course,o=t.collection;O.d.delete("/users/me/subscribed-courses-collections/".concat(o.id,"/courses/").concat(r.id,"/")).then(Object(C.action)((function(){var t=o.courses.indexOf(r);o.courses.splice(t,1),o.courses.length<1&&e.props.store.removeCollection(o.id)})))}},{key:"renderRemoveFromCollection",value:function(){return c.a.createElement(Te.a,{key:"remove-from-collection",eventKey:"remove-from-collection","data-purpose":"remove-from-collection",onSelect:this.removeCourseFromCollection},gettext("Remove from Collection"))}},{key:"selectArchive",value:(r=babelHelpers.asyncToGenerator(regeneratorRuntime.mark((function e(){var t,r,o,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props,r=t.course,o=t.store,s=r.enrollment.archivedTime?"unarchive":"archive",qe(s),e.prev=3,e.next=6,r.enrollment.toggleArchived();case 6:o.removeCourse(r.id),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(3),P.a.captureException(e.t0);case 12:case"end":return e.stop()}}),e,this,[[3,9]])}))),function(){return r.apply(this,arguments)})},{key:"renderArchive",value:function(){var e=this.props.course.enrollment;return c.a.createElement(Te.a,{key:"archive",eventKey:"toggle-archived","data-purpose":"toggle-archived",onSelect:this.selectArchive},c.a.createElement(Pe.a,{glyph:"archive",size:"small"})," ",e.archivedTime?gettext("Unarchive"):gettext("Archive"))}},{key:"renderOptions",value:function(){var e,t=this.props.store;if("archive_tab"===t.activeTab)return[this.renderArchive()];if(Ge.brand.has_organization)return"archive_tab"===t.activeTab?[this.renderArchive()]:[this.renderFavorite(),this.renderArchive()];switch(t.activeTab){case"learning_tab":e=[this.renderCollections(),c.a.createElement(Te.a,{key:"divider",divider:!0}),this.renderShare(),this.renderAddCollection(),this.renderFavorite(),this.renderArchive()];break;case"collection_tab":e=[this.renderRemoveFromCollection()];break;case"archive_tab":e=[this.renderArchive()];break;default:e=[]}return e}},{key:"trackOpenDropdown",value:function(e){e&&"learning_tab"===this.props.store.activeTab&&qe("collections-dropdown")}},{key:"render",value:function(){var e=this.renderOptions();return c.a.createElement(Oe.a,{id:"options-dropdown-".concat(this.props.course.id),title:gettext("Course options"),bsSize:"small","data-purpose":"options-dropdown",pullRight:!0,onToggle:this.trackOpenDropdown},!!e.length&&e)}},{key:"socialShareCourseObj",get:function(){var e=this.props.course;return babelHelpers.objectSpread({},e,{type:"course",is_private:e.isPrivate})}}]),t}(c.a.Component),te.propTypes={course:n.a.shape({id:n.a.number,enrollment:n.a.object,is_private:n.a.bool,title:n.a.string}).isRequired,store:n.a.object.isRequired,collection:n.a.object},te.defaultProps={collection:null},$=re,babelHelpers.applyDecoratedDescriptor($.prototype,"onShareItemSelect",[v.a,C.action],Object.getOwnPropertyDescriptor($.prototype,"onShareItemSelect"),$.prototype),babelHelpers.applyDecoratedDescriptor($.prototype,"onModalHide",[v.a,C.action],Object.getOwnPropertyDescriptor($.prototype,"onModalHide"),$.prototype),babelHelpers.applyDecoratedDescriptor($.prototype,"selectFavorite",[v.a],Object.getOwnPropertyDescriptor($.prototype,"selectFavorite"),$.prototype),babelHelpers.applyDecoratedDescriptor($.prototype,"handleChange",[v.a,C.action],Object.getOwnPropertyDescriptor($.prototype,"handleChange"),$.prototype),ee=babelHelpers.applyDecoratedDescriptor($.prototype,"showCollectionModal",[C.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),babelHelpers.applyDecoratedDescriptor($.prototype,"hideCollectionModal",[v.a,C.action],Object.getOwnPropertyDescriptor($.prototype,"hideCollectionModal"),$.prototype),babelHelpers.applyDecoratedDescriptor($.prototype,"onSelectCollectionModal",[v.a,C.action],Object.getOwnPropertyDescriptor($.prototype,"onSelectCollectionModal"),$.prototype),babelHelpers.applyDecoratedDescriptor($.prototype,"onCollectionAddSuccess",[v.a],Object.getOwnPropertyDescriptor($.prototype,"onCollectionAddSuccess"),$.prototype),babelHelpers.applyDecoratedDescriptor($.prototype,"removeCourseFromCollection",[v.a,C.action],Object.getOwnPropertyDescriptor($.prototype,"removeCourseFromCollection"),$.prototype),babelHelpers.applyDecoratedDescriptor($.prototype,"selectArchive",[v.a],Object.getOwnPropertyDescriptor($.prototype,"selectArchive"),$.prototype),babelHelpers.applyDecoratedDescriptor($.prototype,"trackOpenDropdown",[v.a],Object.getOwnPropertyDescriptor($.prototype,"trackOpenDropdown"),$.prototype),Z=$))||Z,Ke=Object(ge.a)(),We=Object(w.d)((ie=ae=function(e){function t(){var e,r;babelHelpers.classCallCheck(this,t);for(var o=arguments.length,s=new Array(o),a=0;a<o;a++)s[a]=arguments[a];return(r=babelHelpers.possibleConstructorReturn(this,(e=babelHelpers.getPrototypeOf(t)).call.apply(e,[this].concat(s)))).reviewEnabled=Ke.brand.is_add_reviews_enabled&&r.props.course.completion_ratio>0&&r.props.course.features.reviews_view&&Ke.features.course_review.leave_feedback,r}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"trackCardClick",value:function(){qe("course card at main section")}},{key:"render",value:function(){var e=this.props.course;return c.a.createElement("div",{onClick:this.trackCardClick,onKeyPress:this.trackCardClick,role:"presentation",tabIndex:-1,className:"card card--learning","data-purpose":"enrolled-course-card"},c.a.createElement("a",{href:"/course-dashboard-redirect/?course_id=".concat(e.id),className:"card--learning__image",tabIndex:"-1"},c.a.createElement("div",{className:"card__image play-button-trigger"},c.a.createElement(De.a,{markName:"MyCourses.learning-tab-first-img-loaded"},c.a.createElement(E.a,{src:e.image_240x135,className:"course-image",srcSet:"".concat(e.image_240x135," 1x").concat(e.image_480x270?", ".concat(e.image_480x270," 2x"):""),alt:e.title,width:240,height:135})),c.a.createElement("div",{className:"play-button"},e.num_collections?c.a.createElement("div",{className:"collections-count"},ninterpolate("In %s Collection","In %s Collections",e.num_collections)):null))),c.a.createElement("a",{href:e.url,className:"card--learning__details"},c.a.createElement("div",{className:"card__details"},c.a.createElement("strong",{className:"details__name"},e.title),c.a.createElement("div",{className:"details__instructor"},e.visible_instructors[0]&&e.visible_instructors[0].title,e.visible_instructors[0]&&e.visible_instructors[0].job_title?c.a.createElement("span",null,", ".concat(e.visible_instructors[0].job_title)):null),c.a.createElement("div",{className:"details__bottom"},c.a.createElement("span",{className:"details__progress"},c.a.createElement("span",{className:je()({completed:100==e.completion_ratio},"progress__bar"),style:{width:"".concat(e.completion_ratio,"%")}})),e.completion_ratio>0?c.a.createElement("span",{className:"a11 text-midnight-lighter progress__text tooltip-container"},c.a.createElement("div",{className:"ellipsis"},interpolate(gettext("%s% Complete"),[e.completion_ratio]))):c.a.createElement("span",{className:"details__start-course"},gettext("START COURSE")),this.reviewEnabled&&e.leaveRatingStore&&c.a.createElement("div",{className:"details__bottom--review dib pull-right"},c.a.createElement(Se.a,{store:e.leaveRatingStore}))))),c.a.createElement("div",{className:"card__options"},c.a.createElement(Ve,{course:e,store:this.props.store,collection:this.props.collection})))}}]),t}(l.Component),ae.propTypes={course:n.a.object.isRequired,store:n.a.object.isRequired,collection:n.a.object},ae.defaultProps={collection:null},se=ie,babelHelpers.applyDecoratedDescriptor(se.prototype,"trackCardClick",[v.a],Object.getOwnPropertyDescriptor(se.prototype,"trackCardClick"),se.prototype),oe=se))||oe,Ye=Object(w.d)((pe=ce=function(e){function t(){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).apply(this,arguments))}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"handleSelect",value:function(e){var t=new URLSearchParams(this.props.location.search);t.set("p",e),this.props.history.push({pathname:this.props.location.path,search:t.toString()})}},{key:"renderZeroState",value:function(){switch(this.props.store.activeTab){case"learning_tab":return c.a.createElement("span",null,c.a.createElement("h2",{className:"mt30 mb20"},this.props.store.isOrganization?interpolate(gettext("Start learning from %s+ courses today."),[Object(_e.a)("num_courses")]):interpolate(gettext("Start learning from over %s courses today."),[Object(_e.a)("num_courses")])),c.a.createElement("h4",{className:"text-midnight-lighter"},c.a.createElement("span",null,gettext("When you enroll in a course, it will appear here. ")),this.props.store.isOrganization?null:c.a.createElement("a",{href:"/discover",className:"bold","data-purpose":"no-courses-link"},gettext("Browse now."))),c.a.createElement("h4",{className:"text-midnight-lighter"},this.props.store.isOrganization?c.a.createElement("span",Object(ke.a)({descriptionOfCaller:"course-list:link-to-discover",html:gettext('Discover New Courses in your <a href="/discover" class="bold">Account Subscription</a>.')})):null));case"archive_tab":return c.a.createElement("span",null,c.a.createElement("h2",{className:"mt30 mb20"},gettext("Focus on only the courses that matter to you.")),c.a.createElement("h4",Object.assign({className:"text-midnight-lighter"},Object(ke.a)({descriptionOfCaller:"course-list:link-to-my-courses",html:gettext('<a href="/home/my-courses" class="bold" >Go to the All Courses</a> tab to archive.'),dataPurpose:"no-archived-courses"}))));default:return null}}},{key:"render",value:function(){var e=this;return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"container"},this.props.store.showZeroState?c.a.createElement("div",{className:"p20 mb60 text-center a3"},this.renderZeroState()):c.a.createElement("div",{className:"card-wrapper"},this.props.store.courses.map((function(t,r){return c.a.createElement(We,{key:r,course:t,store:e.props.store})})))),c.a.createElement("div",{className:"container mt-space-xs"},c.a.createElement(we.a,{bsStyle:"expanded",activePage:this.props.store.currentPage,onSelect:this.handleSelect,total:this.props.store.count,items:this.props.store.pageCount,pageSize:this.props.store.pageSize,itemLabel:"COURSES"})))}}]),t}(l.Component),ce.propTypes={store:n.a.object.isRequired,history:n.a.object.isRequired,location:n.a.object.isRequired},le=pe,babelHelpers.applyDecoratedDescriptor(le.prototype,"handleSelect",[v.a,C.action],Object.getOwnPropertyDescriptor(le.prototype,"handleSelect"),le.prototype),ne=le))||ne,Xe=r("./src/udemy/js/course-reviews/common/alt-leave-rating.mobx-store.js"),Qe=r("./src/udemy/js/course-reviews/common/locations.js"),Je=r("./src/udemy/js/utils/ud-performance.js"),Ze=r("./src/udemy/js/course-taking/enrollment.mobx-model.js"),$e=Object(ge.a)(),et=(ue=function(){function e(t,r,o){babelHelpers.classCallCheck(this,e),this.pageSize=12,this.searchQuery="",this.isOrganization=$e.brand.has_organization,this.collectionsEnabled=!$e.brand.has_organization,this.sortOptions=[{value:"-last_accessed",title:gettext("Recently Accessed")},{value:"-enroll_time",title:gettext("Recently Enrolled")},{value:"title",title:gettext("Title: A-to-Z")},{value:"-title",title:gettext("Title: Z-to-A")},{value:"completion_ratio",title:gettext("Completion: 0% to 100%")},{value:"-completion_ratio",title:gettext("Completion: 100% to 0%")}],this.progressOptions={"in-progress":{title:gettext("In Progress"),params:{max_progress:99.9,min_progress:.1}},completed:{title:gettext("Completed"),params:{max_progress:100,min_progress:100}},"not-started":{title:gettext("Not Started"),params:{max_progress:0,min_progress:0}}},this.searchParams={},this.defaultFilterTitles={category:gettext("Categories"),instructor:gettext("Instructor"),progress:gettext("Progress")},this.filterParams={},this.instructorsPage=1,this.instructorsPageSize=20,this.instructorsNextPage=null,babelHelpers.initializerDefineProperty(this,"instructorsLoading",de,this),this.collectionsPage=1,this.collectionsPageSize=8,this.collectionsNextPage=null,babelHelpers.initializerDefineProperty(this,"collectionsLoading",he,this),this.activeTab=t,Object(C.extendObservable)(this,{categories:[],categoryTitle:this.defaultFilterTitles.category,isCategorySelected:!1,category_id:null,collections:[],courses:[],currentPage:1,instructorTitle:this.defaultFilterTitles.instructor,isInstructorSelected:!1,instructors:[],isClean:!0,isLoading:!0,ordering:"-last_accessed",progressFilters:[],progressTitle:this.defaultFilterTitles.progress,isProgressSelected:!1,count:0}),this.location=r,this.history=o}var t,r,o,s;return babelHelpers.createClass(e,[{key:"removeCourse",value:function(e){if(this.courses.find((function(t){return t.id===e}))&&(this.courses=this.courses.filter((function(t){return t.id!==e})),this.count--,0===this.courses.length&&this.pageCount>0)){var t=this.currentPage;this.currentPage>this.pageCount&&this.currentPage>1&&t--;var r=new URLSearchParams(this.location.search);r.set("p",t),this.history.push({pathname:this.location.path,search:r.toString()})}}},{key:"setState",value:function(e){switch(this.searchParams=e,this.filterParams={},e.has("p")?(this.isClean=Array.from(e).length<2,this.currentPage=parseInt(e.get("p"),10)||1):(this.isClean=Array.from(e).length<1,this.currentPage=1),this.activeTab){case"archive_tab":this.filterParams.is_archived=!0;break;case"learning_tab":e.has("sort")?this.ordering=e.get("sort"):this.ordering="-last_accessed",this.setProgress(e),this.setCategory(e),this.setInstructor(e)}}},{key:"setProgress",value:function(e){if(e.has("progress_filter")){this.isProgressSelected=!0;var t=this.progressOptions[e.get("progress_filter")];this.progressTitle=t.title,this.filterParams=babelHelpers.objectSpread({},this.filterParams,t.params)}else this.isProgressSelected=!1,this.progressTitle=this.defaultFilterTitles.progress}},{key:"setCategory",value:function(e){if(e.has("category_filter")){this.isCategorySelected=!0;var t=e.get("category_filter");switch(t){case"favorited":this.categoryTitle=gettext("Favorites"),this.filterParams.is_favorited=!0;break;case"all":this.categoryTitle=gettext("All Categories");break;case"archived":this.categoryTitle=gettext("Archived"),this.filterParams.is_archived=!0;break;default:var r=parseInt(t,10);if(r){if(this.categories.length>0){var o=this.categories.find((function(e){return e.id===r}));this.categoryTitle=o.title}this.filterParams.category_id=r}}}else this.isCategorySelected=!1,this.categoryTitle=this.defaultFilterTitles.category}},{key:"setInstructor",value:function(e){var t=e.get("instructor_filter"),r=parseInt(t,10);if(r){if(this.instructors.length>0){var o=this.instructors.find((function(e){return e.id===r}));this.instructorTitle=o?o.title:this.instructorTitle}this.filterParams.instructor_id=r,this.isInstructorSelected=!0}else this.instructorTitle=this.defaultFilterTitles.instructor,this.isInstructorSelected=!1}},{key:"updateMyCourses",value:function(e){this.setState(e),this.loadFilters(),this.loadCourses(),this.loadCollections()}},{key:"loadCourses",value:(s=babelHelpers.asyncToGenerator(regeneratorRuntime.mark((function e(){var t,r,o,s,a=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.isLoading=!0,t=babelHelpers.objectSpread({ordering:this.ordering,"fields[course]":["@min","visible_instructors","image_240x135","favorite_time","archive_time","completion_ratio","last_accessed_time","enrollment_time","is_practice_test_course","features","num_collections","published_title","is_private","buyable_object_type"].join(","),"fields[user]":"@min,job_title",page:this.currentPage,page_size:this.pageSize},this.searchQuery&&{search:this.searchQuery}),e.prev=2,Je.a.start("_learningApi"),e.next=6,O.d.get("/users/me/subscribed-courses/",{params:babelHelpers.objectSpread({},t,this.filterParams)});case 6:return r=e.sent,Je.a.end("_learningApi"),o=r.data.results||[],s=o.map((function(e){var t={courseId:e.id,favorite_time:e.favorite_time,archive_time:e.archive_time};return babelHelpers.objectSpread({},e,{enrollment:new Ze.a(t)})})),e.next=12,tt(s);case 12:Object(C.runInAction)((function(){a.courses=s,a.count=r.data.count,a.isLoading=!1})),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(2),Object(C.runInAction)((function(){P.a.captureException(e.t0)}));case 18:case"end":return e.stop()}}),e,this,[[2,15]])}))),function(){return s.apply(this,arguments)})},{key:"loadFilters",value:(o=babelHelpers.asyncToGenerator(regeneratorRuntime.mark((function e(){var t,r,o,s,a,i,n=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=this.filterParams).category_id,r=babelHelpers.objectWithoutProperties(t,["category_id"]),o=O.d.get("/users/me/subscribed-courses-categories/",{params:babelHelpers.objectSpread({"fields[course_category]":"id,title",previewing:!1,page_size:15},r)}).then(Object(C.action)((function(e){n.categories=e.data.results||[],n.setCategory(n.searchParams)}))).catch((function(e){P.a.captureException(e)})),(s=this.filterParams).max_progress,s.min_progress,a=babelHelpers.objectWithoutProperties(s,["max_progress","min_progress"]),i=O.d.get("/users/me/subscribed-courses-progress-filters/",{params:babelHelpers.objectSpread({ordering:"-access_time,-enrolled"},a)}).then(Object(C.action)((function(e){n.progressFilters=e.data.results||[]}))).catch((function(e){P.a.captureException(e)})),this.resetInstructors(),e.abrupt("return",Promise.all([o,i,this.loadInstructors()]));case 6:case"end":return e.stop()}}),e,this)}))),function(){return o.apply(this,arguments)})},{key:"resetInstructors",value:function(){this.instructorsPage=1,this.instructorsNextPage=null,this.instructors=[]}},{key:"loadInstructors",value:(r=babelHelpers.asyncToGenerator(regeneratorRuntime.mark((function e(){var t,r,o,s=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((this.instructorsNextPage||1===this.instructorsPage)&&!this.instructorsLoading){e.next=2;break}return e.abrupt("return");case 2:return this.instructorsLoading=!0,e.prev=3,(t=this.filterParams).instructor_id,r=babelHelpers.objectWithoutProperties(t,["instructor_id"]),e.next=7,O.d.get("/users/me/subscribed-courses-instructors/",{params:babelHelpers.objectSpread({page:this.instructorsPage++,page_size:this.instructorsPageSize},r)});case 7:o=e.sent,Object(C.runInAction)((function(){var e,t=o.data.results||[];(e=s.instructors).push.apply(e,babelHelpers.toConsumableArray(t)),s.instructorsNextPage=o.data.next,s.setInstructor(s.searchParams),s.instructorsLoading=!1})),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(3),Object(C.runInAction)((function(){s.instructorsLoading=!1,P.a.captureException(e.t0)}));case 14:case"end":return e.stop()}}),e,this,[[3,11]])}))),function(){return r.apply(this,arguments)})},{key:"loadCollections",value:(t=babelHelpers.asyncToGenerator(regeneratorRuntime.mark((function e(){var t,r=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((this.collectionsNextPage||1===this.collectionsPage)&&!this.collectionsLoading){e.next=2;break}return e.abrupt("return");case 2:return this.collectionsLoading=!0,e.prev=3,e.next=6,O.d.get("/users/me/subscribed-courses-collections/",{params:{page:this.collectionsPage++,page_size:this.collectionsPageSize,"fields[course]":"id","fields[user_has_subscribed_courses_collection]":"@all"}});case 6:t=e.sent,Object(C.runInAction)((function(){var e,o=t.data.results||[];(e=r.collections).push.apply(e,babelHelpers.toConsumableArray(o)),r.collectionsNextPage=t.data.next,r.collectionsLoading=!1})),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),Object(C.runInAction)((function(){r.collectionsLoading=!1,P.a.captureException(e.t0)}));case 13:case"end":return e.stop()}}),e,this,[[3,10]])}))),function(){return t.apply(this,arguments)})},{key:"pageCount",get:function(){return this.count?Math.ceil(this.count/this.pageSize):0}},{key:"sortTitle",get:function(){var e=this,t=this.sortOptions.find((function(t){return t.value===e.ordering}));return t&&t.title||gettext("Sort by")}},{key:"showZeroState",get:function(){return 0===this.courses.length}}]),e}(),babelHelpers.applyDecoratedDescriptor(ue.prototype,"removeCourse",[C.action],Object.getOwnPropertyDescriptor(ue.prototype,"removeCourse"),ue.prototype),babelHelpers.applyDecoratedDescriptor(ue.prototype,"setState",[C.action],Object.getOwnPropertyDescriptor(ue.prototype,"setState"),ue.prototype),babelHelpers.applyDecoratedDescriptor(ue.prototype,"setInstructor",[C.action],Object.getOwnPropertyDescriptor(ue.prototype,"setInstructor"),ue.prototype),babelHelpers.applyDecoratedDescriptor(ue.prototype,"pageCount",[C.computed],Object.getOwnPropertyDescriptor(ue.prototype,"pageCount"),ue.prototype),babelHelpers.applyDecoratedDescriptor(ue.prototype,"sortTitle",[C.computed],Object.getOwnPropertyDescriptor(ue.prototype,"sortTitle"),ue.prototype),babelHelpers.applyDecoratedDescriptor(ue.prototype,"showZeroState",[C.computed],Object.getOwnPropertyDescriptor(ue.prototype,"showZeroState"),ue.prototype),babelHelpers.applyDecoratedDescriptor(ue.prototype,"loadCourses",[C.action],Object.getOwnPropertyDescriptor(ue.prototype,"loadCourses"),ue.prototype),de=babelHelpers.applyDecoratedDescriptor(ue.prototype,"instructorsLoading",[C.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),babelHelpers.applyDecoratedDescriptor(ue.prototype,"resetInstructors",[C.action],Object.getOwnPropertyDescriptor(ue.prototype,"resetInstructors"),ue.prototype),babelHelpers.applyDecoratedDescriptor(ue.prototype,"loadInstructors",[C.action],Object.getOwnPropertyDescriptor(ue.prototype,"loadInstructors"),ue.prototype),he=babelHelpers.applyDecoratedDescriptor(ue.prototype,"collectionsLoading",[C.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),babelHelpers.applyDecoratedDescriptor(ue.prototype,"loadCollections",[C.action],Object.getOwnPropertyDescriptor(ue.prototype,"loadCollections"),ue.prototype),ue);function tt(e){return rt.apply(this,arguments)}function rt(){return(rt=babelHelpers.asyncToGenerator(regeneratorRuntime.mark((function e(t){var r,o,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O.d.get("/users/me/course-reviews/",{params:{courses:t.map((function(e){return e.id})).join(","),"fields[course_review]":"@min,course,survey_answers","fields[course]":"id",page_size:t.length,page:1}});case 3:r=e.sent,o=r.data.results||[],s=o.reduce((function(e,t){return e[t.course.id]=t,e}),{}),t.forEach((function(e){e.leaveRatingStore=new Xe.a(e,s[e.id],Qe.a,gettext("Leave a rating"),gettext("Your rating"),gettext("Edit rating"))})),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),P.a.captureException(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})))).apply(this,arguments)}var ot,st,at,it,nt,lt,ct,pt,ut=Object(w.d)((fe=be=function(e){function t(e){var r;return babelHelpers.classCallCheck(this,t),(r=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this,e))).store=new et("archive_tab",e.location,e.history),r}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"componentDidMount",value:function(){qe("archive-tab");var e=new URLSearchParams(this.props.location.search);this.store.setState(e),this.store.loadCourses()}},{key:"componentDidUpdate",value:function(e){if(e.location!==this.props.location){var t=new URLSearchParams(this.props.location.search);this.store.setState(t),this.store.loadCourses()}}},{key:"render",value:function(){return c.a.createElement("ul",{className:"my-courses__container"},c.a.createElement("li",{className:"container__main-section"},this.store.isLoading?c.a.createElement(j.a,{block:!0,size:"medium"}):c.a.createElement(Ye,{store:this.store,history:this.props.history,location:this.props.location})))}}]),t}(l.Component),be.propTypes={history:n.a.object.isRequired,location:n.a.object.isRequired},me=fe))||me,dt=r("./src/udemy/js/asset/video/video-asset.react-component.js"),ht=r("./src/udemy/js/base-components/confirm-modal.react-component.js"),mt=Object(w.d)((pt=ct=function(e){function t(e){var r;return babelHelpers.classCallCheck(this,t),r=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this,e)),babelHelpers.initializerDefineProperty(r,"showEditModal",at,babelHelpers.assertThisInitialized(r)),babelHelpers.initializerDefineProperty(r,"collapsed",it,babelHelpers.assertThisInitialized(r)),babelHelpers.initializerDefineProperty(r,"moreCoursesLoading",nt,babelHelpers.assertThisInitialized(r)),r.collectionCoursesPage=1,babelHelpers.initializerDefineProperty(r,"isConfirmationModalOpen",lt,babelHelpers.assertThisInitialized(r)),Object(C.extendObservable)(babelHelpers.assertThisInitialized(r),{allCoursesLoaded:!e.collection.hasMoreCourses}),r.collectionCoursesPageSize=e.store.courseLimit,r}var r;return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"openEditModal",value:function(){this.showEditModal=!0}},{key:"closeEditModal",value:function(){this.showEditModal=!1}},{key:"onConfirmationModalOpen",value:function(){this.isConfirmationModalOpen=!0}},{key:"onConfirmationModalConfirm",value:function(){var e=this,t=this.props.collection;this.isConfirmationModalOpen=!1,O.d.delete("/users/me/subscribed-courses-collections/".concat(t.id,"/")).then((function(){T.a.Feedback.fromText(interpolate(gettext('Your collection "%s" has been deleted.'),[t.title]),T.a.MessageType.info),e.props.store.removeCollection(t.id)}))}},{key:"onConfirmationModalClose",value:function(){this.isConfirmationModalOpen=!1}},{key:"loadMoreCourses",value:(r=babelHelpers.asyncToGenerator(regeneratorRuntime.mark((function e(){var t,r,o,s,a,i=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((t=this.props.collection).hasMoreCourses){e.next=6;break}this.allCoursesLoaded=!0,this.toggleCollapsed(),e.next=29;break;case 6:if(this.allCoursesLoaded){e.next=28;break}return this.moreCoursesLoading=!0,r=t.courses.length%this.collectionCoursesPageSize,o=r?this.collectionCoursesPage:++this.collectionCoursesPage,e.prev=10,e.next=13,O.d.get("/users/me/subscribed-courses-collections/".concat(t.id,"/courses/"),{params:{page:o,page_size:this.collectionCoursesPageSize,"fields[course]":["@min","visible_instructors","image_240x135","image_480x270","favorite_time","archive_time","completion_ratio","last_accessed_time","enrollment_time","features"].join(",")}});case 13:return s=e.sent,a=s.data.results||[],e.next=17,tt(a);case 17:Object(C.runInAction)((function(){var e,o;s.data.next||(i.allCoursesLoaded=!0),r?(e=t.courses).push.apply(e,babelHelpers.toConsumableArray(a.slice(-(i.collectionCoursesPageSize-r)))):(o=t.courses).push.apply(o,babelHelpers.toConsumableArray(a)),i.moreCoursesLoading=!1,i.collapsed=!1})),e.next=26;break;case 20:e.prev=20,e.t0=e.catch(10),this.allCoursesLoaded=!0,this.toggleCollapsed(),T.a.Feedback.fromText(gettext("Error loading more courses"),T.a.MessageType.error),P.a.captureException(e.t0);case 26:e.next=29;break;case 28:this.toggleCollapsed();case 29:case"end":return e.stop()}}),e,this,[[10,20]])}))),function(){return r.apply(this,arguments)})},{key:"onCollectionUpdateSuccess",value:function(){this.props.store.loadCollectionsWithCourses(),this.closeEditModal()}},{key:"toggleCollapsed",value:function(){var e="collection-".concat(this.props.collection.id),t=document.getElementById(e);t&&t.scrollIntoView({behavior:"smooth"}),this.collapsed=!this.collapsed}},{key:"render",value:function(){var e=this,t=this.props.collection;return 0===t.courses.length?null:c.a.createElement("div",{className:"collections__list"},c.a.createElement("div",{className:"list-info",id:"collection-".concat(t.id)},c.a.createElement("h2",{className:"ml10 mt40"},t.title," ",c.a.createElement(Pe.a,{className:"ml10 collection_icon",glyph:"pencil",onClick:this.openEditModal}),c.a.createElement(Pe.a,{className:"ml10 collection_icon",glyph:"delete","data-purpose":"show-delete-confim-modal",onClick:this.onConfirmationModalOpen})),c.a.createElement("div",{className:"fx-flex"},c.a.createElement("div",{className:"list-description fx"},c.a.createElement("div",{className:"text-midnight-lighter ml10 ellipsis"},t.description)))),c.a.createElement("ul",{className:je()("course-cards-container mt20",{collapsed:this.collapsed})},t.courses.map((function(r,o){return c.a.createElement(We,{key:o,course:r,store:e.props.store,collection:t})}))),t.courses.length>4?c.a.createElement("div",{className:"text-center mt10",onClick:this.loadMoreCourses,onKeyPress:this.loadMoreCourses,role:"button",tabIndex:"-1","data-purpose":"load-more-courses-for-collection"},this.moreCoursesLoading?c.a.createElement(j.a,{block:!0,size:"small"}):c.a.createElement("a",null,!this.collapsed&&this.allCoursesLoaded?gettext("See less"):gettext("See more"))):null,c.a.createElement(Ue,{show:this.showEditModal,onClose:this.closeEditModal,collection:t,onUpdateSuccess:this.onCollectionUpdateSuccess}),c.a.createElement(ht.a,{body:gettext('Are you sure you want to delete your collection?  Your courses will still be available in "All Courses".'),onCancel:this.onConfirmationModalClose,onConfirm:this.onConfirmationModalConfirm,show:this.isConfirmationModalOpen}))}}]),t}(l.Component),ct.propTypes={collection:n.a.object.isRequired,store:n.a.object.isRequired},st=pt,at=babelHelpers.applyDecoratedDescriptor(st.prototype,"showEditModal",[C.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),it=babelHelpers.applyDecoratedDescriptor(st.prototype,"collapsed",[C.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),nt=babelHelpers.applyDecoratedDescriptor(st.prototype,"moreCoursesLoading",[C.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),babelHelpers.applyDecoratedDescriptor(st.prototype,"openEditModal",[v.a,C.action],Object.getOwnPropertyDescriptor(st.prototype,"openEditModal"),st.prototype),babelHelpers.applyDecoratedDescriptor(st.prototype,"closeEditModal",[v.a,C.action],Object.getOwnPropertyDescriptor(st.prototype,"closeEditModal"),st.prototype),lt=babelHelpers.applyDecoratedDescriptor(st.prototype,"isConfirmationModalOpen",[C.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),babelHelpers.applyDecoratedDescriptor(st.prototype,"onConfirmationModalOpen",[v.a,C.action],Object.getOwnPropertyDescriptor(st.prototype,"onConfirmationModalOpen"),st.prototype),babelHelpers.applyDecoratedDescriptor(st.prototype,"onConfirmationModalConfirm",[v.a,C.action],Object.getOwnPropertyDescriptor(st.prototype,"onConfirmationModalConfirm"),st.prototype),babelHelpers.applyDecoratedDescriptor(st.prototype,"onConfirmationModalClose",[v.a,C.action],Object.getOwnPropertyDescriptor(st.prototype,"onConfirmationModalClose"),st.prototype),babelHelpers.applyDecoratedDescriptor(st.prototype,"loadMoreCourses",[v.a,C.action],Object.getOwnPropertyDescriptor(st.prototype,"loadMoreCourses"),st.prototype),babelHelpers.applyDecoratedDescriptor(st.prototype,"onCollectionUpdateSuccess",[v.a],Object.getOwnPropertyDescriptor(st.prototype,"onCollectionUpdateSuccess"),st.prototype),ot=st))||ot,bt=r("./node_modules/lodash-es/_baseIteratee.js"),ft=r("./node_modules/lodash-es/_baseUniq.js");var yt,gt,vt,wt,kt,_t=function(e,t){return e&&e.length?Object(ft.a)(e,Object(bt.a)(t,2)):[]},Et=(yt=function(){function e(t,r){babelHelpers.classCallCheck(this,e),this.pageSize=8,this.courseLimit=8,this.activeTab="collection_tab",Object(C.extendObservable)(this,{isLoading:!0,collections:[],currentPage:1,count:0}),this.location=t,this.history=r}var t;return babelHelpers.createClass(e,[{key:"removeCollection",value:function(e){if(this.collections.find((function(t){return t.id===e}))&&(this.collections=this.collections.filter((function(t){return t.id!==e})),this.count--,0===this.collections.length&&this.pageCount>0)){var t=this.currentPage;this.currentPage>this.pageCount&&this.currentPage>1&&t--;var r=new URLSearchParams(this.location.search);r.set("p",t),this.history.push({pathname:this.location.path,search:r.toString()})}}},{key:"deduplicateCoursesInCollections",value:function(e){this.collections.forEach((function(t){t.courses.forEach((function(r,o){t.courses[o]=e.find((function(e){return e.id===r.id}))}))}))}},{key:"loadCollectionsWithCourses",value:(t=babelHelpers.asyncToGenerator(regeneratorRuntime.mark((function e(){var t,r,o,s,a,i,n=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.isLoading=!0,t=["@min","visible_instructors","image_240x135","image_480x270","favorite_time","archive_time","is_practice_test_course","completion_ratio","last_accessed_time","enrollment_time","features","published_title"].join(","),r={ordering:this.ordering,"fields[course]":t,"fields[user_has_subscribed_courses_collection]":"@all",page:this.currentPage,page_size:this.pageSize,collection_has_courses:"True",course_limit:this.courseLimit+1},e.prev=3,e.next=6,O.d.get("/users/me/subscribed-courses-collections/",{params:r});case 6:return o=e.sent,s=o.data.results||[],this.collections=s.map((function(e){return e.hasMoreCourses=e.courses.length>n.courseLimit,e.courses=e.courses.slice(0,n.courseLimit),e})),a=[],this.collections.forEach((function(e){e.courses.forEach((function(e){a.push(e)}))})),i=_t(a,"id"),e.next=14,tt(i);case 14:this.deduplicateCoursesInCollections(i),Object(C.runInAction)((function(){n.count=o.data.count,n.isLoading=!1})),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(3),Object(C.runInAction)((function(){n.isLoading=!1,T.a.Feedback.fromText(gettext("Error loading collections"),T.a.MessageType.error),P.a.captureException(e.t0)}));case 21:case"end":return e.stop()}}),e,this,[[3,18]])}))),function(){return t.apply(this,arguments)})},{key:"pageCount",get:function(){return this.count?Math.ceil(this.count/this.pageSize):0}},{key:"showZeroState",get:function(){return 0===this.collections.length}}]),e}(),babelHelpers.applyDecoratedDescriptor(yt.prototype,"pageCount",[C.computed],Object.getOwnPropertyDescriptor(yt.prototype,"pageCount"),yt.prototype),babelHelpers.applyDecoratedDescriptor(yt.prototype,"showZeroState",[C.computed],Object.getOwnPropertyDescriptor(yt.prototype,"showZeroState"),yt.prototype),babelHelpers.applyDecoratedDescriptor(yt.prototype,"removeCollection",[C.action],Object.getOwnPropertyDescriptor(yt.prototype,"removeCollection"),yt.prototype),babelHelpers.applyDecoratedDescriptor(yt.prototype,"deduplicateCoursesInCollections",[v.a,C.action],Object.getOwnPropertyDescriptor(yt.prototype,"deduplicateCoursesInCollections"),yt.prototype),babelHelpers.applyDecoratedDescriptor(yt.prototype,"loadCollectionsWithCourses",[C.action],Object.getOwnPropertyDescriptor(yt.prototype,"loadCollectionsWithCourses"),yt.prototype),yt),jt=Object(w.d)((kt=wt=function(e){function t(e){var r;return babelHelpers.classCallCheck(this,t),(r=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this,e))).store=new Et(e.location,e.history),r}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"componentDidMount",value:function(){qe("collections-tab"),this.loadPage()}},{key:"componentDidUpdate",value:function(e){e.location!==this.props.location&&this.loadPage()}},{key:"loadPage",value:function(){var e=new URLSearchParams(this.props.location.search);this.store.currentPage=parseInt(e.get("p"),10)||1,this.store.loadCollectionsWithCourses()}},{key:"handleSelect",value:function(e){var t=new URLSearchParams(this.props.location.search);t.set("p",e),this.props.history.push({pathname:this.props.location.path,search:t.toString()})}},{key:"renderCollectionCardList",value:function(){var e=this;return this.store.collections.map((function(t){return c.a.createElement("li",{key:t.id},c.a.createElement("div",{className:"card-wrapper"},c.a.createElement(mt,{store:e.store,collection:t})))}))}},{key:"renderPaginatedCollections",value:function(){return c.a.createElement(c.a.Fragment,null,c.a.createElement("ul",{className:"container mt30"},this.store.showZeroState?c.a.createElement(Dt,{collectionsPromoVideoId:this.props.collectionsPromoVideoId}):this.renderCollectionCardList()),c.a.createElement("div",{className:"container mt-space-xs"},c.a.createElement(we.a,{bsStyle:"expanded",activePage:this.store.currentPage,onSelect:this.handleSelect,total:this.store.count,items:this.store.pageCount,pageSize:this.store.pageSize,itemLabel:"COLLECTIONS"})))}},{key:"render",value:function(){return c.a.createElement("div",{className:"my-courses__container"},this.store.isLoading?c.a.createElement(j.a,{block:!0,size:"medium"}):this.renderPaginatedCollections())}}]),t}(l.Component),wt.propTypes={history:n.a.object.isRequired,location:n.a.object.isRequired,collectionsPromoVideoId:n.a.number.isRequired},vt=kt,babelHelpers.applyDecoratedDescriptor(vt.prototype,"loadPage",[C.action],Object.getOwnPropertyDescriptor(vt.prototype,"loadPage"),vt.prototype),babelHelpers.applyDecoratedDescriptor(vt.prototype,"handleSelect",[v.a,C.action],Object.getOwnPropertyDescriptor(vt.prototype,"handleSelect"),vt.prototype),gt=vt))||gt,Dt=function(e){return c.a.createElement("li",{className:"p20 text-center a3 bold"},c.a.createElement("h2",{className:"mt30 mb20 fx-c"},gettext("Organize and access your courses faster!")),c.a.createElement("h4",Object.assign({className:"text-midnight-lighter"},Object(ke.a)({descriptionOfCaller:"collections:my-courses-link",html:gettext('<a href="/home/my-courses" class="bold">Go to the All Courses tab</a> to create a collection.'),dataPurpose:"no-collections-link"}))),c.a.createElement("div",{className:"fxc mt30"},c.a.createElement("div",{style:{width:"700px",height:"394px"}},c.a.createElement(dt.default,{id:e.collectionsPromoVideoId}))))};Dt.propTypes={collectionsPromoVideoId:n.a.number.isRequired};var St,Ct,Ot,Pt,Tt,xt,Rt,Ht,At,It,Lt,Mt,Nt,Ft,Ut,zt,Bt,qt,Gt,Vt,Kt,Wt,Yt,Xt,Qt,Jt,Zt,$t,er,tr,rr,or,sr,ar,ir,nr,lr=r("./src/udemy/js/invite/invite-alert/invite-alert.react-component.js"),cr=r("./src/udemy/js/base-components/dropdown-button.react-component.js"),pr=r("./src/udemy/js/base-components/row.react-component.js"),ur=r("./src/udemy/js/base-components/dropdown.react-component.js"),dr=(r("./src/udemy/js/my-courses-v3/filter-dropdowns/filter-dropdown.less"),Object(w.d)((Pt=Ot=function(e){function t(){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).apply(this,arguments))}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"selectFilter",value:function(e){qe("filter-category-".concat(e)),this.props.setNewParam("category_filter",e)}},{key:"render",value:function(){var e=this,t=this.props.store;return c.a.createElement(ur.default,{vertical:this.props.block,block:this.props.block,id:"category-filters-dropdown",className:"mr10"},c.a.createElement(ur.default.Toggle,{block:this.props.block,className:(je()({bold:t.isCategorySelected})?je()({bold:t.isCategorySelected})+" ":"")+"filter-dropdown--ellipsis-inline--1fsfJ filter-dropdown--category-text--R5y--"},t.categoryTitle),c.a.createElement(ur.default.Menu,null,c.a.createElement(Te.a,{key:"favorited",eventKey:"favorited",onSelect:this.selectFilter},gettext("Favorites")),c.a.createElement(Te.a,{divider:!0}),c.a.createElement(Te.a,{key:"all",eventKey:"all",onSelect:this.selectFilter},gettext("All Categories")),t.categories.map((function(t){var r=t.id,o=t.title;return c.a.createElement(Te.a,{key:r,eventKey:r,onSelect:e.selectFilter,"data-purpose":"category-item-".concat(r)},o)})),c.a.createElement(Te.a,{divider:!0}),c.a.createElement(Te.a,{key:"archived",eventKey:"archived",onSelect:this.selectFilter},gettext("Archived"))))}}]),t}(l.Component),Ot.propTypes={store:n.a.object.isRequired,setNewParam:n.a.func.isRequired,block:n.a.bool},Ot.defaultProps={block:!1},Ct=Pt,babelHelpers.applyDecoratedDescriptor(Ct.prototype,"selectFilter",[v.a],Object.getOwnPropertyDescriptor(Ct.prototype,"selectFilter"),Ct.prototype),St=Ct))||St),hr=Object(w.d)((Ht=Rt=function(e){function t(){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).apply(this,arguments))}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"selectFilter",value:function(e){qe("filter-instructor".concat(e)),this.props.store.setInstructor(new URLSearchParams("instructor_filter=".concat(e))),this.props.setNewParam("instructor_filter",e)}},{key:"handleChange",value:function(e){e.isIntersecting&&this.props.store.loadInstructors()}},{key:"render",value:function(){var e=this,t=this.props.store;return c.a.createElement(ur.default,{vertical:this.props.block,block:this.props.block,id:"instructor-filters-dropdown"},c.a.createElement(ur.default.Toggle,{block:this.props.block,className:(je()({bold:t.isInstructorSelected})?je()({bold:t.isInstructorSelected})+" ":"")+"filter-dropdown--ellipsis-inline--1fsfJ filter-dropdown--instructor-text--Z6nQN"},t.instructorTitle),c.a.createElement(ur.default.Menu,{className:"filter-dropdown--instructor-dropdown--Phi5w","data-purpose":"instructor-menu"},t.instructors.map((function(r,o){var s=r.id,a=r.title,i=c.a.createElement(Te.a,{key:s,eventKey:s,onSelect:e.selectFilter,"data-purpose":"instructor-item-".concat(s)},a);return o===t.instructors.length-1?c.a.createElement(Ce.a,{key:i.key,onChange:e.handleChange},i):i})),t.instructorsLoading?c.a.createElement(j.a,{block:!0,size:"small"}):null))}}]),t}(l.Component),Rt.propTypes={store:n.a.object.isRequired,setNewParam:n.a.func.isRequired,block:n.a.bool},Rt.defaultProps={block:!1},xt=Ht,babelHelpers.applyDecoratedDescriptor(xt.prototype,"selectFilter",[v.a],Object.getOwnPropertyDescriptor(xt.prototype,"selectFilter"),xt.prototype),babelHelpers.applyDecoratedDescriptor(xt.prototype,"handleChange",[v.a,C.action],Object.getOwnPropertyDescriptor(xt.prototype,"handleChange"),xt.prototype),Tt=xt))||Tt,mr=Object(w.d)((Mt=Lt=function(e){function t(){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).apply(this,arguments))}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"selectFilter",value:function(e){qe("filter-".concat(e)),this.props.setNewParam("progress_filter",e)}},{key:"render",value:function(){var e=this,t=this.props.store;return c.a.createElement(ur.default,{vertical:this.props.block,block:this.props.block,id:"progress-filters-dropdown"},c.a.createElement(ur.default.Toggle,{className:je()({bold:t.isProgressSelected}),block:this.props.block},t.progressTitle),c.a.createElement(ur.default.Menu,null,t.progressFilters.map((function(r){var o=r.status;return c.a.createElement(Te.a,{key:o,eventKey:o,onSelect:e.selectFilter,"data-purpose":"progress-item-".concat(o)},t.progressOptions[o].title)}))))}}]),t}(l.Component),Lt.propTypes={store:n.a.object.isRequired,setNewParam:n.a.func.isRequired,block:n.a.bool},Lt.defaultProps={block:!1},It=Mt,babelHelpers.applyDecoratedDescriptor(It.prototype,"selectFilter",[v.a],Object.getOwnPropertyDescriptor(It.prototype,"selectFilter"),It.prototype),At=It))||At,br=Object(w.d)((zt=Ut=function(e){function t(e){var r;return babelHelpers.classCallCheck(this,t),(r=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this,e))).searchParams=new URLSearchParams(e.location.search),r}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"setNewParam",value:function(e,t){this.searchParams.set(e,t),this.searchParams.set("p",1),this.props.store.setState(this.searchParams)}},{key:"apply",value:function(){this.props.history.push({pathname:this.props.location.path,search:this.searchParams.toString()}),this.props.onClose()}},{key:"render",value:function(){var e=this.props.store;return c.a.createElement(Ne.a,{show:this.props.show,onHide:this.props.onClose},c.a.createElement(Ne.a.Header,{closeButton:!0},c.a.createElement(Ne.a.Title,null,gettext("Filters"))),c.a.createElement(Ne.a.Body,null,c.a.createElement("div",{className:"learning-filter__filters--modal"},c.a.createElement(dr,{store:e,setNewParam:this.setNewParam,block:!0}),c.a.createElement(mr,{store:e,setNewParam:this.setNewParam,block:!0}),c.a.createElement(hr,{store:e,setNewParam:this.setNewParam,block:!0}))),c.a.createElement(Ne.a.Footer,null,c.a.createElement(Le.default,{bsStyle:"link",disabled:e.isClean,onClick:this.props.reset},gettext("Reset")),c.a.createElement(Le.default,{bsStyle:"secondary",onClick:this.apply},gettext("Apply"))))}}]),t}(l.Component),Ut.propTypes={show:n.a.bool.isRequired,onClose:n.a.func.isRequired,store:n.a.object.isRequired,reset:n.a.func.isRequired,history:n.a.object.isRequired,location:n.a.object.isRequired},Ft=zt,babelHelpers.applyDecoratedDescriptor(Ft.prototype,"setNewParam",[v.a],Object.getOwnPropertyDescriptor(Ft.prototype,"setNewParam"),Ft.prototype),babelHelpers.applyDecoratedDescriptor(Ft.prototype,"apply",[v.a],Object.getOwnPropertyDescriptor(Ft.prototype,"apply"),Ft.prototype),Nt=Ft))||Nt,fr=r("./src/udemy/js/base-components/es-autocomplete/es-autocomplete.react-component.js"),yr=r("./src/udemy/js/base-components/udlite/search-form-autocomplete/es-autocomplete.mobx-model.js"),gr=Object(w.d)((qt=function(e){function t(){var e,r;babelHelpers.classCallCheck(this,t);for(var o=arguments.length,s=new Array(o),a=0;a<o;a++)s[a]=arguments[a];return(r=babelHelpers.possibleConstructorReturn(this,(e=babelHelpers.getPrototypeOf(t)).call.apply(e,[this].concat(s)))).myCoursesModel=new yr.b({url:"/courses/my-courses-search-suggestions/",showZeroResults:!0}),r}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"getMyCoursesResultsMenuItemProps",value:function(){return{showIcon:!1}}},{key:"trackSearch",value:function(){qe("search")}},{key:"render",value:function(){var e=gettext("Search my courses");return c.a.createElement(fr.a,{model:this.myCoursesModel,id:"search-courses-input",label:e,inputProps:{placeholder:e,required:!0},resultsMenuProps:{className:"my-courses-search-menu",pullRight:!0},formAction:"/home/my-courses/search/",formActionParams:{q:this.myCoursesModel.searchPhrase},onSubmit:this.trackSearch,getResultsMenuItemProps:this.getMyCoursesResultsMenuItemProps})}}]),t}(l.Component),babelHelpers.applyDecoratedDescriptor(qt.prototype,"getMyCoursesResultsMenuItemProps",[v.a],Object.getOwnPropertyDescriptor(qt.prototype,"getMyCoursesResultsMenuItemProps"),qt.prototype),babelHelpers.applyDecoratedDescriptor(qt.prototype,"trackSearch",[v.a],Object.getOwnPropertyDescriptor(qt.prototype,"trackSearch"),qt.prototype),Bt=qt))||Bt,vr=Object(w.d)((Yt=Wt=function(e){function t(){var e,r;babelHelpers.classCallCheck(this,t);for(var o=arguments.length,s=new Array(o),a=0;a<o;a++)s[a]=arguments[a];return r=babelHelpers.possibleConstructorReturn(this,(e=babelHelpers.getPrototypeOf(t)).call.apply(e,[this].concat(s))),babelHelpers.initializerDefineProperty(r,"showModal",Kt,babelHelpers.assertThisInitialized(r)),r}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"selectSortFilter",value:function(e){qe("sort-".concat(e)),this.setNewParam("sort",e)}},{key:"setNewParam",value:function(e,t){var r=new URLSearchParams(this.props.location.search);r.set(e,t),r.set("p",1),this.props.history.push({pathname:this.props.location.path,search:r.toString()})}},{key:"closeModal",value:function(){this.showModal=!1}},{key:"openModal",value:function(){this.showModal=!0}},{key:"reset",value:function(){qe("reset-filters"),this.props.history.push({pathname:this.props.location.path})}},{key:"render",value:function(){var e=this,t=this.props.store;return c.a.createElement("div",{className:"container learning-filter"},c.a.createElement(pr.a,{className:"fx-lb db-sm"},c.a.createElement("div",{className:"col-lg-3 col-sm-4 col-lg-push-9 col-sm-push-8"},c.a.createElement(gr,null),c.a.createElement("div",{className:"pb20 visible-xxs-block visible-xs-block"})),c.a.createElement("div",{className:"fx-lb fxwrap col-lg-9 col-sm-8 col-lg-pull-3 col-sm-pull-4"},c.a.createElement("div",{className:"mr20 learning-filter__sort"},c.a.createElement("small",{className:"db pb10 text-muted hidden-xxs hidden-xs"},gettext("Sort by")),c.a.createElement(cr.a,{bsStyle:"default",id:"sort-dropdown",title:t.sortTitle,className:"bold"},t.sortOptions.map((function(t){var r=t.value,o=t.title;return c.a.createElement(Te.a,{key:r,eventKey:r,onSelect:e.selectSortFilter,"data-purpose":"sort-item-".concat(r)},o)})))),c.a.createElement("div",{className:"learning-filter__refine-button hidden-lg hidden-xl"},c.a.createElement(Le.default,{onClick:this.openModal,"data-purpose":"show-refine-modal"},gettext("Refine")),c.a.createElement(br,{show:this.showModal,onClose:this.closeModal,store:t,reset:this.reset,history:this.props.history,location:this.props.location})),c.a.createElement("div",{className:"visible-lg-block visible-xl-block"},c.a.createElement("small",{className:"db pb10 text-muted"},gettext("Filter by")),c.a.createElement(dr,{store:t,setNewParam:this.setNewParam}),c.a.createElement(mr,{store:t,setNewParam:this.setNewParam}),c.a.createElement(hr,{store:t,setNewParam:this.setNewParam}),c.a.createElement(Le.default,{bsStyle:"link",disabled:t.isClean,onClick:this.reset},gettext("Reset"))))))}}]),t}(l.Component),Wt.propTypes={store:n.a.object.isRequired,history:n.a.object.isRequired,location:n.a.object.isRequired},Vt=Yt,babelHelpers.applyDecoratedDescriptor(Vt.prototype,"selectSortFilter",[v.a],Object.getOwnPropertyDescriptor(Vt.prototype,"selectSortFilter"),Vt.prototype),babelHelpers.applyDecoratedDescriptor(Vt.prototype,"setNewParam",[v.a],Object.getOwnPropertyDescriptor(Vt.prototype,"setNewParam"),Vt.prototype),Kt=babelHelpers.applyDecoratedDescriptor(Vt.prototype,"showModal",[C.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),babelHelpers.applyDecoratedDescriptor(Vt.prototype,"closeModal",[v.a,C.action],Object.getOwnPropertyDescriptor(Vt.prototype,"closeModal"),Vt.prototype),babelHelpers.applyDecoratedDescriptor(Vt.prototype,"openModal",[v.a,C.action],Object.getOwnPropertyDescriptor(Vt.prototype,"openModal"),Vt.prototype),babelHelpers.applyDecoratedDescriptor(Vt.prototype,"reset",[v.a],Object.getOwnPropertyDescriptor(Vt.prototype,"reset"),Vt.prototype),Gt=Vt))||Gt,wr=Object(w.d)((Zt=Jt=function(e){function t(e){var r;return babelHelpers.classCallCheck(this,t),(r=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this,e))).store=new et("learning_tab",e.location,e.history),r}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"componentDidMount",value:function(){var e=new URLSearchParams(this.props.location.search);this.store.updateMyCourses(e)}},{key:"componentDidUpdate",value:function(e){if(e.location!==this.props.location){var t=new URLSearchParams(this.props.location.search);this.store.updateMyCourses(t)}}},{key:"render",value:function(){return c.a.createElement("ul",{className:"my-courses__container"},c.a.createElement("li",{className:"container__main-section"},c.a.createElement(lr.a,null),this.store.isLoading?c.a.createElement(j.a,{block:!0,size:"medium"}):c.a.createElement(c.a.Fragment,null,this.store.showZeroState||!this.hasEnoughEnrolledCourses?null:c.a.createElement(vr,{store:this.store,history:this.props.history,location:this.props.location}),c.a.createElement(Ye,{store:this.store,history:this.props.history,location:this.props.location}))))}},{key:"hasEnoughEnrolledCourses",get:function(){return this.props.enrolledCourseCount>6}}]),t}(l.Component),Jt.propTypes={history:n.a.object.isRequired,location:n.a.object.isRequired,enrolledCourseCount:n.a.number.isRequired},Qt=Zt,babelHelpers.applyDecoratedDescriptor(Qt.prototype,"hasEnoughEnrolledCourses",[C.computed],Object.getOwnPropertyDescriptor(Qt.prototype,"hasEnoughEnrolledCourses"),Qt.prototype),Xt=Qt))||Xt,kr=r("./node_modules/qs/lib/index.js"),_r=r.n(kr),Er=r("./src/udemy/js/base-components/col.react-component.js"),jr=r("./src/udemy/js/base-components/grid.react-component.js"),Dr=r("./src/udemy/js/browse/components/my-learning-unit/subscribed-learning-path-card.react-component.js"),Sr=r("./src/udemy/js/utils/query-params.js"),Cr=($t=function(){function e(t){babelHelpers.classCallCheck(this,e),babelHelpers.initializerDefineProperty(this,"isLoading",er,this),babelHelpers.initializerDefineProperty(this,"learningPaths",tr,this),babelHelpers.initializerDefineProperty(this,"totalCount",rr,this),babelHelpers.initializerDefineProperty(this,"currentPage",or,this),this.pageSize=12,this.requestParams={},this.activeTab=t}return babelHelpers.createClass(e,[{key:"changePage",value:function(e){this.currentPage=e,this.loadLearningPaths()}},{key:"loadLearningPaths",value:function(){var e=this;this.isLoading=!0,O.d.get("/users/me/enrolled-paths/",{params:{"fields[learning_path]":"@all",page:this.currentPage,page_size:this.pageSize}}).then(Object(C.action)((function(t){e.learningPaths=t.data.results||[],e.totalCount=t.data.count}))).finally(Object(C.action)((function(){e.isLoading=!1})))}},{key:"pageCount",get:function(){return this.totalCount>0?Math.ceil(this.totalCount/this.pageSize):0}}]),e}(),er=babelHelpers.applyDecoratedDescriptor($t.prototype,"isLoading",[C.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),tr=babelHelpers.applyDecoratedDescriptor($t.prototype,"learningPaths",[C.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),rr=babelHelpers.applyDecoratedDescriptor($t.prototype,"totalCount",[C.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),or=babelHelpers.applyDecoratedDescriptor($t.prototype,"currentPage",[C.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),babelHelpers.applyDecoratedDescriptor($t.prototype,"pageCount",[C.computed],Object.getOwnPropertyDescriptor($t.prototype,"pageCount"),$t.prototype),babelHelpers.applyDecoratedDescriptor($t.prototype,"changePage",[v.a,C.action],Object.getOwnPropertyDescriptor($t.prototype,"changePage"),$t.prototype),babelHelpers.applyDecoratedDescriptor($t.prototype,"loadLearningPaths",[C.action],Object.getOwnPropertyDescriptor($t.prototype,"loadLearningPaths"),$t.prototype),$t),Or=(r("./src/udemy/js/my-courses-v3/my-learning-paths.less"),function(){return c.a.createElement(pr.a,{className:"my-learning-paths--empty-state-container--ccSF1"},c.a.createElement(Er.a,{className:"fx-c"},c.a.createElement(E.a,{alt:gettext("Learning paths you are enrolled in will appear here"),src:"/staticx/udemy/images/organization/empty-state/person-empty.svg",className:"mr-space-lg",width:254,height:145}),c.a.createElement("div",null,c.a.createElement("h3",{className:"font-heading-md"},gettext("Learning paths you are enrolled in will appear here")),c.a.createElement("p",null,gettext("Discover new learning paths or create your own")),c.a.createElement(Le.default,{bsStyle:"secondary",href:"/learning-paths",className:"mt-space-sm"},gettext("Explore learning paths")))))}),Pr=function(e){var t=e.store,r=e.onChangePage;return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"card-wrapper"},t.learningPaths.map((function(e,t){return c.a.createElement(Er.a,{md:6,key:t,className:"mt-space-md mb-space-md"},c.a.createElement(Dr.a,{learningPath:e,pageType:"my-learning-paths"}))}))),c.a.createElement(we.a,{bsStyle:"expanded",activePage:t.currentPage,onSelect:r,total:t.totalCount,items:t.pageCount,pageSize:t.pageSize,itemLabel:"LEARNINGPATHS"}))};Pr.propTypes={store:n.a.object.isRequired,onChangePage:n.a.func.isRequired};var Tr,xr,Rr,Hr,Ar,Ir,Lr,Mr,Nr,Fr,Ur=Object(w.d)((nr=ir=function(e){function t(e){var r;return babelHelpers.classCallCheck(this,t),(r=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this,e))).store=new Cr("learning_paths_tab"),r}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"componentDidMount",value:function(){var e=Object(Sr.f)(this.props.location);this.store.currentPage=parseInt(e.p,10)||1,this.store.loadLearningPaths()}},{key:"handleSelect",value:function(e){this.store.currentPage=e,this.props.withoutRouter?this.props.history.pushState({pathname:this.props.location.pathname,search:_r.a.stringify({p:e})},null,"learning-paths/?".concat(_r.a.stringify({p:e}))):this.props.history.push({pathname:this.props.location.path,search:_r.a.stringify({p:e})}),this.store.loadLearningPaths()}},{key:"renderEmptyState",value:function(){return c.a.createElement(Or,null)}},{key:"renderLoadingState",value:function(){return c.a.createElement("div",{className:"fx-c mt-space-md"},c.a.createElement(j.a,{size:"medium",block:!0}))}},{key:"render",value:function(){return 0!==this.store.learningPaths.length||this.store.isLoading?c.a.createElement(jr.default,{className:"mb-space-lg mt-space-sm"},this.store.isLoading?this.renderLoadingState():c.a.createElement(Pr,{store:this.store,onChangePage:this.handleSelect})):this.renderEmptyState()}}]),t}(l.Component),ir.propTypes={history:n.a.object,location:n.a.object,withoutRouter:n.a.bool},ir.defaultProps={history:window.history,location:window.location,withoutRouter:!1},ar=nr,babelHelpers.applyDecoratedDescriptor(ar.prototype,"handleSelect",[v.a,C.action],Object.getOwnPropertyDescriptor(ar.prototype,"handleSelect"),ar.prototype),sr=ar))||sr,zr=r("./src/udemy/js/base-components/merchandising-course-card/index.js"),Br=r("./src/udemy/js/utils/escape/escape-html.js"),qr=(Tr=function(){function e(){babelHelpers.classCallCheck(this,e),this.pageSize=12,this.searchQuery="",Object(C.extendObservable)(this,{isLoading:!0,courses:[],currentPage:1,count:0})}return babelHelpers.createClass(e,[{key:"loadCourses",value:function(){var e=this;this.isLoading=!0;var t=["@default","rating","buyable_object_type","content_info","is_wishlisted","num_published_lectures","num_reviews","num_subscribers","discount","is_recently_published"].join(","),r=babelHelpers.objectSpread({ordering:this.ordering,"fields[course]":t,"fields[user]":"@default",page:this.currentPage,page_size:this.pageSize},this.searchQuery&&{search:this.searchQuery});O.d.get("/users/me/wishlisted-courses/",{params:r}).then(Object(C.action)((function(t){var r=t.data.results||[];e.courses=r.map((function(e){return new zr.d(e,{context:""})})),e.count=t.data.count,e.isLoading=!1}))).catch(Object(C.action)((function(t){e.isLoading=!1,P.a.captureException(t)})))}},{key:"pageCount",get:function(){return this.count?Math.ceil(this.count/this.pageSize):0}},{key:"showZeroState",get:function(){return 0===this.courses.length}}]),e}(),babelHelpers.applyDecoratedDescriptor(Tr.prototype,"pageCount",[C.computed],Object.getOwnPropertyDescriptor(Tr.prototype,"pageCount"),Tr.prototype),babelHelpers.applyDecoratedDescriptor(Tr.prototype,"showZeroState",[C.computed],Object.getOwnPropertyDescriptor(Tr.prototype,"showZeroState"),Tr.prototype),babelHelpers.applyDecoratedDescriptor(Tr.prototype,"loadCourses",[C.action],Object.getOwnPropertyDescriptor(Tr.prototype,"loadCourses"),Tr.prototype),Tr),Gr=Object(ge.a)(),Vr=Object(w.d)((Ir=Ar=function(e){function t(e){var r;return babelHelpers.classCallCheck(this,t),r=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this,e)),babelHelpers.initializerDefineProperty(r,"searchQuery",Hr,babelHelpers.assertThisInitialized(r)),r.learningStore=new et("learning_tab",e.location,e.history),r.wishlistStore=new qr,r}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"componentDidMount",value:function(){var e=new URLSearchParams(this.props.location.search);e.has("q")&&(this.searchQuery=e.get("q"),this.learningStore.searchQuery=this.searchQuery,this.wishlistStore.searchQuery=this.searchQuery),this.learningStore.loadCollections(),this.learningStore.loadCourses(),Gr.features.wishlist&&this.wishlistStore.loadCourses()}},{key:"selectLearningPage",value:function(e){this.learningStore.currentPage=e,this.learningStore.loadCourses()}},{key:"selectWishlistPage",value:function(e){this.wishlistStore.currentPage=e,this.wishlistStore.loadCourses()}},{key:"renderWishlist",value:function(){return c.a.createElement(c.a.Fragment,null,c.a.createElement("h2",{className:"mt10"},gettext("Wishlist")),c.a.createElement("div",null,c.a.createElement("div",{className:"course-cards-container"},c.a.createElement("div",{className:"card-wrapper"},this.wishlistStore.courses.map((function(e){return c.a.createElement(zr.c,{key:e.id,course:e})}))),this.wishlistStore.isLoading?c.a.createElement("div",{className:"pagination-loader-container container-flex"},c.a.createElement("div",{className:"row center-xs bottom-xs h100p pb10"},c.a.createElement(j.a,{block:!0,size:"medium"}))):null),c.a.createElement("div",{className:"row mt-space-xs"},c.a.createElement(we.a,{bsStyle:"expanded",items:this.wishlistStore.pageCount,activePage:this.wishlistStore.currentPage,onSelect:this.selectWishlistPage,itemLabel:"COURSES",pageSize:this.wishlistStore.pageSize,total:this.wishlistStore.count}))))}},{key:"renderLearning",value:function(){var e=this;return c.a.createElement(c.a.Fragment,null,c.a.createElement("h2",{className:"mt10"},gettext("Learning")),c.a.createElement("div",null,c.a.createElement("div",{className:"course-cards-container"},c.a.createElement("div",{className:"card-wrapper"},this.learningStore.courses.map((function(t){return c.a.createElement(We,{key:t.id,course:t,store:e.learningStore})}))),this.learningStore.isLoading?c.a.createElement("div",{className:"pagination-loader-container container-flex"},c.a.createElement("div",{className:"row center-xs bottom-xs h100p pb10"},c.a.createElement(j.a,{block:!0,size:"medium"}))):null),c.a.createElement("div",{className:"row mt-space-xs"},c.a.createElement(we.a,{bsStyle:"expanded",items:this.learningStore.pageCount,activePage:this.learningStore.currentPage,onSelect:this.selectLearningPage,itemLabel:"COURSES",pageSize:this.learningStore.pageSize,total:this.learningStore.count}))))}},{key:"render",value:function(){return c.a.createElement("div",{className:"container"},c.a.createElement("ul",{className:"mt30 clearfix"},c.a.createElement("li",null,c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-lg-9 col-sm-8"},!this.searchQuery||this.learningStore.isLoading||this.wishlistStore.isLoading?null:c.a.createElement("div",Object.assign({className:"a2 mb10"},Object(ke.a)({descriptionOfCaller:"search-my-courses:num-search-results-for-query",html:ninterpolate("%(count)s search result for: <strong>%(query)s</strong>","%(count)s search results for: <strong>%(query)s</strong>",this.totalCount,{count:this.totalCount,query:Object(Br.a)(this.searchQuery)})})))),c.a.createElement("div",{className:"col-lg-3 col-sm-4"},c.a.createElement(gr,null))))),this.learningStore.courses.length>0||this.learningStore.isLoading?this.renderLearning():null,Gr.features.wishlist&&(this.wishlistStore.courses.length>0||this.wishlistStore.isLoading)?this.renderWishlist():null)}},{key:"totalCount",get:function(){return this.learningStore.count+this.wishlistStore.count}}]),t}(l.Component),Ar.propTypes={history:n.a.object.isRequired,location:n.a.object.isRequired},Rr=Ir,babelHelpers.applyDecoratedDescriptor(Rr.prototype,"componentDidMount",[C.action],Object.getOwnPropertyDescriptor(Rr.prototype,"componentDidMount"),Rr.prototype),Hr=babelHelpers.applyDecoratedDescriptor(Rr.prototype,"searchQuery",[C.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),babelHelpers.applyDecoratedDescriptor(Rr.prototype,"totalCount",[C.computed],Object.getOwnPropertyDescriptor(Rr.prototype,"totalCount"),Rr.prototype),babelHelpers.applyDecoratedDescriptor(Rr.prototype,"selectLearningPage",[v.a,C.action],Object.getOwnPropertyDescriptor(Rr.prototype,"selectLearningPage"),Rr.prototype),babelHelpers.applyDecoratedDescriptor(Rr.prototype,"selectWishlistPage",[v.a,C.action],Object.getOwnPropertyDescriptor(Rr.prototype,"selectWishlistPage"),Rr.prototype),xr=Rr))||xr,Kr=Object(w.d)((Fr=Nr=function(e){function t(e){var r;return babelHelpers.classCallCheck(this,t),(r=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this,e))).store=new qr,r}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"componentDidMount",value:function(){qe("wishlist-tab");var e=new URLSearchParams(this.props.location.search);this.store.currentPage=parseInt(e.get("p"),10)||1,this.store.loadCourses()}},{key:"componentDidUpdate",value:function(e){if(e.location!==this.props.location){var t=new URLSearchParams(this.props.location.search);this.store.currentPage=parseInt(t.get("p"),10)||1,this.store.loadCourses()}}},{key:"handleSelect",value:function(e){var t=new URLSearchParams(this.props.location.search);t.set("p",e),this.props.history.push({pathname:this.props.location.path,search:t.toString()})}},{key:"render",value:function(){return c.a.createElement(c.a.Fragment,null,this.store.showZeroState?null:c.a.createElement("div",{className:"mt30 mb20 container"},c.a.createElement("ul",null,c.a.createElement("li",null,c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-lg-3 col-sm-4 col-lg-push-9 col-sm-push-8"},c.a.createElement(gr,null)))))),c.a.createElement("ul",{className:"my-courses__container"},this.store.isLoading?c.a.createElement(j.a,{block:!0,size:"medium"}):this.store.showZeroState?c.a.createElement("li",{className:"p20 text-center a3 bold empty-wishlist","data-purpose":"no-wishlist-courses"},c.a.createElement(Le.default,{bsStyle:"primary",href:"/discover"},gettext("Browse courses now"))):c.a.createElement("li",null,c.a.createElement("div",{className:"container"},c.a.createElement("div",{className:"card-wrapper card-wrapper--merchandising"},this.store.courses.map((function(e,t){return c.a.createElement(zr.c,{key:t,course:e})})))),c.a.createElement("div",{className:"row mt-space-xs ml0 mr0"},c.a.createElement(we.a,{bsStyle:"expanded",activePage:this.store.currentPage,onSelect:this.handleSelect,total:this.store.count,items:this.store.pageCount,pageSize:this.store.pageSize,itemLabel:"COURSES"})))))}}]),t}(l.Component),Nr.propTypes={history:n.a.object.isRequired,location:n.a.object.isRequired},Mr=Fr,babelHelpers.applyDecoratedDescriptor(Mr.prototype,"componentDidMount",[C.action],Object.getOwnPropertyDescriptor(Mr.prototype,"componentDidMount"),Mr.prototype),babelHelpers.applyDecoratedDescriptor(Mr.prototype,"componentDidUpdate",[C.action],Object.getOwnPropertyDescriptor(Mr.prototype,"componentDidUpdate"),Mr.prototype),babelHelpers.applyDecoratedDescriptor(Mr.prototype,"handleSelect",[v.a,C.action],Object.getOwnPropertyDescriptor(Mr.prototype,"handleSelect"),Mr.prototype),Lr=Mr))||Lr;r("./src/udemy/js/my-courses-v3/app.less");r.d(t,"App",(function(){return Yr})),r.d(t,"WrappedApp",(function(){return Xr})),r.d(t,"default",(function(){return Qr}));var Wr=Object(ge.a)(),Yr=function(e){function t(){var e,r;babelHelpers.classCallCheck(this,t);for(var o=arguments.length,s=new Array(o),a=0;a<o;a++)s[a]=arguments[a];return(r=babelHelpers.possibleConstructorReturn(this,(e=babelHelpers.getPrototypeOf(t)).call.apply(e,[this].concat(s)))).isLearningPathsEnabled=Wr.features.organization.learning_path.enabled,r.collectionsEnabled=!Wr.brand.has_organization,r.isWishlistEnabled=Wr.features.wishlist,r}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"componentDidMount",value:function(){var e,t=new URLSearchParams(window.location.search);e=t.get("ref"),ze.c.trackPageEvent("pageview","my-courses",{user:Be.a.id,action:"".concat(e||"direct"," visit")})}},{key:"renderNav",value:function(){return c.a.createElement(b.default,{bsStyle:"tabs",slide:!0,role:"navigation"},this.props.subscriptions_active&&c.a.createElement(p.LinkContainer,{to:"/programs/"},c.a.createElement(m.default,{eventKey:1},gettext("Programs"))),c.a.createElement(p.LinkContainer,{to:"/learning/"},c.a.createElement(m.default,{eventKey:0,"data-purpose":"learning-tab"},gettext("All courses"))),this.collectionsEnabled&&c.a.createElement(p.LinkContainer,{to:"/collections/"},c.a.createElement(m.default,{eventKey:1},gettext("Collections"))),this.isWishlistEnabled&&c.a.createElement(p.LinkContainer,{to:"/wishlist/"},c.a.createElement(m.default,{eventKey:2},gettext("Wishlist"))),c.a.createElement(p.LinkContainer,{to:"/archived/"},c.a.createElement(m.default,{eventKey:3},gettext("Archived"))),this.isLearningPathsEnabled&&c.a.createElement(f.a,null,c.a.createElement(p.LinkContainer,{to:"/learning-paths/"},c.a.createElement(m.default,{eventKey:4},gettext("Learning paths")))))}},{key:"render",value:function(){var e=this;return c.a.createElement("div",{className:"app--my-courses-v3--DkSN3"},c.a.createElement(h.a,{bsStyle:"header-bar",className:"bg-midnight-light-force",headerBarTabs:this.renderNav()},this.isLearningPathsEnabled||this.props.subscriptions_enabled?c.a.createElement("h1",null,gettext("My learning")):c.a.createElement("h1",null,gettext("My courses"))),c.a.createElement(u.a,null,this.props.subscriptions_active&&c.a.createElement(g.a,{pageKey:"my_learning_programs",exact:!0,path:"/programs/",render:function(t){return c.a.createElement(ye,Object.assign({},t,{subscriptionOffer:e.props.subscriptionOffer}))}}),c.a.createElement(g.a,{pageKey:"my_learning_all_courses",exact:!0,path:"/learning/",render:function(t){return c.a.createElement(wr,Object.assign({},t,{enrolledCourseCount:e.props.enrolled_course_count}))}}),this.collectionsEnabled&&c.a.createElement(g.a,{pageKey:"my_learning_collections",exact:!0,path:"/collections/",render:function(t){return c.a.createElement(jt,Object.assign({},t,{collectionsPromoVideoId:e.props.collections_promo_video_id}))}}),this.isWishlistEnabled&&c.a.createElement(g.a,{pageKey:"my_learning_wishlist",exact:!0,path:"/wishlist/",component:Kr}),c.a.createElement(g.a,{pageKey:"my_learning_archived",exact:!0,path:"/archived/",component:ut}),this.isLearningPathsEnabled&&c.a.createElement(g.a,{pageKey:"my_learning_learning_paths",exact:!0,path:"/learning-paths/",component:Ur}),c.a.createElement(g.a,{pageKey:"my_learning_search",exact:!0,path:"/search/",component:Vr}),c.a.createElement(d.a,{to:"/learning/"})))}}]),t}(l.Component);Yr.propTypes={collections_promo_video_id:n.a.number.isRequired,enrolled_course_count:n.a.number.isRequired,subscriptions_enabled:n.a.bool,subscriptions_active:n.a.bool,subscriptionOffer:n.a.object},Yr.defaultProps={subscriptions_enabled:!1,subscriptions_active:!1,subscriptionOffer:{}};var Xr=function(e){return c.a.createElement(y.a,null,c.a.createElement(Yr,e))};function Qr(e,t){Object(ve.a)(e,".ud-component--my-courses-v3--app",Xr,t)}},"./src/udemy/js/my-courses-v3/app.less":function(e,t,r){e.exports={"my-courses-v3":"app--my-courses-v3--DkSN3"}},"./src/udemy/js/my-courses-v3/filter-dropdowns/filter-dropdown.less":function(e,t,r){e.exports={"ellipsis-inline":"filter-dropdown--ellipsis-inline--1fsfJ","category-text":"filter-dropdown--category-text--R5y--","instructor-text":"filter-dropdown--instructor-text--Z6nQN","instructor-dropdown":"filter-dropdown--instructor-dropdown--Phi5w"}},"./src/udemy/js/my-courses-v3/my-learning-paths.less":function(e,t,r){e.exports={"empty-state-container":"my-learning-paths--empty-state-container--ccSF1"}},"./src/udemy/js/organization-common/notifier.mobx-store.js":function(e,t,r){"use strict";r.d(t,"a",(function(){return d}));var o,s,a,i,n,l,c=r("./node_modules/autobind-decorator/lib/esm/index.js"),p=r("./node_modules/mobx/lib/mobx.module.js"),u=r("./src/udemy/js/organization-common/notification-message/constants.js"),d=(o=function(){function e(){babelHelpers.classCallCheck(this,e),babelHelpers.initializerDefineProperty(this,"displayed",s,this),babelHelpers.initializerDefineProperty(this,"message",a,this),babelHelpers.initializerDefineProperty(this,"type",i,this),babelHelpers.initializerDefineProperty(this,"link",n,this),babelHelpers.initializerDefineProperty(this,"title",l,this)}return babelHelpers.createClass(e,[{key:"_showNotification",value:function(e,t,r,o){t=t||u.c,this.displayed=!0,this.message=e,this.type=t,this.link=r,this.title=o}},{key:"hideNotification",value:function(){this.displayed=!1}},{key:"success",value:function(e,t,r){this._showNotification(e,u.c,t,r)}},{key:"error",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.errorMessage,t=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0;this._showNotification(e,u.a,t,r)}},{key:"warning",value:function(e,t,r){this._showNotification(e,u.e,t,r)}},{key:"info",value:function(e,t,r){this._showNotification(e,u.b,t,r)}},{key:"errorMessage",get:function(){return gettext("Something went wrong, please try again")}}]),e}(),s=babelHelpers.applyDecoratedDescriptor(o.prototype,"displayed",[p.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),a=babelHelpers.applyDecoratedDescriptor(o.prototype,"message",[p.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),i=babelHelpers.applyDecoratedDescriptor(o.prototype,"type",[p.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return u.c}}),n=babelHelpers.applyDecoratedDescriptor(o.prototype,"link",[p.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),l=babelHelpers.applyDecoratedDescriptor(o.prototype,"title",[p.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),babelHelpers.applyDecoratedDescriptor(o.prototype,"_showNotification",[c.a,p.action],Object.getOwnPropertyDescriptor(o.prototype,"_showNotification"),o.prototype),babelHelpers.applyDecoratedDescriptor(o.prototype,"hideNotification",[c.a,p.action],Object.getOwnPropertyDescriptor(o.prototype,"hideNotification"),o.prototype),babelHelpers.applyDecoratedDescriptor(o.prototype,"success",[c.a],Object.getOwnPropertyDescriptor(o.prototype,"success"),o.prototype),babelHelpers.applyDecoratedDescriptor(o.prototype,"error",[c.a],Object.getOwnPropertyDescriptor(o.prototype,"error"),o.prototype),babelHelpers.applyDecoratedDescriptor(o.prototype,"warning",[c.a],Object.getOwnPropertyDescriptor(o.prototype,"warning"),o.prototype),babelHelpers.applyDecoratedDescriptor(o.prototype,"info",[c.a],Object.getOwnPropertyDescriptor(o.prototype,"info"),o.prototype),o)},"./src/udemy/js/organization-common/resource-context-menu/wrappers/menu-item-sets.js":function(e,t,r){"use strict";r.d(t,"b",(function(){return d})),r.d(t,"a",(function(){return h}));var o=r("./node_modules/react/index.js"),s=r.n(o),a=r("./src/udemy/js/organization-common/resource-context-menu/helpers.js"),i=r("./src/udemy/js/organization-common/resource-context-menu/menu-items/add-course-to-custom-categories-menu-item.react-component.js"),n=r("./src/udemy/js/organization-common/resource-context-menu/menu-items/add-course-to-learning-paths-menu-item.react-component.js"),l=r("./src/udemy/js/organization-common/resource-context-menu/menu-items/assign-course-menu-item.react-component.js"),c=r("./src/udemy/js/organization-common/resource-context-menu/menu-items/share-to-slack-menu-item.react-component.js"),p=r("./src/udemy/js/organization-common/resource-context-menu/menu-items/share-to-workplace-menu-item.react-component.js"),u=r("./src/udemy/js/organization-common/resource-context-menu/menu-items/view-course-activity-menu-item.react-component.js");function d(e){return Object(a.b)()?[s.a.createElement(l.a,{key:"ASSIGN_COURSE",course:e}),s.a.createElement(c.a,{key:"SHARE_TO_SLACK",course:e}),s.a.createElement(p.a,{key:"SHARE_TO_WORKPLACE",course:e})]:[]}function h(e){return Object(a.b)()?[s.a.createElement(i.a,{key:"ADD_COURSE_TO_CUSTOM_CATEGORY",course:e}),s.a.createElement(n.a,{key:"ADD_COURSE_TO_LEARNING_PATHS",course:e}),s.a.createElement(u.a,{key:"VIEW_COURSE_ACTIVITY"})]:[]}},"./src/udemy/js/organization-common/resource-context-menu/wrappers/ufb-submenu-context-menu.react-component.js":function(e,t,r){"use strict";var o=r("./node_modules/prop-types/index.js"),s=r.n(o),a=r("./node_modules/react/index.js"),i=r.n(a),n=r("./src/udemy/js/organization-common/resource-context-menu/resource-context-menu.react-component.js"),l=r("./src/udemy/js/organization-common/resource-context-menu/wrappers/menu-item-sets.js"),c=function(e){var t=e.course,r=e.openLeft,o=babelHelpers.objectWithoutProperties(e,["course","openLeft"]);return i.a.createElement(n.a,Object.assign({resource:t},o),i.a.createElement(n.a.Menu,{pullRight:r},Object(l.b)(t),Object(l.a)(t)))};c.propTypes={course:s.a.object.isRequired,openLeft:s.a.bool},c.defaultProps={openLeft:!0},t.a=c},"./src/udemy/js/report-abuse/constants.js":function(e,t,r){"use strict";r.d(t,"a",(function(){return a})),r.d(t,"b",(function(){return i})),r.d(t,"f",(function(){return n})),r.d(t,"g",(function(){return l})),r.d(t,"h",(function(){return c})),r.d(t,"j",(function(){return p})),r.d(t,"i",(function(){return u})),r.d(t,"c",(function(){return d})),r.d(t,"k",(function(){return h})),r.d(t,"d",(function(){return m})),r.d(t,"e",(function(){return b}));var o,s=r("./src/udemy/js/utils/ud-link.js"),a=Object.freeze({POLICY:"Policy",TECHNICAL:"Technical"}),i=Object.freeze((o={},babelHelpers.defineProperty(o,a.POLICY,"Policy Issue"),babelHelpers.defineProperty(o,a.TECHNICAL,"Technical Issue"),o)),n={copyright:"Copyright or Trademark Violation",inappropriateCourse:"Inappropriate Course Content",inappropriateBehavior:"Inappropriate Behavior",policy:"Udemy Policy Violation",spam:"Spammy Content",technicalIssue:"Technical Issue",other:"Other"},l={personal:"personal",company:"company",thirdParty:"third-party"},c={fail:-1,initial:0,inProcess:1,success:2},p={get support(){return s.a.toSupportHome()},get terms(){return s.a.to("terms")},get termsCopyright(){return"".concat(s.a.to("terms","copyright"),"#copyright")},get termsTrademark(){return"".concat(s.a.to("terms","copyright"),"#trademark")}},u={audio:"Audio",video:"Video",captions:"Captions",download:"Download"},d={none:"I cannot hear audio at all",low:"I can hear audio, but the volume is very low",nonsense:"I can hear audio clearly, but I cannot understand the instructor",background:"Background music/sound is distracting"},h={none:"Video does not play at all",stops:"Video plays but stops suddenly and will not continue",quality:"Video quality is poor",stutter:"Video stutters (plays and stops)",restart:"Video restarts after a few minutes"},m={enable:"Captions are available but I cannot enable them",wrong:"Captions are available but they're not accurate",blocking:"Captions are in the way of whats shown on the video"},b={enable:"Lecture is available for download but I cannot download",resource:"I cannot download/access the files listed in the resources section",certificate:"I cannot download/access the certificate of completion"}},"./src/udemy/js/report-abuse/report-abuse-launcher.less":function(e,t,r){e.exports={"menu-link":"report-abuse-launcher--menu-link--2iEhR"}},"./src/udemy/js/report-abuse/report-abuse-launcher.react-component.js":function(e,t,r){"use strict";r.d(t,"a",(function(){return _}));var o=r("./node_modules/lodash-es/omit.js"),s=r("./node_modules/prop-types/index.js"),a=r.n(s),i=r("./node_modules/react/index.js"),n=r.n(i),l=r("./src/udemy/js/base-components/ajax-modal/open-ajax-modal.react-component.js"),c=r("./src/udemy/js/base-components/button.react-component.js"),p=r("./src/udemy/js/base-components/icon.react-component.js"),u=r("./src/udemy/js/base-components/overlay-trigger.react-component.js"),d=r("./src/udemy/js/base-components/safe-anchor.react-component.js"),h=r("./src/udemy/js/base-components/tooltip.react-component.js"),m=r("./src/udemy/js/utils/ud-link.js"),b=r("./src/udemy/js/utils/ud-me.js"),f=r("./src/udemy/js/report-abuse/constants.js"),y=r("./src/udemy/js/report-abuse/report-abuse-launcher.less"),g=r.n(y),v=gettext("Report abuse"),w=function(e){var t,r=e.showLabel,o=e.text,s=e.useAnchor,a=e.useSpan,i=e.showIcon,l=e.useMenuStyling,u=babelHelpers.objectWithoutProperties(e,["showLabel","text","useAnchor","useSpan","showIcon","useMenuStyling"]);return a?t="span":s?t=d.default:(t=c.default,u=Object.assign({bsStyle:"default"},u)),s&&l&&(u=Object.assign({className:g.a["menu-link"]},u)),n.a.createElement(t,Object.assign({},u,{"aria-label":v}),i&&n.a.createElement(p.a,{glyph:"flag"}),r?" ".concat(o):"")};w.propTypes={showIcon:a.a.bool,showLabel:a.a.bool,text:a.a.string,useAnchor:a.a.bool,useSpan:a.a.bool,useMenuStyling:a.a.bool},w.defaultProps={showIcon:!0,showLabel:!1,text:v,useAnchor:!1,useSpan:!1,useMenuStyling:!1};var k=function(e){var t=e.text,r=babelHelpers.objectWithoutProperties(e,["text"]);return n.a.createElement(h.a,Object.assign({},r,{id:"open-modal-tooltip",placement:"left"}),t)};k.propTypes={text:a.a.string},k.defaultProps={text:v};var _=function(e){function t(){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).apply(this,arguments))}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"render",value:function(){var e=n.a.createElement(w,this.triggerProps);return n.a.createElement(l.a,this.modalProps,this.props.showTooltip?function(e,t){return n.a.createElement(u.a,{placement:"left",trigger:["hover","click"],overlay:n.a.createElement(k,{text:t})},e)}(e,this.props.text):e)}},{key:"popupUrl",get:function(){var e=encodeURIComponent(this.props.objectType),t=encodeURIComponent(String(this.props.objectId)),r="/feedback/report/?related_object_type=".concat(e,"&related_object_id=").concat(t);return this.props.category&&(r=r.concat("&category=".concat(encodeURIComponent(this.props.category)))),b.a.id?r:m.a.toAuth({showLogin:!0,nextUrl:r})}},{key:"modalProps",get:function(){return{url:this.popupUrl,show:this.props.show,onHide:this.props.onHide,onModalClick:this.props.onModalClick,enableLoader:!b.a.id||void 0}}},{key:"triggerProps",get:function(){var e=Object(o.a)(this.props,Object.keys(t.propTypes));return Object.assign({},{text:this.props.text},e)}}]),t}(i.Component);_.propTypes={objectId:a.a.number.isRequired,objectType:a.a.string.isRequired,onModalClick:a.a.func,showTooltip:a.a.bool,text:a.a.string,category:a.a.oneOf(Object.values(f.a)),show:l.a.propTypes.show,onHide:l.a.propTypes.onHide},_.defaultProps={onModalClick:void 0,showTooltip:!0,text:v,category:void 0,show:l.a.defaultProps.show,onHide:l.a.defaultProps.onHide}},"./src/udemy/js/share/marketplace-social-share-button.less":function(e,t,r){e.exports={"share-button":"marketplace-social-share-button--share-button--79rGp","share-button__referral-terms":"marketplace-social-share-button--share-button__referral-terms--yFy2w","share-button__text":"marketplace-social-share-button--share-button__text--1jqY7","share-button__top-border":"marketplace-social-share-button--share-button__top-border--bacJS"}},"./src/udemy/js/share/marketplace-social-share-button.react-component.js":function(e,t,r){"use strict";r.d(t,"a",(function(){return w}));var o,s,a,i,n=r("./node_modules/autobind-decorator/lib/esm/index.js"),l=r("./node_modules/mobx/lib/mobx.module.js"),c=r("./node_modules/mobx-react/index.module.js"),p=r("./node_modules/prop-types/index.js"),u=r.n(p),d=r("./node_modules/react/index.js"),h=r.n(d),m=r("./src/udemy/js/base-components/button.react-component.js"),b=r("./src/udemy/js/base-components/icon.react-component.js"),f=r("./src/udemy/js/utils/ud-utils.js"),y=r("./src/udemy/js/share/config.js"),g=r("./src/udemy/js/share/marketplace-social-share-modal.react-component.js"),v=r("./src/udemy/js/share/marketplace-social-share-referral-terms.react-component.js"),w=(r("./src/udemy/js/share/marketplace-social-share-button.less"),Object(c.d)((i=a=function(e){function t(){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).apply(this,arguments))}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"onShareButtonClick",value:function(){var e=this;this.props.store.getOrPopulateUrl().then((function(){e.props.store.showShareModal()})).catch(Object(l.action)((function(){f.a.Feedback.fromText(gettext("Something went wrong, please try again later"),f.a.MessageType.error)})))}},{key:"onModalHide",value:function(){this.props.store.hideShareModal()}},{key:"render",value:function(){var e=this.props,t=e.store,r=e.bsSize,o=e.bsStyle,s=e.showReferral,a=e.showReferralTerms,i=e.showTopBorder;return t.isMarketplaceShareEnabled?h.a.createElement("div",{className:"marketplace-social-share-button--share-button--79rGp"},i&&h.a.createElement("div",{className:"marketplace-social-share-button--share-button__top-border--bacJS"}),t.isReferralEnabled&&s&&h.a.createElement(v.a,{store:t}),h.a.createElement(m.default,{bsSize:r,bsStyle:o,onClick:this.onShareButtonClick},h.a.createElement(b.a,{glyph:"share"}),h.a.createElement("span",{className:"marketplace-social-share-button--share-button__text--1jqY7"},y.a[t.sourcePage].shareText||gettext("Share"))),h.a.createElement(g.a,{onHide:this.onModalHide,show:t.isShareModalShown,store:t}),t.isReferralEnabled&&s&&a&&h.a.createElement("div",{className:"marketplace-social-share-button--share-button__referral-terms--yFy2w"},h.a.createElement(v.b,{store:t}))):null}}]),t}(d.Component),a.propTypes={bsSize:u.a.string,bsStyle:u.a.string,showReferral:u.a.bool,showReferralTerms:u.a.bool,showTopBorder:u.a.bool,store:u.a.object.isRequired},a.defaultProps={bsSize:null,bsStyle:"link",showReferral:!0,showReferralTerms:!1,showTopBorder:!1},s=i,babelHelpers.applyDecoratedDescriptor(s.prototype,"onShareButtonClick",[n.a,l.action],Object.getOwnPropertyDescriptor(s.prototype,"onShareButtonClick"),s.prototype),babelHelpers.applyDecoratedDescriptor(s.prototype,"onModalHide",[n.a,l.action],Object.getOwnPropertyDescriptor(s.prototype,"onModalHide"),s.prototype),o=s))||o)},"./src/udemy/js/share/marketplace-social-share-items-container.less":function(e,t,r){e.exports={"social-share-icons":"marketplace-social-share-items-container--social-share-icons--3ME5y"}},"./src/udemy/js/share/marketplace-social-share-items-container.react-component.js":function(e,t,r){"use strict";var o,s,a,i,n,l,c,p,u,d,h,m,b,f,y,g=r("./node_modules/mobx-react/index.module.js"),v=r("./node_modules/prop-types/index.js"),w=r.n(v),k=r("./node_modules/react/index.js"),_=r.n(k),E=r("./src/udemy/js/share/config.js"),j=r("./src/udemy/js/share/helpers.js"),D=r("./node_modules/autobind-decorator/lib/esm/index.js"),S=r("./node_modules/mobx/lib/mobx.module.js"),C=r("./src/udemy/js/base-components/alert.react-component.js"),O=r("./src/udemy/js/base-components/button.react-component.js"),P=r("./src/udemy/js/base-components/form/control-label.react-component.js"),T=r("./src/udemy/js/base-components/form/form-control.react-component.js"),x=r("./src/udemy/js/base-components/form/form-group.react-component.js"),R=r("./src/udemy/js/base-components/form/form.react-component.js"),H=r("./src/udemy/js/base-components/image.react-component.js"),A=(r("./src/udemy/js/share/share-email-modal.less"),r("./src/udemy/js/base-components/loader.react-component.js")),I=r("./src/udemy/js/base-components/modal.react-component.js"),L=r("./src/udemy/js/utils/currency-formatter.js"),M=r("./src/udemy/js/utils/escape/safely-set-inner-html.js"),N=r("./src/udemy/js/utils/get-request-data.js"),F=r("./src/udemy/js/utils/ud-link.js"),U=r("./src/udemy/js/utils/ud-me.js"),z=r("./src/udemy/js/share/constants.js"),B=r("./src/udemy/js/share/share-email.mobx-store.js"),q=Object(g.d)((n=i=function(e){function t(){var e,r;babelHelpers.classCallCheck(this,t);for(var o=arguments.length,s=new Array(o),i=0;i<o;i++)s[i]=arguments[i];return r=babelHelpers.possibleConstructorReturn(this,(e=babelHelpers.getPrototypeOf(t)).call.apply(e,[this].concat(s))),babelHelpers.initializerDefineProperty(r,"shareEmailStore",a,babelHelpers.assertThisInitialized(r)),r.udRequest=Object(N.a)(),r}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"onSubmit",value:function(e){e.preventDefault(),this.shareEmailStore.onSubmit(this.props.store.callbackEmails)}},{key:"updateEmailsInput",value:function(e){var t=e.target;this.shareEmailStore.updateEmailsInput(t)}},{key:"updateMessageInput",value:function(e){var t=e.target;this.shareEmailStore.updateMessageInput(t)}},{key:"renderTwoSidedIncentiveAlert",value:function(){var e=Object(L.a)(z.a,{locale:this.udRequest.locale,symbol:"$",scale:0}),t=Object(L.a)(z.b,{locale:this.udRequest.locale,symbol:"$",scale:0});return _.a.createElement(C.a,{bsStyle:"info",icon:!1,className:"share-email-modal--two-sided-incentive-alert--Shxmc"},_.a.createElement(H.a,{src:F.a.toS3Images("home/referral_program/credit_icon.svg"),alt:"",width:59,height:50}),_.a.createElement("span",Object.assign({className:"share-email-modal--two-sided-incentive-alert__content--2CXCS"},Object(M.a)({descriptionOfCaller:"share-email-modal:referral-link",html:interpolate(gettext('Give credit, get credit. Get up to %(totalAmount)s credit&mdash;%(singleReferralAmount)s credit for each qualifying new user you refer who buys their first course between %(startDate)s and %(endDate)s.You\'ll receive this credit 45 days after they purchase.<a href="/terms/referral/" target="_blank">See Terms</a>'),{totalAmount:e,singleReferralAmount:t,startDate:this.props.store.referralStartDate,endDate:this.props.store.referralEndDate},!0)}))))}},{key:"render",value:function(){var e=this.props,t=e.bodyPlaceholder,r=e.store,o=(e.styles,babelHelpers.objectWithoutProperties(e,["bodyPlaceholder","store","styles"]));return Object.values(z.d).includes(r.shareableObject.type)&&U.a.id?_.a.createElement(I.a,o,_.a.createElement(I.a.Header,{closeButton:!0},_.a.createElement(I.a.Title,null,gettext("Share via email"))),_.a.createElement(I.a.Body,null,r.isTwoSidedIncentive&&this.renderTwoSidedIncentiveAlert(),_.a.createElement(R.a,{onSubmit:this.onSubmit,className:"share-email-modal--email-modal-form--13woO"},_.a.createElement(x.a,{controlId:"emailRecipient",validationState:this.shareEmailStore.getEmailValidationState()},_.a.createElement(P.a,null,gettext("Email addresses")),_.a.createElement(T.a,{required:!0,id:"emailRecipient",type:"text",onChange:this.updateEmailsInput,placeholder:gettext("Enter up to 5 email addresses, separated by a comma.")})),_.a.createElement(x.a,{controlId:"emailBody"},_.a.createElement(P.a,null,gettext("Why are you recommending this?")),_.a.createElement(T.a,{componentClass:"textarea",id:"emailBody",maxLength:"256",onChange:this.updateMessageInput,placeholder:t,rows:"3",type:"email"})),_.a.createElement(O.default,{type:"submit",bsStyle:"primary",bsSize:"large",block:!0,disabled:!this.shareEmailStore.isFormValid||this.shareEmailStore.loading},this.shareEmailStore.loading&&_.a.createElement(A.a,{size:"small",className:"share-email-modal--email-modal-form__loader--1q97X"}),this.shareEmailStore.loading?gettext("Sending..."):gettext("Send")),this.shareEmailStore.error&&_.a.createElement("span",{className:"alert alert-danger share-email-modal--email-modal-form__error--1PjQE"},this.shareEmailStore.error),_.a.createElement("span",{className:"share-email-modal--email-modal-form__legal--2rPci"},gettext("By sending, you confirm that you know the recipient or recipients."))))):null}}]),t}(_.a.Component),i.propTypes={bodyPlaceholder:w.a.string,store:w.a.object.isRequired,styles:w.a.object},i.defaultProps={bodyPlaceholder:gettext("Enter your message here!"),styles:void 0},s=n,a=babelHelpers.applyDecoratedDescriptor(s.prototype,"shareEmailStore",[S.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new B.a(this.props.store.shareableObject,this.props.store.url,this.props.store.sourcePage)}}),babelHelpers.applyDecoratedDescriptor(s.prototype,"onSubmit",[D.a,S.action],Object.getOwnPropertyDescriptor(s.prototype,"onSubmit"),s.prototype),babelHelpers.applyDecoratedDescriptor(s.prototype,"updateEmailsInput",[D.a,S.action],Object.getOwnPropertyDescriptor(s.prototype,"updateEmailsInput"),s.prototype),babelHelpers.applyDecoratedDescriptor(s.prototype,"updateMessageInput",[D.a,S.action],Object.getOwnPropertyDescriptor(s.prototype,"updateMessageInput"),s.prototype),o=s))||o,G=(r("./src/udemy/js/share/marketplace-social-share-items-container.less"),r("./src/udemy/js/utils/ud-api-stat.js")),V=r("./src/udemy/js/utils/ud-raven.js"),K=r("./src/udemy/js/utils/ud-user-tracker-logger.js"),W=r("./src/udemy/js/utils/ud-utils.js"),Y=r("./node_modules/babel-plugin-react-css-modules/dist/browser/getClassName.js"),X=r.n(Y),Q=r("./node_modules/classnames/index.js"),J=r.n(Q),Z=r("./node_modules/clipboard/dist/clipboard.js"),$=r.n(Z),ee=r("./src/udemy/js/base-components/form/input-group.react-component.js"),te=r("./src/udemy/js/base-components/icon.react-component.js"),re=r("./src/udemy/js/base-components/tooltip.react-component.js"),oe=(r("./src/udemy/js/share/social-share-button.less"),{"./social-share-button.less":{"share-clipboard-input":"social-share-button--share-clipboard-input--sIPPK","share-item-wrapper":"social-share-button--share-item-wrapper--3ux_T","share-item":"social-share-button--share-item--3-Cva","share-item--xsmall":"social-share-button--share-item--xsmall--EfMWF","ufb-share-button":"social-share-button--ufb-share-button--1q2ZH"}}),se={clipboard:"chain",facebook:"facebook",mailto:"envelope",mail_ref:"envelope",twitter:"twitter",fb_workplace:"workplace",slack:"slack",whatsapp:"whatsapp",messenger:"messenger"},ae={fb_workplace:gettext("Share to Workplace"),slack:gettext("Share to Slack")},ie=(p=c=function(e){function t(){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).apply(this,arguments))}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"componentDidMount",value:function(){var e=this;"clipboard"===this.props.network&&(this.clipboard=new $.a("#social-share-item-clipboard",{text:function(){return e.props.shareUrl},container:this.props.parentContainerId?document.getElementById(this.props.parentContainerId):void 0}))}},{key:"handleClick",value:function(e){e.preventDefault(),this.props.onClick(this.props.network)}},{key:"renderIcon",value:function(){return _.a.createElement(te.a,{glyph:this.props.isLoading?"circle-loader":se[this.props.network]})}},{key:"renderUfbShare",value:function(){var e=this.props.bsSize;return _.a.createElement(O.default,{bsSize:e,bsStyle:"default--white",className:"social-share-button--ufb-share-button--1q2ZH",onClick:this.handleClick},this.renderIcon(),_.a.createElement("span",{className:"ml5"},ae[this.props.network]))}},{key:"renderClipboard",value:function(){return _.a.createElement(ee.a,{bsSize:"small",className:"social-share-button--share-clipboard-input--sIPPK"},_.a.createElement(T.a,{type:"text",value:this.props.shareUrl}),_.a.createElement(ee.a.Button,null,_.a.createElement(O.default,{id:"social-share-item-clipboard",onClick:this.handleClick},gettext("Copy"))))}},{key:"renderMarketplaceShare",value:function(){var e=this.props,t=e.bsSize;if("clipboard"===e.network)return this.renderClipboard();var r=J()({"share-item":!0,"share-item--xsmall":"xsmall"===t});return _.a.createElement(O.default,{bsStyle:"default",bsSize:t,role:"link",tabIndex:"0",onClick:this.handleClick,className:X()(r,oe)},this.renderIcon())}},{key:"render",value:function(){var e=this.props,t=e.isUfbShare,r=e.network,o=e.showTooltip;return t?this.renderUfbShare():_.a.createElement("div",{className:"social-share-button--share-item-wrapper--3ux_T"},this.renderMarketplaceShare(),o&&"clipboard"===r&&_.a.createElement(re.a,{bsStyle:"blue",placement:"bottom",className:"in",id:"tooltip-top"},gettext("Link Copied!")))}}]),t}(k.Component),c.propTypes={bsSize:w.a.string,isLoading:w.a.bool,isUfbShare:w.a.bool.isRequired,network:w.a.string.isRequired,onClick:w.a.func.isRequired,shareUrl:w.a.string.isRequired,showTooltip:w.a.bool,parentContainerId:w.a.string},c.defaultProps={bsSize:"small",isLoading:!1,parentContainerId:void 0,showTooltip:!1},l=p,babelHelpers.applyDecoratedDescriptor(l.prototype,"handleClick",[D.a],Object.getOwnPropertyDescriptor(l.prototype,"handleClick"),l.prototype),l),ne=(r("./src/udemy/js/share/social-share-items.less"),Object(g.d)((m=h=function(e){function t(){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).apply(this,arguments))}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"onShareError",value:function(e){V.a.captureException(e),W.a.Feedback.fromText(gettext("Something went wrong, please try again later"),W.a.MessageType.error)}},{key:"handleClick",value:function(e){this.props.store.share(e,this.onShareError),K.a.logEvents({events:[{category:"Social Sharing",action:"".concat(e,"-clicked"),objectid:this.props.store.shareableObject.id,objecttype:this.props.store.shareableObject.type}],page:this.props.store.sourcePage}),G.c.increment("social_sharing.button.clicked",{network:e})}},{key:"render",value:function(){var e=this,t=this.props,r=t.bsSize,o=t.isUfbShare,s=t.parentContainerId,a=t.store,i=this.props.networks.map((function(t,i){return _.a.createElement(ie,{network:t,key:i,bsSize:r,getOrPopulateUrl:a.getOrPopulateUrl,showTooltip:a.isCopyLinkShown,onClick:e.handleClick,isUfbShare:o,isLoading:a.loadingNetwork.get(t),parentContainerId:s,shareUrl:a.sharedUrl})}));return _.a.createElement("div",{className:"social-share-items--social-share-items--3T4Ug"},i)}}]),t}(k.Component),h.propTypes={bsSize:w.a.string,networks:w.a.array.isRequired,isUfbShare:w.a.bool.isRequired,parentContainerId:w.a.string,store:w.a.shape({shareableObject:w.a.object.isRequired,getOrPopulateUrl:w.a.func.isRequired,isCopyLinkShown:w.a.bool.isRequired,loadingNetwork:w.a.object.isRequired,share:w.a.func.isRequired,sharedUrl:w.a.string.isRequired,sourcePage:w.a.string.isRequired}).isRequired},h.defaultProps={bsSize:void 0,parentContainerId:void 0},d=m,babelHelpers.applyDecoratedDescriptor(d.prototype,"handleClick",[D.a],Object.getOwnPropertyDescriptor(d.prototype,"handleClick"),d.prototype),u=d))||u);r.d(t,"a",(function(){return le}));var le=Object(g.d)((y=f=function(e){function t(){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).apply(this,arguments))}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"render",value:function(){var e=this.props,t=e.bsSize,r=e.parentContainerId,o=e.store;return _.a.createElement(_.a.Fragment,null,_.a.createElement("div",{className:"marketplace-social-share-items-container--social-share-icons--3ME5y"},_.a.createElement(ne,{bsSize:t,store:o,networks:Object(j.d)(),isUfbShare:!1,parentContainerId:r,sourcePage:o.sourcePage})),_.a.createElement(q,{bodyPlaceholder:E.a[o.sourcePage]&&E.a[o.sourcePage].emailPlaceholder,onHide:o.hideImportEmailModal,show:o.isImportEmailModalShown,store:o}))}}]),t}(k.Component),f.propTypes={bsSize:w.a.string,parentContainerId:w.a.string,store:w.a.object.isRequired},f.defaultProps={bsSize:void 0,parentContainerId:void 0},b=y))||b},"./src/udemy/js/share/marketplace-social-share-modal.react-component.js":function(e,t,r){"use strict";r.d(t,"a",(function(){return b}));var o,s,a,i=r("./node_modules/mobx-react/index.module.js"),n=r("./node_modules/prop-types/index.js"),l=r.n(n),c=r("./node_modules/react/index.js"),p=r.n(c),u=r("./src/udemy/js/base-components/modal.react-component.js"),d=r("./src/udemy/js/ui-feedback/app.js"),h=r("./src/udemy/js/share/marketplace-social-share-items-container.react-component.js"),m=r("./src/udemy/js/share/marketplace-social-share-referral-terms.react-component.js"),b=Object(i.d)((a=s=function(e){function t(){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).apply(this,arguments))}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"render",value:function(){var e=this.props,t=e.bsSize,r=e.store,o=babelHelpers.objectWithoutProperties(e,["bsSize","store"]);if(!r.isMarketplaceShareEnabled)return null;var s=[{level:"info",message:gettext("Thanks for sharing!")}],a="marketplace-social-share-modal",i=r.isReferralEnabled?gettext("Invite friends"):gettext("Share this course");return p.a.createElement(p.a.Fragment,null,r.showEmailFeedback&&p.a.createElement(d.UIFeedback,{uiMessages:s}),p.a.createElement(u.a,Object.assign({id:a},o),p.a.createElement(u.a.Header,{closeButton:!0},p.a.createElement(u.a.Title,null,i)),p.a.createElement(u.a.Body,null,r.isReferralEnabled&&p.a.createElement(m.a,{store:r}),p.a.createElement(h.a,{bsSize:t,parentContainerId:a,store:r}),r.isReferralEnabled&&p.a.createElement(m.b,{store:r}))))}}]),t}(c.Component),s.propTypes={bsSize:l.a.string,onHide:l.a.func.isRequired,show:l.a.bool.isRequired,store:l.a.object.isRequired},s.defaultProps={bsSize:void 0},o=a))||o},"./src/udemy/js/share/marketplace-social-share-referral-terms.less":function(e,t,r){e.exports={"referral-header":"marketplace-social-share-referral-terms--referral-header--3B_aI","referral-header__asterisk":"marketplace-social-share-referral-terms--referral-header__asterisk--1aS4i","referral-terms":"marketplace-social-share-referral-terms--referral-terms--260sg","referral-terms__asterisk":"marketplace-social-share-referral-terms--referral-terms__asterisk--Jnxjr","referral-terms__text":"marketplace-social-share-referral-terms--referral-terms__text--2pfST"}},"./src/udemy/js/share/marketplace-social-share-referral-terms.react-component.js":function(e,t,r){"use strict";r.d(t,"a",(function(){return d})),r.d(t,"b",(function(){return h}));var o=r("./node_modules/prop-types/index.js"),s=r.n(o),a=r("./node_modules/react/index.js"),i=r.n(a),n=r("./src/udemy/js/utils/currency-formatter.js"),l=r("./src/udemy/js/utils/escape/safely-set-inner-html.js"),c=r("./src/udemy/js/utils/get-request-data.js"),p=r("./src/udemy/js/share/config.js"),u=r("./src/udemy/js/share/constants.js"),d=(r("./src/udemy/js/share/marketplace-social-share-referral-terms.less"),function(e){var t=e.store,r=gettext("GIVE CREDIT, GET CREDIT"),o=gettext("Share and earn up to $30");return i.a.createElement("div",{className:"marketplace-social-share-referral-terms--referral-header--3B_aI"},i.a.createElement("span",null,t.isTwoSidedIncentive?r:o),i.a.createElement("span",{className:"marketplace-social-share-referral-terms--referral-header__asterisk--1aS4i"},"*"))});d.propTypes={store:s.a.object.isRequired};var h=function(e){function t(){var e,r;babelHelpers.classCallCheck(this,t);for(var o=arguments.length,s=new Array(o),a=0;a<o;a++)s[a]=arguments[a];return(r=babelHelpers.possibleConstructorReturn(this,(e=babelHelpers.getPrototypeOf(t)).call.apply(e,[this].concat(s)))).udRequest=Object(c.a)(),r}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"render",value:function(){var e=this.props.store;if(!e.isMarketplaceShareEnabled||!e.isReferralEnabled)return null;var t=Object(n.a)(u.a,{locale:this.udRequest.locale,symbol:"$",scale:0}),r=Object(n.a)(u.b,{locale:this.udRequest.locale,symbol:"$",scale:0}),o=e.referralStartDate,s=e.referralEndDate,a=interpolate(p.b[e.isTwoSidedIncentive?u.c.TWO_SIDED:u.c.ONE_SIDED].terms,{singleReferralAmount:r,totalAmount:t,startDate:o,endDate:s},!0);return i.a.createElement("div",{"data-purpose":"referral-terms",className:"marketplace-social-share-referral-terms--referral-terms--260sg"},i.a.createElement("span",{className:"marketplace-social-share-referral-terms--referral-terms__asterisk--Jnxjr"},"*"),i.a.createElement("span",Object.assign({className:"marketplace-social-share-referral-terms--referral-terms__text--2pfST"},Object(l.a)({descriptionOfCaller:"marketplace-social-share-referral-terms:referral-terms-text",html:a,dataPurpose:"referral-terms-text"}))))}}]),t}(a.Component);h.propTypes={store:s.a.object.isRequired}},"./src/udemy/js/share/share-email-modal.less":function(e,t,r){e.exports={"email-modal-form":"share-email-modal--email-modal-form--13woO","email-modal-form__error":"share-email-modal--email-modal-form__error--1PjQE","email-modal-form__legal":"share-email-modal--email-modal-form__legal--2rPci","email-modal-form__loader":"share-email-modal--email-modal-form__loader--1q97X","two-sided-incentive-alert":"share-email-modal--two-sided-incentive-alert--Shxmc","two-sided-incentive-alert__content":"share-email-modal--two-sided-incentive-alert__content--2CXCS"}},"./src/udemy/js/share/share-email.mobx-store.js":function(e,t,r){"use strict";r.d(t,"a",(function(){return d}));var o,s,a,i,n,l,c=r("./node_modules/mobx/lib/mobx.module.js"),p=r("./src/udemy/js/utils/ud-api.js"),u=r("./src/udemy/js/utils/upow.js"),d=(o=function(){function e(t,r,o){babelHelpers.classCallCheck(this,e),babelHelpers.initializerDefineProperty(this,"recipientEmails",s,this),babelHelpers.initializerDefineProperty(this,"message",a,this),babelHelpers.initializerDefineProperty(this,"error",i,this),babelHelpers.initializerDefineProperty(this,"loading",n,this),babelHelpers.initializerDefineProperty(this,"sent",l,this),this.shareableObject=t,this.shareUrl=r,this.sourcePage=o}return babelHelpers.createClass(e,[{key:"clean",value:function(){this.error="",this.loading=!1,this.message="",this.recipientEmails=[]}},{key:"updateEmailsInput",value:function(e){this.recipientEmails=e.value.split(",").map((function(e){return e.trim()}))}},{key:"updateMessageInput",value:function(e){this.message=e.value.trim()}},{key:"getEmailValidationState",value:function(){return 0<=this.recipientEmails.length&&this.recipientEmails.length<6&&this.recipientEmails.every((function(e){return e.match(/.+@.+\...+/)}))?null:"error"}},{key:"onSubmit",value:function(e){var t=this;if(this.isFormValid)return this.loading=!0,Object(u.a)("share-email",this.recipientEmails.join(","),"").then((function(r){return p.d.post(t.emailApiUrl,Object.assign({},t.formData,{upow:r})).then(Object(c.action)((function(){t.sent=!0,t.clean(),e&&e()}))).catch(Object(c.action)((function(e){t.clean(),t.error=e.response.data.error.recipient_emails||gettext("This message was not sent due to a server error")})))}))}},{key:"formData",get:function(){return{shareable_object_id:this.shareableObject.id,message:this.message,recipient_emails:this.recipientEmails,share_url:this.shareUrl,source:this.sourcePage,type:this.shareableObject.type}}},{key:"isFormValid",get:function(){return this.recipientEmails.length&&null===this.getEmailValidationState()}},{key:"emailApiUrl",get:function(){return"share/email/".concat(this.shareableObject.type,"/")}}]),e}(),s=babelHelpers.applyDecoratedDescriptor(o.prototype,"recipientEmails",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),a=babelHelpers.applyDecoratedDescriptor(o.prototype,"message",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),i=babelHelpers.applyDecoratedDescriptor(o.prototype,"error",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),n=babelHelpers.applyDecoratedDescriptor(o.prototype,"loading",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),l=babelHelpers.applyDecoratedDescriptor(o.prototype,"sent",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),babelHelpers.applyDecoratedDescriptor(o.prototype,"clean",[c.action],Object.getOwnPropertyDescriptor(o.prototype,"clean"),o.prototype),babelHelpers.applyDecoratedDescriptor(o.prototype,"formData",[c.computed],Object.getOwnPropertyDescriptor(o.prototype,"formData"),o.prototype),babelHelpers.applyDecoratedDescriptor(o.prototype,"isFormValid",[c.computed],Object.getOwnPropertyDescriptor(o.prototype,"isFormValid"),o.prototype),babelHelpers.applyDecoratedDescriptor(o.prototype,"emailApiUrl",[c.computed],Object.getOwnPropertyDescriptor(o.prototype,"emailApiUrl"),o.prototype),babelHelpers.applyDecoratedDescriptor(o.prototype,"onSubmit",[c.action],Object.getOwnPropertyDescriptor(o.prototype,"onSubmit"),o.prototype),o)},"./src/udemy/js/share/social-share-button.less":function(e,t,r){e.exports={"share-clipboard-input":"social-share-button--share-clipboard-input--sIPPK","share-item-wrapper":"social-share-button--share-item-wrapper--3ux_T","share-item":"social-share-button--share-item--3-Cva","share-item--xsmall":"social-share-button--share-item--xsmall--EfMWF","ufb-share-button":"social-share-button--ufb-share-button--1q2ZH"}},"./src/udemy/js/share/social-share-items.less":function(e,t,r){e.exports={"social-share-items":"social-share-items--social-share-items--3T4Ug"}},"./src/udemy/js/subscription/my-programs/my-programs.less":function(e,t,r){e.exports={title:"my-programs--title--1n3qG",content:"my-programs--content--35DpD",loader:"my-programs--loader--2JDPC","empty-state":"my-programs--empty-state--2EKxt","link-udemy-pro":"my-programs--link-udemy-pro--2AhmX","program-card":"my-programs--program-card--149wt"}},"./src/udemy/js/survey/survey-question.react-component.js":function(e,t,r){"use strict";var o,s,a,i,n,l,c,p,u,d,h,m=r("./node_modules/autobind-decorator/lib/esm/index.js"),b=r("./node_modules/lodash-es/noop.js"),f=r("./node_modules/mobx-react/index.module.js"),y=r("./node_modules/prop-types/index.js"),g=r.n(y),v=r("./node_modules/react/index.js"),w=r.n(v),k=r("./src/udemy/js/base-components/alert.react-component.js"),_=r("./src/udemy/js/base-components/form/form-control.react-component.js"),E=(r("./src/udemy/js/survey/survey.less"),r("./node_modules/mobx/lib/mobx.module.js")),j=r("./src/udemy/js/base-components/form/checkbox.react-component.js"),D=Object(f.d)((i=a=function(e){function t(){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).apply(this,arguments))}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"onChange",value:function(e){e.target.checked?this.props.survey.addUserAnswerOption(this.props.question.id,this.props.answerOption.id):this.props.survey.removeUserAnswerOption(this.props.question.id,this.props.answerOption.id)}},{key:"render",value:function(){var e=this.props.answerOption;return w.a.createElement(j.a,{name:e.id,key:e.id,value:e.id,checked:this.isSelected,onChange:this.onChange,disabled:this.isMaxSelected&&!this.isSelected},gettext(e.text))}},{key:"userAnswerIds",get:function(){return this.props.survey.userAnswers[this.props.question.id]}},{key:"isMaxSelected",get:function(){return!!this.userAnswerIds&&this.userAnswerIds.length>=this.props.maxSelectable}},{key:"isSelected",get:function(){return!!this.userAnswerIds&&this.userAnswerIds.includes(this.props.answerOption.id)}}]),t}(v.Component),a.propTypes={answerOption:g.a.object.isRequired,question:g.a.object.isRequired,survey:g.a.object.isRequired,maxSelectable:g.a.number.isRequired},s=i,babelHelpers.applyDecoratedDescriptor(s.prototype,"onChange",[m.a],Object.getOwnPropertyDescriptor(s.prototype,"onChange"),s.prototype),babelHelpers.applyDecoratedDescriptor(s.prototype,"isMaxSelected",[E.computed],Object.getOwnPropertyDescriptor(s.prototype,"isMaxSelected"),s.prototype),babelHelpers.applyDecoratedDescriptor(s.prototype,"isSelected",[E.computed],Object.getOwnPropertyDescriptor(s.prototype,"isSelected"),s.prototype),o=s))||o,S=r("./src/udemy/js/base-components/form/radio.react-component.js"),C=Object(f.d)((c=l=function(e){function t(){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).apply(this,arguments))}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"render",value:function(){var e=this.props,t=e.answerOption,r=e.question,o=e.survey,s=e.onChange,a=babelHelpers.objectWithoutProperties(e,["answerOption","question","survey","onChange"]);return w.a.createElement(S.a,Object.assign({key:t.id,name:"survey-question-".concat(r.id),value:t.id,checked:t.id===o.userAnswers[r.id],onChange:s,className:"answer-choice"},a),w.a.createElement("span",{className:"answer-label"},gettext(t.text)))}}]),t}(v.Component),l.propTypes=babelHelpers.objectSpread({answerOption:g.a.object.isRequired,question:g.a.object.isRequired,survey:g.a.object.isRequired,onChange:g.a.func.isRequired},S.a.PropTypes),n=c))||n;r.d(t,"a",(function(){return P}));var O=Object(f.d)((function(e){var t=e.question,r=e.survey,o=e.onChange;return w.a.createElement("div",{className:"answer-select"},w.a.createElement(_.a,{componentClass:"select",placeholder:"placeholder",onChange:o,id:String(t.id)},t.placeholder&&!r.userAnswers[t.id]&&w.a.createElement("option",{key:"placeholder",value:""},gettext(t.placeholder)),!t.placeholder&&!r.userAnswers[t.id]&&w.a.createElement("option",{key:"placeholder",value:""},gettext("Select an answer")),t.answer_options.map((function(e){return w.a.createElement("option",{key:String(e.id),value:String(e.id)},gettext(e.text))}))))})),P=Object(f.d)((h=d=function(e){function t(){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).apply(this,arguments))}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"onChangeChoice",value:function(e){this.props.survey.updateUserAnswer(this.props.question.id,parseInt(e.target.value,10)),this.props.onChange(e)}},{key:"onChangeText",value:function(e){this.props.survey.updateUserAnswer(this.props.question.id,e.target.value)}},{key:"render",value:function(){var e,t=this;return"choice"!==this.props.question.question_type||this.props.answerOptionInput&&"buttons"!==this.props.answerOptionInput||(e=w.a.createElement("div",{className:"survey-answer"},this.props.question.answer_options.map((function(e){return w.a.createElement(C,{answerOption:e,boxed:!1,bsSize:"small",button:!0,key:e.id,question:t.props.question,survey:t.props.survey,onChange:t.onChangeChoice})})))),("choice__dropdown"===this.props.question.question_type||"choice"===this.props.question.question_type&&"dropdown"===this.props.answerOptionInput)&&(e=w.a.createElement("div",{className:"survey-answer"},w.a.createElement(O,{question:this.props.question,survey:this.props.survey,onChange:this.onChangeChoice}))),("choice__radio"===this.props.question.question_type||"choice"===this.props.question.question_type&&"radio"===this.props.answerOptionInput)&&(e=w.a.createElement("div",{className:"survey-answer"},this.props.question.answer_options.map((function(e){return w.a.createElement(C,{answerOption:e,question:t.props.question,survey:t.props.survey,boxed:!1,key:e.id,onChange:t.onChangeChoice})})))),("choice__boxed_radio"===this.props.question.question_type||"choice"===this.props.question.question_type&&"boxed_radio"===this.props.answerOptionInput)&&(e=w.a.createElement("div",{className:"survey-answer"},this.props.question.answer_options.map((function(e){return w.a.createElement(C,{answerOption:e,question:t.props.question,survey:t.props.survey,boxed:!0,key:e.id,onChange:t.onChangeChoice})})))),"choice__multi_select"===this.props.question.question_type&&(e=w.a.createElement("div",{className:"survey-answer"},this.props.question.answer_options.map((function(e){return w.a.createElement(D,{answerOption:e,question:t.props.question,survey:t.props.survey,maxSelectable:3,key:e.id})})))),"freeform"===this.props.question.question_type&&(e=w.a.createElement("div",{className:"survey-answer answer-freeform"},w.a.createElement(_.a,{"data-question":this.props.question.id,componentClass:"textarea",placeholder:gettext(this.props.question.placeholder),onChange:this.onChangeText}))),"freeform__textbox"===this.props.question.question_type&&(e=w.a.createElement("div",{className:"survey-answer answer-freeform__textbox"},w.a.createElement(_.a,{"data-question":this.props.question.id,type:"text",value:this.value,placeholder:gettext(this.props.question.placeholder),onChange:this.onChangeText}))),w.a.createElement("div",{key:this.props.question.id,className:"survey-question"},w.a.createElement("span",{"data-purpose":"question-text",className:"survey-question--text"},gettext(this.props.question.text)),this.tooltip,e)}},{key:"tooltip",get:function(){if(this.props.question.description)return"alert"===this.props.questionDescriptionStyle?w.a.createElement(k.a,{bsStyle:"info",icon:!1},gettext(this.props.question.description)):w.a.createElement("span",{className:"tooltip-container"},w.a.createElement("i",{className:"udi udi-question-circle"}),w.a.createElement("span",{className:"tooltip tooltip-neutral"},w.a.createElement("span",{className:"tooltip-inner"},gettext(this.props.question.description))))}}]),t}(v.Component),d.propTypes={question:g.a.object.isRequired,survey:g.a.object.isRequired,answerOptionInput:g.a.string,questionDescriptionStyle:g.a.string,onChange:g.a.func},d.defaultProps={answerOptionInput:"buttons",questionDescriptionStyle:"tooltip",onChange:b.a},u=h,babelHelpers.applyDecoratedDescriptor(u.prototype,"onChangeChoice",[m.a],Object.getOwnPropertyDescriptor(u.prototype,"onChangeChoice"),u.prototype),babelHelpers.applyDecoratedDescriptor(u.prototype,"onChangeText",[m.a],Object.getOwnPropertyDescriptor(u.prototype,"onChangeText"),u.prototype),p=u))||p},"./src/udemy/js/survey/survey.less":function(e,t,r){e.exports={survey:"survey--survey--2eWja"}},"./src/udemy/js/survey/survey.mobx-store.js":function(e,t,r){"use strict";r.d(t,"a",(function(){return d}));var o,s,a,i,n,l,c=r("./node_modules/autobind-decorator/lib/esm/index.js"),p=r("./node_modules/mobx/lib/mobx.module.js"),u=r("./src/udemy/js/utils/ud-api.js"),d=(o=function(){function e(t,r,o,c){var p=arguments.length>4&&void 0!==arguments[4]&&arguments[4];babelHelpers.classCallCheck(this,e),babelHelpers.initializerDefineProperty(this,"id",s,this),babelHelpers.initializerDefineProperty(this,"headline",a,this),babelHelpers.initializerDefineProperty(this,"description",i,this),babelHelpers.initializerDefineProperty(this,"questionSets",n,this),babelHelpers.initializerDefineProperty(this,"userAnswers",l,this),this.surveyCode=t,this.courseId=r,this.relatedObjectType=o,this.relatedObjectId=c,this.useAPICache=p}return babelHelpers.createClass(e,[{key:"_getSurvey",value:function(){return u.d.get("surveys/".concat(this.surveyCode,"/"),{params:{"fields[survey]":"@default,headline,description"},useCache:this.useAPICache})}},{key:"_getUserAnswers",value:function(){var e;return e=this.courseId?"users/me/courses/".concat(this.courseId,"/surveys/").concat(this.id,"/answers/"):"users/me/surveys/".concat(this.id,"/answers/"),u.d.get(e)}},{key:"_putUserAnswers",value:function(e){var t;return t=this.courseId?"users/me/courses/".concat(this.courseId,"/surveys/").concat(this.id,"/answers/"):"users/me/surveys/".concat(this.id,"/answers/"),u.d.put(t,e)}},{key:"_sortByOrder",value:function(e,t){return e.order-t.order}},{key:"_sortQuestionSet",value:function(e,t){for(var r=0,o=[e,t];r<o.length;r++){var s=o[r];s._questionsSorted||(s.questions&&s.questions.sort(this._sortByOrder),s._questionsSorted=!0)}return this._sortByOrder(e,t)}},{key:"_sortQuestionSets",value:function(e){1===e.length&&e[0].questions?e[0].questions.sort(this._sortByOrder):e.sort(this._sortQuestionSet)}},{key:"getSurvey",value:function(){var e=this;return this._getSurvey().then((function(t){e.setSurvey({id:t.data.id,headline:t.data.headline,description:t.data.description,questionSets:t.data.question_sets})}))}},{key:"setSurvey",value:function(e){e.questionSets&&this._sortQuestionSets(e.questionSets),this.id=e.id,this.headline=e.headline,this.description=e.description,this.questionSets=e.questionSets}},{key:"getInitialValue",value:function(e){return"choice__multi_select"===e?[]:null}},{key:"setUserAnswers",value:function(e){var t=!0,r=!1,o=void 0;try{for(var s,a=this.questionSets[Symbol.iterator]();!(t=(s=a.next()).done);t=!0){var i=s.value,n=!0,l=!1,c=void 0;try{for(var p,u=i.questions[Symbol.iterator]();!(n=(p=u.next()).done);n=!0){var d=p.value;d.id in e||(e[d.id]=this.getInitialValue(d.question_type))}}catch(e){l=!0,c=e}finally{try{n||null==u.return||u.return()}finally{if(l)throw c}}}}catch(e){r=!0,o=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw o}}this.userAnswers=e}},{key:"updateUserAnswer",value:function(e,t){this.userAnswers[e]=t}},{key:"addUserAnswerOption",value:function(e,t){this.userAnswers[e].push(t)}},{key:"removeUserAnswerOption",value:function(e,t){this.userAnswers[e].remove(t)}},{key:"getUserAnswers",value:function(){var e=this;if(this.id)return this._getUserAnswers().then((function(t){var r={},o=!0,s=!1,a=void 0;try{for(var i,n=t.data.results[Symbol.iterator]();!(o=(i=n.next()).done);o=!0){var l=i.value;l.answer_option_id?r[l.question_id]=l.answer_option_id:r[l.question_id]=l.answer_freeform}}catch(e){s=!0,a=e}finally{try{o||null==n.return||n.return()}finally{if(s)throw a}}e.setUserAnswers(r)})).catch((function(t){if(!t.response||404!==t.response.status)throw t;e.setUserAnswers({})}))}},{key:"saveUserAnswers",value:function(){var e=this;if(!this.id)return Promise.reject("No survey ID.");for(var t=[],r=function(){var r=s[o],a={question_id:parseInt(r,10),data:e.userAnswerData,related_object_type:e.relatedObjectType,related_object_id:e.relatedObjectId};if(Object(p.isObservableArray)(e.userAnswers[r]))return e.userAnswers[r].forEach((function(e){var r=Object.assign({},a);r.answer_option_id=parseInt(e,10),t.push(r)})),"continue";"number"==typeof e.userAnswers[r]?a.answer_option_id=e.userAnswers[r]:"string"==typeof e.userAnswers[r]&&(a.answer_freeform=e.userAnswers[r]),t.push(a)},o=0,s=Object.keys(this.userAnswers);o<s.length;o++)r();return this._putUserAnswers(t)}},{key:"updateCourseId",value:function(e){this.courseId=e}},{key:"setUserAnswerData",value:function(e){this.userAnswerData=e}},{key:"isLoaded",get:function(){return!!this.id}},{key:"answerIdToCode",get:function(){var e={},t=!0,r=!1,o=void 0;try{for(var s,a=this.questionSets[Symbol.iterator]();!(t=(s=a.next()).done);t=!0){var i=s.value,n=!0,l=!1,c=void 0;try{for(var p,u=i.questions[Symbol.iterator]();!(n=(p=u.next()).done);n=!0){var d=p.value,h=!0,m=!1,b=void 0;try{for(var f,y=d.answer_options[Symbol.iterator]();!(h=(f=y.next()).done);h=!0){var g=f.value;e[g.id]=g.text_code}}catch(e){m=!0,b=e}finally{try{h||null==y.return||y.return()}finally{if(m)throw b}}}}catch(e){l=!0,c=e}finally{try{n||null==u.return||u.return()}finally{if(l)throw c}}}}catch(e){r=!0,o=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw o}}return e}},{key:"questionCodeToId",get:function(){var e={},t=!0,r=!1,o=void 0;try{for(var s,a=this.questionSets[Symbol.iterator]();!(t=(s=a.next()).done);t=!0){var i=s.value,n=!0,l=!1,c=void 0;try{for(var p,u=i.questions[Symbol.iterator]();!(n=(p=u.next()).done);n=!0){var d=p.value;e[d.text_code]=d.id}}catch(e){l=!0,c=e}finally{try{n||null==u.return||u.return()}finally{if(l)throw c}}}}catch(e){r=!0,o=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw o}}return e}}]),e}(),s=babelHelpers.applyDecoratedDescriptor(o.prototype,"id",[p.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),a=babelHelpers.applyDecoratedDescriptor(o.prototype,"headline",[p.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),i=babelHelpers.applyDecoratedDescriptor(o.prototype,"description",[p.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),n=babelHelpers.applyDecoratedDescriptor(o.prototype,"questionSets",[p.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),l=babelHelpers.applyDecoratedDescriptor(o.prototype,"userAnswers",[p.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),babelHelpers.applyDecoratedDescriptor(o.prototype,"_sortByOrder",[c.a],Object.getOwnPropertyDescriptor(o.prototype,"_sortByOrder"),o.prototype),babelHelpers.applyDecoratedDescriptor(o.prototype,"_sortQuestionSet",[c.a],Object.getOwnPropertyDescriptor(o.prototype,"_sortQuestionSet"),o.prototype),babelHelpers.applyDecoratedDescriptor(o.prototype,"getSurvey",[p.action],Object.getOwnPropertyDescriptor(o.prototype,"getSurvey"),o.prototype),babelHelpers.applyDecoratedDescriptor(o.prototype,"setSurvey",[p.action],Object.getOwnPropertyDescriptor(o.prototype,"setSurvey"),o.prototype),babelHelpers.applyDecoratedDescriptor(o.prototype,"setUserAnswers",[p.action],Object.getOwnPropertyDescriptor(o.prototype,"setUserAnswers"),o.prototype),babelHelpers.applyDecoratedDescriptor(o.prototype,"updateUserAnswer",[p.action],Object.getOwnPropertyDescriptor(o.prototype,"updateUserAnswer"),o.prototype),babelHelpers.applyDecoratedDescriptor(o.prototype,"addUserAnswerOption",[p.action],Object.getOwnPropertyDescriptor(o.prototype,"addUserAnswerOption"),o.prototype),babelHelpers.applyDecoratedDescriptor(o.prototype,"removeUserAnswerOption",[p.action],Object.getOwnPropertyDescriptor(o.prototype,"removeUserAnswerOption"),o.prototype),babelHelpers.applyDecoratedDescriptor(o.prototype,"updateCourseId",[p.action],Object.getOwnPropertyDescriptor(o.prototype,"updateCourseId"),o.prototype),babelHelpers.applyDecoratedDescriptor(o.prototype,"isLoaded",[p.computed],Object.getOwnPropertyDescriptor(o.prototype,"isLoaded"),o.prototype),babelHelpers.applyDecoratedDescriptor(o.prototype,"answerIdToCode",[p.computed],Object.getOwnPropertyDescriptor(o.prototype,"answerIdToCode"),o.prototype),babelHelpers.applyDecoratedDescriptor(o.prototype,"questionCodeToId",[p.computed],Object.getOwnPropertyDescriptor(o.prototype,"questionCodeToId"),o.prototype),o)},"./src/udemy/js/survey/survey.react-component.js":function(e,t,r){"use strict";var o=r("./node_modules/mobx-react/index.module.js"),s=r("./node_modules/prop-types/index.js"),a=r.n(s),i=r("./node_modules/react/index.js"),n=r.n(i),l=r("./src/udemy/js/utils/ud-prop-types.js"),c=(r("./src/udemy/js/survey/survey.less"),r("./src/udemy/js/survey/survey-question.react-component.js")),p=function(e){var t=e.questionSet,r=babelHelpers.objectWithoutProperties(e,["questionSet"]);return n.a.createElement("div",null,t.map((function(e){return n.a.createElement(c.a,Object.assign({key:e.id,question:e},r))})))};p.propTypes={questionSet:o.e.arrayOrObservableArray.isRequired,survey:a.a.object.isRequired,answerOptionInput:a.a.string,questionDescriptionStyle:a.a.string},p.defaultProps={answerOptionInput:"buttons",questionDescriptionStyle:"tooltip"};var u,d,h,m=p,b=r("./src/udemy/js/survey/survey.mobx-store.js");r.d(t,"a",(function(){return f}));var f=Object(o.d)((h=d=function(e){function t(e){var r;return babelHelpers.classCallCheck(this,t),(r=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this,e))).store=e.surveyStore||new b.a(e.surveyCode,e.courseId,e.relatedObjectType,e.relatedObjectId,e.useAPICache),r}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"componentDidMount",value:function(){var e=this;this.store.getSurvey().then((function(){e.store.setUserAnswers({}),e.props.populate&&e.store.getUserAnswers()}))}},{key:"save",value:function(){return this.store.saveUserAnswers()}},{key:"clear",value:function(){return this.store.setUserAnswers({})}},{key:"render",value:function(){var e=this;return n.a.createElement("div",{className:"survey--container survey--survey--2eWja"},n.a.createElement("form",null,this.store.questionSets.map((function(t){return n.a.createElement(m,{key:t.id,questionSet:t.questions,survey:e.store,questionDescriptionStyle:e.props.questionDescriptionStyle})}))))}}]),t}(i.Component),d.propTypes={surveyStore:a.a.object,surveyCode:Object(l.e)("surveyStore")(a.a.string).isRequired,courseId:a.a.number,populate:a.a.bool,questionDescriptionStyle:a.a.string,relatedObjectType:a.a.string,relatedObjectId:a.a.number,useAPICache:a.a.bool},d.defaultProps={surveyStore:null,courseId:void 0,populate:!1,questionDescriptionStyle:"tooltip",relatedObjectType:void 0,relatedObjectId:void 0,useAPICache:!1},u=h))||u},"./src/udemy/js/utils/fullscreen.js":function(e,t,r){"use strict";r.d(t,"b",(function(){return u}));var o,s,a=r("./node_modules/autobind-decorator/lib/esm/index.js"),i=r("./node_modules/mobx/lib/mobx.module.js"),n=r("./node_modules/mobx-react/index.module.js"),l=r("./node_modules/react/index.js"),c=r.n(l),p=new(function(){function e(){babelHelpers.classCallCheck(this,e),this._propertyMap={fullscreen:["fullscreenElement","mozFullScreenElement","webkitFullscreenElement","msFullscreenElement"],fullscreenchange:["fullscreenchange","mozfullscreenchange","webkitfullscreenchange","MSFullscreenChange"],requestFullscreen:["requestFullscreen","msRequestFullscreen","mozRequestFullScreen","webkitRequestFullscreen"],exitFullscreen:["exitFullscreen","msExitFullscreen","mozCancelFullScreen","webkitExitFullscreen"]}}return babelHelpers.createClass(e,[{key:"getPropertyName",value:function(e,t){for(var r=0;r<this._propertyMap[t].length;r++){var o=this._propertyMap[t][r];if(e[o])return o}}},{key:"getProperty",value:function(e,t){var r=this.getPropertyName(e,t);return r?e[r]:null}},{key:"isSupported",value:function(){return!!this.getProperty(document.documentElement,"requestFullscreen")}},{key:"isFullscreen",value:function(){return!!this.getProperty(document,"fullscreen")}},{key:"requestFullscreen",value:function(e){return!!this.isSupported()&&this.getProperty(e,"requestFullscreen").call(e)}},{key:"exitFullscreen",value:function(){return!!this.isSupported()&&this.getProperty(document,"exitFullscreen").call(document)}},{key:"toggleFullscreen",value:function(e){this.isFullscreen()?this.exitFullscreen():this.requestFullscreen(e)}},{key:"changeEvents",get:function(){return this._propertyMap.fullscreenchange}}]),e}());function u(e){var t,r,o=e.propTypes||{},s=(o.toggleFullscreen,o.isFullscreen,o.exitFullscreen,o.setFullscreenRef,babelHelpers.objectWithoutProperties(o,["toggleFullscreen","isFullscreen","exitFullscreen","setFullscreenRef"]));return Object(n.d)((r=t=function(t){function r(e){var t;return babelHelpers.classCallCheck(this,r),(t=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(r).call(this,e))).fullscreenStore=new d,t}return babelHelpers.inherits(r,t),babelHelpers.createClass(r,[{key:"render",value:function(){return c.a.createElement(n.b,{fullscreenStore:this.fullscreenStore},c.a.createElement(e,Object.assign({toggleFullscreen:this.fullscreenStore.toggleFullscreen,isFullscreen:this.fullscreenStore.isFullscreen,exitFullscreen:this.fullscreenStore.exitFullscreen,setFullscreenRef:this.fullscreenStore.setRef},this.props)))}}]),r}(c.a.Component),t.displayName="Fullscreen-Enabled-".concat(e.displayName||e.name),t.propTypes=s,t.defaultProps=e.defaultProps||{},t.wrappedComponent=e,r))}t.a=p;var d=(o=function(){function e(){babelHelpers.classCallCheck(this,e),babelHelpers.initializerDefineProperty(this,"isFullscreen",s,this)}return babelHelpers.createClass(e,[{key:"_addFullscreenEvents",value:function(){var e=this;p.changeEvents.forEach((function(t){document.addEventListener(t,e.handleFullscreenEvent)}))}},{key:"_removeFullscreenEvents",value:function(){var e=this;p.changeEvents.forEach((function(t){document.removeEventListener(t,e.handleFullscreenEvent)}))}},{key:"_exitFullscreen",value:function(){this._addFullscreenEvents(),!1===p.exitFullscreen()&&this._removeFullscreenEvents()}},{key:"toggleFullscreen",value:function(){this.isFullscreen?this._exitFullscreen():!this.isFullscreen&&this.ref&&(this._addFullscreenEvents(),!1===p.requestFullscreen(this.ref)&&this._removeFullscreenEvents())}},{key:"exitFullscreen",value:function(){this.isFullscreen&&this._exitFullscreen()}},{key:"handleFullscreenEvent",value:function(){this.isFullscreen=p.isFullscreen(),this.isFullscreen||this._removeFullscreenEvents()}},{key:"setRef",value:function(e){this.ref=e}}]),e}(),s=babelHelpers.applyDecoratedDescriptor(o.prototype,"isFullscreen",[i.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),babelHelpers.applyDecoratedDescriptor(o.prototype,"toggleFullscreen",[a.a],Object.getOwnPropertyDescriptor(o.prototype,"toggleFullscreen"),o.prototype),babelHelpers.applyDecoratedDescriptor(o.prototype,"exitFullscreen",[a.a],Object.getOwnPropertyDescriptor(o.prototype,"exitFullscreen"),o.prototype),babelHelpers.applyDecoratedDescriptor(o.prototype,"handleFullscreenEvent",[a.a,i.action],Object.getOwnPropertyDescriptor(o.prototype,"handleFullscreenEvent"),o.prototype),babelHelpers.applyDecoratedDescriptor(o.prototype,"setRef",[a.a],Object.getOwnPropertyDescriptor(o.prototype,"setRef"),o.prototype),o)},"./src/udemy/js/utils/hotkeys.js":function(e,t,r){"use strict";var o,s,a,i=r("./node_modules/autobind-decorator/lib/esm/index.js"),n=r("./src/udemy/js/utils/a11y.js"),l=(a=s=function(){function e(t){babelHelpers.classCallCheck(this,e),this.container=t,this.registry={}}return babelHelpers.createClass(e,[{key:"makeReference",value:function(e,t){return[].concat(babelHelpers.toConsumableArray(e),[t]).join("+").toUpperCase()}},{key:"keyStringToReference",value:function(t){var r=t.split("+"),o=r.pop(),s=r.map((function(t){if(e.MODIFIERS[t])return e.MODIFIERS[t];if(e.BROWSER_MODIFIERS[t])throw new Error("".concat(t," cannot be as a modifier, it is reserved for the browser."));throw new Error("Unknown modifier key, '".concat(t,"'."))})).sort();if(e.MODIFIABLE_KEYS[o])o=e.MODIFIABLE_KEYS[o];else if(s.length)throw new Error("".concat(o," is not a modifiable key."));return this.makeReference(s,o)}},{key:"register",value:function(e,t){var r=this.keyStringToReference(e);Object.keys(this.registry).length||this.container.addEventListener("keydown",this.handleKeyDown),this.registry[r]||(this.registry[r]=[]),this.registry[r].push(t)}},{key:"unregister",value:function(e,t){var r=this.keyStringToReference(e);if(this.registry[r]){var o=this.registry[r].indexOf(t);o<0||(this.registry[r].splice(o,1),this.registry[r].length||delete this.registry[r],Object.keys(this.registry).length||this.container.removeEventListener("keydown",this.handleKeyDown))}}},{key:"registerMap",value:function(e){var t=this;e.forEach((function(e){e.fn&&t.register(e.key,e.fn)}))}},{key:"unregisterMap",value:function(e){var t=this;e.forEach((function(e){e.fn&&t.unregister(e.key,e.fn)}))}},{key:"getModifiers",value:function(t,r){var o=Object.values(e.MODIFIABLE_KEYS).includes(t),s=Object.assign({},e.BROWSER_MODIFIERS,o?e.MODIFIERS:{});return Object.values(s).reduce((function(e,t){return r[t]&&e.push(t),e}),[]).sort()}},{key:"handleKeyDown",value:function(e){var t=e.target||e.toElement||document.activeElement;if(!t||!["input","textarea","button","a","select","option"].includes((r=t).tagName.toLowerCase())&&"button"!==r.getAttribute("role")&&"slider"!==r.getAttribute("role")&&"true"!==r.getAttribute("contenteditable")){var r,o=Object(n.g)(e.key),s=this.getModifiers(o,e),a=this.makeReference(s,o);(this.registry[a]||[]).forEach((function(t){return t(e)}))}}}]),e}(),s.MODIFIABLE_KEYS={space:" ",left:"ArrowLeft",right:"ArrowRight",down:"ArrowDown",up:"ArrowUp",enter:"Enter",escape:"Escape"},s.MODIFIERS={alt:"altKey",shift:"shiftKey"},s.BROWSER_MODIFIERS={ctrl:"ctrlKey",meta:"metaKey"},o=a,babelHelpers.applyDecoratedDescriptor(o.prototype,"handleKeyDown",[i.a],Object.getOwnPropertyDescriptor(o.prototype,"handleKeyDown"),o.prototype),o);t.a=new l(document)},"./src/udemy/js/utils/upow.js":function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));var o=r("./src/udemy/js/utils/handle-import-error.js"),s=[0,128,192,224,240,248,252,254,255];function a(e){return e<0?"":a(Math.floor(e/26)-1)+String.fromCharCode(65+e%26)}function i(e,t){for(var r=0;e>0;)if(e>7){if(0!=t[r])return!1;e-=8,r+=1}else if(e>0){if(0!=(t[r]&s[e]))return!1;break}return!0}function n(e,t,s){return Promise.all([r.e("vendors~create-hmac"),r.e("create-hmac")]).then(r.t.bind(null,"./node_modules/create-hmac/browser.js",7)).then((function(r){for(var o=r.default,n=0;;){var l=a(n),c=o("sha256",e);if(c.update(t+s+l),i(16,c.digest()))return l;n+=1}})).catch(o.a)}},"./src/udemy/js/video-player/captions/captions.mobx-store.js":function(e,t,r){"use strict";var o,s,a,i,n,l,c,p,u,d=r("./node_modules/autobind-decorator/lib/esm/index.js"),h=r("./node_modules/js-cookie/src/js.cookie.js"),m=r.n(h),b=r("./node_modules/mobx/lib/mobx.module.js"),f=r("./node_modules/ua-parser-js/src/ua-parser.js"),y=r.n(f),g=r("./node_modules/video.js/dist/video.cjs.js"),v=r.n(g),w=r("./src/udemy/js/utils/get-config-data.js"),k=r("./src/udemy/js/utils/get-request-data.js"),_=r("./src/udemy/js/video-player/captions/constants.js"),E=r("./src/udemy/js/caption/caption.mobx-model.js"),j=function(e){function t(){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).apply(this,arguments))}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"attachTrack",value:function(e){var t=this;e.addEventListener("load",(function(){Object(b.autorun)((function(){e.track.cues.getCueById(t.id).text=t.text}))}))}}]),t}(r("./src/udemy/js/caption/cue.mobx-model.js").b),D=(o=b.observable.ref,s=function(e){function t(e){var r;return babelHelpers.classCallCheck(this,t),r=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this,e)),babelHelpers.initializerDefineProperty(r,"mode",a,babelHelpers.assertThisInitialized(r)),babelHelpers.initializerDefineProperty(r,"player",i,babelHelpers.assertThisInitialized(r)),babelHelpers.initializerDefineProperty(r,"playerTime",n,babelHelpers.assertThisInitialized(r)),r.textTrack=null,r.label=e.video_label,r}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"constructCue",value:function(e){return new j(e)}},{key:"setMode",value:function(e){this.mode=e}},{key:"attachPlayer",value:function(e,t){var r=this;this.player=e,this.player.on("timeupdate",Object(b.action)((function(){r.playerTime=r.player.currentTime()}))),t&&Object(b.when)((function(){return r.isLoaded}),this.addTrackToPlayer)}},{key:"addTrackToPlayer",value:function(){var e=this;if(this.mode!==_.j.INACTIVE){var t=this.player.addRemoteTextTrack({kind:"captions",src:this.asObjectURL,srclang:this.language,label:this.label},!0);t.track.mode=this.mode,this.textTrack=t.track,this.cues.forEach((function(e){e.attachTrack(t)})),Object(b.autorun)((function(){e.textTrack.mode=e.mode}))}}},{key:"activeCues",get:function(){var e=this;return this.cues.filter((function(t){return t.startTime<=e.playerTime&&t.endTime>e.playerTime}))}},{key:"asObjectURL",get:function(){return URL.createObjectURL(Object(E.a)(this))}}]),t}(E.b),a=babelHelpers.applyDecoratedDescriptor(s.prototype,"mode",[b.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return _.j.HIDDEN}}),i=babelHelpers.applyDecoratedDescriptor(s.prototype,"player",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),n=babelHelpers.applyDecoratedDescriptor(s.prototype,"playerTime",[b.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),babelHelpers.applyDecoratedDescriptor(s.prototype,"setMode",[b.action],Object.getOwnPropertyDescriptor(s.prototype,"setMode"),s.prototype),babelHelpers.applyDecoratedDescriptor(s.prototype,"attachPlayer",[b.action],Object.getOwnPropertyDescriptor(s.prototype,"attachPlayer"),s.prototype),babelHelpers.applyDecoratedDescriptor(s.prototype,"addTrackToPlayer",[d.a],Object.getOwnPropertyDescriptor(s.prototype,"addTrackToPlayer"),s.prototype),babelHelpers.applyDecoratedDescriptor(s.prototype,"activeCues",[b.computed],Object.getOwnPropertyDescriptor(s.prototype,"activeCues"),s.prototype),babelHelpers.applyDecoratedDescriptor(s.prototype,"asObjectURL",[b.computed],Object.getOwnPropertyDescriptor(s.prototype,"asObjectURL"),s.prototype),s);r.d(t,"a",(function(){return O}));var S=Object(w.a)(),C=Object(k.a)(),O=(l=b.observable.ref,c=function(){function e(t){var r=this,o=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:babelHelpers.defineProperty({},C.locale.split("_")[0],1),a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];babelHelpers.classCallCheck(this,e),babelHelpers.initializerDefineProperty(this,"captions",p,this),babelHelpers.initializerDefineProperty(this,"player",u,this),this.videoPlayerStore=void 0,this.isDefaultCaptionOn=void 0,t.forEach((function(e){r.addCaptionFromAPI(e)})),this.isDefaultCaptionOn=a,o&&this.autoSelectCaption(),this.languagePriorities=s}return babelHelpers.createClass(e,[{key:"attachPlayerStore",value:function(e){this.videoPlayerStore=e}},{key:"enableNativeTracksForMobile",value:function(){v.a.getTech("Html5").prototype.featuresNativeTextTracks=this.useNativeTextTracks}},{key:"getSortOrder",value:function(e){return this.languagePriorities[e.language]||e.label.codePointAt(0)}},{key:"addCaptionFromAPI",value:function(e){this.captions.push(new D(e))}},{key:"setActiveCaption",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],o=arguments.length>2?arguments[2]:void 0;this.captions.forEach((function(r){t&&r.id===t.id?e.setCaptionMode(r,_.j.ACTIVE,o):r.mode===_.j.ACTIVE&&e.setCaptionMode(r,_.j.HIDDEN,o)})),r&&this.persistSelectedCaption(t)}},{key:"setCaptionMode",value:function(e,t,r){e.setMode(t);var o=r||(t===_.j.ACTIVE?_.d.ON:_.d.OFF);this.trackModeChange(e,o)}},{key:"trackModeChange",value:function(e,t){var r=this;Object(b.when)((function(){return r.player}),(function(){r.videoPlayerStore.trackPlayerControls({type:_.c,language:e.language,action:t})}))}},{key:"loadCaptions",value:function(){this.captions.forEach((function(e){e.loadFromSource()}))}},{key:"updateCaptionModesFromNativeTrack",value:function(){var e;this.captions.forEach((function(t){t.textTrack&&(t.textTrack.mode===_.j.ACTIVE&&(e=t),t.setMode(t.textTrack.mode))})),this.persistSelectedCaption(e)}},{key:"autoSelectCaption",value:function(){var e,t,r,o=m.a.get(_.b);if(void 0!==o){if(!o)return;e=o}var s,a,i,n=C.locale.substr(0,2),l=S.brand;("en"!==n&&(!l.has_organization||l.is_autoshow_cc_enabled)||this.isDefaultCaptionOn)&&(t=n,r="en"),this.captions.forEach((function(o){e&&o.language===e?s=o:t&&o.language===t?a=o:r&&o.language===r&&(i=o)}));var c,p=!1;if(s?c=s:a?(c=a,p=!0):i&&(c=i,p=!0),c){var u=p?_.d.ON_AUTO:_.d.ON_COOKIE;this.setActiveCaption(c,!1,u)}}},{key:"persistSelectedCaption",value:function(e){m.a.set(_.b,e?e.language:"",{expires:30,path:"/"})}},{key:"attachPlayer",value:function(e){var t=this;this.player=e,this.captions.forEach((function(r){r.attachPlayer(e,t.useNativeTextTracks)})),this.useNativeTextTracks&&e.textTracks().addEventListener("change",this.updateCaptionModesFromNativeTrack)}},{key:"sortedCaptions",get:function(){var e=this;return this.captions.sort((function(t,r){return e.getSortOrder(t)-e.getSortOrder(r)}))}},{key:"useNativeTextTracks",get:function(){var e=new y.a,t=e.getOS().name,r=e.getBrowser().name;return"iOS"===t||"Android"===t&&"Chrome"===r}},{key:"isLoaded",get:function(){return this.captions.every((function(e){return e.isLoaded}))}},{key:"hasError",get:function(){return this.captions.some((function(e){return e.error}))}},{key:"activeTracks",get:function(){return this.captions.filter((function(e){return e.mode===_.j.ACTIVE}))}},{key:"hasMachineTranslatedCaptions",get:function(){return this.captions.some((function(e){return e.isTranslation}))}}]),e}(),p=babelHelpers.applyDecoratedDescriptor(c.prototype,"captions",[b.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),u=babelHelpers.applyDecoratedDescriptor(c.prototype,"player",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),babelHelpers.applyDecoratedDescriptor(c.prototype,"getSortOrder",[d.a],Object.getOwnPropertyDescriptor(c.prototype,"getSortOrder"),c.prototype),babelHelpers.applyDecoratedDescriptor(c.prototype,"sortedCaptions",[b.computed],Object.getOwnPropertyDescriptor(c.prototype,"sortedCaptions"),c.prototype),babelHelpers.applyDecoratedDescriptor(c.prototype,"addCaptionFromAPI",[b.action],Object.getOwnPropertyDescriptor(c.prototype,"addCaptionFromAPI"),c.prototype),babelHelpers.applyDecoratedDescriptor(c.prototype,"updateCaptionModesFromNativeTrack",[d.a],Object.getOwnPropertyDescriptor(c.prototype,"updateCaptionModesFromNativeTrack"),c.prototype),babelHelpers.applyDecoratedDescriptor(c.prototype,"attachPlayer",[b.action],Object.getOwnPropertyDescriptor(c.prototype,"attachPlayer"),c.prototype),babelHelpers.applyDecoratedDescriptor(c.prototype,"isLoaded",[b.computed],Object.getOwnPropertyDescriptor(c.prototype,"isLoaded"),c.prototype),babelHelpers.applyDecoratedDescriptor(c.prototype,"hasError",[b.computed],Object.getOwnPropertyDescriptor(c.prototype,"hasError"),c.prototype),babelHelpers.applyDecoratedDescriptor(c.prototype,"activeTracks",[b.computed],Object.getOwnPropertyDescriptor(c.prototype,"activeTracks"),c.prototype),babelHelpers.applyDecoratedDescriptor(c.prototype,"hasMachineTranslatedCaptions",[b.computed],Object.getOwnPropertyDescriptor(c.prototype,"hasMachineTranslatedCaptions"),c.prototype),c)},"./src/udemy/js/video-player/captions/constants.js":function(e,t,r){"use strict";r.d(t,"i",(function(){return o})),r.d(t,"h",(function(){return s})),r.d(t,"e",(function(){return a})),r.d(t,"k",(function(){return i})),r.d(t,"f",(function(){return n})),r.d(t,"g",(function(){return l})),r.d(t,"l",(function(){return c})),r.d(t,"a",(function(){return p})),r.d(t,"b",(function(){return u})),r.d(t,"c",(function(){return d})),r.d(t,"d",(function(){return h})),r.d(t,"j",(function(){return m}));var o=Object.freeze({TRACKS:"tracks",SETTINGS:"settings",FONT_SIZE:"fonts",OPACITY:"opacity"}),s=Object.freeze([50,75,100,150,200]),a=100,i=Object.freeze([0,25,50,75,100]),n=75,l=!1,c="captionsettings",p={FONT_SIZE_DEFAULT:24,FONT_SIZE_MIN:15},u="caption",d="captionstrackchange",h=Object.freeze({ON:"on",ON_AUTO:"on_auto",ON_COOKIE:"on_cookie",OFF:"off"}),m=Object.freeze({ACTIVE:"showing",INACTIVE:"disabled",HIDDEN:"hidden"})},"./src/udemy/js/video-player/captions/cue-display/captions-display.less":function(e,t,r){e.exports={"captions-container":"captions-display--captions-container--1-aQJ","user-inactive":"captions-display--user-inactive--2QVjh","captions-cue-text":"captions-display--captions-cue-text--ECkJu"}},"./src/udemy/js/video-player/captions/cue-display/well.less":function(e,t,r){e.exports={container:"well--container--2edq4",text:"well--text--2H_p0","transition-active":"well--transition-active--35hDP"}},"./src/udemy/js/video-player/constants.js":function(e,t,r){"use strict";r.d(t,"g",(function(){return o})),r.d(t,"c",(function(){return s})),r.d(t,"b",(function(){return a})),r.d(t,"f",(function(){return i})),r.d(t,"d",(function(){return n})),r.d(t,"e",(function(){return l})),r.d(t,"a",(function(){return c}));var o="video-js",s=2e3,a=(Object.freeze({CAPTIONS:"captions",SNEAK_PEEK:"metadata"}),Object.freeze({NONE:"none",PLAYBACK_RATE:"playback-rate",CAPTIONS:"captions",SETTINGS:"settings"})),i=5,n=Object.freeze({PLAY_PAUSE:"play-pause",SEEK_BACK:"seek-back",SEEK_FORWARD:"seek-forward",SPEED_DOWN:"speed-down",SPEED_UP:"speed-up",VOLUME_DOWN:"volume-down",VOLUME_UP:"volume-up",TOGGLE_FULLSCREEN:"fullscreen",TOGGLE_MUTE:"mute"}),l=Object.freeze({INITIAL_START:"initial_start",HLS_QUALITY_CHANGE:"hls_quality_change",UNBUFFERED_SEEK:"unbuffered_seek",BUFFERED_SEEK:"buffered_seek",WAITING:"waiting"}),c="Video Controls"},"./src/udemy/js/video-player/control-bar/control-bar-button.less":function(e,t,r){e.exports={button:"control-bar-button--button--20ibv","button--open":"control-bar-button--button--open--3aJfZ",icon:"control-bar-button--icon--28inh"}},"./src/udemy/js/video-player/control-bar/control-bar-button.react-component.js":function(e,t,r){"use strict";r.d(t,"a",(function(){return v}));var o,s,a,i=r("./node_modules/classnames/index.js"),n=r.n(i),l=r("./node_modules/lodash-es/noop.js"),c=r("./node_modules/prop-types/index.js"),p=r.n(c),u=r("./node_modules/react/index.js"),d=r.n(u),h=r("./src/udemy/js/base-components/button.react-component.js"),m=r("./src/udemy/js/base-components/icon.react-component.js"),b=r("./src/udemy/js/video-player/forward-ref.js"),f=r("./src/udemy/js/video-player/video-player-tooltip.react-component.js"),y=r("./src/udemy/js/video-player/control-bar/control-bar-button.less"),g=r.n(y),v=Object(b.a)((a=s=function(e){function t(){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).apply(this,arguments))}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"render",value:function(){return this.props.showTooltip?d.a.createElement(f.a,{text:this.props.helpText,isMenuOpen:this.props.isMenuOpen},this.button):this.button}},{key:"button",get:function(){var e=this.props,t=e.onClick,r=e.icon,o=e.helpText,s=e.isMenuOpen,a=e.className,i=(e.showTooltip,e.forwardedRef),l=babelHelpers.objectWithoutProperties(e,["onClick","icon","helpText","isMenuOpen","className","showTooltip","forwardedRef"]),c=n()(a,g.a[s?"button--open":"button"]);return d.a.createElement(h.default,Object.assign({"aria-label":o,bsStyle:"text",className:c,onClick:t},l,{ref:i}),d.a.createElement(m.a,{glyph:r,className:"control-bar-button--icon--28inh"}))}}]),t}(d.a.Component),s.propTypes={icon:p.a.string.isRequired,helpText:p.a.string.isRequired,onClick:p.a.func,isMenuOpen:p.a.bool,className:p.a.string,showTooltip:p.a.bool,forwardedRef:p.a.any},s.defaultProps={onClick:l.a,isMenuOpen:!1,className:"",showTooltip:!0,forwardedRef:null},o=a))||o},"./src/udemy/js/video-player/control-bar/control-bar.less":function(e,t,r){e.exports={"popover-area":"control-bar--popover-area--1LX56","control-bar-container":"control-bar--control-bar-container--16vzi","control-bar":"control-bar--control-bar--MweER",spacer:"control-bar--spacer--32VvX"}},"./src/udemy/js/video-player/control-bar/controls.js":function(e,t,r){"use strict";var o,s,a,i=r("./node_modules/mobx-react/index.module.js"),n=r("./node_modules/prop-types/index.js"),l=r.n(n),c=r("./node_modules/react/index.js"),p=r.n(c),u=r("./src/udemy/js/base-components/dropdown.react-component.js"),d=r("./src/udemy/js/video-player/control-bar/control-bar-button.react-component.js"),h=r("./src/udemy/js/video-player/forward-ref.js"),m=r("./src/udemy/js/video-player/captions/constants.js"),b=r("./node_modules/autobind-decorator/lib/esm/index.js"),f=r("./node_modules/lodash-es/noop.js"),y=r("./src/udemy/js/base-components/form/checkbox.react-component.js"),g=r("./node_modules/classnames/index.js"),v=r.n(g),w=r("./src/udemy/js/base-components/dropdown-menu.react-component.js"),k=r("./src/udemy/js/video-player/control-bar/menu.less"),_=r.n(k),E=Object(i.d)((a=s=function(e){function t(){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).apply(this,arguments))}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"componentDidMount",value:function(){this.focusNext()}},{key:"render",value:function(){var e=this.props,t=e.className,r=e.style,o=e.playerHeight,s=e.forwardedRef,a=babelHelpers.objectWithoutProperties(e,["className","style","playerHeight","forwardedRef"]),i="".concat(.7*o,"px");return p.a.createElement(w.default,Object.assign({className:v()(_.a.menu,t),style:babelHelpers.objectSpread({},r,{maxHeight:i})},a,{ref:s}))}}]),t}(p.a.Component),s.propTypes={className:l.a.string,forwardedRef:l.a.any,style:l.a.object,playerHeight:l.a.number,bsRole:l.a.string},s.defaultProps={forwardedRef:null,className:null,style:{},playerHeight:0,bsRole:"menu"},o=a))||o;E.prototype.getFocusableMenuItems=w.default.prototype.getFocusableMenuItems,E.prototype.getItemsAndActiveIndex=w.default.prototype.getItemsAndActiveIndex,E.prototype.focusNext=w.default.prototype.focusNext;var j,D,S,C,O,P,T,x,R,H,A,I,L,M,N,F,U,z,B,q,G,V,K,W,Y,X,Q,J,Z,$,ee,te,re,oe,se,ae,ie,ne,le,ce,pe,ue=Object(h.a)(E),de=r("./src/udemy/js/video-player/control-bar/menu-item.react-component.js"),he=r("./src/udemy/js/video-player/utils.js"),me=(j=Object(i.c)("captionDisplayStore"),Object(h.a)(D=j(D=Object(i.d)((O=C=function(e){function t(){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).apply(this,arguments))}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"goToTracks",value:function(){this.props.captionDisplayStore.setSubmenu(m.i.TRACKS)}},{key:"goToFontSize",value:function(){this.props.captionDisplayStore.setSubmenu(m.i.FONT_SIZE)}},{key:"goToOpacity",value:function(){this.props.captionDisplayStore.setSubmenu(m.i.OPACITY)}},{key:"render",value:function(){var e=this.props,t=e.captionDisplayStore,r=babelHelpers.objectWithoutProperties(e,["captionDisplayStore"]);return p.a.createElement(ue,Object.assign({className:"menu--captions-menu--beS8H"},r),p.a.createElement(de.a,{onClick:this.goToTracks,"data-purpose":"go-to-tracks",className:"menu--submenu--left--jd901"},gettext("Caption Settings")),p.a.createElement(de.a,{divider:!0}),p.a.createElement(de.a,{onClick:this.goToFontSize,"data-purpose":"go-to-font-size",className:"menu--submenu--right--r72AF"},p.a.createElement("span",null,gettext("Font Size")),p.a.createElement("span",{"data-purpose":"current-font-size",className:"menu--current-value--2R8Lp"},"".concat(t.activeFontSize,"%"))),p.a.createElement(de.a,{onClick:this.goToOpacity,"data-purpose":"go-to-opacity",className:"menu--submenu--right--r72AF"},p.a.createElement("span",null,gettext("Background Opacity")),p.a.createElement("span",{"data-purpose":"current-opacity",className:"menu--current-value--2R8Lp"},"".concat(t.activeOpacity,"%"))),this.wellSetting,p.a.createElement(de.a,{onClick:t.reset,"data-purpose":"reset"},gettext("Reset")))}},{key:"wellSetting",get:function(){return he.a.isMobile?null:p.a.createElement(de.a,{onClick:this.props.captionDisplayStore.toggleWellEnabled},p.a.createElement(y.a,{inline:!0,slide:!0,checked:this.props.captionDisplayStore.isWellEnabled,onChange:f.a,className:"menu--well-setting--2lWNm"},gettext("Display under video")))}}]),t}(p.a.Component),C.propTypes={bsRole:l.a.string,captionDisplayStore:l.a.object.isRequired},C.defaultProps={bsRole:"menu"},S=O,babelHelpers.applyDecoratedDescriptor(S.prototype,"goToTracks",[b.a],Object.getOwnPropertyDescriptor(S.prototype,"goToTracks"),S.prototype),babelHelpers.applyDecoratedDescriptor(S.prototype,"goToFontSize",[b.a],Object.getOwnPropertyDescriptor(S.prototype,"goToFontSize"),S.prototype),babelHelpers.applyDecoratedDescriptor(S.prototype,"goToOpacity",[b.a],Object.getOwnPropertyDescriptor(S.prototype,"goToOpacity"),S.prototype),D=S))||D)||D)||D),be=Object(i.c)("captionDisplayStore")((R=x=function(e){function t(){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).apply(this,arguments))}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"onClick",value:function(){this.props.captionDisplayStore.selectFontSize(this.props.size)}},{key:"render",value:function(){var e=this.props,t=e.size,r=(e.captionDisplayStore,babelHelpers.objectWithoutProperties(e,["size","captionDisplayStore"]));return p.a.createElement(de.a,Object.assign({},r,{onClick:this.onClick,className:"menu--menu--2Pw42 menu--item--2IgLt"}),"".concat(t,"%"))}}]),t}(p.a.Component),x.propTypes={captionDisplayStore:l.a.object.isRequired,size:l.a.number.isRequired},T=R,babelHelpers.applyDecoratedDescriptor(T.prototype,"onClick",[b.a],Object.getOwnPropertyDescriptor(T.prototype,"onClick"),T.prototype),P=T))||P,fe=(H=Object(i.c)("captionDisplayStore"),Object(h.a)(A=H(A=Object(i.d)((M=L=function(e){function t(){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).apply(this,arguments))}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"goToSettings",value:function(){this.props.captionDisplayStore.setSubmenu(m.i.SETTINGS)}},{key:"render",value:function(){var e=this.props,t=e.captionDisplayStore,r=babelHelpers.objectWithoutProperties(e,["captionDisplayStore"]);return p.a.createElement(ue,Object.assign({className:"menu--captions-menu--beS8H",player:t.player},r),p.a.createElement(de.a,{onClick:this.goToSettings,"data-purpose":"go-to-settings",className:"menu--submenu--left--jd901"},gettext("Font Size")),p.a.createElement(de.a,{divider:!0}),this.fontSizeItems)}},{key:"fontSizeItems",get:function(){var e=this;return m.h.map((function(t){return p.a.createElement(be,{key:t,size:t,active:e.props.captionDisplayStore.activeFontSize===t})}))}}]),t}(p.a.Component),L.propTypes={bsRole:l.a.string,captionDisplayStore:l.a.object.isRequired},L.defaultProps={bsRole:"menu"},I=M,babelHelpers.applyDecoratedDescriptor(I.prototype,"goToSettings",[b.a],Object.getOwnPropertyDescriptor(I.prototype,"goToSettings"),I.prototype),A=I))||A)||A)||A),ye=Object(i.c)("captionDisplayStore")((z=U=function(e){function t(){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).apply(this,arguments))}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"onClick",value:function(){this.props.captionDisplayStore.selectTrackOpacity(this.props.opacity)}},{key:"render",value:function(){var e=this.props,t=e.opacity,r=(e.captionDisplayStore,babelHelpers.objectWithoutProperties(e,["opacity","captionDisplayStore"]));return p.a.createElement(de.a,Object.assign({},r,{onClick:this.onClick,className:"menu--menu--2Pw42 menu--item--2IgLt"}),"".concat(t,"%"))}}]),t}(p.a.Component),U.propTypes={captionDisplayStore:l.a.object.isRequired,opacity:l.a.number.isRequired},F=z,babelHelpers.applyDecoratedDescriptor(F.prototype,"onClick",[b.a],Object.getOwnPropertyDescriptor(F.prototype,"onClick"),F.prototype),N=F))||N,ge=(B=Object(i.c)("captionDisplayStore"),Object(h.a)(q=B(q=Object(i.d)((K=V=function(e){function t(){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).apply(this,arguments))}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"goToSettings",value:function(){this.props.captionDisplayStore.setSubmenu(m.i.SETTINGS)}},{key:"render",value:function(){var e=this.props,t=e.captionDisplayStore,r=babelHelpers.objectWithoutProperties(e,["captionDisplayStore"]);return p.a.createElement(ue,Object.assign({className:"menu--captions-menu--beS8H",player:t.player},r),p.a.createElement(de.a,{onClick:this.goToSettings,"data-purpose":"go-to-settings",className:"menu--submenu--left--jd901"},gettext("Background Opacity")),p.a.createElement(de.a,{divider:!0}),this.opacityItems)}},{key:"opacityItems",get:function(){var e=this;return m.k.map((function(t){return p.a.createElement(ye,{key:t,opacity:t,active:e.props.captionDisplayStore.activeOpacity===t})}))}}]),t}(p.a.Component),V.propTypes={bsRole:l.a.string,captionDisplayStore:l.a.object.isRequired},V.defaultProps={bsRole:"menu"},G=K,babelHelpers.applyDecoratedDescriptor(G.prototype,"goToSettings",[b.a],Object.getOwnPropertyDescriptor(G.prototype,"goToSettings"),G.prototype),q=G))||q)||q)||q),ve=r("./src/udemy/js/base-components/image.react-component.js"),we=Object(i.c)("captionsStore")((Q=X=function(e){function t(){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).apply(this,arguments))}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"onClick",value:function(){this.props.captionsStore.setActiveCaption(this.props.track)}},{key:"render",value:function(){var e=this.props,t=e.track,r=(e.captionsStore,babelHelpers.objectWithoutProperties(e,["track","captionsStore"])),o=t?t.label:gettext("Off");return p.a.createElement(de.a,Object.assign({},r,{onClick:this.onClick,className:"menu--menu--2Pw42 menu--item--2IgLt"}),o)}}]),t}(p.a.Component),X.propTypes={captionsStore:l.a.object.isRequired,track:l.a.object},X.defaultProps={track:null},Y=Q,babelHelpers.applyDecoratedDescriptor(Y.prototype,"onClick",[b.a],Object.getOwnPropertyDescriptor(Y.prototype,"onClick"),Y.prototype),W=Y))||W,ke=(J=Object(i.c)("captionDisplayStore","captionsStore"),Object(h.a)(Z=J(Z=Object(i.d)((te=ee=function(e){function t(){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).apply(this,arguments))}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"goToSettings",value:function(){this.props.captionDisplayStore.setSubmenu(m.i.SETTINGS)}},{key:"render",value:function(){var e=this.props,t=e.captionDisplayStore,r=(e.captionsStore,e.extraCaptionMenuItems,babelHelpers.objectWithoutProperties(e,["captionDisplayStore","captionsStore","extraCaptionMenuItems"]));return p.a.createElement(ue,Object.assign({className:"menu--captions-menu--beS8H"},r),p.a.createElement(we,{active:!t.activeTrack}),this.trackItems,this.attribution,p.a.createElement(de.a,{divider:!0}),this.extraCaptionsMenuItems,p.a.createElement(de.a,{className:"menu--submenu--right--r72AF","data-purpose":"go-to-settings",onClick:this.goToSettings},gettext("Caption Settings")))}},{key:"trackItems",get:function(){return this.props.captionsStore.sortedCaptions.map((function(e){return p.a.createElement(we,{key:e.id,track:e,active:e.mode===m.j.ACTIVE})}))}},{key:"attribution",get:function(){return this.props.captionsStore.hasMachineTranslatedCaptions?p.a.createElement(de.a,{href:"http://translate.google.com",target:"blank_","data-purpose":"attribution-link"},p.a.createElement(ve.a,{alt:gettext("Translated by Google"),width:244,height:32,src:"/staticx/udemy/images/content-l10n/translated-by-google.png"})):null}},{key:"extraCaptionsMenuItems",get:function(){if(0!==this.props.extraCaptionMenuItems.length)return this.props.extraCaptionMenuItems.map((function(e,t){return p.a.createElement(de.a,{key:t,"data-purpose":"extra-menu-item"}," ",e)}))}}]),t}(p.a.Component),ee.propTypes={bsRole:l.a.string,captionDisplayStore:l.a.object.isRequired,captionsStore:l.a.object.isRequired,extraCaptionMenuItems:l.a.array},ee.defaultProps={bsRole:"menu",extraCaptionMenuItems:[]},$=te,babelHelpers.applyDecoratedDescriptor($.prototype,"goToSettings",[b.a],Object.getOwnPropertyDescriptor($.prototype,"goToSettings"),$.prototype),Z=$))||Z)||Z)||Z),_e=Object(h.a)((se=oe=function(e){function t(){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).apply(this,arguments))}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"render",value:function(){var e=this.props,t=e.menuPage,r=e.extraCaptionMenuItems,o=babelHelpers.objectWithoutProperties(e,["menuPage","extraCaptionMenuItems"]);switch(t){case m.i.TRACKS:return p.a.createElement(ke,Object.assign({extraCaptionMenuItems:r},o));case m.i.SETTINGS:return p.a.createElement(me,o);case m.i.FONT_SIZE:return p.a.createElement(fe,o);case m.i.OPACITY:return p.a.createElement(ge,o)}}}]),t}(p.a.Component),oe.propTypes={bsRole:l.a.string,menuPage:l.a.oneOf(Object.values(m.i)).isRequired,extraCaptionMenuItems:l.a.array},oe.defaultProps={bsRole:"menu",extraCaptionMenuItems:[]},re=se))||re,Ee=Object(i.c)("captionDisplayStore","captionsStore","videoPlayerStore")(ae=Object(i.d)((ne=ie=function(e){function t(){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).apply(this,arguments))}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"render",value:function(){var e=this.props,t=e.captionDisplayStore,r=e.captionsStore,o=e.extraCaptionMenuItems,s=e.videoPlayerStore;return r.captions.length?p.a.createElement(i.b,{menuStore:t},p.a.createElement(u.default,{id:"captions-menu",dropup:!0,pullRight:!0,open:t.isMenuOpen,onToggle:t.toggleMenu,className:"menu--dropdown--3Vksr","data-purpose":"captions-menu-button"},p.a.createElement(d.a,{bsRole:"toggle",helpText:gettext("Captions"),isMenuOpen:t.isMenuOpen,icon:"closed-caption"}),p.a.createElement(_e,{bsRole:"menu",extraCaptionMenuItems:o,menuPage:t.menuPage,playerHeight:s.playerHeight}))):null}}]),t}(p.a.Component),ie.propTypes={captionDisplayStore:l.a.object.isRequired,captionsStore:l.a.object.isRequired,extraCaptionMenuItems:l.a.array,videoPlayerStore:l.a.object.isRequired},ie.defaultProps={extraCaptionMenuItems:[]},ae=ne))||ae)||ae,je=r("./src/udemy/js/base-components/button.react-component.js"),De=r("./src/udemy/js/video-player/control-bar/control-bar-button.less"),Se=r.n(De),Ce=r("./src/udemy/js/video-player/video-player-tooltip.react-component.js"),Oe=r("./src/udemy/js/video-player/playback-rate/playback-rate.less"),Pe=r.n(Oe),Te=function(e){function t(){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).apply(this,arguments))}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"render",value:function(){var e=this.props,t=e.isMenuOpen,r=e.playbackRate,o=babelHelpers.objectWithoutProperties(e,["isMenuOpen","playbackRate"]),s=v()(Se.a[t?"button--open":"button"],Pe.a["playback-rate"],Pe.a["playback-rate-value"]);return p.a.createElement(Ce.a,{text:gettext("Playback Rate"),isMenuOpen:t},p.a.createElement(je.default,Object.assign({"aria-label":gettext("Playback Rate"),bsStyle:"text","data-purpose":"playback-rate-button",className:s},o),r))}}]),t}(p.a.Component);Te.propTypes={playbackRate:l.a.number.isRequired,isMenuOpen:l.a.bool},Te.defaultProps={isMenuOpen:!1};var xe,Re,He,Ae,Ie,Le,Me,Ne,Fe,Ue,ze,Be,qe,Ge,Ve,Ke,We,Ye,Xe,Qe,Je,Ze,$e,et,tt,rt,ot,st,at,it,nt,lt,ct,pt=(pe=ce=function(e){function t(){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).apply(this,arguments))}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"choosePlaybackRate",value:function(){this.props.store.choosePlaybackRate(this.props.playbackRate)}},{key:"render",value:function(){var e=this.props,t=(e.playbackRate,e.store,babelHelpers.objectWithoutProperties(e,["playbackRate","store"]));return p.a.createElement(de.a,Object.assign({onClick:this.choosePlaybackRate},t),p.a.createElement("span",{className:"playback-rate--playback-rate--1XOKO"},this.props.children))}}]),t}(p.a.Component),ce.propTypes={playbackRate:l.a.number.isRequired,store:l.a.object.isRequired},le=pe,babelHelpers.applyDecoratedDescriptor(le.prototype,"choosePlaybackRate",[b.a],Object.getOwnPropertyDescriptor(le.prototype,"choosePlaybackRate"),le.prototype),le),ut=r("./node_modules/mobx/lib/mobx.module.js"),dt=r("./src/udemy/js/video-player/constants.js"),ht=(xe=function(){function e(t){babelHelpers.classCallCheck(this,e),this.controlBarStore=t}return babelHelpers.createClass(e,[{key:"toggleMenu",value:function(e){e?this.openMenu():this.closeMenu()}},{key:"openMenu",value:function(){this.controlBarStore.setMenuOpen(dt.b.PLAYBACK_RATE)}},{key:"closeMenu",value:function(){this.controlBarStore.setMenuClosed()}},{key:"isMenuOpen",get:function(){return this.controlBarStore.activeMenu===dt.b.PLAYBACK_RATE}}]),e}(),babelHelpers.applyDecoratedDescriptor(xe.prototype,"toggleMenu",[b.a],Object.getOwnPropertyDescriptor(xe.prototype,"toggleMenu"),xe.prototype),babelHelpers.applyDecoratedDescriptor(xe.prototype,"openMenu",[b.a],Object.getOwnPropertyDescriptor(xe.prototype,"openMenu"),xe.prototype),babelHelpers.applyDecoratedDescriptor(xe.prototype,"closeMenu",[b.a],Object.getOwnPropertyDescriptor(xe.prototype,"closeMenu"),xe.prototype),babelHelpers.applyDecoratedDescriptor(xe.prototype,"isMenuOpen",[ut.computed],Object.getOwnPropertyDescriptor(xe.prototype,"isMenuOpen"),xe.prototype),xe),mt=Object(i.c)("videoPlayerStore","controlBarStore")(Re=Object(i.d)((Ae=He=function(e){function t(e){var r;return babelHelpers.classCallCheck(this,t),(r=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this,e))).store=new ht(r.props.controlBarStore),r}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"renderMenu",value:function(){var e=this.props.videoPlayerStore,t=e.playerHeight,r=e.playbackRateStore,o=r.availablePlaybackRates,s=r.playbackRate;return p.a.createElement(u.default,{dropup:!0,pullRight:!0,open:this.store.isMenuOpen,onToggle:this.store.toggleMenu,className:_.a.dropdown,"data-purpose":"playback-rate-menu",id:"playback-rate-menu"},p.a.createElement(Te,{playbackRate:s,isMenuOpen:this.store.isMenuOpen,bsRole:"toggle"}),p.a.createElement(ue,{className:_.a["playback-rate-menu"],playerHeight:t},o.map((function(e){return p.a.createElement(pt,{key:e,active:e===s,playbackRate:e,store:r},e)}))))}},{key:"render",value:function(){return p.a.createElement(i.b,{menuStore:this.store},p.a.createElement("div",{className:Pe.a.menu},this.renderMenu()))}}]),t}(p.a.Component),He.propTypes={videoPlayerStore:l.a.object.isRequired,controlBarStore:l.a.object.isRequired},Re=Ae))||Re)||Re,bt=(Me=Le=function(e){function t(){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).apply(this,arguments))}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"chooseResolution",value:function(){this.props.store.chooseResolution(this.props.resolution)}},{key:"render",value:function(){var e=this.props,t=(e.resolution,e.store,babelHelpers.objectWithoutProperties(e,["resolution","store"]));return p.a.createElement(de.a,Object.assign({onClick:this.chooseResolution},t),this.props.children)}}]),t}(p.a.Component),Le.propTypes={resolution:l.a.object.isRequired,store:l.a.object.isRequired},Ie=Me,babelHelpers.applyDecoratedDescriptor(Ie.prototype,"chooseResolution",[b.a],Object.getOwnPropertyDescriptor(Ie.prototype,"chooseResolution"),Ie.prototype),Ie),ft=(Ne=function(){function e(t){babelHelpers.classCallCheck(this,e),this.controlBarStore=t}return babelHelpers.createClass(e,[{key:"toggleMenu",value:function(e){e?this.openMenu():this.closeMenu()}},{key:"openMenu",value:function(){this.controlBarStore.setMenuOpen(dt.b.SETTINGS)}},{key:"closeMenu",value:function(){this.controlBarStore.setMenuClosed()}},{key:"isMenuOpen",get:function(){return this.controlBarStore.activeMenu===dt.b.SETTINGS}}]),e}(),babelHelpers.applyDecoratedDescriptor(Ne.prototype,"toggleMenu",[b.a],Object.getOwnPropertyDescriptor(Ne.prototype,"toggleMenu"),Ne.prototype),babelHelpers.applyDecoratedDescriptor(Ne.prototype,"openMenu",[b.a],Object.getOwnPropertyDescriptor(Ne.prototype,"openMenu"),Ne.prototype),babelHelpers.applyDecoratedDescriptor(Ne.prototype,"closeMenu",[b.a],Object.getOwnPropertyDescriptor(Ne.prototype,"closeMenu"),Ne.prototype),babelHelpers.applyDecoratedDescriptor(Ne.prototype,"isMenuOpen",[ut.computed],Object.getOwnPropertyDescriptor(Ne.prototype,"isMenuOpen"),Ne.prototype),Ne),yt=Object(i.c)("videoPlayerStore","controlBarStore")(Fe=Object(i.d)((ze=Ue=function(e){function t(e){var r;return babelHelpers.classCallCheck(this,t),(r=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this,e))).store=new ft(r.props.controlBarStore),r}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"render",value:function(){var e=this.props.videoPlayerStore,t=e.availableResolutions,r=e.hlsResolution,o=e.playerHeight;return p.a.createElement(i.b,{menuStore:this.store},p.a.createElement(u.default,{dropup:!0,pullRight:!0,open:this.store.isMenuOpen,onToggle:this.store.toggleMenu,className:"menu--dropdown--3Vksr","data-purpose":"settings-menu",id:"settings-menu"},p.a.createElement(d.a,{bsRole:"toggle",isMenuOpen:this.store.isMenuOpen,helpText:gettext("Settings"),icon:"settings","data-purpose":"settings-button"}),p.a.createElement(ue,{className:"menu--settings-menu--26z60",playerHeight:o},t.map((function(t){var o=t.displayLabel,s=t.isHls,a=t.label,i=e.resolution.label===t.label;return s&&i&&r&&(o=interpolate(gettext("Auto (%(resolution)sp)"),{resolution:r},!0)),p.a.createElement(bt,{key:a,resolution:t,active:i,store:e},o)})),this.extraSettings)))}},{key:"extraSettings",get:function(){return p.a.Children.count(this.props.children)?p.a.createElement(p.a.Fragment,null,p.a.createElement(de.a,{key:"divider",divider:!0}),this.props.children):null}}]),t}(p.a.Component),Ue.propTypes={controlBarStore:l.a.object.isRequired,videoPlayerStore:l.a.object.isRequired},Fe=ze))||Fe)||Fe,gt=r("./node_modules/babel-plugin-react-css-modules/dist/browser/getClassName.js"),vt=r.n(gt),wt=r("./node_modules/lodash-es/clamp.js"),kt=r("./src/udemy/js/utils/a11y.js"),_t=(Be=function(){function e(t){babelHelpers.classCallCheck(this,e),babelHelpers.initializerDefineProperty(this,"isOpen",qe,this),babelHelpers.initializerDefineProperty(this,"isDragging",Ge,this),this.volumeStore=t}return babelHelpers.createClass(e,[{key:"setOpen",value:function(e){this.isOpen=e}},{key:"setDragging",value:function(e){this.isDragging=e}},{key:"displayVolume",get:function(){var e=this.volumeStore.isMuted?0:this.volumeStore.volume;return Math.round(100*e)}}]),e}(),qe=babelHelpers.applyDecoratedDescriptor(Be.prototype,"isOpen",[ut.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Ge=babelHelpers.applyDecoratedDescriptor(Be.prototype,"isDragging",[ut.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),babelHelpers.applyDecoratedDescriptor(Be.prototype,"setOpen",[b.a,ut.action],Object.getOwnPropertyDescriptor(Be.prototype,"setOpen"),Be.prototype),babelHelpers.applyDecoratedDescriptor(Be.prototype,"setDragging",[b.a,ut.action],Object.getOwnPropertyDescriptor(Be.prototype,"setDragging"),Be.prototype),babelHelpers.applyDecoratedDescriptor(Be.prototype,"displayVolume",[ut.computed],Object.getOwnPropertyDescriptor(Be.prototype,"displayVolume"),Be.prototype),Be),Et=(r("./src/udemy/js/video-player/volume/volume-control.less"),{"./volume-control.less":{"slider-focus-wrapper":"volume-control--slider-focus-wrapper--1DEg2",slider:"volume-control--slider--3BRkN","slider-inner":"volume-control--slider-inner--2f-Tu",dragging:"volume-control--dragging--124IT","invisible-unless-focussed":"volume-control--invisible-unless-focussed--3LHfG","sr-only":"volume-control--sr-only--3nLsM"}}),jt=Object(i.c)("videoPlayerStore")(Ve=Object(i.d)((Ye=We=function(e){function t(e){var r;return babelHelpers.classCallCheck(this,t),(r=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this,e))).store=new _t(e.videoPlayerStore.volumeStore),r.sliderId=Object(kt.a)("slider"),r}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"openMenu",value:function(){this.store.setOpen(!0)}},{key:"closeMenu",value:function(){this.store.setOpen(!1),this.stopDragging()}},{key:"toggleMuted",value:function(){this.volumeStore.toggleMuted()}},{key:"onMouseMove",value:function(e){if(this.store.isDragging){var t=e.currentTarget.querySelector("#".concat(this.sliderId)).getBoundingClientRect(),r=t.height,o=Object(wt.a)(e.clientY-t.top,0,r);this.volumeStore.chooseVolume(1-o/r)}}},{key:"stopDragging",value:function(){this.store.setDragging(!1)}},{key:"startDragging",value:function(e){this.store.setDragging(!0),this.onMouseMove(e),e.preventDefault()}},{key:"onKeyDown",value:function(e){var t=this;Object(kt.b)((function(){t.volumeStore.volumeDown(.05),e.preventDefault()}))(e),Object(kt.f)((function(){t.volumeStore.volumeUp(.05),e.preventDefault()}))(e),Object(kt.d)((function(){t.toggleMuted(),e.preventDefault()}))(e)}},{key:"render",value:function(){return p.a.createElement("div",{onMouseEnter:this.openMenu,onMouseLeave:this.closeMenu,onMouseUp:this.stopDragging},this.slider,this.controlButton)}},{key:"volumeStore",get:function(){return this.props.videoPlayerStore.volumeStore}},{key:"slider",get:function(){var e=this.store,t=e.displayVolume,r=e.isDragging,o=e.isOpen;return p.a.createElement("div",{"data-purpose":"volume-control-bar",role:"slider","aria-valuemin":"0","aria-valuemax":"100","aria-valuenow":t,"aria-label":gettext("Volume"),tabIndex:0,onKeyDown:this.onKeyDown,onMouseMove:this.onMouseMove,onMouseDown:this.startDragging,className:vt()(v()("slider-focus-wrapper",{dragging:r,"invisible-unless-focussed":!o}),Et)},p.a.createElement("div",{id:this.sliderId,className:"volume-control--slider--3BRkN"},p.a.createElement("div",{className:"volume-control--slider-inner--2f-Tu",style:{height:"".concat(t,"%")}})))}},{key:"controlButton",get:function(){var e={onClick:this.toggleMuted,isMenuOpen:this.store.isOpen,showTooltip:!1,"data-purpose":"volume-control-button"};return this.volumeStore.isMuted?p.a.createElement(d.a,Object.assign({icon:"exp-mute",helpText:gettext("Unmute")},e)):p.a.createElement(d.a,Object.assign({icon:"exp-volume",helpText:gettext("Mute")},e))}}]),t}(p.a.Component),We.propTypes={videoPlayerStore:l.a.object.isRequired},Ke=Ye,babelHelpers.applyDecoratedDescriptor(Ke.prototype,"openMenu",[b.a],Object.getOwnPropertyDescriptor(Ke.prototype,"openMenu"),Ke.prototype),babelHelpers.applyDecoratedDescriptor(Ke.prototype,"closeMenu",[b.a],Object.getOwnPropertyDescriptor(Ke.prototype,"closeMenu"),Ke.prototype),babelHelpers.applyDecoratedDescriptor(Ke.prototype,"toggleMuted",[b.a],Object.getOwnPropertyDescriptor(Ke.prototype,"toggleMuted"),Ke.prototype),babelHelpers.applyDecoratedDescriptor(Ke.prototype,"onMouseMove",[b.a],Object.getOwnPropertyDescriptor(Ke.prototype,"onMouseMove"),Ke.prototype),babelHelpers.applyDecoratedDescriptor(Ke.prototype,"stopDragging",[b.a],Object.getOwnPropertyDescriptor(Ke.prototype,"stopDragging"),Ke.prototype),babelHelpers.applyDecoratedDescriptor(Ke.prototype,"startDragging",[b.a],Object.getOwnPropertyDescriptor(Ke.prototype,"startDragging"),Ke.prototype),babelHelpers.applyDecoratedDescriptor(Ke.prototype,"onKeyDown",[b.a],Object.getOwnPropertyDescriptor(Ke.prototype,"onKeyDown"),Ke.prototype),Ve=Ke))||Ve)||Ve,Dt=(r("./src/udemy/js/video-player/control-bar/forward-skip-button.less"),Object(i.c)("videoPlayerStore")((Je=Qe=function(e){function t(){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).apply(this,arguments))}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"render",value:function(){var e=this.props,t=e.videoPlayerStore,r=babelHelpers.objectWithoutProperties(e,["videoPlayerStore"]);return p.a.createElement(d.a,Object.assign({icon:"exp-skip-forward",helpText:interpolate(gettext("Forward %(seconds)ss"),{seconds:dt.f},!0),className:"forward-skip-button--forward-button--2I186","data-purpose":"forward-skip-button",onClick:t.seekForward},r))}}]),t}(p.a.Component),Qe.propTypes={videoPlayerStore:l.a.object.isRequired},Xe=Je))||Xe),St=Object(i.c)("fullscreenStore")(Ze=Object(i.d)((et=$e=function(e){function t(){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).apply(this,arguments))}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"render",value:function(){var e=this.props,t=e.fullscreenStore,r=babelHelpers.objectWithoutProperties(e,["fullscreenStore"]);return p.a.createElement(d.a,Object.assign({icon:t.isFullscreen?"collapse":"expand",helpText:gettext("Fullscreen"),onClick:t.toggleFullscreen},r))}}]),t}(p.a.Component),$e.propTypes={fullscreenStore:l.a.shape({toggleFullscreen:l.a.func,isFullscreen:l.a.bool}).isRequired},Ze=et))||Ze)||Ze,Ct=r("./src/udemy/js/utils/functions.js"),Ot=Object(i.c)("videoPlayerStore")(tt=Object(i.d)((ot=rt=function(e){function t(){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).apply(this,arguments))}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"render",value:function(){var e=this.props,t=e.videoPlayerStore,r=babelHelpers.objectWithoutProperties(e,["videoPlayerStore"]);return r.onClick=Object(Ct.a)(r.onClick,t.togglePlayPause),t.isPaused?p.a.createElement(d.a,Object.assign({icon:"exp-play",helpText:gettext("Play"),"data-purpose":"play-button"},r)):p.a.createElement(d.a,Object.assign({icon:"exp-pause",helpText:gettext("Pause"),"data-purpose":"pause-button"},r))}}]),t}(p.a.Component),rt.propTypes={videoPlayerStore:l.a.object.isRequired},tt=ot))||tt)||tt,Pt=r("./src/udemy/js/base-components/udlite/duration/duration.react-component.js"),Tt=(r("./src/udemy/js/video-player/control-bar/progress-display.less"),Object(i.c)("videoPlayerStore")(st=Object(i.d)((it=at=function(e){function t(){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).apply(this,arguments))}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"render",value:function(){var e=this.props.videoPlayerStore,t=e.currentTime,r=e.duration;return p.a.createElement("div",{className:"progress-display--progress-display--B20-A","data-purpose":"progress-display"},p.a.createElement(Pt.a,{"data-purpose":"current-time",numSeconds:t,presentationStyle:Pt.a.STYLE.TIMESTAMP}),p.a.createElement("span",null," / "),p.a.createElement(Pt.a,{"data-purpose":"duration",numSeconds:r||0,presentationStyle:Pt.a.STYLE.TIMESTAMP}))}}]),t}(p.a.Component),at.propTypes={videoPlayerStore:l.a.object.isRequired},st=it))||st)||st),xt=(r("./src/udemy/js/video-player/control-bar/rewind-skip-button.less"),Object(i.c)("videoPlayerStore")((ct=lt=function(e){function t(){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).apply(this,arguments))}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"render",value:function(){var e=this.props,t=e.videoPlayerStore,r=babelHelpers.objectWithoutProperties(e,["videoPlayerStore"]);return p.a.createElement(d.a,Object.assign({icon:"exp-skip-back",helpText:interpolate(gettext("Rewind %(seconds)ss"),{seconds:dt.f},!0),className:"rewind-skip-button--rewind-button--2HGPk","data-purpose":"rewind-skip-button",onClick:t.seekBack},r))}}]),t}(p.a.Component),lt.propTypes={videoPlayerStore:l.a.object.isRequired},nt=ct))||nt),Rt=(r("./src/udemy/js/video-player/control-bar/control-bar.less"),function(e){return p.a.createElement("div",Object.assign({className:"control-bar--spacer--32VvX"},e))});r.d(t,"a",(function(){return Ee})),r.d(t,"e",(function(){return mt})),r.d(t,"h",(function(){return yt})),r.d(t,"j",(function(){return jt})),r.d(t,"b",(function(){return Dt})),r.d(t,"c",(function(){return St})),r.d(t,"d",(function(){return Ot})),r.d(t,"f",(function(){return Tt})),r.d(t,"g",(function(){return xt})),r.d(t,"i",(function(){return Rt}))},"./src/udemy/js/video-player/control-bar/forward-skip-button.less":function(e,t,r){e.exports={"forward-button":"forward-skip-button--forward-button--2I186"}},"./src/udemy/js/video-player/control-bar/menu-item.react-component.js":function(e,t,r){"use strict";r.d(t,"a",(function(){return v}));var o,s,a,i,n,l=r("./node_modules/autobind-decorator/lib/esm/index.js"),c=r("./node_modules/lodash-es/noop.js"),p=r("./node_modules/mobx-react/index.module.js"),u=r("./node_modules/prop-types/index.js"),d=r.n(u),h=r("./node_modules/react/index.js"),m=r.n(h),b=r("./src/udemy/js/base-components/menu-item.react-component.js"),f=r("./src/udemy/js/video-player/forward-ref.js"),y=r("./src/udemy/js/video-player/control-bar/menu.less"),g=r.n(y),v=(o=Object(p.c)("menuStore"),Object(f.a)(s=o((n=i=function(e){function t(){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).apply(this,arguments))}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"onSelect",value:function(){var e=this.props,t=e.closeDropdown,r=e.onClick,o=e.menuStore;r.apply(void 0,arguments),t&&o.toggleMenu()}},{key:"render",value:function(){var e=this.props,t=e.children,r=e.className,o=(e.closeDropdown,e.menuStore,e.onClick,e.forwardedRef),s=babelHelpers.objectWithoutProperties(e,["children","className","closeDropdown","menuStore","onClick","forwardedRef"]),a="".concat(r," ").concat(g.a.menu," ").concat(g.a.item);return m.a.createElement(b.a,Object.assign({className:a},s,{onSelect:this.onSelect,ref:o}),t)}}]),t}(m.a.Component),i.propTypes={menuStore:d.a.object.isRequired,onClick:d.a.func,onSelect:d.a.func,className:d.a.string,closeDropdown:d.a.bool,forwardedRef:d.a.any},i.defaultProps={onClick:c.a,onSelect:c.a,className:"",closeDropdown:!1,forwardedRef:null},a=n,babelHelpers.applyDecoratedDescriptor(a.prototype,"onSelect",[l.a],Object.getOwnPropertyDescriptor(a.prototype,"onSelect"),a.prototype),s=a))||s)||s)},"./src/udemy/js/video-player/control-bar/menu.less":function(e,t,r){e.exports={menu:"menu--menu--2Pw42",item:"menu--item--2IgLt","submenu--left":"menu--submenu--left--jd901","submenu--right":"menu--submenu--right--r72AF",dropdown:"menu--dropdown--3Vksr","playback-rate-menu":"menu--playback-rate-menu--11hOW","captions-menu":"menu--captions-menu--beS8H","settings-menu":"menu--settings-menu--26z60","current-value":"menu--current-value--2R8Lp","well-setting":"menu--well-setting--2lWNm"}},"./src/udemy/js/video-player/control-bar/progress-display.less":function(e,t,r){e.exports={"progress-display":"progress-display--progress-display--B20-A"}},"./src/udemy/js/video-player/control-bar/rewind-skip-button.less":function(e,t,r){e.exports={"rewind-button":"rewind-skip-button--rewind-button--2HGPk"}},"./src/udemy/js/video-player/error-display.less":function(e,t,r){e.exports={modal:"error-display--modal--2WrSk"}},"./src/udemy/js/video-player/error-display.react-component.js":function(e,t,r){"use strict";r.d(t,"a",(function(){return b})),r.d(t,"b",(function(){return f}));var o=r("./node_modules/prop-types/index.js"),s=r.n(o),a=r("./node_modules/react/index.js"),i=r.n(a),n=r("./node_modules/react-overlays/lib/Portal.js"),l=r.n(n),c=r("./src/udemy/js/base-components/modal.react-component.js"),p=r("./src/udemy/js/utils/escape/safely-set-inner-html.js"),u=r("./src/udemy/js/utils/get-config-data.js"),d=r("./src/udemy/js/utils/ud-link.js"),h=(r("./src/udemy/js/video-player/error-display.less"),Object(u.a)()),m=d.a.toSupportLink("video_audio_issues_troubleshooting",h.brand.has_organization),b=[i.a.createElement("p",{key:"apology"},gettext("We tried several times to play your video but there was an unforeseen error. We have notified our engineers.")),i.a.createElement("p",Object.assign({key:"systemcheck"},Object(p.a)({descriptionOfCaller:"error-display:system-check-link",html:interpolate(gettext('To check your system configuration, please visit our <a href="%(link)s" target="_blank">system check page</a>.'),{link:d.a.toSupportSystemCheck()},!0)}))),i.a.createElement("p",{key:"codec"},gettext("For some devices, a basic codec pack may need to be added to view this content.")),i.a.createElement("p",Object.assign({key:"tryagain"},Object(p.a)({descriptionOfCaller:"error-display:support-link",html:interpolate(gettext("Please try again in a few minutes or <a %(hyperlink)s>contact support</a>."),{hyperlink:'href="'.concat(m,'" target="_blank"')},!0)})))],f=function(e){function t(){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).apply(this,arguments))}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"render",value:function(){return i.a.createElement(l.a,{container:this.props.player.el()},i.a.createElement("div",null,i.a.createElement(c.a.Dialog,{className:"error-display--modal--2WrSk"},i.a.createElement(c.a.Header,{closeButton:!0,onHide:this.props.store.hideError},i.a.createElement(c.a.Title,null,gettext("Video error"))),i.a.createElement(c.a.Body,null,this.props.errorBody),this.footer)))}},{key:"footer",get:function(){return this.props.errorFooter?i.a.createElement(c.a.Footer,null,this.props.errorFooter):null}}]),t}(i.a.Component);f.propTypes={player:s.a.object.isRequired,store:s.a.object.isRequired,errorBody:s.a.node,errorFooter:s.a.node},f.defaultProps={errorBody:b,errorFooter:null}},"./src/udemy/js/video-player/forward-ref.js":function(e,t,r){"use strict";var o=r("./node_modules/react/index.js"),s=r.n(o);t.a=function(e){var t=s.a.forwardRef((function(t,r){return s.a.createElement(e,Object.assign({forwardedRef:r},t))}));t.displayName=e.displayName;var r=e.propTypes||{},o=(r.forwardedRef,babelHelpers.objectWithoutProperties(r,["forwardedRef"]));t.propTypes=o;var a=e.defaultProps||{},i=(a.forwardedRef,babelHelpers.objectWithoutProperties(a,["forwardedRef"]));return t.defaultProps=i,t}},"./src/udemy/js/video-player/playback-rate/playback-rate.less":function(e,t,r){e.exports={"playback-rate-value":"playback-rate--playback-rate-value--3SJ7v","playback-rate":"playback-rate--playback-rate--1XOKO",menu:"playback-rate--menu--1Nk3X"}},"./src/udemy/js/video-player/user-activity.less":function(e,t,r){e.exports={"user-inactive":"user-activity--user-inactive--2uBeO","hide-when-user-inactive":"user-activity--hide-when-user-inactive--pDPGx"}},"./src/udemy/js/video-player/user-activity.mobx-store.js":function(e,t,r){"use strict";r.d(t,"a",(function(){return h}));var o,s,a,i=r("./node_modules/autobind-decorator/lib/esm/index.js"),n=r("./node_modules/jquery/dist/jquery.js-exposed"),l=r.n(n),c=r("./node_modules/mobx/lib/mobx.module.js"),p=r("./src/udemy/js/video-player/constants.js"),u=r("./src/udemy/js/video-player/user-activity.less"),d=r.n(u),h=(o=function(){function e(){babelHelpers.classCallCheck(this,e),babelHelpers.initializerDefineProperty(this,"isUserActive",s,this),babelHelpers.initializerDefineProperty(this,"isInitialActivationComplete",a,this),this.activityOverride=!1}return babelHelpers.createClass(e,[{key:"setControlBarStore",value:function(e){this.controlBarStore=e}},{key:"setActive",value:function(){this.isUserActive=!0}},{key:"setInactive",value:function(){this.activityOverride||this.controlBarStore&&this.controlBarStore.activeMenu!==p.b.NONE||(this.isUserActive=!1)}},{key:"setActiveOn",value:function(){this.activityOverride=!0,this.setActive()}},{key:"unsetActiveOn",value:function(){this.activityOverride=!1}},{key:"setupPlayerListeners",value:function(e){var t=this;e.on("useractive",this.setActive),e.on("userinactive",this.setInactive),e.listenForUserActivity_(),setTimeout(Object(c.action)((function(){t.isInitialActivationComplete=!0})),p.c+500)}},{key:"addActiveOnHover",value:function(e){(e=l()(e)).on("mouseover",this.setActiveOn),e.on("mouseout",this.unsetActiveOn)}},{key:"addHideOnInactive",value:function(e){(e=l()(e)).addClass(d.a["hide-when-user-inactive"])}}]),e}(),s=babelHelpers.applyDecoratedDescriptor(o.prototype,"isUserActive",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),a=babelHelpers.applyDecoratedDescriptor(o.prototype,"isInitialActivationComplete",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),babelHelpers.applyDecoratedDescriptor(o.prototype,"setActive",[i.a,c.action],Object.getOwnPropertyDescriptor(o.prototype,"setActive"),o.prototype),babelHelpers.applyDecoratedDescriptor(o.prototype,"setInactive",[i.a,c.action],Object.getOwnPropertyDescriptor(o.prototype,"setInactive"),o.prototype),babelHelpers.applyDecoratedDescriptor(o.prototype,"setActiveOn",[i.a],Object.getOwnPropertyDescriptor(o.prototype,"setActiveOn"),o.prototype),babelHelpers.applyDecoratedDescriptor(o.prototype,"unsetActiveOn",[i.a],Object.getOwnPropertyDescriptor(o.prototype,"unsetActiveOn"),o.prototype),o)},"./src/udemy/js/video-player/utils.js":function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));var o=r("./node_modules/ua-parser-js/src/ua-parser.js"),s=new(r.n(o).a);function a(e){if(e){var t=e.match(/^[0-9]+/g);return t?t[0]:void 0}}var i={browser:s.getBrowser(),os:s.getOS(),device:s.getDevice()};i.browser.majorVersion=a(i.browser.version),i.os.majorVersion=a(i.os.version),i.isMobile="mobile"===i.device.type,"Mac OS"===i.os.name&&"MacIntel"===window.navigator.platform&&navigator.maxTouchPoints>1&&(i.os.name="iOS")},"./src/udemy/js/video-player/video-player-tooltip.less":function(e,t,r){e.exports={"video-player-tooltip":"video-player-tooltip--video-player-tooltip--2eO5i"}},"./src/udemy/js/video-player/video-player-tooltip.react-component.js":function(e,t,r){"use strict";var o=r("./node_modules/mobx-react/index.module.js"),s=r("./node_modules/react/index.js"),a=r.n(s),i=r("./src/udemy/js/base-components/tooltip-new.react-component.js"),n=r("./src/udemy/js/video-player/video-player-tooltip.less"),l=r.n(n),c=Object(o.c)("videoPlayerStore")((function(e){var t=e.videoPlayerStore,r=e.text,o=e.isMenuOpen,s=e.children,n=!o&&void 0,c={className:l.a["video-player-tooltip"]},p=t._videoPlayer.controlBar.popoverArea.el();return a.a.createElement(i.a,{text:r,container:p,ignoreOverflow:!0,show:n,contentWrapperProps:c},s)}));t.a=c},"./src/udemy/js/video-player/video-player.less":function(e,t,r){e.exports={container:"video-player--container--YDQRW",center:"video-player--center--2vS3g",right:"video-player--right--3KunI","center-button":"video-player--center-button--aPLkI","play-button":"video-player--play-button--3r0KH","video-wrapper":"video-player--video-wrapper--1L212","video-player":"video-player--video-player--1sfof"}},"./src/udemy/js/video-player/video-player.react-component.js":function(e,t,r){"use strict";var o=r("./node_modules/autobind-decorator/lib/esm/index.js"),s=r("./node_modules/classnames/index.js"),a=r.n(s),i=r("./node_modules/jsuri/Uri.js"),n=r.n(i),l=r("./node_modules/lodash-es/noop.js"),c=r("./node_modules/mobx/lib/mobx.module.js"),p=r("./node_modules/mobx-react/index.module.js"),u=r("./node_modules/prop-types/index.js"),d=r.n(u),h=r("./node_modules/qs/lib/index.js"),m=r.n(h),b=r("./node_modules/react/index.js"),f=r.n(b),y=r("./node_modules/react-measure/lib/react-measure.js"),g=r.n(y),v=r("./node_modules/velocity-react/velocity-transition-group.js"),w=r.n(v),k=r("./assets/udemy/images/v5/icon-play.svg"),_=r.n(k),E=r("./src/udemy/js/base-components/image.react-component.js"),j=r("./src/udemy/js/base-components/loader.react-component.js"),D=r("./src/udemy/js/base-components/safe-anchor.react-component.js"),S=r("./src/udemy/js/utils/fullscreen.js"),C=r("./src/udemy/js/utils/get-config-data.js"),O=r("./src/udemy/js/utils/get-request-data.js"),P=r("./src/udemy/js/utils/hotkeys.js"),T=r("./src/udemy/js/utils/ud-api-stat.js"),x=r("./src/udemy/js/utils/ud-me.js"),R=r("./src/udemy/js/utils/ud-utils.js"),H=(r("./src/udemy/js/video-player/videojs-setup/pre.js"),r("./node_modules/hls.js/dist/hls.js")),A=r.n(H),I=r("./node_modules/video.js/dist/video.cjs.js"),L=r.n(I),M=r("./node_modules/videojs-sneakpeek/dist/videojs-sneakpeek.min.js"),N=r.n(M),F=(r("./node_modules/videojs-mux/dist/videojs-mux.js"),r("./node_modules/lodash-es/partial.js"));var U=L.a.getComponent("Component"),z={slides:[],length:0};var B=L.a.extend(U,{constructor:function(e,t){var r=U.prototype.createEl("div",{className:"vjs-slide-window"});this.imageEl=U.prototype.createEl("img",{src:t.slides[0].url}),r.appendChild(this.imageEl),r.addEventListener("click",(function(){e.paused()?e.play():e.pause()})),t=L.a.mergeOptions({el:r},t),U.call(this,e,t),this.slideNumber_=0,this.on(e,"timeupdate",this.updateSlide),this.slides=this.options_.slides}});B.prototype.minimizeVideo=function(){var e=this.el(),t=this.player().el().getElementsByClassName("vjs-tech")[0];e.classList.remove("mashup-window-content"),e.style.opacity=1,t.classList.add("mashup-window-content")},B.prototype.minimizeSlide=function(){var e=this.el(),t=this.player().el().getElementsByClassName("vjs-tech")[0];e.classList.add("mashup-window-content"),e.style.opacity=.5,t.classList.remove("mashup-window-content")},B.prototype.updateSlide=function(){var e,t=Math.floor(this.player().scrubbing?this.player().getCache().currentTime:this.player().currentTime());for(e=0;e<this.slides.length-1&&!(t<this.slides[e+1].time);e++);e!==this.slideNumber_&&(this.slideNumber_=e,this.imageEl.setAttribute("src",this.slides[this.slideNumber_].url),this.minimizeVideo())},L.a.registerComponent("SlideWindow",B),L.a.registerPlugin("mashup",(function(e){var t=this;e=L.a.mergeOptions(z,e),t.ready((function(){t.on("loadedmetadata",(function(){!function(e,t,r){for(var o,s,a,i=e.controlBar.progressControl.seekBar.el(),n=U.prototype.createEl("div",{className:"vjs-intervals"}),l=100,c=0;c<t.slides.length;c++)l-=o=c===t.slides.length-1?l:Math.round((t.slides[c+1].time-t.slides[c].time)/r*100*100)/100,(s=U.prototype.createEl("div",{className:"vjs-interval"})).style.width="".concat(o,"%"),(a=U.prototype.createEl("div")).appendChild(U.prototype.createEl("img",{src:t.slides[c].url})),s.appendChild(a),n.appendChild(s);i.insertBefore(n,i.lastChild)}(t,e,t.duration())})),t.el().appendChild(function(e){var t=U.prototype.createEl("div",{className:"mashup-window-overlay"});return t.addEventListener("mouseenter",(function(){this.classList.add("active-on-hover");for(var t=e.el().getElementsByClassName("mashup-window-content"),r=0;r<t.length;r++)t[r].style.opacity=1})),t.addEventListener("mouseleave",(function(){this.classList.remove("active-on-hover");for(var t=e.el().getElementsByClassName("mashup-window-content"),r=0;r<t.length;r++)t[r].style.opacity=.5})),t.addEventListener("click",(function(){e.slideWindow.el().classList.contains("mashup-window-content")?e.slideWindow.minimizeVideo():e.slideWindow.minimizeSlide()})),t}(t)),t.slideWindow=new B(t,e),t.slideWindow.minimizeVideo(),t.addChild(t.slideWindow)}))}));var q=r("./node_modules/jquery/dist/jquery.js-exposed"),G=r.n(q),V=r("./src/udemy/js/video-player/utils.js"),K=L.a.getComponent("SeekBar");function W(e){e.play=function(){var e=this,t=this.options_.Promise||window.Promise;return t?new t((function(t){e.play_((function(e){var r;(r=e)&&"function"==typeof r.then&&r.then(null,l.a),t()}))})):this.play_()}}K.prototype.originalHandleMouseMove=K.prototype.handleMouseMove,K.prototype.handleMouseMove=function(e){var t=G()(this.player_.el());if(!this.scrubberContainer||!this.scrubber)return this.scrubberContainer=t.find(".vjs-slider.vjs-slider-horizontal"),this.scrubber=t.find(".vjs-play-progress.vjs-slider-bar"),this.originalHandleMouseMove(e);var r=this.scrubberContainer.width()||0,o=e.clientX-this.scrubberContainer.offset().left;if(o>0&&o<=r){var s=Math.round(o/r*100);this.scrubber.css({width:"".concat(s,"%")})}this.originalHandleMouseMove(e)};L.a.registerPlugin("udemypatches",(function(){W(this),function(e){if("iOS"===V.a.os.name){var t=e.el().querySelector("video");e.on("ended",(function(){t.webkitDisplayingFullscreen&&t.webkitExitFullscreen()}))}}(this)}));var Y,X,Q,J,Z=function(){function e(){babelHelpers.classCallCheck(this,e),this.highest=0,this.lastTotal=0}return babelHelpers.createClass(e,[{key:"add",value:function(e,t){var r=(e-this.lastTotal)/t;r>this.highest&&(this.highest=r),this.lastTotal=e}}]),e}();function $(e,t,r,o,s,a){if(o.player="videojs",o.mode=o.mode||e.techName_,o.isHotkeyPressed=a,o.stats={dimension2:"".concat(o.player," ").concat(o.mode)},s){var i,n=o.stats;n.msPosition=1e3*e.currentTime(),n.format=e.currentType(),n.quality=e.resolution,n.userAgent=window.navigator.userAgent,t&&(n.elementHeight=t.clientHeight,n.elementWidth=t.clientWidth),Object.keys(r).forEach((function(e){var t=r[e].highest;t&&(n[e]=Math.round(t))}));try{i=e.currentSource()}catch(e){return}if(i.isHls){if(e.tech_.hls){n.hlsBandwidthConfig=e.tech_.hls.bandwidth;var l=e.tech_.hls.playlists.media();l&&(n.hlsResolution=l.attributes.RESOLUTION.height)}i.src.split("\\").pop().split("/").pop().startsWith("aa00")?n.streamType="NEW-HLS":n.streamType="HLS"}else n.streamType="NOT-HLS";n.cdn=ee(e)}}function ee(e){var t;try{t=e.isHls?e.fragmentURL:e.currentSrc()}catch(e){}return t?te(t):"none"}function te(e){var t=new n.a(e).host();return/^\w+-a\./.test(t)?"verizon":/^\w+-b\./.test(t)?"cdn77":/^\w+-c\./.test(t)?"limelight":"none"}L.a.registerPlugin("bandwidthWatermark",(function(){var e=Date.now(),t=0,r=this,o={bytesSecHighestHLSBandwidth:new Z,bytesSecHighestDecoder:new Z,millisSecHighestBandwidth:new Z};r.setInterval((function(){var s=Date.now(),a=(s-e)/1e3;e=s,o.bytesSecHighestDecoder.add(function(){if(r.tech_){var e=r.tech_.el();return e.webkitAudioDecodedByteCount+e.webkitVideoDecodedByteCount}}(),a);var i=r.duration();i&&o.millisSecHighestBandwidth.add(r.bufferedPercent()*i*1e3,a);t&&o.bytesSecHighestHLSBandwidth.add(t,a);r.trigger("onbandwidthwatermarkupdate",{bandwidthWatermarks:o})}),1e3),r.on("hlsfragloaded",(function(e,r){t+=r.total}))})),Y=L.a,X=A.a,Q=function(){function e(t,r,o){var s=this;babelHelpers.classCallCheck(this,e),r.name_="hlsjsPlugin",this.player=Y(r.options_.playerId),this.player.isHls=!0,this.hls=new X(o),this.player.on("dispose",this.dispose),this.hls.once(X.Events.FRAG_LOADED,(function(){s.player.trigger("loadedmetadata")})),this.hls.on(X.Events.LEVEL_SWITCHED,(function(e,t){s.player.trigger("hlslevelswitch",{resolution:s.hls.levels[t.level].height})})),this.hls.on(X.Events.FRAG_LOADED,(function(e,t){s.player.fragmentURL=t.frag.url,s.player.trigger("hlsfragloaded",t.stats)})),this.hls.on(X.Events.ERROR,Object(F.a)(this.onError,r)),this.hls.attachMedia(r.el()),this.hls.loadSource(t.src)}return babelHelpers.createClass(e,[{key:"dispose",value:function(){this.hls.destroy()}},{key:"onError",value:function(e,t,r){if(r.fatal){var o={message:"hlsjs ".concat(r.type,": ").concat(r.details),code:this.errorTypeToCode(r.type),hlsjs:!0};this.player.error=function(){return o},this.player.trigger("error"),this.dispose()}}},{key:"errorTypeToCode",value:function(e){return e===X.ErrorTypes.NETWORK_ERROR?MediaError.MEDIA_ERR_NETWORK:e===X.ErrorTypes.MEDIA_ERROR?MediaError.MEDIA_ERR_DECODE:null}}]),e}(),babelHelpers.applyDecoratedDescriptor(Q.prototype,"dispose",[o.a],Object.getOwnPropertyDescriptor(Q.prototype,"dispose"),Q.prototype),babelHelpers.applyDecoratedDescriptor(Q.prototype,"onError",[o.a],Object.getOwnPropertyDescriptor(Q.prototype,"onError"),Q.prototype),J=Q,X.isSupported()&&Y.getTech("Html5").registerSourceHandler({canHandleSource:function(e){return/^application\/x-mpegURL|application\/vnd\.apple\.mpegurl$/i.test(e.type)?"probably":/\.m3u8/i.test(e.src)?"maybe":""},handleSource:function(e,t,r){return t.hlsProvider=new J(e,t,babelHelpers.objectSpread({},r.hlsjsConfig)),t.hlsProvider}},0),L.a.registerPlugin("sneakpeek",N.a);var re="vfq2nsli1v76fglgdl9puq0cd",oe=Object(C.a)();var se,ae,ie,ne,le,ce,pe,ue,de,he,me,be,fe,ye=r("./node_modules/store/dist/store.legacy.js"),ge=r.n(ye),ve=r("./src/udemy/js/video-player/constants.js"),we=r("./src/udemy/js/video-player/captions/constants.js"),ke=(se=function(){function e(t,r,o){var s=this;babelHelpers.classCallCheck(this,e),babelHelpers.initializerDefineProperty(this,"activeFontSize",ae,this),babelHelpers.initializerDefineProperty(this,"activeOpacity",ie,this),babelHelpers.initializerDefineProperty(this,"isWellEnabled",ne,this),babelHelpers.initializerDefineProperty(this,"menuPage",le,this),babelHelpers.initializerDefineProperty(this,"cuePosition",ce,this),this.controlBarStore=t,this.captionsStore=r,this.videoPlayerStore=o,this.userHasFontSizePreference=!1,this.userHasOpacityPreference=!1,this.userHasWellPreference=!1,this.loadUserPreferences(),Object(c.reaction)((function(){return[s.activeFontSize,s.activeOpacity,s.isWellEnabled]}),this.updateUserPreferences)}return babelHelpers.createClass(e,[{key:"attachPlayer",value:function(e){this.player=e,e.on("timeupdate",this.calculateCuePosition)}},{key:"toggleMenu",value:function(e){e?this.controlBarStore.setMenuOpen(ve.b.CAPTIONS):(this.setSubmenu(we.i.TRACKS),this.controlBarStore.setMenuClosed())}},{key:"setSubmenu",value:function(e){this.menuPage=e}},{key:"selectFontSize",value:function(e){this.userHasFontSizePreference=!0,this.activeFontSize=e,this.videoPlayerStore.trackPlayerControls({type:"captionssettingchange",setting:"fontsize",value:e})}},{key:"selectTrackOpacity",value:function(e){this.userHasOpacityPreference=!0,this.activeOpacity=e,this.videoPlayerStore.trackPlayerControls({type:"captionssettingchange",setting:"opacity",value:e})}},{key:"toggleWellEnabled",value:function(){this.userHasWellPreference=!0,this.isWellEnabled=!this.isWellEnabled,this.videoPlayerStore.trackPlayerControls({type:"captionssettingchange",setting:"well",value:this.isWellEnabled})}},{key:"updateUserPreferences",value:function(){if(this.userHasFontSizePreference||this.userHasOpacityPreference||this.userHasWellPreference){var e={};this.userHasFontSizePreference&&(e.fontSize=this.activeFontSize),this.userHasOpacityPreference&&(e.opacity=this.activeOpacity),this.userHasWellPreference&&(e.isWellEnabled=this.isWellEnabled),ge.a.set(we.l,e)}else ge.a.remove(we.l)}},{key:"loadUserPreferences",value:function(){var e=ge.a.get(we.l);e&&(void 0!==e.fontSize&&(this.activeFontSize=e.fontSize,this.userHasFontSizePreference=!0),void 0!==e.opacity&&(this.activeOpacity=e.opacity,this.userHasOpacityPreference=!0),void 0!==e.isWellEnabled&&(this.isWellEnabled=e.isWellEnabled,this.userHasWellPreference=!0))}},{key:"reset",value:function(){this.userHasFontSizePreference=!1,this.userHasOpacityPreference=!1,this.userHasWellPreference=!1,this.activeFontSize=we.e,this.activeOpacity=we.f,this.isWellEnabled=we.g}},{key:"calculateCuePosition",value:function(){if(this.activeCue){var e=this.activeCue.endTime-this.activeCue.startTime;this.cuePosition=(this.videoPlayerStore.currentTime-this.activeCue.startTime)/e}else this.cuePosition=0}},{key:"isMenuOpen",get:function(){return this.controlBarStore.activeMenu===ve.b.CAPTIONS}},{key:"activeTrack",get:function(){return this.captionsStore.activeTracks.length?this.captionsStore.activeTracks[0]:null}},{key:"activeCue",get:function(){return this.activeTrack&&this.activeTrack.activeCues.length?this.activeTrack.activeCues[0]:null}},{key:"activeCueText",get:function(){return this.activeCue?this.activeCue.displayText:""}},{key:"captionStyle",get:function(){var e,t=this.videoPlayerStore.playerHeight;e=t?Math.max(.04*t,we.a.FONT_SIZE_MIN):we.a.FONT_SIZE_DEFAULT;var r=this.activeFontSize/100*e;return{fontSize:"".concat(r,"px"),opacity:this.activeOpacity/100}}},{key:"shouldDisplayWell",get:function(){return this.isWellEnabled&&this.activeTrack&&!V.a.isMobile}}]),e}(),ae=babelHelpers.applyDecoratedDescriptor(se.prototype,"activeFontSize",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return we.e}}),ie=babelHelpers.applyDecoratedDescriptor(se.prototype,"activeOpacity",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return we.f}}),ne=babelHelpers.applyDecoratedDescriptor(se.prototype,"isWellEnabled",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return we.g}}),le=babelHelpers.applyDecoratedDescriptor(se.prototype,"menuPage",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return we.i.TRACKS}}),ce=babelHelpers.applyDecoratedDescriptor(se.prototype,"cuePosition",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),babelHelpers.applyDecoratedDescriptor(se.prototype,"toggleMenu",[o.a],Object.getOwnPropertyDescriptor(se.prototype,"toggleMenu"),se.prototype),babelHelpers.applyDecoratedDescriptor(se.prototype,"isMenuOpen",[c.computed],Object.getOwnPropertyDescriptor(se.prototype,"isMenuOpen"),se.prototype),babelHelpers.applyDecoratedDescriptor(se.prototype,"setSubmenu",[c.action],Object.getOwnPropertyDescriptor(se.prototype,"setSubmenu"),se.prototype),babelHelpers.applyDecoratedDescriptor(se.prototype,"selectFontSize",[c.action],Object.getOwnPropertyDescriptor(se.prototype,"selectFontSize"),se.prototype),babelHelpers.applyDecoratedDescriptor(se.prototype,"selectTrackOpacity",[c.action],Object.getOwnPropertyDescriptor(se.prototype,"selectTrackOpacity"),se.prototype),babelHelpers.applyDecoratedDescriptor(se.prototype,"toggleWellEnabled",[o.a,c.action],Object.getOwnPropertyDescriptor(se.prototype,"toggleWellEnabled"),se.prototype),babelHelpers.applyDecoratedDescriptor(se.prototype,"updateUserPreferences",[o.a],Object.getOwnPropertyDescriptor(se.prototype,"updateUserPreferences"),se.prototype),babelHelpers.applyDecoratedDescriptor(se.prototype,"loadUserPreferences",[c.action],Object.getOwnPropertyDescriptor(se.prototype,"loadUserPreferences"),se.prototype),babelHelpers.applyDecoratedDescriptor(se.prototype,"reset",[o.a,c.action],Object.getOwnPropertyDescriptor(se.prototype,"reset"),se.prototype),babelHelpers.applyDecoratedDescriptor(se.prototype,"calculateCuePosition",[o.a,c.action],Object.getOwnPropertyDescriptor(se.prototype,"calculateCuePosition"),se.prototype),babelHelpers.applyDecoratedDescriptor(se.prototype,"activeTrack",[c.computed],Object.getOwnPropertyDescriptor(se.prototype,"activeTrack"),se.prototype),babelHelpers.applyDecoratedDescriptor(se.prototype,"activeCue",[c.computed],Object.getOwnPropertyDescriptor(se.prototype,"activeCue"),se.prototype),babelHelpers.applyDecoratedDescriptor(se.prototype,"activeCueText",[c.computed],Object.getOwnPropertyDescriptor(se.prototype,"activeCueText"),se.prototype),babelHelpers.applyDecoratedDescriptor(se.prototype,"captionStyle",[c.computed],Object.getOwnPropertyDescriptor(se.prototype,"captionStyle"),se.prototype),babelHelpers.applyDecoratedDescriptor(se.prototype,"shouldDisplayWell",[c.computed],Object.getOwnPropertyDescriptor(se.prototype,"shouldDisplayWell"),se.prototype),se),_e=r("./src/udemy/js/video-player/captions/captions.mobx-store.js"),Ee=r("./node_modules/babel-plugin-react-css-modules/dist/browser/getClassName.js"),je=r.n(Ee),De=r("./node_modules/react-overlays/lib/Portal.js"),Se=r.n(De),Ce=(r("./src/udemy/js/video-player/captions/cue-display/captions-display.less"),Object(p.c)("captionDisplayStore")(pe=Object(p.d)((de=ue=function(e){function t(){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).apply(this,arguments))}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"render",value:function(){return this.props.captionDisplayStore.activeCueText?f.a.createElement("div",{className:"captions-display--captions-cue-text--ECkJu","data-purpose":"captions-cue-text",style:this.props.captionDisplayStore.captionStyle},this.props.captionDisplayStore.activeCueText):null}}]),t}(f.a.Component),ue.propTypes={captionDisplayStore:d.a.object.isRequired},pe=de))||pe)||pe),Oe=r("./src/udemy/js/video-player/captions/cue-display/well.less"),Pe=r.n(Oe);function Te(e,t){var r,o=e[0].toUpperCase()+e.slice(1);return r={},babelHelpers.defineProperty(r,"Webkit".concat(o),t),babelHelpers.defineProperty(r,"Moz".concat(o),t),babelHelpers.defineProperty(r,"ms".concat(o),t),babelHelpers.defineProperty(r,"O".concat(o),t),babelHelpers.defineProperty(r,e,t),r}var xe,Re,He,Ae,Ie,Le,Me,Ne,Fe,Ue=Object(p.c)("captionDisplayStore")(he=Object(p.d)((fe=be=function(e){function t(e){var r;return babelHelpers.classCallCheck(this,t),(r=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this,e))).disposers=[],r}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"componentDidMount",value:function(){var e=this;this.disposers.push(Object(c.observe)(this.props.captionDisplayStore,"cuePosition",(function(){e.textRef.classList.add(Pe.a["transition-active"])})),Object(c.observe)(this.props.captionDisplayStore,"activeCueText",(function(){e.textRef.classList.remove(Pe.a["transition-active"]),e.reset=!0})))}},{key:"componentWillUnmount",value:function(){this.disposers.forEach((function(e){return e()}))}},{key:"addContainerRef",value:function(e){this.containerRef=e}},{key:"addTextRef",value:function(e){this.textRef=e}},{key:"render",value:function(){var e=this.props.captionDisplayStore,t=this.containerRef&&this.textRef?this.textRef.offsetHeight-this.containerRef.offsetHeight:0,r=Te("transform","translateY(-".concat(t*this.props.captionDisplayStore.cuePosition,"px)")),o=Te("transform","none"),s=t&&!this.reset;return this.reset=!1,f.a.createElement("div",{className:"well--container--2edq4",style:{fontSize:e.captionStyle.fontSize},ref:this.addContainerRef},f.a.createElement("span",{className:"well--text--2H_p0 well--transition-active--35hDP",style:s?r:o,ref:this.addTextRef},e.activeCueText))}}]),t}(f.a.Component),be.propTypes={captionDisplayStore:d.a.object.isRequired},me=fe,babelHelpers.applyDecoratedDescriptor(me.prototype,"addContainerRef",[o.a],Object.getOwnPropertyDescriptor(me.prototype,"addContainerRef"),me.prototype),babelHelpers.applyDecoratedDescriptor(me.prototype,"addTextRef",[o.a],Object.getOwnPropertyDescriptor(me.prototype,"addTextRef"),me.prototype),he=me))||he)||he,ze={"./captions-display.less":{"captions-container":"captions-display--captions-container--1-aQJ","user-inactive":"captions-display--user-inactive--2QVjh",transition:"captions-display--transition--2q8uC","add-prefix":"captions-display--add-prefix--2U9yc","captions-cue-text":"captions-display--captions-cue-text--ECkJu"}},Be=Object(p.c)("captionDisplayStore","userActivityStore")(xe=Object(p.d)((He=Re=function(e){function t(){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).apply(this,arguments))}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"render",value:function(){if(this.props.captionDisplayStore.isMobileBrowser)return null;if(this.props.captionDisplayStore.shouldDisplayWell)return f.a.createElement(Ue,null);var e=a()("captions-container",{"user-inactive":this.props.userActivityStore&&!this.props.userActivityStore.isUserActive});return f.a.createElement(Se.a,{container:this.props.captionDisplayStore.player.el()},f.a.createElement("div",{className:je()(e,ze)},f.a.createElement(Ce,null)))}}]),t}(f.a.Component),Re.propTypes={captionDisplayStore:d.a.object.isRequired,userActivityStore:d.a.object},Re.defaultProps={userActivityStore:null},xe=He))||xe)||xe,qe=(Ae=function(){function e(){babelHelpers.classCallCheck(this,e),babelHelpers.initializerDefineProperty(this,"activeMenu",Ie,this)}return babelHelpers.createClass(e,[{key:"setMenuOpen",value:function(e){this.activeMenu=e}},{key:"setMenuClosed",value:function(){this.activeMenu=ve.b.NONE}}]),e}(),Ie=babelHelpers.applyDecoratedDescriptor(Ae.prototype,"activeMenu",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return ve.b.NONE}}),babelHelpers.applyDecoratedDescriptor(Ae.prototype,"setMenuOpen",[c.action],Object.getOwnPropertyDescriptor(Ae.prototype,"setMenuOpen"),Ae.prototype),babelHelpers.applyDecoratedDescriptor(Ae.prototype,"setMenuClosed",[c.action],Object.getOwnPropertyDescriptor(Ae.prototype,"setMenuClosed"),Ae.prototype),Ae),Ge=r("./node_modules/react-dom/index.js"),Ve=r.n(Ge),Ke=r("./src/udemy/js/video-player/control-bar/controls.js"),We=r("./src/udemy/js/video-player/control-bar/control-bar.less"),Ye=r.n(We),Xe=Object(p.d)((Ne=Me=function(e){function t(){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).apply(this,arguments))}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"render",value:function(){return Ve.a.createPortal(f.a.createElement("div",{className:"control-bar--control-bar--MweER"},this.controls),this.props.player.controlBar.controlBarComponent.el())}},{key:"controls",get:function(){return f.a.Children.count(this.props.children)?this.props.children:f.a.createElement(f.a.Fragment,null,f.a.createElement(Ke.d,null),f.a.createElement(Ke.g,null),f.a.createElement(Ke.e,null),f.a.createElement(Ke.b,null),f.a.createElement(Ke.f,null),f.a.createElement(Ke.i,null),f.a.createElement(Ke.j,null),f.a.createElement(Ke.a,null),f.a.createElement(Ke.h,null),f.a.createElement(Ke.c,null))}}]),t}(f.a.Component),Me.propTypes={player:d.a.object.isRequired},Le=Ne))||Le,Qe=r("./src/udemy/js/video-player/error-display.react-component.js"),Je=r("./src/udemy/js/video-player/user-activity.less"),Ze=r.n(Je),$e=r("./src/udemy/js/video-player/user-activity.mobx-store.js"),et=r("./src/udemy/js/video-player/video-player.less"),tt=r.n(et),rt=r("./node_modules/axios/index.js"),ot=r.n(rt),st=r("./node_modules/lodash-es/debounce.js"),at=r("./node_modules/uuid/v4.js"),it=r.n(at),nt=r("./src/udemy/js/utils/ud-link.js"),lt=L.a.getComponent("Component"),ct=[{component:"popoverArea",componentClass:function(e){function t(){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).apply(this,arguments))}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"createEl",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"div",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return r=babelHelpers.objectSpread({className:a()(Ye.a["popover-area"],babelHelpers.get(babelHelpers.getPrototypeOf(t.prototype),"buildCSSClass",this).call(this))},r),babelHelpers.get(babelHelpers.getPrototypeOf(t.prototype),"createEl",this).call(this,e,r,o)}}]),t}(lt)},{component:"progressControl",activeOnHover:!0,options:{seekBar:{mouseTimeDisplay:!1,playProgressBar:{timeTooltip:!1}},keepTooltipsInside:!1}},{component:"controlBarComponent",componentClass:function(e){function t(){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).apply(this,arguments))}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"createEl",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"div",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return r=babelHelpers.objectSpread({className:a()(Ye.a["control-bar-container"],babelHelpers.get(babelHelpers.getPrototypeOf(t.prototype),"buildCSSClass",this).call(this))},r),babelHelpers.get(babelHelpers.getPrototypeOf(t.prototype),"createEl",this).call(this,e,r,o)}}]),t}(lt),activeOnHover:!0}],pt=(Fe=function(){function e(t,r){if(babelHelpers.classCallCheck(this,e),this.scope="generic",(this instanceof e?this.constructor:void 0)===e)throw new Error("Stopwatch is an abstract class!");this._sessionId=t,this._player=r}return babelHelpers.createClass(e,[{key:"setup",value:function(){throw new Error("Stopwatch: method `setup` is not implemented")}},{key:"_collectLog",value:function(e,t){T.c.trackPageEvent("videoplayertiming","coursetaking",{sessionId:this._sessionId,key:e,wait_time:Math.round(t),position:1e3*this._player.currentTime(),scope:this.scope,stats:{userAgent:window.navigator.userAgent,quality:this._player.resolution,dimension2:this._player.techName_}})}}]),e}(),babelHelpers.applyDecoratedDescriptor(Fe.prototype,"_collectLog",[o.a],Object.getOwnPropertyDescriptor(Fe.prototype,"_collectLog"),Fe.prototype),Fe),ut=function(e){function t(){var e,r;babelHelpers.classCallCheck(this,t);for(var o=arguments.length,s=new Array(o),a=0;a<o;a++)s[a]=arguments[a];return(r=babelHelpers.possibleConstructorReturn(this,(e=babelHelpers.getPrototypeOf(t)).call.apply(e,[this].concat(s)))).scope="buffering",r}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"setup",value:function(){var e=this;this._player.on("seeking",(function(){var t=e._player.currentTime(),r=e._player.buffered();e._startTime=performance.now();for(var o=0;o<r.length;o++)if(t>=r.start(o)&&t<=r.end(o))return void(e._startTime=null)})),this._player.on("seeked",(function(){e._startTime&&e._collectLog("buffered",performance.now()-e._startTime)}))}}]),t}(pt),dt=["loadstart","loadedmetadata","seeking","seeked","canplay"],ht=function(e){function t(){var e,r;babelHelpers.classCallCheck(this,t);for(var o=arguments.length,s=new Array(o),a=0;a<o;a++)s[a]=arguments[a];return(r=babelHelpers.possibleConstructorReturn(this,(e=babelHelpers.getPrototypeOf(t)).call.apply(e,[this].concat(s)))).scope="startup",r}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"setup",value:function(){var e=this,t=performance.now();dt.forEach((function(r){e._player.one(r,(function(){return e._collectLog(r,performance.now()-t)}))}))}}]),t}(pt),mt=r("./node_modules/js-cookie/src/js.cookie.js"),bt=r.n(mt);function ft(e){return bt.a.get(e)}function yt(e,t){bt.a.set(e,t,{expires:30,path:"/"})}var gt,vt,wt,kt,_t,Et=Object.freeze([.5,.75,1,1.25,1.5,1.75,2]),jt=(gt=c.observable.ref,vt=function(){function e(){babelHelpers.classCallCheck(this,e),babelHelpers.initializerDefineProperty(this,"player",wt,this),babelHelpers.initializerDefineProperty(this,"availablePlaybackRates",kt,this),babelHelpers.initializerDefineProperty(this,"chosenPlaybackRate",_t,this)}return babelHelpers.createClass(e,[{key:"setup",value:function(e){var t=this;this.player=e,e.on("play",(function(){e.playbackRate(t.playbackRate)}))}},{key:"choosePlaybackRate",value:function(e){e&&e!==this.playbackRate&&(this.chosenPlaybackRate=e,this.player.playbackRate(e),yt("playbackspeed",e))}},{key:"speedDown",value:function(){var e=this.availablePlaybackRates.indexOf(this.playbackRate),t=this.availablePlaybackRates.slice()[e-1];this.choosePlaybackRate(t)}},{key:"speedUp",value:function(){var e=this.availablePlaybackRates.indexOf(this.playbackRate),t=this.availablePlaybackRates.slice()[e+1];this.choosePlaybackRate(t)}},{key:"playbackRate",get:function(){var e=this.chosenPlaybackRate||this.savedPlaybackRate;return this.availablePlaybackRates.includes(e)?e:1}},{key:"savedPlaybackRate",get:function(){return parseFloat(ft("playbackspeed"))}}]),e}(),wt=babelHelpers.applyDecoratedDescriptor(vt.prototype,"player",[gt],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),kt=babelHelpers.applyDecoratedDescriptor(vt.prototype,"availablePlaybackRates",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Et}}),_t=babelHelpers.applyDecoratedDescriptor(vt.prototype,"chosenPlaybackRate",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),babelHelpers.applyDecoratedDescriptor(vt.prototype,"setup",[c.action],Object.getOwnPropertyDescriptor(vt.prototype,"setup"),vt.prototype),babelHelpers.applyDecoratedDescriptor(vt.prototype,"choosePlaybackRate",[o.a,c.action],Object.getOwnPropertyDescriptor(vt.prototype,"choosePlaybackRate"),vt.prototype),babelHelpers.applyDecoratedDescriptor(vt.prototype,"playbackRate",[c.computed],Object.getOwnPropertyDescriptor(vt.prototype,"playbackRate"),vt.prototype),babelHelpers.applyDecoratedDescriptor(vt.prototype,"speedDown",[o.a,c.action],Object.getOwnPropertyDescriptor(vt.prototype,"speedDown"),vt.prototype),babelHelpers.applyDecoratedDescriptor(vt.prototype,"speedUp",[o.a,c.action],Object.getOwnPropertyDescriptor(vt.prototype,"speedUp"),vt.prototype),vt),Dt=r("./node_modules/lodash-es/clamp.js"),St=r("./node_modules/lodash-es/_baseGetTag.js"),Ct=r("./node_modules/lodash-es/isObjectLike.js");var Ot=function(e){return!0===e||!1===e||Object(Ct.a)(e)&&"[object Boolean]"==Object(St.a)(e)},Pt=r("./node_modules/lodash-es/_root.js").a.isFinite;var Tt,xt,Rt,Ht,At,It,Lt,Mt,Nt,Ft,Ut,zt,Bt,qt,Gt,Vt,Kt,Wt,Yt,Xt=function(e){return"number"==typeof e&&Pt(e)},Qt=1,Jt=(Tt=function(){function e(t){babelHelpers.classCallCheck(this,e),this.player=void 0,babelHelpers.initializerDefineProperty(this,"_chosenVolume",xt,this),babelHelpers.initializerDefineProperty(this,"_chosenIsMuted",Rt,this),this.isDefaultMuted=t}return babelHelpers.createClass(e,[{key:"setup",value:function(e){this.player=e,e.volume(this.volume),e.muted(this.isMuted)}},{key:"chooseVolume",value:function(e){if(this.isEnabled){var t=this.normalizeVolume(e);this._chosenVolume=t,this.player.volume(t),yt("volume",t),this.chooseMuted(!1)}}},{key:"normalizeVolume",value:function(e){var t=Object(Dt.a)(e,0,1);return Math.round(100*t)/100}},{key:"volumeUp",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.1;this.chooseVolume(this.volume+e)}},{key:"volumeDown",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.1;this.chooseVolume(this.volume-e)}},{key:"chooseMuted",value:function(e){this.isEnabled&&(this._chosenIsMuted=e,this.player.muted(e),yt("mute",e?"1":0))}},{key:"toggleMuted",value:function(){this.chooseMuted(!this.isMuted)}},{key:"volume",get:function(){var e=[this._chosenVolume,this.savedVolume,Qt].find(Xt);return this.normalizeVolume(e)}},{key:"savedVolume",get:function(){return parseFloat(ft("volume"))}},{key:"isMuted",get:function(){return[this._chosenIsMuted,this.savedIsMuted,this.isDefaultMuted].find(Ot)}},{key:"savedIsMuted",get:function(){return{0:!1,1:!0}[ft("mute")]}},{key:"isEnabled",get:function(){return this.player&&this.player.techName_}}]),e}(),xt=babelHelpers.applyDecoratedDescriptor(Tt.prototype,"_chosenVolume",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Rt=babelHelpers.applyDecoratedDescriptor(Tt.prototype,"_chosenIsMuted",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),babelHelpers.applyDecoratedDescriptor(Tt.prototype,"setup",[c.action],Object.getOwnPropertyDescriptor(Tt.prototype,"setup"),Tt.prototype),babelHelpers.applyDecoratedDescriptor(Tt.prototype,"volume",[c.computed],Object.getOwnPropertyDescriptor(Tt.prototype,"volume"),Tt.prototype),babelHelpers.applyDecoratedDescriptor(Tt.prototype,"chooseVolume",[o.a,c.action],Object.getOwnPropertyDescriptor(Tt.prototype,"chooseVolume"),Tt.prototype),babelHelpers.applyDecoratedDescriptor(Tt.prototype,"volumeUp",[o.a,c.action],Object.getOwnPropertyDescriptor(Tt.prototype,"volumeUp"),Tt.prototype),babelHelpers.applyDecoratedDescriptor(Tt.prototype,"volumeDown",[o.a,c.action],Object.getOwnPropertyDescriptor(Tt.prototype,"volumeDown"),Tt.prototype),babelHelpers.applyDecoratedDescriptor(Tt.prototype,"isMuted",[c.computed],Object.getOwnPropertyDescriptor(Tt.prototype,"isMuted"),Tt.prototype),babelHelpers.applyDecoratedDescriptor(Tt.prototype,"chooseMuted",[o.a,c.action],Object.getOwnPropertyDescriptor(Tt.prototype,"chooseMuted"),Tt.prototype),babelHelpers.applyDecoratedDescriptor(Tt.prototype,"toggleMuted",[o.a],Object.getOwnPropertyDescriptor(Tt.prototype,"toggleMuted"),Tt.prototype),Tt),Zt=(Ht=function(){function e(t,r,o,s,a,i,n,l,c,p){babelHelpers.classCallCheck(this,e),this._videoPlayer=null,this.videoElement=void 0,this.playerId=null,this.videoPlayerOptions={},this.isDefaultMuted=!1,this.numErrors=0,this.position=-1,this.lastPosition=-1,this.controlBarControls=[],this._isHotkeyPressed=!1,this.sources=[],babelHelpers.initializerDefineProperty(this,"canPlay",At,this),babelHelpers.initializerDefineProperty(this,"isPaused",It,this),babelHelpers.initializerDefineProperty(this,"currentTime",Lt,this),babelHelpers.initializerDefineProperty(this,"isErrorVisible",Mt,this),babelHelpers.initializerDefineProperty(this,"duration",Nt,this),babelHelpers.initializerDefineProperty(this,"playerHeight",Ft,this),babelHelpers.initializerDefineProperty(this,"availableResolutions",Ut,this),babelHelpers.initializerDefineProperty(this,"hlsResolution",zt,this),babelHelpers.initializerDefineProperty(this,"_chosenResolution",Bt,this),this.defaultResolution=void 0,this.bandwidthWatermarks={},this.seekTimer=this._createTimer(),this.waitingTimer=this._createTimer(),this.loadStartTime=null,this.initialStartSent=!1,this.sessionId=it()(),this.playbackRateStore=new jt,this.volumeStore=new Jt(p),this.videoPlayerOptions=t,this.playerId=r,this.sources=this._formattedSources(s),this.trackingTag=a,this.assetId=i,this.onVideoProgress=n,this.videoProgressInterval=l,this.onTimeUpdate=c,this.setDuration(o)}return babelHelpers.createClass(e,[{key:"showError",value:function(){this.isErrorVisible=!0}},{key:"hideError",value:function(){this.isErrorVisible=!1}},{key:"focusPlayButton",value:function(){var e=this._videoPlayer.getChild("ControlBar"),t=e&&e.el(),r=t&&t.querySelector("[data-purpose='play-button'], [data-purpose='pause-button']");r?r.focus():this._videoPlayer.focus()}},{key:"play",value:function(){this._videoPlayer?this._videoPlayer.play():this.playAfterInitialising=!0}},{key:"pause",value:function(){this._videoPlayer.pause()}},{key:"_formattedSources",value:function(e){var t="IE"===V.a.browser.name&&"11"===V.a.browser.majorVersion&&"Windows"===V.a.os.name&&"7"===V.a.os.majorVersion;return e.Video=e.Video.filter((function(e){return"application/x-mpegURL"!==e.type||!t})),e.Video.map((function(e){return e.src=e.file,e}))}},{key:"_createPlayer",value:function(e){return L()(this.videoElement,e)}},{key:"initializeVideojs",value:function(e){var t=this;return this.videoElement=e,this._useNativeControlsForMobile(),this.videoPlayerOptions["vtt.js"]=nt.a.toJs("node_modules/videojs-vtt.js/dist/vtt.min.js"),this._videoPlayer=this._createPlayer(this.videoPlayerOptions),this._videoPlayer.on("play",(function(){return t._setIsPaused(!1)})),this._videoPlayer.on("pause",(function(){return t._setIsPaused(!0)})),this._videoPlayer.on("seeking",(function(){return t._setCanPlay(!1)})),this._videoPlayer.one("canplaythrough",(function(){t._setCanPlay(!0),t._videoPlayer.on("seeked",(function(){return t._setCanPlay(!0)}))})),new ht(this.sessionId,this._videoPlayer).setup(),new ut(this.sessionId,this._videoPlayer).setup(),this._setupControlBar(),this._videoPlayer.ready((function(){t._setupResolutions(),t.playbackRateStore.setup(t._videoPlayer),t.volumeStore.setup(t._videoPlayer)})),this.playAfterInitialising&&this._videoPlayer.ready((function(){t.play()})),this._videoPlayer.on("durationchange",(function(){var e=t._videoPlayer.duration();e&&t.setDuration(e)})),this._videoPlayer.on("onbandwidthwatermarkupdate",(function(e,r){t.bandwidthWatermarks=r.bandwidthWatermarks})),this._videoPlayer.one("play",(function(){t.loadStartTime=new Date})),this._videoPlayer.one("playing",this._trackPlaying),this._videoPlayer.on("seeking",this._trackSeeking),this._videoPlayer.on("seeked",this._trackSeeked),this._videoPlayer.on("waiting",this._trackWaiting),this._videoPlayer.on("timeupdate",this._trackTimeupdate),this._videoPlayer.on("userinactive",this._trackUserInactive),this._videoPlayer.on("fullscreenchange",this._trackFullscreen),this._videoPlayer.on("play",this._trackPlay),this._videoPlayer.on("pause",this._trackPause),this._videoPlayer.on("changeRes",this._trackQualityChange),this._videoPlayer.on("firstplaybackratechange",this._trackFirstPlaybackRateChange),this._videoPlayer.on("ratechange",Object(st.a)(this._trackPlaybackRateChange,2e3)),this._videoPlayer.on("volumechange",Object(st.a)(this._trackVolumeChange,2e3)),this._videoPlayer.on("seekforward",this._trackSeekForward),this._videoPlayer.on("seekrewind",this._trackSeekRewind),this._videoPlayer.on("hlslevelswitch",this._onHlsLevelSwitch),this._videoPlayer}},{key:"_useNativeControlsForMobile",value:function(){V.a.isMobile&&(this.videoPlayerOptions.nativeControlsForTouch=!0)}},{key:"_setupControlBar",value:function(){var e=this;this.controlBarControls=ct,this.controlBarControls.forEach((function(t){t.componentClass&&L.a.registerComponent(t.component,t.componentClass);var r=t.options||{};r.playerOptions=e._videoPlayer.controlBar.options_.playerOptions,e._videoPlayer.controlBar[t.component]=e._videoPlayer.controlBar.addChild(t.component,r)}))}},{key:"_onHlsLevelSwitch",value:function(e,t){this._setHlsResolution(t.resolution)}},{key:"handleVideoProgress",value:function(e){var t=Math.ceil(this.currentTime/this.videoProgressInterval);if(!(this.lastPosition===t||t<=0)){this.lastPosition=t;var r="ended"===e.type?this.duration:Math.min(t*this.videoProgressInterval,this.duration),o={total:Math.floor(this.duration),position:Math.floor(r)};this.onVideoProgress(e,o)}}},{key:"handleTimeUpdate",value:function(e){this.currentTime=this._videoPlayer.currentTime(),this.onTimeUpdate(e,this.currentTime)}},{key:"handleVideoError",value:function(){var e=this._videoPlayer.error()||{};if(void 0!==e.code&&e.code!==MediaError.MEDIA_ERR_ABORTED){var t=this.numErrors<5;t&&e.code===MediaError.MEDIA_ERR_NETWORK?this._retry(e):t&&e.code===MediaError.MEDIA_ERR_SRC_NOT_SUPPORTED?this._retry(e):(this.showError(),this._logErrorWithHttpStatus(e))}}},{key:"chooseResolution",value:function(e){e!==this.resolution&&(this._chosenResolution=e,this._setPlayerResolution(e),yt("quality_general",e.label))}},{key:"_setupResolutions",value:function(){var e,t=!1,r=[],o=this.savedResolutionLabel,s=!0,a=!1,i=void 0;try{for(var n,l=this.sources.entries()[Symbol.iterator]();!(s=(n=l.next()).done);s=!0){var c=babelHelpers.slicedToArray(n.value,2),p=c[0],u=c[1];if(u.label){var d=parseInt(u.label,10);Number.isNaN(d)?(t=!0,u.isHls=!0,u.displayLabel=u.label,u.sortOrder=p):(u.isHls=!1,u.displayLabel="".concat(d,"p"),u.sortOrder=-d),u.label===o&&(e=u),r.push(u)}}}catch(e){a=!0,i=e}finally{try{s||null==l.return||l.return()}finally{if(a)throw i}}r.sort((function(e,t){return e.sortOrder-t.sortOrder})),this.defaultResolution=r[0],e?this.defaultResolution=e:t&&(this.defaultResolution=r[r.length-1]),this.availableResolutions=r,this._setPlayerResolution(this.defaultResolution,!1)}},{key:"_setHlsResolution",value:function(e){var t=this.hlsResolution;this.hlsResolution=e,this.trackPerformance({key:ve.e.HLS_QUALITY_CHANGE,extra:{oldRes:t,newRes:this.hlsResolution}})}},{key:"setHotkeyPressed",value:function(){this._isHotkeyPressed=!0}},{key:"resetHotkeyPressed",value:function(){this._isHotkeyPressed=!1}},{key:"trackPlayerControls",value:function(e,t){$(this._videoPlayer,this.videoElement,this.bandwidthWatermarks,e,t,this._isHotkeyPressed),this.resetHotkeyPressed();var r={play:"video play",pause:"video pause",seek:"video seek",volume:"video volume",fullscreenchange:"video fullscreen: ".concat(e.isFullscreen?"on":"off"),qualityChange:"video hd: ".concat(e.quality),captionstrackchange:"video cc: ".concat(e.action),captionssettingchange:"video cc setting: ".concat(e.setting," ").concat(e.value),seekrewind:"video seek rewind",seekforward:"video seek forward",playbackrate:"video playback-rate: ".concat(e.speed),viewed:"video view"}[e.type];if(r){r+=e.isHotkeyPressed?" hotkey":"";var o=e.stats;o.assetId=this.assetId,o.trackingTag=this.trackingTag,"captionstrackchange"===e.type&&(o.language=e.language);var s={sessionId:this.sessionId,category:ve.a,action:r,extra:JSON.stringify(o),scope:"legacy"};T.c.trackPageEvent("trackclick",T.b.VIDEO_PLAYER,s)}}},{key:"trackPerformance",value:function(e){$(this._videoPlayer,this.videoElement,this.bandwidthWatermarks,e,!0),e.sessionId=this.sessionId,e.scope="legacy",e.stats.assetId=this.assetId,e.stats.trackingTag=this.trackingTag,T.c.trackPageEvent(T.a.PLAYER_TIMING_EVENTS,T.b.COURSE_TAKING,e)}},{key:"_trackPlaying",value:function(){var e={key:ve.e.INITIAL_START,wait_time:new Date-this.loadStartTime};this.trackPerformance(e),this.initialStartSent=!0}},{key:"_trackSeeking",value:function(){this.seekTimer.startTime=new Date,this.seekTimer.type=ve.e.UNBUFFERED_SEEK;for(var e=this._videoPlayer.buffered(),t=0;t<e.length;t++)if(this._videoPlayer.currentTime()>=e.start(t)&&this._videoPlayer.currentTime()<=e.end(t)){this.seekTimer.type=ve.e.BUFFERED_SEEK;break}}},{key:"_trackSeeked",value:function(){var e={key:this.seekTimer.type,wait_time:new Date-this.seekTimer.startTime};this.trackPerformance(e),this.seekTimer=this._createTimer()}},{key:"_trackWaiting",value:function(){this.initialStartSent&&(this.waitingTimer.startTime=new Date,this.waitingTimer.type=ve.e.WAITING)}},{key:"_trackTimeupdate",value:function(){if(this.waitingTimer.startTime){var e={key:this.waitingTimer.type,wait_time:new Date-this.waitingTimer.startTime};this.trackPerformance(e),this.waitingTimer=this._createTimer()}}},{key:"_setPlayerResolution",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=this._videoPlayer,o=r.el().firstChild,s=r.paused(),a=r.currentTime();"none"===o.preload&&(o.preload="metadata"),r.src(e),r.one("loadedmetadata",(function(){r.currentTime(a),r.addClass("vjs-has-started"),s||r.play()})),r.resolution=e.label,t&&r.trigger("changeRes"),this.hlsResolution=null}},{key:"_logErrorWithHttpStatus",value:function(e,t){var r=this;ot.a.head(this._videoPlayer.src()).then((function(t){e.responseStatus=t.status,e.responseUrl=t.request&&t.request.responseUrl,e.responseContentType=t.headers["content-type"]})).catch((function(t){void 0!==t.response&&(e.responseStatus=t.response.status,e.responseUrl=t.response.request&&t.response.request.responseUrl)})).then((function(){r._logError(e,t)}))}},{key:"_logError",value:function(e,t){var r=L.a.getTech("Html5"),o={userModulo:x.a.id%100,browser:V.a.browser.name,browserVersion:V.a.browser.majorVersion,platform:V.a.os.name,platformVersion:V.a.os.majorVersion,retries:this.numErrors,code:e.code,message:e.message,tech:this._videoPlayer.techName_,resolution:this.resolution&&this.resolution.label,hlsResolution:this.hlsResolution,html5Exists:r&&r.isSupported(),trackingTag:this.trackingTag,readyState:this._videoPlayer.readyState(),networkState:this._videoPlayer.networkState(),responseStatus:e.responseStatus,responseUrl:e.responseUrl,responseContentType:e.responseContentType,cdn:ee(this._videoPlayer),userCountry:x.a.country,scope:"generic"};t=t||"videoplayer.error",T.c.increment(t,o),o.userAgent=window.navigator&&window.navigator.userAgent,o.assetId=this.assetId,T.c.trackPageEvent("pageview","sitewide",o)}},{key:"_retry",value:function(e){var t=this;this.numErrors+=1,setTimeout((function(){t._videoPlayer&&t._videoPlayer.el_&&t._videoPlayer.src(t.sources)}),500*this.numErrors*this.numErrors),this._logErrorWithHttpStatus(e,"videoplayer.error.retry")}},{key:"_trackUserInactive",value:function(){this.trackPlayerControls({type:"userinactive"})}},{key:"_trackFullscreen",value:function(){this.trackPlayerControls({type:"fullscreenchange",isFullscreen:this._videoPlayer.isFullscreen()})}},{key:"_trackPlay",value:function(){this.trackPlayerControls({type:"play"},!0)}},{key:"_trackPause",value:function(){this.trackPlayerControls({type:"pause"})}},{key:"_trackQualityChange",value:function(){this.trackPlayerControls({type:"qualityChange",quality:this._videoPlayer.resolution})}},{key:"_trackFirstPlaybackRateChange",value:function(e){this.trackPlayerControls({type:"playbackrate",speed:e.speed})}},{key:"_trackPlaybackRateChange",value:function(){this._videoPlayer&&this._videoPlayer.el_&&this.trackPlayerControls({type:"playbackrate",speed:this._videoPlayer.playbackRate()})}},{key:"_trackVolumeChange",value:function(){this.trackPlayerControls({type:"volume"})}},{key:"_trackSeekForward",value:function(){this.trackPlayerControls({type:"seekforward"})}},{key:"_trackSeekRewind",value:function(){this.trackPlayerControls({type:"seekrewind"})}},{key:"setPlayerHeight",value:function(e){this.playerHeight=e.height}},{key:"_createTimer",value:function(){return{type:null,startTime:null}}},{key:"setDuration",value:function(e){this.duration=e}},{key:"_setIsPaused",value:function(e){this.isPaused=e}},{key:"_setCanPlay",value:function(e){this.canPlay=e}},{key:"togglePlayPause",value:function(){this.isPaused?this.play():this.pause()}},{key:"seekBack",value:function(){this._videoPlayer.trigger({type:"seekrewind",target:this._videoPlayer,manuallyTriggered:!0}),this._videoPlayer.currentTime(Math.max(0,this.currentTime-ve.f))}},{key:"seekForward",value:function(){this._videoPlayer.trigger({type:"seekrewind",target:this._videoPlayer,manuallyTriggered:!0}),this._videoPlayer.currentTime(this.currentTime+ve.f)}},{key:"resolution",get:function(){return this._chosenResolution||this.defaultResolution}},{key:"isUsingNativeControls",get:function(){return this._videoPlayer&&this._videoPlayer.usingNativeControls()}},{key:"savedResolutionLabel",get:function(){return ft("quality_general")}}]),e}(),At=babelHelpers.applyDecoratedDescriptor(Ht.prototype,"canPlay",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),It=babelHelpers.applyDecoratedDescriptor(Ht.prototype,"isPaused",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Lt=babelHelpers.applyDecoratedDescriptor(Ht.prototype,"currentTime",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Mt=babelHelpers.applyDecoratedDescriptor(Ht.prototype,"isErrorVisible",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Nt=babelHelpers.applyDecoratedDescriptor(Ht.prototype,"duration",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ft=babelHelpers.applyDecoratedDescriptor(Ht.prototype,"playerHeight",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ut=babelHelpers.applyDecoratedDescriptor(Ht.prototype,"availableResolutions",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),zt=babelHelpers.applyDecoratedDescriptor(Ht.prototype,"hlsResolution",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Bt=babelHelpers.applyDecoratedDescriptor(Ht.prototype,"_chosenResolution",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),babelHelpers.applyDecoratedDescriptor(Ht.prototype,"showError",[c.action],Object.getOwnPropertyDescriptor(Ht.prototype,"showError"),Ht.prototype),babelHelpers.applyDecoratedDescriptor(Ht.prototype,"hideError",[o.a,c.action],Object.getOwnPropertyDescriptor(Ht.prototype,"hideError"),Ht.prototype),babelHelpers.applyDecoratedDescriptor(Ht.prototype,"focusPlayButton",[o.a],Object.getOwnPropertyDescriptor(Ht.prototype,"focusPlayButton"),Ht.prototype),babelHelpers.applyDecoratedDescriptor(Ht.prototype,"_onHlsLevelSwitch",[o.a],Object.getOwnPropertyDescriptor(Ht.prototype,"_onHlsLevelSwitch"),Ht.prototype),babelHelpers.applyDecoratedDescriptor(Ht.prototype,"handleVideoProgress",[o.a],Object.getOwnPropertyDescriptor(Ht.prototype,"handleVideoProgress"),Ht.prototype),babelHelpers.applyDecoratedDescriptor(Ht.prototype,"handleTimeUpdate",[o.a,c.action],Object.getOwnPropertyDescriptor(Ht.prototype,"handleTimeUpdate"),Ht.prototype),babelHelpers.applyDecoratedDescriptor(Ht.prototype,"chooseResolution",[o.a,c.action],Object.getOwnPropertyDescriptor(Ht.prototype,"chooseResolution"),Ht.prototype),babelHelpers.applyDecoratedDescriptor(Ht.prototype,"_setupResolutions",[c.action],Object.getOwnPropertyDescriptor(Ht.prototype,"_setupResolutions"),Ht.prototype),babelHelpers.applyDecoratedDescriptor(Ht.prototype,"_setHlsResolution",[c.action],Object.getOwnPropertyDescriptor(Ht.prototype,"_setHlsResolution"),Ht.prototype),babelHelpers.applyDecoratedDescriptor(Ht.prototype,"_trackPlaying",[o.a],Object.getOwnPropertyDescriptor(Ht.prototype,"_trackPlaying"),Ht.prototype),babelHelpers.applyDecoratedDescriptor(Ht.prototype,"_trackSeeking",[o.a],Object.getOwnPropertyDescriptor(Ht.prototype,"_trackSeeking"),Ht.prototype),babelHelpers.applyDecoratedDescriptor(Ht.prototype,"_trackSeeked",[o.a],Object.getOwnPropertyDescriptor(Ht.prototype,"_trackSeeked"),Ht.prototype),babelHelpers.applyDecoratedDescriptor(Ht.prototype,"_trackWaiting",[o.a],Object.getOwnPropertyDescriptor(Ht.prototype,"_trackWaiting"),Ht.prototype),babelHelpers.applyDecoratedDescriptor(Ht.prototype,"_trackTimeupdate",[o.a],Object.getOwnPropertyDescriptor(Ht.prototype,"_trackTimeupdate"),Ht.prototype),babelHelpers.applyDecoratedDescriptor(Ht.prototype,"_setPlayerResolution",[o.a,c.action],Object.getOwnPropertyDescriptor(Ht.prototype,"_setPlayerResolution"),Ht.prototype),babelHelpers.applyDecoratedDescriptor(Ht.prototype,"resolution",[c.computed],Object.getOwnPropertyDescriptor(Ht.prototype,"resolution"),Ht.prototype),babelHelpers.applyDecoratedDescriptor(Ht.prototype,"_trackUserInactive",[o.a],Object.getOwnPropertyDescriptor(Ht.prototype,"_trackUserInactive"),Ht.prototype),babelHelpers.applyDecoratedDescriptor(Ht.prototype,"_trackFullscreen",[o.a],Object.getOwnPropertyDescriptor(Ht.prototype,"_trackFullscreen"),Ht.prototype),babelHelpers.applyDecoratedDescriptor(Ht.prototype,"_trackPlay",[o.a],Object.getOwnPropertyDescriptor(Ht.prototype,"_trackPlay"),Ht.prototype),babelHelpers.applyDecoratedDescriptor(Ht.prototype,"_trackPause",[o.a],Object.getOwnPropertyDescriptor(Ht.prototype,"_trackPause"),Ht.prototype),babelHelpers.applyDecoratedDescriptor(Ht.prototype,"_trackQualityChange",[o.a],Object.getOwnPropertyDescriptor(Ht.prototype,"_trackQualityChange"),Ht.prototype),babelHelpers.applyDecoratedDescriptor(Ht.prototype,"_trackFirstPlaybackRateChange",[o.a],Object.getOwnPropertyDescriptor(Ht.prototype,"_trackFirstPlaybackRateChange"),Ht.prototype),babelHelpers.applyDecoratedDescriptor(Ht.prototype,"_trackPlaybackRateChange",[o.a],Object.getOwnPropertyDescriptor(Ht.prototype,"_trackPlaybackRateChange"),Ht.prototype),babelHelpers.applyDecoratedDescriptor(Ht.prototype,"_trackVolumeChange",[o.a],Object.getOwnPropertyDescriptor(Ht.prototype,"_trackVolumeChange"),Ht.prototype),babelHelpers.applyDecoratedDescriptor(Ht.prototype,"_trackSeekForward",[o.a],Object.getOwnPropertyDescriptor(Ht.prototype,"_trackSeekForward"),Ht.prototype),babelHelpers.applyDecoratedDescriptor(Ht.prototype,"_trackSeekRewind",[o.a],Object.getOwnPropertyDescriptor(Ht.prototype,"_trackSeekRewind"),Ht.prototype),babelHelpers.applyDecoratedDescriptor(Ht.prototype,"setPlayerHeight",[o.a,c.action],Object.getOwnPropertyDescriptor(Ht.prototype,"setPlayerHeight"),Ht.prototype),babelHelpers.applyDecoratedDescriptor(Ht.prototype,"setDuration",[c.action],Object.getOwnPropertyDescriptor(Ht.prototype,"setDuration"),Ht.prototype),babelHelpers.applyDecoratedDescriptor(Ht.prototype,"_setIsPaused",[c.action],Object.getOwnPropertyDescriptor(Ht.prototype,"_setIsPaused"),Ht.prototype),babelHelpers.applyDecoratedDescriptor(Ht.prototype,"_setCanPlay",[c.action],Object.getOwnPropertyDescriptor(Ht.prototype,"_setCanPlay"),Ht.prototype),babelHelpers.applyDecoratedDescriptor(Ht.prototype,"togglePlayPause",[o.a],Object.getOwnPropertyDescriptor(Ht.prototype,"togglePlayPause"),Ht.prototype),babelHelpers.applyDecoratedDescriptor(Ht.prototype,"seekBack",[o.a],Object.getOwnPropertyDescriptor(Ht.prototype,"seekBack"),Ht.prototype),babelHelpers.applyDecoratedDescriptor(Ht.prototype,"seekForward",[o.a],Object.getOwnPropertyDescriptor(Ht.prototype,"seekForward"),Ht.prototype),Ht);r.d(t,"a",(function(){return tr}));var $t=Object(C.a)(),er=Object(O.a)(),tr=(qt=c.observable.ref,Object(S.b)(Gt=Object(p.d)((Yt=Wt=function(e){function t(e){var r;babelHelpers.classCallCheck(this,t),r=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this,e)),babelHelpers.initializerDefineProperty(r,"videoPlayer",Kt,babelHelpers.assertThisInitialized(r)),e.videojsSetupData.language=er.locale.toLowerCase().replace("_","-");var o=R.a.Object.deepMergeWithArrayMerge({plugins:{udemypatches:{}},autoplay:!1,controlBar:{initChildren:!1},inactivityTimeout:ve.c,html5:{hlsjsConfig:{startLevel:-1}},children:["mediaLoader","controlBar"]},function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!e)return{};var o=e.assetId,s=e.courseId,a=e.duration,i=e.playerName,n=e.isPaid,l=oe.brand.organization&&oe.brand.organization.encrypted_id||0,c={plugins:{mux:{respectDoNotTrack:!1,data:{env_key:re,player_name:i,player_init_time:Date.now(),viewer_user_id:x.a.encrypted_id||0,video_id:o,video_cdn:te(t.Video[0].file),video_title:o,video_duration:a,video_series:s,video_stream_type:n?"paid":"free",experiment_name:l}}}},p=Math.random()<=.2;return"PROD"===oe.env&&p||r?c:{}}(r.props.muxMetadata,e.streamUrls),r.props.videojsSetupData);return r.store=new Zt(o,e.playerId,e.duration,e.streamUrls,e.trackingTag,e.assetId,e.onVideoProgress,e.videoProgressInterval,e.onTimeUpdate,e.isDefaultMuted),r.controlBarStore=new qe,r.captionsStore=e.captionsStore||new _e.a(e.captions,!0,babelHelpers.defineProperty({},er.locale.split("_")[0],1),e.isDefaultCaptionOn),r.captionsStore.attachPlayerStore(r.store),r.captionDisplayStore=new ke(r.controlBarStore,r.captionsStore,r.store),e.userActivityEnabled&&(r.userActivityStore=e.userActivityStore||new $e.a,r.userActivityStore.setControlBarStore(r.controlBarStore)),r.hotkeys=[{key:"space",fn:r.withHotkeyCallback(r.store.togglePlayPause,ve.d.PLAY_PAUSE)},{key:"enter",fn:r.withHotkeyCallback(r.store.togglePlayPause,ve.d.PLAY_PAUSE)},{key:"left",fn:r.withHotkeyCallback(r.store.seekBack,ve.d.SEEK_BACK)},{key:"right",fn:r.withHotkeyCallback(r.store.seekForward,ve.d.SEEK_FORWARD)},{key:"shift+left",fn:r.withHotkeyCallback(r.store.playbackRateStore.speedDown,ve.d.SPEED_DOWN)},{key:"shift+right",fn:r.withHotkeyCallback(r.store.playbackRateStore.speedUp,ve.d.SPEED_UP)},{key:"down",fn:r.withHotkeyCallback(r.volumeDown,ve.d.VOLUME_DOWN)},{key:"up",fn:r.withHotkeyCallback(r.volumeUp,ve.d.VOLUME_UP)},{key:"m",fn:r.withHotkeyCallback(r.store.volumeStore.toggleMuted,ve.d.TOGGLE_MUTE)}],r.props.fullscreenEnabled&&r.hotkeys.push({key:"f",fn:r.withHotkeyCallback(r.props.toggleFullscreen,ve.d.TOGGLE_FULLSCREEN)}),Array(10).fill().forEach((function(e,t){r.hotkeys.push({key:t.toString(),fn:r.withHotkeyCallback(r.jumpTo.bind(babelHelpers.assertThisInitialized(r),t))})})),r}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"componentDidMount",value:function(){this.initVideoPlayer(),this.captionsStore.loadCaptions()}},{key:"componentDidUpdate",value:function(e){e.isFullscreen!==this.props.isFullscreen&&this.videoPlayer&&this.videoPlayer.isFullscreen(this.props.isFullscreen)}},{key:"componentWillUnmount",value:function(){this.videoPlayer&&this.videoPlayer.dispose(),this.unregisterHotkeys()}},{key:"initVideoPlayer",value:function(){this.videoPlayer=this.store.initializeVideojs(this.videoElement),this.captionDisplayStore.attachPlayer(this.videoPlayer),this.captionsStore.enableNativeTracksForMobile(),this.initializePlugins(),this.setupPlayerEvents()}},{key:"initializePlugins",value:function(){if(this.videoPlayer.bandwidthWatermark(),this.props.thumbnailSprite){var e=new n.a(this.props.thumbnailSprite.img_url),t=m.a.parse(e.query(),{ignoreQueryPrefix:!0}),r=e.path().slice(0,e.path().lastIndexOf("/"));this.videoPlayer.sneakpeek({basePath:"".concat(e.protocol(),"://").concat(e.host()).concat(r,"/"),urlParams:t})}this.videoPlayer.isFullscreen(this.props.isFullscreen)}},{key:"setupPlayerEvents",value:function(){var e=this;this.videoPlayer.ready(this.videoPlayerReady),this.videoPlayer.one("play",(function(){var t;T.c.increment("udemy-video-player.viewed",{userModulo:x.a.id%100,brand:null==$t?void 0:null===(t=$t.brand)||void 0===t?void 0:t.identifier,browser:V.a.browser.name,browserVersion:V.a.browser.majorVersion,platform:V.a.os.name,platformVersion:V.a.os.majorVersion,tech:e.videoPlayer.techName_,resolution:e.store.resolution.label,trackingTag:e.props.trackingTag,cdn:ee(e.videoPlayer),userCountry:x.a.country})})),this.props.onVideoAvailable(this.props.playerId,this.videoPlayer),this.videoPlayer.on("timeupdate",this.store.handleTimeUpdate),this.props.onVideoProgress&&this.videoPlayer.on(["timeupdate","ended"],this.store.handleVideoProgress),this.videoPlayer.on("dispose",this.onVideoUnavailable),this.videoPlayer.on("error",(function(){e.props.onPlayerError(),e.store.handleVideoError()})),this.videoPlayer.on("ended",(function(){(e.props.onVideoEnd||e.defaultOnVideoEnd)()}))}},{key:"defaultOnVideoEnd",value:function(){this.props.exitFullscreen()}},{key:"videoPlayerReady",value:function(){var e=this;if(this.captionsStore.attachPlayer(this.videoPlayer),this.userActivityStore&&(this.userActivityStore.setupPlayerListeners(this.videoPlayer),this.store.controlBarControls.forEach((function(t){t.activeOnHover&&e.userActivityStore.addActiveOnHover(e.videoPlayer.controlBar[t.component].el())})),this.userActivityStore.addHideOnInactive(this.videoPlayer.controlBar.el())),this.registerHotkeys(),this.videoPlayer.on("dblclick",this.onVideoDoubleClick),this.props.onPlayerReady(this.videoPlayer),this.props.thumbnailSprite){var t={kind:"metadata",label:"sneakpeek",src:this.props.thumbnailSprite.vtt_url};this.videoPlayer.addRemoteTextTrack(t,!0)}}},{key:"onVideoUnavailable",value:function(){this.unregisterHotkeys(),this.props.onVideoUnavailable()}},{key:"registerHotkeys",value:function(){this.props.hotkeysEnabled&&P.a.registerMap(this.hotkeys)}},{key:"unregisterHotkeys",value:function(){this.props.hotkeysEnabled&&P.a.unregisterMap(this.hotkeys)}},{key:"withHotkeyCallback",value:function(e,t){var r=this;return function(o){var s;o&&o.preventDefault(),r.store.setHotkeyPressed();for(var a=arguments.length,i=new Array(a>1?a-1:0),n=1;n<a;n++)i[n-1]=arguments[n];t&&(s=r.props).onHotkey.apply(s,[t,o].concat(i)),e.apply(void 0,[o].concat(i))}}},{key:"contextMenu",value:function(e){e.preventDefault()}},{key:"volumeDown",value:function(){this.store.volumeStore.volumeDown()}},{key:"volumeUp",value:function(){this.store.volumeStore.volumeUp()}},{key:"jumpTo",value:function(e){this.videoPlayer.currentTime(this.store.duration*e*.1)}},{key:"onVideoDoubleClick",value:function(e){var t=e.relatedTarget||e.toElement||document.activeElement,r=this.videoPlayer.el();t!==r&&t!==r.querySelector(".vjs-tech")&&t!==r.querySelector(".iframeblocker")||this.props.toggleFullscreen()}},{key:"handlePlaceHolderPlay",value:function(){this.play(),setTimeout(this.store.focusPlayButton)}},{key:"play",value:function(){this.store.play()}},{key:"render",value:function(){var e=this,t=this.store,r=t.canPlay,o=t.isPaused,s=t.isUsingNativeControls,i=r&&o,n=a()(tt.a["video-wrapper"],babelHelpers.defineProperty({},Ze.a["user-inactive"],this.userActivityStore&&!this.userActivityStore.isUserActive));return f.a.createElement(p.b,{captionsStore:this.captionsStore,captionDisplayStore:this.captionDisplayStore,controlBarStore:this.controlBarStore,userActivityStore:this.userActivityStore,videoPlayerStore:this.store},f.a.createElement(g.a,{onMeasure:this.store.setPlayerHeight},f.a.createElement("div",{className:tt.a.container,ref:this.props.setFullscreenRef},f.a.createElement("div",{className:n},this.preloadLinks,!s&&f.a.createElement(w.a,{enter:{animation:{opacity:1},duration:100},leave:{animation:{opacity:0},duration:100},runOnMount:!0},f.a.createElement("div",{className:tt.a["center-button"]},!r&&f.a.createElement(j.a,{size:"large"}),i&&this.playButton)),f.a.createElement("video",Object.assign({ref:function(t){e.videoElement=t},className:a()(ve.g,tt.a["video-player"]),id:this.props.playerId,preload:this.props.preload,controls:!0,onContextMenu:this.contextMenu,controlsList:this.props.isDownloadEnabled?"":"nodownload"},this.props.extraVideoAttributes)),this.videoPlayer&&!this.store.isUsingNativeControls&&f.a.createElement(Xe,{player:this.videoPlayer},this.props.children),this.errorDisplay),this.videoPlayer&&f.a.createElement(Be,null))))}},{key:"playButton",get:function(){return f.a.createElement(D.default,{onClick:this.handlePlaceHolderPlay,"data-purpose":"video-play-button-initial"},f.a.createElement(E.a,{src:_.a,height:96,width:96,role:"button",tabIndex:"0",alt:gettext("Play video"),className:tt.a["play-button"]}))}},{key:"preloadLinks",get:function(){var e=[];return this.props.thumbnailSprite&&e.push(f.a.createElement("link",{rel:"preload",key:"sneakpeek",href:this.props.thumbnailSprite.img_url,as:"image"})),e}},{key:"errorDisplay",get:function(){return this.store.isErrorVisible?f.a.createElement(Qe.b,{player:this.videoPlayer,errorBody:this.props.errorBody,errorFooter:this.props.errorFooter,store:this.store}):null}}]),t}(b.Component),Wt.propTypes={playerId:d.a.string.isRequired,captions:d.a.array,captionsStore:d.a.instanceOf(_e.a),streamUrls:d.a.object,thumbnailSprite:d.a.shape({vtt_url:d.a.string.isRequired,img_url:d.a.string.isRequired}),toggleFullscreen:d.a.func.isRequired,isFullscreen:d.a.bool.isRequired,exitFullscreen:d.a.func.isRequired,setFullscreenRef:d.a.func.isRequired,videojsSetupData:d.a.object,assetId:d.a.number,trackingTag:d.a.string,onVideoEnd:d.a.func,onVideoProgress:d.a.func,videoProgressInterval:d.a.number,onTimeUpdate:d.a.func,onVideoAvailable:d.a.func,onVideoUnavailable:d.a.func,onPlayerError:d.a.func,hotkeysEnabled:d.a.bool,onHotkey:d.a.func,duration:d.a.number,preload:d.a.oneOf(["auto","metadata","none"]),onPlayerReady:d.a.func,extraVideoAttributes:d.a.object,userActivityEnabled:d.a.bool,userActivityStore:d.a.object,errorBody:Qe.b.propTypes.errorBody,errorFooter:Qe.b.propTypes.errorFooter,fullscreenEnabled:d.a.bool,controlsTrackingEnabled:d.a.bool,muxMetadata:d.a.object,isDownloadEnabled:d.a.bool,isDefaultMuted:d.a.bool,isDefaultCaptionOn:d.a.bool},Wt.defaultProps={captionsStore:null,streamUrls:void 0,assetId:void 0,onVideoEnd:void 0,duration:void 0,extraVideoAttributes:void 0,onVideoAvailable:l.a,onVideoUnavailable:l.a,onVideoProgress:void 0,videoProgressInterval:0,onTimeUpdate:l.a,onPlayerError:l.a,onPlayerReady:l.a,hotkeysEnabled:!1,onHotkey:l.a,preload:"metadata",trackingTag:"",videojsSetupData:{},captions:[],thumbnailSprite:void 0,userActivityEnabled:!0,userActivityStore:null,errorBody:Qe.b.defaultProps.errorBody,errorFooter:Qe.b.defaultProps.errorFooter,fullscreenEnabled:!0,controlsTrackingEnabled:!1,muxMetadata:void 0,isDownloadEnabled:!1,isDefaultMuted:!1,isDefaultCaptionOn:!1},Vt=Yt,Kt=babelHelpers.applyDecoratedDescriptor(Vt.prototype,"videoPlayer",[qt],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),babelHelpers.applyDecoratedDescriptor(Vt.prototype,"initVideoPlayer",[c.action],Object.getOwnPropertyDescriptor(Vt.prototype,"initVideoPlayer"),Vt.prototype),babelHelpers.applyDecoratedDescriptor(Vt.prototype,"defaultOnVideoEnd",[o.a],Object.getOwnPropertyDescriptor(Vt.prototype,"defaultOnVideoEnd"),Vt.prototype),babelHelpers.applyDecoratedDescriptor(Vt.prototype,"videoPlayerReady",[o.a],Object.getOwnPropertyDescriptor(Vt.prototype,"videoPlayerReady"),Vt.prototype),babelHelpers.applyDecoratedDescriptor(Vt.prototype,"onVideoUnavailable",[o.a],Object.getOwnPropertyDescriptor(Vt.prototype,"onVideoUnavailable"),Vt.prototype),babelHelpers.applyDecoratedDescriptor(Vt.prototype,"withHotkeyCallback",[o.a],Object.getOwnPropertyDescriptor(Vt.prototype,"withHotkeyCallback"),Vt.prototype),babelHelpers.applyDecoratedDescriptor(Vt.prototype,"contextMenu",[o.a],Object.getOwnPropertyDescriptor(Vt.prototype,"contextMenu"),Vt.prototype),babelHelpers.applyDecoratedDescriptor(Vt.prototype,"volumeDown",[o.a],Object.getOwnPropertyDescriptor(Vt.prototype,"volumeDown"),Vt.prototype),babelHelpers.applyDecoratedDescriptor(Vt.prototype,"volumeUp",[o.a],Object.getOwnPropertyDescriptor(Vt.prototype,"volumeUp"),Vt.prototype),babelHelpers.applyDecoratedDescriptor(Vt.prototype,"jumpTo",[o.a],Object.getOwnPropertyDescriptor(Vt.prototype,"jumpTo"),Vt.prototype),babelHelpers.applyDecoratedDescriptor(Vt.prototype,"onVideoDoubleClick",[o.a],Object.getOwnPropertyDescriptor(Vt.prototype,"onVideoDoubleClick"),Vt.prototype),babelHelpers.applyDecoratedDescriptor(Vt.prototype,"handlePlaceHolderPlay",[o.a],Object.getOwnPropertyDescriptor(Vt.prototype,"handlePlaceHolderPlay"),Vt.prototype),Gt=Vt))||Gt)||Gt)},"./src/udemy/js/video-player/videojs-setup/pre.js":function(e,t,r){"use strict";window.VIDEOJS_NO_DYNAMIC_STYLE=!0},"./src/udemy/js/video-player/volume/volume-control.less":function(e,t,r){e.exports={"slider-focus-wrapper":"volume-control--slider-focus-wrapper--1DEg2",slider:"volume-control--slider--3BRkN","slider-inner":"volume-control--slider-inner--2f-Tu",dragging:"volume-control--dragging--124IT","invisible-unless-focussed":"volume-control--invisible-unless-focussed--3LHfG"}},38:function(e,t){}}]);
//# sourceMappingURL=my-courses-v3-app.5fd6cbf74beb8727ce95.js.map